[{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\add_tools.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\check_content.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\check_schema.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\find_notion_dbs.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\aggregation\\dailyStats.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":106,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":109,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[601,604],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[601,604],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Daily Stats Aggregation Function\n *\n * Aggregates all user activity for a specific day into a single stats record.\n * This removes the need for clients to calculate stats on every render.\n */\nimport { UserStats } from \"../config/supabase\";\n/**\n * Aggregate daily stats for a user\n * Called by scheduled function or on-demand\n */\nexport declare function aggregateDailyStats(firebaseUid: string, date: string): Promise<UserStats>;\n/**\n * HTTP Callable function for on-demand aggregation\n */\nexport declare const aggregateDailyStatsCallable: import(\"firebase-functions/v2/https\").CallableFunction<any, Promise<{\n    success: boolean;\n    stats: UserStats;\n}>>;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\aggregation\\dailyStats.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\aggregation\\monthlyStats.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":108,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":111,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[518,521],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[518,521],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Monthly Stats Aggregation Function\n *\n * Rolls up weekly stats into monthly summaries.\n * Calculates long-term trends and achievements.\n */\nimport { MonthlyStats } from \"../config/supabase\";\n/**\n * Aggregate monthly stats for a user\n */\nexport declare function aggregateMonthlyStats(firebaseUid: string, monthStr: string): Promise<MonthlyStats>;\n/**\n * HTTP Callable function for monthly aggregation\n */\nexport declare const aggregateMonthlyStatsCallable: import(\"firebase-functions/v2/https\").CallableFunction<any, Promise<{\n    success: boolean;\n    stats: MonthlyStats;\n}>>;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\aggregation\\monthlyStats.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\aggregation\\weeklyStats.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":107,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":110,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[533,536],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[533,536],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Weekly Stats Aggregation Function\n *\n * Rolls up daily stats into weekly summaries.\n * Identifies best/worst days and calculates averages.\n */\nimport { WeeklyStats } from \"../config/supabase\";\n/**\n * Aggregate weekly stats for a user\n */\nexport declare function aggregateWeeklyStats(firebaseUid: string, weekStart: string, weekEnd: string): Promise<WeeklyStats>;\n/**\n * HTTP Callable function for weekly aggregation\n */\nexport declare const aggregateWeeklyStatsCallable: import(\"firebase-functions/v2/https\").CallableFunction<any, Promise<{\n    success: boolean;\n    stats: WeeklyStats;\n}>>;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\aggregation\\weeklyStats.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\ai\\dailySummary.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":107,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":110,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[542,545],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[542,545],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[592,595],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[592,595],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Daily Summary AI Function\n *\n * Generates personalized daily summaries using Genkit + Gemini.\n * Non-real-time: summaries are generated and stored for later display.\n */\nimport { AIInsight } from \"../config/supabase\";\n/**\n * Generate a daily summary for a user\n */\nexport declare function generateDailySummary(firebaseUid: string, date: string): Promise<AIInsight>;\n/**\n * HTTP Callable function for generating daily summary\n */\nexport declare const generateDailySummaryCallable: import(\"firebase-functions/v2/https\").CallableFunction<any, Promise<{\n    success: boolean;\n    insight: any;\n    cached: boolean;\n}>>;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\ai\\dailySummary.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\ai\\goalBuddySuggestions.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":110,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":113,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[532,535],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[532,535],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[582,585],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[582,585],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Goal Buddy AI Suggestions\n *\n * Analyzes goals and progress to provide smart suggestions.\n * Detects stalled goals and suggests breakdowns.\n */\nimport { AIInsight } from \"../config/supabase\";\n/**\n * Generate goal suggestions for a user\n */\nexport declare function generateGoalSuggestions(firebaseUid: string, goalIds?: string[]): Promise<AIInsight>;\n/**\n * HTTP Callable function for generating goal suggestions\n */\nexport declare const generateGoalSuggestionsCallable: import(\"firebase-functions/v2/https\").CallableFunction<any, Promise<{\n    success: boolean;\n    insight: any;\n    cached: boolean;\n}>>;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\ai\\goalBuddySuggestions.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\ai\\helloGenkit.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\ai\\learningHubGenerate.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\ai\\nanoBananaChat.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\ai\\testPush.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\ai\\weeklyReview.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":107,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":110,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[578,581],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[578,581],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[628,631],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[628,631],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Weekly Review AI Function\n *\n * Generates comprehensive weekly reviews with strengths, weaknesses, and suggestions.\n * Non-real-time: reviews are generated end-of-week and stored.\n */\nimport { AIInsight } from \"../config/supabase\";\n/**\n * Generate a weekly review for a user\n */\nexport declare function generateWeeklyReview(firebaseUid: string, weekStart: string, weekEnd: string): Promise<AIInsight>;\n/**\n * HTTP Callable function for generating weekly review\n */\nexport declare const generateWeeklyReviewCallable: import(\"firebase-functions/v2/https\").CallableFunction<any, Promise<{\n    success: boolean;\n    insight: any;\n    cached: boolean;\n}>>;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\ai\\weeklyReview.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\callable\\getAIInsights.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":92,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":95,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[380,383],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[380,383],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[431,434],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[431,434],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[528,531],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[528,531],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":96,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":99,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[747,750],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[747,750],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":93,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":96,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[971,974],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[971,974],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Callable Function: Get AI Insights\n *\n * HTTP callable function for the client to fetch AI-generated insights.\n * Insights are pre-generated and cached to reduce AI API costs.\n */\nimport { AIInsight } from \"../config/supabase\";\n/**\n * Get AI insights for the authenticated user\n */\nexport declare const getAIInsights: import(\"firebase-functions/v2/https\").CallableFunction<any, Promise<{\n    success: boolean;\n    insights: any[];\n    insight?: undefined;\n    cached?: undefined;\n} | {\n    success: boolean;\n    insight: any;\n    cached: boolean;\n    insights?: undefined;\n}>>;\n/**\n * Get latest insight of each type (for dashboard display)\n */\nexport declare const getLatestInsights: import(\"firebase-functions/v2/https\").CallableFunction<any, Promise<{\n    success: boolean;\n    insights: Record<string, AIInsight | null>;\n}>>;\n/**\n * Mark insight as read/dismissed\n */\nexport declare const dismissInsight: import(\"firebase-functions/v2/https\").CallableFunction<any, Promise<{\n    success: boolean;\n}>>;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\callable\\getAIInsights.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\callable\\getAggregatedStats.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":97,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":100,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[338,341],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[338,341],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[386,389],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[386,389],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":92,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":95,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[590,593],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[590,593],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[638,641],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[638,641],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":98,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":101,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[829,832],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[829,832],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[901,904],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[901,904],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[924,927],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[924,927],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Callable Function: Get Aggregated Stats\n *\n * HTTP callable function for the client to fetch pre-aggregated stats.\n * Reduces client-side computation and database queries.\n */\n/**\n * Get aggregated stats for the authenticated user\n */\nexport declare const getAggregatedStats: import(\"firebase-functions/v2/https\").CallableFunction<any, Promise<{\n    success: boolean;\n    stats: any;\n}>>;\n/**\n * Get today's real-time stats from Firestore\n * This is for live updates, not historical data\n */\nexport declare const getTodayStats: import(\"firebase-functions/v2/https\").CallableFunction<any, Promise<{\n    success: boolean;\n    stats: any;\n}>>;\n/**\n * Get comparative stats (this week vs last week, this month vs last month)\n */\nexport declare const getComparativeStats: import(\"firebase-functions/v2/https\").CallableFunction<any, Promise<{\n    success: boolean;\n    comparison: {\n        current: any;\n        previous: any;\n        changes: {\n            focusScore: number;\n            goalCompletionRate: number;\n            workouts: number;\n        } | null;\n    };\n}>>;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\callable\\getAggregatedStats.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\config\\genkit.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\config\\supabase.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\index.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\scheduled\\endOfDay.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\scheduled\\endOfDay.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\scheduled\\endOfWeek.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\scheduled\\endOfWeek.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\triggers\\onGoalUpdate.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\triggers\\onGoalUpdate.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\triggers\\onSessionCreate.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\triggers\\onSessionCreate.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\lib\\utils\\notifications.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\aggregation\\dailyStats.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\aggregation\\monthlyStats.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\aggregation\\weeklyStats.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\ai\\dailySummary.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\ai\\goalBuddySuggestions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\ai\\helloGenkit.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\ai\\learningHubGenerate.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\ai\\nanoBananaChat.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\ai\\testPush.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[949,952],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[949,952],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1071,1074],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1071,1074],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1177,1180],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1177,1180],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1284,1287],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1284,1287],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1376,1379],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1376,1379],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { onCall, HttpsError } from \"firebase-functions/v2/https\";\r\nimport { sendUserPushNotification, NOTIFICATION_TEMPLATES, NotificationPayload } from \"../utils/notifications\";\r\n\r\nexport const testPushNotification = onCall(async (request) => {\r\n    const { auth } = request;\r\n    if (!auth) {\r\n        throw new HttpsError(\"unauthenticated\", \"User must be authenticated\");\r\n    }\r\n\r\n    const { templateId, customPayload } = request.data as {\r\n        templateId?: keyof typeof NOTIFICATION_TEMPLATES;\r\n        customPayload?: NotificationPayload;\r\n    };\r\n\r\n    const userId = auth.uid;\r\n    let payload: NotificationPayload;\r\n\r\n    if (templateId && NOTIFICATION_TEMPLATES[templateId]) {\r\n        // Handle templates that might need arguments\r\n        const template = NOTIFICATION_TEMPLATES[templateId];\r\n        if (typeof template === 'function') {\r\n            if (templateId === 'INCOMPLETE_PLAN') {\r\n                payload = (template as any)(\"Sample Task\");\r\n            } else if (templateId === 'STREAK_MILESTONE') {\r\n                payload = (template as any)(7);\r\n            } else if (templateId === 'STALLED_GOAL') {\r\n                payload = (template as any)(3);\r\n            } else if (templateId === 'MORNING_BOOST') {\r\n                payload = (template as any)(\"Productivity Session\");\r\n            } else {\r\n                payload = (template as any)();\r\n            }\r\n        } else {\r\n            payload = template as unknown as NotificationPayload;\r\n        }\r\n    } else if (customPayload) {\r\n        payload = customPayload;\r\n    } else {\r\n        payload = {\r\n            title: \"Test Notification ðŸŒ\",\r\n            body: \"This is a test notification from your backend. High five! âœ‹\",\r\n            data: { type: \"test\" }\r\n        };\r\n    }\r\n\r\n    try {\r\n        await sendUserPushNotification(userId, payload);\r\n        return { success: true, message: \"Notification sent successfully\" };\r\n    } catch (error) {\r\n        console.error(\"Error in testPushNotification:\", error);\r\n        throw new HttpsError(\"internal\", \"Failed to send notification\");\r\n    }\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\ai\\weeklyReview.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\callable\\getAIInsights.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\callable\\getAggregatedStats.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\config\\genkit.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[472,475],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[472,475],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { genkit } from \"genkit\";\r\nimport { googleAI, gemini15Flash } from \"@genkit-ai/googleai\";\r\nimport { defineSecret } from \"firebase-functions/params\";\r\nimport { enableFirebaseTelemetry } from \"@genkit-ai/firebase\";\r\n\r\n// Define the Gemini API key as a secret\r\nexport const GEMINI_API_KEY = defineSecret(\"GEMINI_API_KEY\");\r\n\r\n// Configure Genkit with Google AI plugin\r\n// Note: Firebase plugin seems to be split or handled via enableFirebaseTelemetry\r\nlet aiInstance: any;\r\n\r\nexport const getAi = () => {\r\n    if (!aiInstance) {\r\n        enableFirebaseTelemetry();\r\n        aiInstance = genkit({\r\n            plugins: [\r\n                googleAI({ apiKey: GEMINI_API_KEY.value() }),\r\n            ],\r\n            model: gemini15Flash, // Set default model\r\n        });\r\n    }\r\n    return aiInstance;\r\n};\r\n\r\n/**\r\n * Model configuration\r\n */\r\nexport const MODELS = {\r\n    // Use Gemini 1.5 Flash for fast, cost-effective responses\r\n    flash: \"googleai/gemini-1.5-flash\",\r\n    // Use Gemini 1.5 Pro for complex analysis\r\n    pro: \"googleai/gemini-1.5-pro\",\r\n} as const;\r\n\r\n/**\r\n * Token limits for cost control\r\n */\r\nexport const TOKEN_LIMITS = {\r\n    dailySummary: 500,\r\n    weeklyReview: 1000,\r\n    goalSuggestion: 300,\r\n};\r\n\r\n/**\r\n * Prompt templates - centralized for consistency\r\n */\r\nexport const PROMPTS = {\r\n    dailySummary: `You are a supportive productivity coach. Based on the following daily stats, \r\nprovide a brief, encouraging summary of the user's day. Be specific but concise.\r\nFocus on achievements first, then gentle suggestions for improvement.\r\n\r\nStats for {{date}}:\r\n- Focus Score: {{focusScore}}/100\r\n- Sleep: {{sleepHours}} hours\r\n- Steps: {{steps}}\r\n- Workouts: {{workoutsCompleted}}\r\n- Pages Read: {{pagesRead}}\r\n- Meditation: {{meditationMinutes}} minutes\r\n- Goals Completed: {{goalsCompleted}}/{{goalsTotal}}\r\n\r\nProvide a 2-3 sentence summary. Be warm and human.`,\r\n\r\n    weeklyReview: `You are a thoughtful productivity analyst. Analyze this week's performance \r\nand provide actionable insights.\r\n\r\nWeek: {{weekStart}} to {{weekEnd}}\r\n\r\nDaily Breakdown:\r\n{{dailyData}}\r\n\r\nProvide:\r\n1. Top 2 strengths this week\r\n2. Top 2 areas for improvement\r\n3. One specific, actionable suggestion for next week\r\n\r\nKeep the total response under 200 words. Be encouraging but honest.`,\r\n\r\n    goalSuggestion: `You are a goal-setting expert. Based on the user's current goals and progress,\r\nsuggest ways to optimize their approach.\r\n\r\nCurrent Goals:\r\n{{goals}}\r\n\r\nRecent Progress:\r\n{{progress}}\r\n\r\nProvide:\r\n1. Any goals that seem stalled (if applicable)\r\n2. Suggested breakdown of complex goals\r\n3. One motivational insight\r\n\r\nKeep response under 100 words. Be practical and supportive.`,\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\config\\supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\scheduled\\endOfDay.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\scheduled\\endOfWeek.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\triggers\\onGoalUpdate.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\triggers\\onSessionCreate.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\functions\\src\\utils\\notifications.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\postcss.config.cjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\public\\firebase-messaging-sw.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\scripts\\toggle-dns.cjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\api\\authApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\api\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\api\\supabaseApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AIAgents.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AICanvas.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":83,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3774,3777],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3774,3777],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useCallback, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    ArrowLeft, Plus, Zap, Brain, Sparkles, Target, TrendingUp, Palette, Link, Eraser,\r\n    MousePointer2, Hand, Grid3X3, Edit3, Trash2, Bot, Cpu, Workflow, ZoomIn, ZoomOut,\r\n    Loader2\r\n} from 'lucide-react';\r\nimport { generateOpenAIContent } from '../services/openaiService';\r\n\r\n// Types\r\ninterface CanvasBlock {\r\n    id: string;\r\n    x: number;\r\n    y: number;\r\n    title: string;\r\n    description: string;\r\n    note: string;\r\n    icon: string;\r\n    category: 'revenue' | 'efficiency' | 'creative' | 'automation' | 'datasource';\r\n    color: string;\r\n    dataSourceId?: string;\r\n}\r\n\r\ninterface Connection {\r\n    id: string;\r\n    from: string;\r\n    to: string;\r\n    style: 'straight' | 'curved' | 'step';\r\n}\r\n\r\n// Icon mapping\r\nconst iconMap: Record<string, React.ReactNode> = {\r\n    'zap': <Zap className=\"w-5 h-5\" />,\r\n    'brain': <Brain className=\"w-5 h-5\" />,\r\n    'sparkles': <Sparkles className=\"w-5 h-5\" />,\r\n    'target': <Target className=\"w-5 h-5\" />,\r\n    'trending': <TrendingUp className=\"w-5 h-5\" />,\r\n    'palette': <Palette className=\"w-5 h-5\" />,\r\n    'bot': <Bot className=\"w-5 h-5\" />,\r\n    'cpu': <Cpu className=\"w-5 h-5\" />,\r\n    'workflow': <Workflow className=\"w-5 h-5\" />,\r\n};\r\n\r\n// Category colors\r\nconst categoryColors: Record<string, { bg: string; border: string; text: string; glow: string }> = {\r\n    revenue: { bg: 'bg-emerald-50', border: 'border-emerald-300', text: 'text-emerald-600', glow: 'shadow-emerald-200' },\r\n    efficiency: { bg: 'bg-blue-50', border: 'border-blue-300', text: 'text-blue-600', glow: 'shadow-blue-200' },\r\n    creative: { bg: 'bg-purple-50', border: 'border-purple-300', text: 'text-purple-600', glow: 'shadow-purple-200' },\r\n    automation: { bg: 'bg-amber-50', border: 'border-amber-300', text: 'text-amber-600', glow: 'shadow-amber-200' },\r\n    datasource: { bg: 'bg-indigo-50', border: 'border-indigo-300', text: 'text-indigo-600', glow: 'shadow-indigo-200' },\r\n};\r\n\r\ninterface AICanvasProps {\r\n    onExit?: () => void;\r\n}\r\n\r\nconst AICanvas: React.FC<AICanvasProps> = ({ onExit }) => {\r\n    const canvasRef = useRef<HTMLDivElement>(null);\r\n    const [activeTool, setActiveTool] = useState<'pointer' | 'hand' | 'connect' | 'color' | 'edit' | 'delete'>('pointer');\r\n    const [showGrid, setShowGrid] = useState(true);\r\n\r\n    // State\r\n    const [mode, setMode] = useState<'design' | 'view'>('design');\r\n    const [blocks, setBlocks] = useState<CanvasBlock[]>([]);\r\n    const [connections, setConnections] = useState<Connection[]>([]);\r\n    const [selectedBlock, setSelectedBlock] = useState<string | null>(null);\r\n    const [connectingFrom, setConnectingFrom] = useState<string | null>(null);\r\n    const [zoom, setZoom] = useState(0.85);\r\n    const [pan, setPan] = useState({ x: 0, y: 0 });\r\n    const [isPanning, setIsPanning] = useState(false);\r\n    const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\r\n    const connectionStyle = 'curved';\r\n    const [showAddModal, setShowAddModal] = useState(false);\r\n    const [editingBlock, setEditingBlock] = useState<CanvasBlock | null>(null);\r\n\r\n    // New block form state\r\n    const [newBlockTitle, setNewBlockTitle] = useState('');\r\n    const [newBlockDescription, setNewBlockDescription] = useState('');\r\n    const [newBlockCategory, setNewBlockCategory] = useState<'revenue' | 'efficiency' | 'creative' | 'automation' | 'datasource'>('efficiency');\r\n    const [isBrainstorming, setIsBrainstorming] = useState(false);\r\n    const [brainstormPrompt, setBrainstormPrompt] = useState('');\r\n    const [showBrainstormModal, setShowBrainstormModal] = useState(false);\r\n    const [customCategories, setCustomCategories] = useState<any[]>([]);\r\n    const [selectedDataSource, setSelectedDataSource] = useState<string>('');\r\n\r\n    // Load custom categories\r\n    useEffect(() => {\r\n        const data = localStorage.getItem('customCategories');\r\n        if (data) {\r\n            setCustomCategories(JSON.parse(data));\r\n        }\r\n    }, [showAddModal]);\r\n\r\n    // Load saved canvas data\r\n    useEffect(() => {\r\n        const savedData = localStorage.getItem('ai-canvas-data');\r\n        if (savedData) {\r\n            const parsed = JSON.parse(savedData);\r\n            setBlocks(parsed.blocks || []);\r\n            setConnections(parsed.connections || []);\r\n        }\r\n    }, []);\r\n\r\n    // Save canvas data\r\n    const saveCanvas = useCallback(() => {\r\n        localStorage.setItem('ai-canvas-data', JSON.stringify({ blocks, connections }));\r\n    }, [blocks, connections]);\r\n\r\n    // Auto-save on changes\r\n    useEffect(() => {\r\n        saveCanvas();\r\n    }, [blocks, connections, saveCanvas]);\r\n\r\n    // Add new block\r\n    const addBlock = () => {\r\n        if (!newBlockTitle.trim()) return;\r\n\r\n        const iconByCategory = {\r\n            revenue: 'trending',\r\n            efficiency: 'zap',\r\n            creative: 'sparkles',\r\n            automation: 'bot',\r\n            datasource: 'workflow'\r\n        };\r\n\r\n        const finalTitle = newBlockCategory === 'datasource' && selectedDataSource\r\n            ? customCategories.find(c => c.id === selectedDataSource)?.title || newBlockTitle\r\n            : newBlockTitle;\r\n\r\n        const newBlock: CanvasBlock = {\r\n            id: 'block-' + Date.now(),\r\n            x: -pan.x + 150,\r\n            y: -pan.y + 150,\r\n            title: finalTitle,\r\n            description: newBlockDescription || (newBlockCategory === 'datasource' ? 'Data Pipeline' : ''),\r\n            note: '',\r\n            icon: iconByCategory[newBlockCategory],\r\n            category: newBlockCategory,\r\n            color: categoryColors[newBlockCategory].text,\r\n            dataSourceId: newBlockCategory === 'datasource' ? selectedDataSource : undefined\r\n        };\r\n\r\n        setBlocks([...blocks, newBlock]);\r\n        setNewBlockTitle('');\r\n        setNewBlockDescription('');\r\n        setShowAddModal(false);\r\n    };\r\n\r\n    // Update block position\r\n    const updateBlockPosition = (id: string, x: number, y: number) => {\r\n        setBlocks(blocks.map(b => b.id === id ? { ...b, x, y } : b));\r\n    };\r\n\r\n    // Update block content\r\n    const updateBlock = (id: string, updates: Partial<CanvasBlock>) => {\r\n        setBlocks(blocks.map(b => b.id === id ? { ...b, ...updates } : b));\r\n    };\r\n\r\n    // Delete block\r\n    const deleteBlock = (id: string) => {\r\n        setBlocks(blocks.filter(b => b.id !== id));\r\n        setConnections(connections.filter(c => c.from !== id && c.to !== id));\r\n        setSelectedBlock(null);\r\n    };\r\n\r\n    // AI Brainstorming\r\n    const handleBrainstorm = async () => {\r\n        if (!brainstormPrompt.trim()) return;\r\n\r\n        setIsBrainstorming(true);\r\n        try {\r\n            const context = blocks.map(b => `${b.title}: ${b.description}`).join('\\n');\r\n            const prompt = `Identify 3 logical next steps or missing components for this workflow:\r\n            \r\n            CURRENT WORKFLOW:\r\n            ${context}\r\n            \r\n            USER REQUEST: ${brainstormPrompt}\r\n            \r\n            Return ONLY a JSON array of 3 objects with: \"title\", \"description\", and \"category\" (one of: revenue, efficiency, creative, automation).\r\n            Example: [{\"title\": \"Step 1\", \"description\": \"...\", \"category\": \"efficiency\"}]`;\r\n\r\n            const response = await generateOpenAIContent(prompt);\r\n            const cleanedResponse = response?.replace(/```json|```/g, '').trim();\r\n            interface BrainstormSuggestion {\r\n                title: string;\r\n                description: string;\r\n                category: 'revenue' | 'efficiency' | 'creative' | 'automation';\r\n            }\r\n\r\n            const suggestions: BrainstormSuggestion[] = JSON.parse(cleanedResponse || '[]');\r\n\r\n            const newBlocks: CanvasBlock[] = suggestions.map((s, i: number) => ({\r\n                id: 'ai-block-' + Date.now() + i,\r\n                x: -pan.x + 300 + (Math.random() * 200 - 100),\r\n                y: -pan.y + 300 + (Math.random() * 200 - 100),\r\n                title: s.title,\r\n                description: s.description,\r\n                note: 'Generated by AI',\r\n                icon: s.category === 'revenue' ? 'trending' : s.category === 'automation' ? 'bot' : s.category === 'creative' ? 'sparkles' : 'zap',\r\n                category: s.category,\r\n                color: categoryColors[s.category]?.text || categoryColors.efficiency.text,\r\n            }));\r\n\r\n            setBlocks([...blocks, ...newBlocks]);\r\n            setShowBrainstormModal(false);\r\n            setBrainstormPrompt('');\r\n        } catch (error) {\r\n            console.error(\"Brainstorm Error:\", error);\r\n            alert(\"AI Brainstorming failed. Check console for details.\");\r\n        } finally {\r\n            setIsBrainstorming(false);\r\n        }\r\n    };\r\n\r\n    // Start connection\r\n    const startConnection = (blockId: string) => {\r\n        if (mode !== 'design') return;\r\n        setConnectingFrom(blockId);\r\n    };\r\n\r\n    // Complete connection\r\n    const completeConnection = (toBlockId: string) => {\r\n        if (!connectingFrom || connectingFrom === toBlockId) {\r\n            setConnectingFrom(null);\r\n            return;\r\n        }\r\n\r\n        const exists = connections.some(c =>\r\n            (c.from === connectingFrom && c.to === toBlockId) ||\r\n            (c.from === toBlockId && c.to === connectingFrom)\r\n        );\r\n\r\n        if (!exists) {\r\n            const newConnection: Connection = {\r\n                id: 'conn-' + Date.now(),\r\n                from: connectingFrom,\r\n                to: toBlockId,\r\n                style: connectionStyle,\r\n            };\r\n            setConnections([...connections, newConnection]);\r\n        }\r\n\r\n        setConnectingFrom(null);\r\n    };\r\n\r\n    // Delete connection\r\n    const deleteConnection = (id: string) => {\r\n        setConnections(connections.filter(c => c.id !== id));\r\n    };\r\n\r\n    // Get SVG path for connection\r\n    const getConnectionPath = (from: CanvasBlock, to: CanvasBlock, style: string) => {\r\n        const startX = from.x + 140;\r\n        const startY = from.y + 50;\r\n        const endX = to.x + 140;\r\n        const endY = to.y + 50;\r\n\r\n        const deltaX = endX - startX;\r\n\r\n        switch (style) {\r\n            case 'straight':\r\n                return 'M ' + startX + ' ' + startY + ' L ' + endX + ' ' + endY;\r\n            case 'curved': {\r\n                const midX = (startX + endX) / 2;\r\n                return 'M ' + startX + ' ' + startY + ' C ' + midX + ' ' + startY + ', ' + midX + ' ' + endY + ', ' + endX + ' ' + endY;\r\n            }\r\n            case 'step': {\r\n                const stepX = startX + deltaX / 2;\r\n                return 'M ' + startX + ' ' + startY + ' L ' + stepX + ' ' + startY + ' L ' + stepX + ' ' + endY + ' L ' + endX + ' ' + endY;\r\n            }\r\n            default:\r\n                return 'M ' + startX + ' ' + startY + ' L ' + endX + ' ' + endY;\r\n        }\r\n    };\r\n\r\n    // Tool based interactions\r\n    const handleBlockClick = (blockId: string, e: React.MouseEvent) => {\r\n        e.stopPropagation();\r\n        const block = blocks.find(b => b.id === blockId);\r\n        if (!block) return;\r\n\r\n        if (activeTool === 'delete' || activeTool === 'pointer' && mode === 'view') { // Allow delete in tool mode\r\n            if (activeTool === 'delete') deleteBlock(blockId);\r\n        } else if (activeTool === 'edit') {\r\n            setEditingBlock(block);\r\n        } else if (activeTool === 'color') {\r\n            const cats: CanvasBlock['category'][] = ['revenue', 'efficiency', 'creative', 'automation'];\r\n            const nextCat = cats[(cats.indexOf(block.category) + 1) % 4];\r\n            const iconMapHelper: Record<string, string> = { revenue: 'trending', efficiency: 'zap', creative: 'sparkles', automation: 'bot' };\r\n            updateBlock(blockId, { category: nextCat, icon: iconMapHelper[nextCat], color: categoryColors[nextCat].text });\r\n        } else if (activeTool === 'connect') {\r\n            if (connectingFrom) {\r\n                completeConnection(blockId);\r\n            } else {\r\n                setConnectingFrom(blockId);\r\n            }\r\n        } else {\r\n            setSelectedBlock(blockId);\r\n        }\r\n    };\r\n\r\n    // Handle canvas pan\r\n    const handleMouseDown = (e: React.MouseEvent) => {\r\n        if (activeTool === 'hand' || e.target === canvasRef.current || (e.target as HTMLElement).classList.contains('canvas-bg')) {\r\n            setIsPanning(true);\r\n            setDragStart({ x: e.clientX - pan.x, y: e.clientY - pan.y });\r\n            setSelectedBlock(null);\r\n            if (activeTool === 'hand') return; // Hand tool doesn't deselect\r\n        }\r\n    };\r\n\r\n    const handleMouseMove = (e: React.MouseEvent) => {\r\n        if (isPanning) {\r\n            setPan({ x: e.clientX - dragStart.x, y: e.clientY - dragStart.y });\r\n        }\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n        setIsPanning(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative w-full h-full bg-[#FAFAFA] overflow-hidden\">\r\n            {/* Exit / Back Button */}\r\n            {onExit && (\r\n                <button\r\n                    onClick={onExit}\r\n                    className=\"absolute top-6 left-6 z-50 w-10 h-10 bg-white rounded-full shadow-lg border border-gray-100 flex items-center justify-center text-gray-400 hover:text-gray-900 transition-colors\"\r\n                >\r\n                    <ArrowLeft className=\"w-5 h-5\" />\r\n                </button>\r\n            )}\r\n\r\n            {/* Canvas Area */}\r\n            <div\r\n                ref={canvasRef}\r\n                className={`absolute inset-0 touch-none ${activeTool === 'hand' ? (isPanning ? 'cursor-grabbing' : 'cursor-grab') : 'cursor-default'}`}\r\n                style={{ height: '100%', width: '100%' }}\r\n                onMouseDown={handleMouseDown}\r\n                onMouseMove={handleMouseMove}\r\n                onMouseUp={handleMouseUp}\r\n                onMouseLeave={handleMouseUp}\r\n            >\r\n                {/* Grid Background */}\r\n                {showGrid && (\r\n                    <div\r\n                        className=\"canvas-bg absolute inset-0 transition-opacity duration-300\"\r\n                        style={{\r\n                            backgroundImage: 'radial-gradient(circle, rgba(148, 163, 184, 0.3) 1px, transparent 1px)',\r\n                            backgroundSize: (20 * zoom) + 'px ' + (20 * zoom) + 'px',\r\n                            backgroundPosition: pan.x + 'px ' + pan.y + 'px',\r\n                        }}\r\n                    />\r\n                )}\r\n\r\n                {/* Canvas Content */}\r\n                <div\r\n                    className=\"absolute inset-0\"\r\n                    style={{\r\n                        transform: 'translate(' + pan.x + 'px, ' + pan.y + 'px) scale(' + zoom + ')',\r\n                        transformOrigin: '0 0',\r\n                    }}\r\n                >\r\n                    {/* SVG Connections Layer */}\r\n                    <svg className=\"absolute inset-0 w-full h-full pointer-events-none\" style={{ overflow: 'visible' }}>\r\n                        <defs>\r\n                            <linearGradient id=\"connectionGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                                <stop offset=\"0%\" stopColor=\"#8B5CF6\" />\r\n                                <stop offset=\"100%\" stopColor=\"#06B6D4\" />\r\n                            </linearGradient>\r\n                            <marker id=\"arrowhead\" markerWidth=\"10\" markerHeight=\"7\" refX=\"10\" refY=\"3.5\" orient=\"auto\" markerUnits=\"strokeWidth\">\r\n                                <polygon points=\"0 0, 10 3.5, 0 7\" fill=\"#8B5CF6\" />\r\n                            </marker>\r\n                        </defs>\r\n\r\n                        {connections.map((conn) => {\r\n                            const fromBlock = blocks.find(b => b.id === conn.from);\r\n                            const toBlock = blocks.find(b => b.id === conn.to);\r\n                            if (!fromBlock || !toBlock) return null;\r\n\r\n                            const path = getConnectionPath(fromBlock, toBlock, conn.style);\r\n\r\n                            return (\r\n                                <g key={conn.id} className=\"connection-group\">\r\n                                    <path d={path} fill=\"none\" stroke=\"url(#connectionGradient)\" strokeWidth=\"8\" strokeOpacity=\"0.2\" strokeLinecap=\"round\" />\r\n                                    <path d={path} fill=\"none\" stroke=\"url(#connectionGradient)\" strokeWidth=\"3\" strokeLinecap=\"round\" markerEnd=\"url(#arrowhead)\" className=\"transition-all\" />\r\n                                    {mode === 'design' && (\r\n                                        <g className=\"cursor-pointer pointer-events-auto opacity-0 hover:opacity-100 transition-opacity\" onClick={() => deleteConnection(conn.id)}>\r\n                                            <circle cx={(fromBlock.x + toBlock.x) / 2 + 140} cy={(fromBlock.y + toBlock.y) / 2 + 50} r=\"12\" fill=\"white\" stroke=\"#EF4444\" strokeWidth=\"2\" />\r\n                                            <text x={(fromBlock.x + toBlock.x) / 2 + 140} y={(fromBlock.y + toBlock.y) / 2 + 54} textAnchor=\"middle\" fontSize=\"14\" fill=\"#EF4444\">Ã—</text>\r\n                                        </g>\r\n                                    )}\r\n                                </g>\r\n                            );\r\n                        })}\r\n                    </svg>\r\n\r\n                    {/* Render Blocks */}\r\n                    {blocks.map((block) => (\r\n                        <DraggableBlock\r\n                            key={block.id}\r\n                            block={block}\r\n                            isSelected={selectedBlock === block.id}\r\n                            isConnecting={connectingFrom === block.id}\r\n                            mode={mode}\r\n                            activeTool={activeTool}\r\n                            categoryColors={categoryColors[block.category]}\r\n                            iconElement={iconMap[block.icon] || <Zap className=\"w-5 h-5\" />}\r\n                            onSelect={(e) => handleBlockClick(block.id, e)}\r\n                            onDragEnd={(x, y) => updateBlockPosition(block.id, x, y)}\r\n                            onStartConnection={() => startConnection(block.id)}\r\n\r\n                            onEdit={() => setEditingBlock(block)}\r\n                            onDelete={() => deleteBlock(block.id)}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Central Add Button */}\r\n            {/* Dynamic Add Button (Center initially, then Bottom-Left) */}\r\n            <button\r\n                onClick={() => { setShowAddModal(true); }}\r\n                className={`absolute z-50 rounded-full bg-violet-600 shadow-2xl shadow-violet-400/50 flex items-center justify-center text-white hover:scale-110 hover:bg-violet-700 transition-all duration-700 ease-in-out active:scale-95 group ${blocks.length === 0 ? 'top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-20 h-20' : 'bottom-36 left-8 w-14 h-14'}`}\r\n            >\r\n                <Plus className={`transition-transform duration-300 ${blocks.length === 0 ? 'w-10 h-10 group-hover:rotate-90' : 'w-6 h-6'}`} />\r\n            </button>\r\n\r\n            {/* Premium Responsive Toolbar (Mini Canva Style) */}\r\n            <div className=\"absolute bottom-24 left-1/2 -translate-x-1/2 md:translate-x-0 md:left-6 md:top-1/2 md:-translate-y-1/2 flex md:flex-col items-center gap-3 p-2 bg-white/90 backdrop-blur-xl border border-white/40 shadow-2xl shadow-indigo-500/10 rounded-full md:rounded-2xl z-40 transition-all max-w-[90vw] overflow-x-auto no-scrollbar\">\r\n\r\n                {/* Tools */}\r\n                <div className=\"flex md:flex-col gap-2 p-1 bg-slate-100/50 rounded-full md:rounded-xl\">\r\n                    <button\r\n                        onClick={() => { setActiveTool('pointer'); setMode('design'); }}\r\n                        className={`p-2.5 rounded-full md:rounded-lg transition-all group relative ${activeTool === 'pointer' && mode === 'design' ? 'bg-white shadow-lg text-violet-600 scale-110' : 'text-slate-400 hover:text-slate-600'}`}\r\n                        title=\"Pointer Tool\"\r\n                    >\r\n                        <MousePointer2 className=\"w-4 h-4\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTool('hand')}\r\n                        className={`p-2.5 rounded-full md:rounded-lg transition-all ${activeTool === 'hand' ? 'bg-white shadow-lg text-violet-600 scale-110' : 'text-slate-400 hover:text-slate-600'}`}\r\n                        title=\"Hand Tool (Pan)\"\r\n                    >\r\n                        <Hand className=\"w-4 h-4\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTool('connect')}\r\n                        className={`p-2.5 rounded-full md:rounded-lg transition-all ${activeTool === 'connect' ? 'bg-white shadow-lg text-violet-600 scale-110' : 'text-slate-400 hover:text-slate-600'}`}\r\n                        title=\"Connect Tool\"\r\n                    >\r\n                        <Link className=\"w-4 h-4\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTool('color')}\r\n                        className={`p-2.5 rounded-full md:rounded-lg transition-all ${activeTool === 'color' ? 'bg-white shadow-lg text-violet-600 scale-110' : 'text-slate-400 hover:text-slate-600'}`}\r\n                        title=\"Color Tool\"\r\n                    >\r\n                        <Palette className=\"w-4 h-4\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTool('edit')}\r\n                        className={`p-2.5 rounded-full md:rounded-lg transition-all ${activeTool === 'edit' ? 'bg-white shadow-lg text-violet-600 scale-110' : 'text-slate-400 hover:text-slate-600'}`}\r\n                        title=\"Edit Tool\"\r\n                    >\r\n                        <Edit3 className=\"w-4 h-4\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTool('delete')}\r\n                        className={`p-2.5 rounded-full md:rounded-lg transition-all ${activeTool === 'delete' ? 'bg-white shadow-lg text-red-600 scale-110' : 'text-slate-400 hover:text-slate-600'}`}\r\n                        title=\"Delete Tool\"\r\n                    >\r\n                        <Eraser className=\"w-4 h-4\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setShowGrid(!showGrid)}\r\n                        className={`p-2.5 rounded-full md:rounded-lg transition-all ${showGrid ? 'bg-white shadow-lg text-violet-600' : 'text-slate-400 hover:text-slate-600'}`}\r\n                        title=\"Toggle Grid\"\r\n                    >\r\n                        <Grid3X3 className=\"w-4 h-4\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setShowBrainstormModal(true)}\r\n                        className={`p-2.5 rounded-full md:rounded-lg transition-all text-indigo-500 hover:bg-indigo-50`}\r\n                        title=\"AI Brainstorm\"\r\n                    >\r\n                        <Brain className=\"w-4 h-4\" />\r\n                    </button>\r\n                </div>\r\n\r\n\r\n\r\n                <div className=\"w-px h-6 md:w-6 md:h-px bg-slate-200/50 mx-1 md:mx-0\"></div>\r\n\r\n                {/* View Controls */}\r\n                <div className=\"flex md:flex-col items-center gap-1\">\r\n                    <button onClick={() => setZoom(z => Math.min(2, z + 0.1))} className=\"p-2 hover:bg-slate-100 rounded-full text-slate-600\"><ZoomIn className=\"w-4 h-4\" /></button>\r\n                    <button onClick={() => setZoom(z => Math.max(0.5, z - 0.1))} className=\"p-2 hover:bg-slate-100 rounded-full text-slate-600\"><ZoomOut className=\"w-4 h-4\" /></button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Add Block Modal */}\r\n            <AnimatePresence>\r\n                {showAddModal && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"absolute inset-0 z-50 bg-white/80 backdrop-blur-md flex items-center justify-center p-4\"\r\n                        onClick={() => setShowAddModal(false)}\r\n                    >\r\n                        <motion.div\r\n                            initial={{ scale: 0.9, opacity: 0 }}\r\n                            animate={{ scale: 1, opacity: 1 }}\r\n                            exit={{ scale: 0.9, opacity: 0 }}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                            className=\"bg-white rounded-[2rem] shadow-2xl p-6 w-full max-w-sm border border-slate-100\"\r\n                        >\r\n                            <h3 className=\"text-xl font-black italic text-slate-900 mb-6\">New Node</h3>\r\n                            <div className=\"space-y-4\">\r\n                                <div>\r\n                                    <label className=\"text-[10px] font-black uppercase text-slate-400 tracking-widest pl-2\">Title</label>\r\n                                    <input value={newBlockTitle} onChange={e => setNewBlockTitle(e.target.value)} className=\"w-full h-12 bg-slate-50 rounded-xl px-4 text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-violet-500/20\" placeholder=\"Node Name\" />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"text-[10px] font-black uppercase text-slate-400 tracking-widest pl-2\">Description</label>\r\n                                    <textarea value={newBlockDescription} onChange={e => setNewBlockDescription(e.target.value)} className=\"w-full h-20 bg-slate-50 rounded-xl px-4 py-3 text-sm font-medium text-slate-700 outline-none focus:ring-2 focus:ring-violet-500/20 resize-none\" placeholder=\"Why this node?\" />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"text-[10px] font-black uppercase text-slate-400 tracking-widest pl-2\">Category</label>\r\n                                    <div className=\"flex flex-wrap gap-2 mt-2\">\r\n                                        {(['revenue', 'efficiency', 'creative', 'automation', 'datasource'] as const).map((cat) => (\r\n                                            <button\r\n                                                key={cat}\r\n                                                onClick={() => setNewBlockCategory(cat)}\r\n                                                className={`px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-widest border transition-all ${newBlockCategory === cat ? 'bg-slate-800 text-white border-slate-800' : 'bg-white border-slate-200 text-slate-400'}`}\r\n                                            >\r\n                                                {cat}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {newBlockCategory === 'datasource' && (\r\n                                    <div className=\"animate-in fade-in slide-in-from-top-1\">\r\n                                        <label className=\"text-[10px] font-black uppercase text-slate-400 tracking-widest pl-2\">Select Pipeline Source</label>\r\n                                        <select\r\n                                            value={selectedDataSource}\r\n                                            onChange={(e) => setSelectedDataSource(e.target.value)}\r\n                                            className=\"w-full h-12 bg-indigo-50 border border-indigo-100 rounded-xl px-4 text-sm font-bold text-indigo-700 mt-2 focus:ring-2 focus:ring-indigo-500/20 outline-none\"\r\n                                        >\r\n                                            <option value=\"\">Choose Tracker...</option>\r\n                                            {customCategories.map(cat => (\r\n                                                <option key={cat.id} value={cat.id}>{cat.title}</option>\r\n                                            ))}\r\n                                        </select>\r\n                                    </div>\r\n                                )}\r\n\r\n                                <button onClick={addBlock} className=\"w-full h-12 bg-violet-600 text-white rounded-xl font-black uppercase tracking-widest text-xs mt-4 shadow-lg shadow-violet-200 hover:bg-violet-700 transition-colors\">\r\n                                    Create Node\r\n                                </button>\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Edit Block Modal */}\r\n            <AnimatePresence>\r\n                {editingBlock && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"absolute inset-0 z-50 bg-white/80 backdrop-blur-md flex items-center justify-center p-4\"\r\n                        onClick={() => setEditingBlock(null)}\r\n                    >\r\n                        <motion.div\r\n                            initial={{ scale: 0.9, opacity: 0 }}\r\n                            animate={{ scale: 1, opacity: 1 }}\r\n                            exit={{ scale: 0.9, opacity: 0 }}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                            className=\"bg-white rounded-[2rem] shadow-2xl p-6 w-full max-w-sm border border-slate-100\"\r\n                        >\r\n                            <h3 className=\"text-xl font-black italic text-slate-900 mb-6\">Edit Node</h3>\r\n                            <div className=\"space-y-4\">\r\n                                <div>\r\n                                    <label className=\"text-[10px] font-black uppercase text-slate-400 tracking-widest pl-2\">Title</label>\r\n                                    <input value={editingBlock.title} onChange={e => setEditingBlock({ ...editingBlock, title: e.target.value })} className=\"w-full h-12 bg-slate-50 rounded-xl px-4 text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-violet-500/20\" />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"text-[10px] font-black uppercase text-slate-400 tracking-widest pl-2\">Description</label>\r\n                                    <textarea value={editingBlock.description || ''} onChange={e => setEditingBlock({ ...editingBlock, description: e.target.value })} className=\"w-full h-20 bg-slate-50 rounded-xl px-4 py-3 text-sm font-medium text-slate-700 outline-none focus:ring-2 focus:ring-violet-500/20 resize-none\" placeholder=\"Why this node?\" />\r\n                                </div>\r\n                                <div className=\"flex gap-2 pt-2\">\r\n                                    <button onClick={() => setEditingBlock(null)} className=\"flex-1 h-12 bg-slate-100 text-slate-500 rounded-xl font-black uppercase tracking-widest text-xs hover:bg-slate-200 transition-colors\">\r\n                                        Cancel\r\n                                    </button>\r\n                                    <button onClick={() => { updateBlock(editingBlock.id, { title: editingBlock.title }); setEditingBlock(null); }} className=\"flex-1 h-12 bg-violet-600 text-white rounded-xl font-black uppercase tracking-widest text-xs shadow-lg shadow-violet-200 hover:bg-violet-700 transition-colors\">\r\n                                        Save\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* AI Brainstorm Modal */}\r\n            <AnimatePresence>\r\n                {showBrainstormModal && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"absolute inset-0 z-[60] bg-indigo-900/10 backdrop-blur-md flex items-center justify-center p-4\"\r\n                        onClick={() => setShowBrainstormModal(false)}\r\n                    >\r\n                        <motion.div\r\n                            initial={{ scale: 0.9, opacity: 0, y: 20 }}\r\n                            animate={{ scale: 1, opacity: 1, y: 0 }}\r\n                            exit={{ scale: 0.9, opacity: 0, y: 20 }}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                            className=\"bg-white rounded-[2.5rem] shadow-2xl p-8 w-full max-w-md border border-indigo-100\"\r\n                        >\r\n                            <div className=\"flex items-center gap-3 mb-6\">\r\n                                <div className=\"p-3 bg-indigo-50 rounded-2xl\">\r\n                                    <Brain className=\"w-6 h-6 text-indigo-600\" />\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"text-xl font-black italic text-slate-900 leading-none\">AI Brainstorm</h3>\r\n                                    <p className=\"text-[10px] font-black uppercase text-indigo-400 tracking-widest mt-1\">Powered by ChatGPT</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-6\">\r\n                                <div>\r\n                                    <label className=\"text-[10px] font-black uppercase text-slate-400 tracking-widest pl-2\">What are we building?</label>\r\n                                    <textarea\r\n                                        value={brainstormPrompt}\r\n                                        onChange={e => setBrainstormPrompt(e.target.value)}\r\n                                        className=\"w-full h-32 bg-slate-50 rounded-2xl px-5 py-4 text-sm font-medium text-slate-700 outline-none focus:ring-2 focus:ring-indigo-500/20 border border-slate-100 resize-none mt-2\"\r\n                                        placeholder=\"Describe your goal (e.g., 'A marketing funnel for a coffee shop' or 'An automated backup system')...\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <button\r\n                                    onClick={handleBrainstorm}\r\n                                    disabled={isBrainstorming || !brainstormPrompt.trim()}\r\n                                    className=\"w-full h-14 bg-indigo-600 text-white rounded-2xl font-black uppercase tracking-widest text-xs shadow-xl shadow-indigo-200 hover:bg-indigo-700 transition-all flex items-center justify-center gap-3 disabled:opacity-50\"\r\n                                >\r\n                                    {isBrainstorming ? (\r\n                                        <>\r\n                                            <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                                            Architecting...\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <Sparkles className=\"w-5 h-5\" />\r\n                                            Generate Nodes\r\n                                        </>\r\n                                    )}\r\n                                </button>\r\n\r\n                                <p className=\"text-[10px] text-center text-slate-400 font-bold uppercase tracking-widest\">\r\n                                    AI will analyze your current canvas and suggest 3 new components\r\n                                </p>\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Draggable Block Component\r\ninterface DraggableBlockProps {\r\n    block: CanvasBlock;\r\n    isSelected: boolean;\r\n    isConnecting: boolean;\r\n    mode: 'design' | 'view';\r\n    activeTool: string;\r\n    categoryColors: { bg: string; border: string; text: string; glow: string };\r\n    iconElement: React.ReactNode;\r\n    onSelect: (e: React.MouseEvent) => void;\r\n    onDragEnd: (x: number, y: number) => void;\r\n    onStartConnection: () => void;\r\n    onEdit: () => void;\r\n    onDelete: () => void;\r\n}\r\n\r\nconst DraggableBlock: React.FC<DraggableBlockProps> = ({\r\n    block, isSelected, isConnecting, mode, activeTool, categoryColors, iconElement,\r\n    onSelect, onDragEnd, onStartConnection, onEdit, onDelete\r\n}) => {\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const [position, setPosition] = useState({ x: block.x, y: block.y });\r\n    const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\r\n\r\n    const [prevPropsX, setPrevPropsX] = useState(block.x);\r\n    const [prevPropsY, setPrevPropsY] = useState(block.y);\r\n\r\n    if (!isDragging && (block.x !== prevPropsX || block.y !== prevPropsY)) {\r\n        setPrevPropsX(block.x);\r\n        setPrevPropsY(block.y);\r\n        setPosition({ x: block.x, y: block.y });\r\n    }\r\n\r\n    const handleMouseDown = (e: React.MouseEvent) => {\r\n        if (mode !== 'design') return;\r\n        if (activeTool !== 'pointer' && activeTool !== 'color') return; // Only drag in pointer/color mode\r\n        e.stopPropagation();\r\n        setIsDragging(true);\r\n        setDragOffset({ x: e.clientX - position.x, y: e.clientY - position.y });\r\n        onSelect(e);\r\n    };\r\n\r\n    const handleMouseMove = useCallback((e: MouseEvent) => {\r\n        if (!isDragging) return;\r\n        const newX = e.clientX - dragOffset.x;\r\n        const newY = e.clientY - dragOffset.y;\r\n        setPosition({ x: newX, y: newY });\r\n    }, [isDragging, dragOffset]);\r\n\r\n    const handleMouseUp = useCallback(() => {\r\n        if (isDragging) {\r\n            setIsDragging(false);\r\n            onDragEnd(position.x, position.y);\r\n        }\r\n    }, [isDragging, position, onDragEnd]);\r\n\r\n    useEffect(() => {\r\n        if (isDragging) {\r\n            window.addEventListener('mousemove', handleMouseMove);\r\n            window.addEventListener('mouseup', handleMouseUp);\r\n            return () => {\r\n                window.removeEventListener('mousemove', handleMouseMove);\r\n                window.removeEventListener('mouseup', handleMouseUp);\r\n            };\r\n        }\r\n    }, [isDragging, handleMouseMove, handleMouseUp]);\r\n\r\n    return (\r\n        <motion.div\r\n            className={`absolute w-[220px] md:w-[260px] rounded-2xl border-2 transition-shadow cursor-pointer ${categoryColors.bg} ${categoryColors.border} ${isSelected ? 'ring-4 ring-violet-200 shadow-xl' : 'shadow-md'} ${isDragging ? 'z-50 scale-105' : 'z-10'} ${isConnecting ? 'ring-4 ring-indigo-400 animate-pulse' : ''}`}\r\n            style={{ left: position.x, top: position.y }}\r\n            onMouseDown={handleMouseDown}\r\n            onClick={(e) => { onSelect(e); }}\r\n        >\r\n            <div className=\"flex items-center gap-3 p-4\">\r\n                <div className={`w-10 h-10 rounded-xl flex items-center justify-center ${categoryColors.bg} border ${categoryColors.border}`}>\r\n                    {iconElement}\r\n                </div>\r\n                <div>\r\n                    <h3 className=\"font-bold text-slate-800 text-sm line-clamp-1\">{block.title}</h3>\r\n                    <p className=\"text-[10px] font-bold uppercase text-slate-400 tracking-wider mb-1\">{block.category}</p>\r\n                    {block.description && (\r\n                        <p className=\"text-[10px] text-slate-500 leading-tight line-clamp-2\">{block.description}</p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            {mode === 'design' && isSelected && activeTool === 'pointer' && (\r\n                <div className=\"flex border-t border-slate-200/50 p-2 gap-2 bg-white/50 rounded-b-2xl backdrop-blur-sm\">\r\n                    <button onClick={(e) => { e.stopPropagation(); onStartConnection() }} className=\"flex-1 py-1.5 bg-violet-100 text-violet-700 text-[10px] font-black uppercase rounded-lg\">Connect</button>\r\n                    <button onClick={(e) => { e.stopPropagation(); onEdit() }} className=\"p-1.5 hover:bg-slate-200 rounded-lg\"><Edit3 className=\"w-3 h-3 text-slate-500\" /></button>\r\n                    <button onClick={(e) => { e.stopPropagation(); onDelete() }} className=\"p-1.5 hover:bg-red-100 rounded-lg\"><Trash2 className=\"w-3 h-3 text-red-500\" /></button>\r\n                </div>\r\n            )}\r\n\r\n            {/* Connection Handles */}\r\n            <div className=\"absolute -right-1.5 top-1/2 -translate-y-1/2 w-3 h-3 bg-violet-400 rounded-full border-2 border-white\" />\r\n            <div className=\"absolute -left-1.5 top-1/2 -translate-y-1/2 w-3 h-3 bg-violet-400 rounded-full border-2 border-white\" />\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nexport default AICanvas;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AIDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AIGoogleSearch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AINotebook.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AIPromptLibrary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AITools.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AIUseCases.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AIWallet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AIWorkflowDetail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AIWorkflows.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AccountabilityPartnerSetup.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AddCategory.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AddExercise.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AddYouTubeSource.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AdminUserManagement.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`loadUsers` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AdminUserManagement.tsx:41:9\n  39 |             return;\n  40 |         }\n> 41 |         loadUsers();\n     |         ^^^^^^^^^ `loadUsers` accessed before it is declared\n  42 |     }, [isAdmin, navigate]);\n  43 |\n  44 |     const loadUsers = async () => {\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AdminUserManagement.tsx:44:5\n  42 |     }, [isAdmin, navigate]);\n  43 |\n> 44 |     const loadUsers = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 45 |         setLoading(true);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 46 |         const userList = await authService.getAllUsers();\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 47 |         setUsers(userList);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 48 |         setLoading(false);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 49 |     };\n     | ^^^^^^^ `loadUsers` is declared here\n  50 |\n  51 |     const handleRoleChange = async (uid: string, newRole: UserRole) => {\n  52 |         setActionLoading(uid);","line":41,"column":9,"nodeType":null,"endLine":41,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { authService } from '../services/authService';\r\nimport type { UserListItem, UserRole } from '../types/auth';\r\nimport {\r\n    MoveLeft,\r\n    Users,\r\n    Shield,\r\n    ShieldCheck,\r\n    User,\r\n    Mail,\r\n    Calendar,\r\n    Clock,\r\n    Search,\r\n    Filter,\r\n    MoreVertical,\r\n    UserCheck,\r\n    UserX,\r\n    Loader2,\r\n    RefreshCw,\r\n    Crown\r\n} from 'lucide-react';\r\n\r\nconst AdminUserManagement: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const { user, isAdmin } = useAuth();\r\n    const [users, setUsers] = useState<UserListItem[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [filterRole, setFilterRole] = useState<'all' | UserRole>('all');\r\n    const [activeMenu, setActiveMenu] = useState<string | null>(null);\r\n    const [actionLoading, setActionLoading] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (!isAdmin) {\r\n            navigate('/dashboard');\r\n            return;\r\n        }\r\n        loadUsers();\r\n    }, [isAdmin, navigate]);\r\n\r\n    const loadUsers = async () => {\r\n        setLoading(true);\r\n        const userList = await authService.getAllUsers();\r\n        setUsers(userList);\r\n        setLoading(false);\r\n    };\r\n\r\n    const handleRoleChange = async (uid: string, newRole: UserRole) => {\r\n        setActionLoading(uid);\r\n        const success = await authService.updateUserRole(uid, newRole);\r\n        if (success) {\r\n            setUsers(prev => prev.map(u => u.uid === uid ? { ...u, role: newRole } : u));\r\n        }\r\n        setActionLoading(null);\r\n        setActiveMenu(null);\r\n    };\r\n\r\n    const handleToggleStatus = async (uid: string, currentStatus: boolean) => {\r\n        setActionLoading(uid);\r\n        const success = await authService.toggleUserStatus(uid, !currentStatus);\r\n        if (success) {\r\n            setUsers(prev => prev.map(u => u.uid === uid ? { ...u, isActive: !currentStatus } : u));\r\n        }\r\n        setActionLoading(null);\r\n        setActiveMenu(null);\r\n    };\r\n\r\n    const filteredUsers = users.filter(u => {\r\n        const matchesSearch = searchQuery === '' ||\r\n            u.email?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            u.displayName?.toLowerCase().includes(searchQuery.toLowerCase());\r\n        const matchesRole = filterRole === 'all' || u.role === filterRole;\r\n        return matchesSearch && matchesRole;\r\n    });\r\n\r\n    const formatDate = (date: Date) => {\r\n        return new Date(date).toLocaleDateString('en-US', {\r\n            month: 'short',\r\n            day: 'numeric',\r\n            year: 'numeric'\r\n        });\r\n    };\r\n\r\n    const formatTime = (date: Date) => {\r\n        return new Date(date).toLocaleTimeString('en-US', {\r\n            hour: '2-digit',\r\n            minute: '2-digit'\r\n        });\r\n    };\r\n\r\n    if (!isAdmin) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-screen bg-white dark:bg-[#1A1A1A] font-sans overflow-hidden\">\r\n            {/* Header */}\r\n            <div className=\"pt-12 px-6 pb-4 border-b border-gray-100 dark:border-gray-800\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                    <button\r\n                        onClick={() => navigate('/dashboard')}\r\n                        className=\"p-2 -ml-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\r\n                    >\r\n                        <MoveLeft size={24} className=\"text-black dark:text-white\" />\r\n                    </button>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Shield size={20} className=\"text-purple-500\" />\r\n                        <h2 className=\"text-sm font-bold tracking-[0.2em] uppercase text-black/40 dark:text-white/40\">\r\n                            Admin Panel\r\n                        </h2>\r\n                    </div>\r\n                    <button\r\n                        onClick={loadUsers}\r\n                        disabled={loading}\r\n                        className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\r\n                    >\r\n                        <RefreshCw size={20} className={`text-gray-500 ${loading ? 'animate-spin' : ''}`} />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-3 mb-4\">\r\n                    <Users size={28} className=\"text-purple-500\" />\r\n                    <div>\r\n                        <h1 className=\"text-2xl font-serif text-black dark:text-white\" style={{ fontFamily: \"Georgia, serif\" }}>\r\n                            User Management\r\n                        </h1>\r\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                            {users.length} registered users\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Search & Filter */}\r\n                <div className=\"flex gap-3\">\r\n                    <div className=\"flex-1 relative\">\r\n                        <Search size={18} className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                            placeholder=\"Search by email or name...\"\r\n                            className=\"w-full bg-gray-50 dark:bg-gray-800 border-none rounded-xl py-3 pl-11 pr-4 text-black dark:text-white placeholder:text-gray-400 focus:ring-2 focus:ring-purple-500/20 transition-all outline-none text-sm\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"relative\">\r\n                        <select\r\n                            value={filterRole}\r\n                            onChange={(e) => setFilterRole(e.target.value as 'all' | UserRole)}\r\n                            className=\"appearance-none bg-gray-50 dark:bg-gray-800 border-none rounded-xl py-3 pl-4 pr-10 text-black dark:text-white cursor-pointer focus:ring-2 focus:ring-purple-500/20 transition-all outline-none text-sm\"\r\n                        >\r\n                            <option value=\"all\">All Roles</option>\r\n                            <option value=\"admin\">Admins</option>\r\n                            <option value=\"user\">Users</option>\r\n                        </select>\r\n                        <Filter size={16} className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* User List */}\r\n            <div className=\"flex-1 overflow-y-auto px-6 py-4 space-y-3\">\r\n                {loading ? (\r\n                    <div className=\"flex flex-col items-center justify-center h-64 gap-4\">\r\n                        <Loader2 size={40} className=\"animate-spin text-purple-500\" />\r\n                        <p className=\"text-gray-500 dark:text-gray-400\">Loading users...</p>\r\n                    </div>\r\n                ) : filteredUsers.length === 0 ? (\r\n                    <div className=\"flex flex-col items-center justify-center h-64 gap-4\">\r\n                        <Users size={48} className=\"text-gray-300 dark:text-gray-600\" />\r\n                        <p className=\"text-gray-500 dark:text-gray-400\">No users found</p>\r\n                    </div>\r\n                ) : (\r\n                    <AnimatePresence>\r\n                        {filteredUsers.map((userItem, index) => (\r\n                            <motion.div\r\n                                key={userItem.uid}\r\n                                initial={{ opacity: 0, y: 20 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                exit={{ opacity: 0, y: -20 }}\r\n                                transition={{ delay: index * 0.05 }}\r\n                                className={`bg-gray-50 dark:bg-gray-800/50 rounded-2xl p-4 relative ${!userItem.isActive ? 'opacity-60' : ''\r\n                                    } ${userItem.uid === user?.uid ? 'ring-2 ring-purple-500/30' : ''}`}\r\n                            >\r\n                                <div className=\"flex items-start gap-4\">\r\n                                    {/* Avatar */}\r\n                                    <div className={`w-12 h-12 rounded-full flex items-center justify-center ${userItem.role === 'admin'\r\n                                            ? 'bg-gradient-to-br from-purple-500 to-pink-500'\r\n                                            : 'bg-gradient-to-br from-gray-400 to-gray-500'\r\n                                        }`}>\r\n                                        {userItem.role === 'admin' ? (\r\n                                            <Crown size={22} className=\"text-white\" />\r\n                                        ) : (\r\n                                            <User size={22} className=\"text-white\" />\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {/* User Info */}\r\n                                    <div className=\"flex-1 min-w-0\">\r\n                                        <div className=\"flex items-center gap-2 mb-1\">\r\n                                            <h3 className=\"font-bold text-black dark:text-white truncate\">\r\n                                                {userItem.displayName || 'No Name'}\r\n                                            </h3>\r\n                                            {userItem.uid === user?.uid && (\r\n                                                <span className=\"text-[10px] font-bold uppercase tracking-wider bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 px-2 py-0.5 rounded-full\">\r\n                                                    You\r\n                                                </span>\r\n                                            )}\r\n                                            {!userItem.isActive && (\r\n                                                <span className=\"text-[10px] font-bold uppercase tracking-wider bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 px-2 py-0.5 rounded-full\">\r\n                                                    Inactive\r\n                                                </span>\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        <div className=\"flex items-center gap-1.5 text-sm text-gray-500 dark:text-gray-400 mb-2\">\r\n                                            <Mail size={14} />\r\n                                            <span className=\"truncate\">{userItem.email || 'No email'}</span>\r\n                                        </div>\r\n\r\n                                        <div className=\"flex flex-wrap items-center gap-4 text-xs text-gray-400 dark:text-gray-500\">\r\n                                            <div className=\"flex items-center gap-1\">\r\n                                                <Calendar size={12} />\r\n                                                <span>Joined {formatDate(userItem.createdAt)}</span>\r\n                                            </div>\r\n                                            <div className=\"flex items-center gap-1\">\r\n                                                <Clock size={12} />\r\n                                                <span>Last seen {formatDate(userItem.lastLoginAt)} at {formatTime(userItem.lastLoginAt)}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Role Badge & Actions */}\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider ${userItem.role === 'admin'\r\n                                                ? 'bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400'\r\n                                                : 'bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400'\r\n                                            }`}>\r\n                                            {userItem.role === 'admin' ? <ShieldCheck size={14} /> : <User size={14} />}\r\n                                            {userItem.role}\r\n                                        </div>\r\n\r\n                                        {userItem.uid !== user?.uid && (\r\n                                            <div className=\"relative\">\r\n                                                <button\r\n                                                    onClick={() => setActiveMenu(activeMenu === userItem.uid ? null : userItem.uid)}\r\n                                                    className=\"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors\"\r\n                                                >\r\n                                                    <MoreVertical size={18} className=\"text-gray-500\" />\r\n                                                </button>\r\n\r\n                                                {/* Dropdown Menu */}\r\n                                                <AnimatePresence>\r\n                                                    {activeMenu === userItem.uid && (\r\n                                                        <motion.div\r\n                                                            initial={{ opacity: 0, scale: 0.95 }}\r\n                                                            animate={{ opacity: 1, scale: 1 }}\r\n                                                            exit={{ opacity: 0, scale: 0.95 }}\r\n                                                            className=\"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden z-10\"\r\n                                                        >\r\n                                                            {actionLoading === userItem.uid ? (\r\n                                                                <div className=\"flex items-center justify-center py-4\">\r\n                                                                    <Loader2 size={20} className=\"animate-spin text-purple-500\" />\r\n                                                                </div>\r\n                                                            ) : (\r\n                                                                <>\r\n                                                                    <button\r\n                                                                        onClick={() => handleRoleChange(userItem.uid, userItem.role === 'admin' ? 'user' : 'admin')}\r\n                                                                        className=\"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left\"\r\n                                                                    >\r\n                                                                        {userItem.role === 'admin' ? (\r\n                                                                            <>\r\n                                                                                <User size={16} className=\"text-gray-500\" />\r\n                                                                                <span className=\"text-sm text-black dark:text-white\">Demote to User</span>\r\n                                                                            </>\r\n                                                                        ) : (\r\n                                                                            <>\r\n                                                                                <ShieldCheck size={16} className=\"text-purple-500\" />\r\n                                                                                <span className=\"text-sm text-black dark:text-white\">Promote to Admin</span>\r\n                                                                            </>\r\n                                                                        )}\r\n                                                                    </button>\r\n                                                                    <button\r\n                                                                        onClick={() => handleToggleStatus(userItem.uid, userItem.isActive)}\r\n                                                                        className=\"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left border-t border-gray-100 dark:border-gray-700\"\r\n                                                                    >\r\n                                                                        {userItem.isActive ? (\r\n                                                                            <>\r\n                                                                                <UserX size={16} className=\"text-red-500\" />\r\n                                                                                <span className=\"text-sm text-red-500\">Deactivate User</span>\r\n                                                                            </>\r\n                                                                        ) : (\r\n                                                                            <>\r\n                                                                                <UserCheck size={16} className=\"text-green-500\" />\r\n                                                                                <span className=\"text-sm text-green-500\">Activate User</span>\r\n                                                                            </>\r\n                                                                        )}\r\n                                                                    </button>\r\n                                                                </>\r\n                                                            )}\r\n                                                        </motion.div>\r\n                                                    )}\r\n                                                </AnimatePresence>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </motion.div>\r\n                        ))}\r\n                    </AnimatePresence>\r\n                )}\r\n            </div>\r\n\r\n            {/* Stats Footer */}\r\n            <div className=\"px-6 py-4 border-t border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-gray-800/30\">\r\n                <div className=\"flex justify-around\">\r\n                    <div className=\"text-center\">\r\n                        <div className=\"text-2xl font-bold text-black dark:text-white\">\r\n                            {users.filter(u => u.role === 'admin').length}\r\n                        </div>\r\n                        <div className=\"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Admins</div>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                        <div className=\"text-2xl font-bold text-black dark:text-white\">\r\n                            {users.filter(u => u.role === 'user').length}\r\n                        </div>\r\n                        <div className=\"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Users</div>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                        <div className=\"text-2xl font-bold text-green-500\">\r\n                            {users.filter(u => u.isActive).length}\r\n                        </div>\r\n                        <div className=\"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Active</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminUserManagement;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\AuthScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\BlockHistoryViewer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\BottomNavbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\BrandingSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\BusinessSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\CodingSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1520,"column":140,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1520,"endColumn":143,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[107305,107308],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[107305,107308],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1560,"column":103,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1560,"endColumn":106,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[111028,111031],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[111028,111031],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    Code2, Layout,\r\n    ArrowLeft, Plus, Play,\r\n    Bug, ExternalLink,\r\n    CheckCircle2, Circle, Clock, ChevronRight,\r\n    Flame, Search,\r\n    Book, Youtube,\r\n    User, X, Edit2,\r\n    Sparkles, AlertCircle, Award, Target, TrendingUp,\r\n    ListChecks, RefreshCw, Copy, Trash2, Filter, Calendar, FileText, Lightbulb\r\n} from 'lucide-react';\r\nimport { useLifeTracker, LifeTrackerStore } from '../utils/lifeTrackerStore';\r\nimport type {\r\n    CodingLearningPath,\r\n    PracticeReflection,\r\n    CodingProject,\r\n    DebugLog,\r\n    VideoResource,\r\n    CSNote,\r\n    SkillMastery\r\n} from '../utils/lifeTrackerStore';\r\nimport type { LucideIcon } from 'lucide-react';\r\nimport { useContentProtection } from '../contexts/ContentProtectionContext';\r\n\r\n// --- Custom Icons ---\r\nconst MapIcon = (props: React.SVGProps<SVGSVGElement>) => (\r\n    <svg {...props} width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n        <path d=\"M3 7l6-3 6 3 6-3v13l-6 3-6-3-6 3V7z\" />\r\n        <path d=\"M9 4v13\" />\r\n        <path d=\"M15 7v13\" />\r\n    </svg>\r\n);\r\n\r\nconst generateId = () => Math.random().toString(36).substring(2, 9);\r\n\r\n// --- QUICK SKILLS BAR ---\r\nconst QuickSkillsBar: React.FC<{ store: LifeTrackerStore }> = ({ store }) => {\r\n    const state = store.getState();\r\n    const skills = state.skillMastery;\r\n\r\n    if (skills.length === 0) return null;\r\n\r\n    return (\r\n        <div className=\"px-5 py-2.5 border-t border-border-light dark:border-border-dark flex items-center gap-3 overflow-x-auto no-scrollbar bg-white-smoke/30 dark:bg-black/10\">\r\n            <div className=\"flex items-center gap-1.5 min-w-fit\">\r\n                <Target className=\"w-3 h-3 text-accent\" />\r\n                <span className=\"text-[8px] font-black text-accent uppercase tracking-widest whitespace-nowrap\">Core Mastery:</span>\r\n            </div>\r\n            <div className=\"flex gap-2.5\">\r\n                {skills.slice(0, 5).map(skill => (\r\n                    <motion.div\r\n                        key={skill.id}\r\n                        initial={{ opacity: 0, scale: 0.9 }}\r\n                        animate={{ opacity: 1, scale: 1 }}\r\n                        className=\"flex items-center gap-2 px-3 py-1 bg-surface-light dark:bg-surface-dark border border-border-light dark:border-border-dark rounded-xl whitespace-nowrap shadow-soft\"\r\n                    >\r\n                        <span className=\"text-[9px] font-black text-heading-light dark:text-text-dark uppercase tracking-tight\">{skill.name}</span>\r\n                        <div className=\"flex gap-0.5\">\r\n                            {[1, 2, 3].map(i => (\r\n                                <div\r\n                                    key={i}\r\n                                    className={`w-1 h-1 rounded-full ${i <= Math.ceil((skill.depthRating / 5) * 3) ? 'bg-accent shadow-glow' : 'bg-silver/20'}`}\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                    </motion.div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- Types for local state ---\r\ntype SectionId = 'paths' | 'dsa' | 'videos' | 'projects' | 'notes' | 'mastery';\r\n\r\ninterface ContentFormData {\r\n    title: string;\r\n    content: string;\r\n    url: string;\r\n    domain: string;\r\n    difficulty: 'easy' | 'medium' | 'hard';\r\n    category: 'DSA' | 'CS Core' | 'System Design';\r\n    status: string;\r\n    techStack: string[];\r\n}\r\n\r\nconst CodingSection: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const store = useLifeTracker();\r\n    const state = store.getState();\r\n    const codingStats = store.getCodingStats();\r\n    const profile = state.userProfile;\r\n\r\n    const [activeTab, setActiveTab] = useState<SectionId>('paths');\r\n    const [isProfileModalOpen, setIsProfileModalOpen] = useState(false);\r\n    const [addType, setAddType] = useState<SectionId | 'log' | 'concept' | 'journal' | null>(null);\r\n\r\n    const tabs: { id: SectionId; label: string; icon: React.FC<React.SVGProps<SVGSVGElement>> }[] = [\r\n        { id: 'paths', label: 'Learning', icon: MapIcon },\r\n        { id: 'dsa', label: 'Problems', icon: Code2 },\r\n        { id: 'videos', label: 'Library', icon: Play },\r\n        { id: 'projects', label: 'Projects', icon: Layout },\r\n        { id: 'mastery', label: 'Mastery', icon: Award },\r\n        { id: 'notes', label: 'Knowledge', icon: Bug }\r\n    ];\r\n\r\n    const containerVariants = {\r\n        hidden: { opacity: 0, x: 10 },\r\n        visible: {\r\n            opacity: 1,\r\n            x: 0,\r\n            transition: { duration: 0.3, staggerChildren: 0.1 }\r\n        },\r\n        exit: { opacity: 0, x: -10, transition: { duration: 0.2 } }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-white-smoke dark:bg-background-dark pb-32 transition-colors duration-500\">\r\n            {/* Header */}\r\n            <header className=\"sticky top-0 z-40 bg-surface-light/80 dark:bg-surface-dark/80 backdrop-blur-md border-b border-border-light dark:border-border-dark\">\r\n                <div className=\"px-5 py-4 flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <button\r\n                            onClick={() => navigate('/dashboard')}\r\n                            className=\"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors\"\r\n                        >\r\n                            <ArrowLeft className=\"w-5 h-5 text-heading-light dark:text-text-dark\" />\r\n                        </button>\r\n                        <div>\r\n                            <h1 className=\"text-xl font-black text-heading-light dark:text-text-dark tracking-tight\">Coding</h1>\r\n                            <p className=\"text-[10px] font-bold text-accent uppercase tracking-widest\">Developer OS</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Profile Card */}\r\n                    <button\r\n                        onClick={() => setIsProfileModalOpen(true)}\r\n                        className=\"flex items-center gap-2 bg-surface-light dark:bg-surface-dark p-1 pr-3 rounded-full border border-border-light dark:border-border-dark shadow-soft hover:shadow-glow transition-all active:scale-95\"\r\n                    >\r\n                        <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-accent to-silver flex items-center justify-center text-white overflow-hidden\">\r\n                            {profile.avatar ? <img src={profile.avatar} alt=\"Avatar\" className=\"w-full h-full object-cover\" /> : <User className=\"w-4 h-4\" />}\r\n                        </div>\r\n                        <div className=\"flex flex-col items-start\">\r\n                            <span className=\"text-[10px] font-black leading-none text-heading-light dark:text-text-dark\">{profile.firstName}</span>\r\n                            <div className=\"flex items-center gap-0.5 mt-0.5\">\r\n                                <Flame className=\"w-2.5 h-2.5 text-orange-500 fill-orange-500\" />\r\n                                <span className=\"text-[8px] font-bold text-gray-400 dark:text-subtext-dark\">{codingStats.streak} streak</span>\r\n                            </div>\r\n                        </div>\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Tab Navigation (Horizontal Carousel) */}\r\n                <div className=\"px-5 pb-2 flex gap-4 overflow-x-auto no-scrollbar scroll-smooth mask-fade-edges\">\r\n                    {tabs.map(tab => (\r\n                        <button\r\n                            key={tab.id}\r\n                            onClick={() => setActiveTab(tab.id)}\r\n                            className={`flex flex-col items-center gap-1 flex-1 min-w-[70px] pb-2 transition-all relative ${activeTab === tab.id\r\n                                ? 'text-accent'\r\n                                : 'text-subtext-light dark:text-subtext-dark'\r\n                                }`}\r\n                        >\r\n                            <tab.icon className=\"w-5 h-5\" />\r\n                            <span className=\"text-[10px] font-bold uppercase tracking-wider text-center whitespace-nowrap\">{tab.label}</span>\r\n                            {activeTab === tab.id && (\r\n                                <motion.div\r\n                                    layoutId=\"underline\"\r\n                                    className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-accent rounded-full\"\r\n                                />\r\n                            )}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n                <QuickSkillsBar store={store} />\r\n            </header>\r\n\r\n            <main className=\"max-w-md mx-auto px-5 py-6\">\r\n                <AnimatePresence mode=\"wait\">\r\n                    <motion.div\r\n                        key={activeTab}\r\n                        variants={containerVariants}\r\n                        initial=\"hidden\"\r\n                        animate=\"visible\"\r\n                        exit=\"exit\"\r\n                    >\r\n                        {activeTab === 'paths' && <LearningPathsSection store={store} onAdd={() => setAddType('paths')} />}\r\n                        {activeTab === 'dsa' && <ProblemSolvingSection store={store} onAdd={() => setAddType('dsa')} />}\r\n                        {activeTab === 'videos' && <VideoLibrarySection store={store} onAdd={() => setAddType('videos')} />}\r\n                        {activeTab === 'projects' && <ProjectsVaultSection store={store} onAdd={() => setAddType('projects')} />}\r\n                        {activeTab === 'mastery' && <MasteryTrackingSection store={store} onAdd={() => setAddType('mastery')} />}\r\n                        {activeTab === 'notes' && <KnowledgeBaseSection store={store} onAddConcept={() => setAddType('concept')} onAddLog={() => setAddType('log')} onAddJournal={() => setAddType('journal')} />}\r\n                    </motion.div>\r\n                </AnimatePresence>\r\n            </main>\r\n\r\n            <AnimatePresence>\r\n                {addType && (\r\n                    <AddContentOverlay\r\n                        type={addType}\r\n                        onClose={() => setAddType(null)}\r\n                        store={store}\r\n                        activePathId={state.codingLearningPaths[0]?.id}\r\n                    />\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Profile Modal */}\r\n            <AnimatePresence>\r\n                {isProfileModalOpen && (\r\n                    <div className=\"fixed inset-0 z-50 flex items-center justify-center px-5\">\r\n                        <motion.div\r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            exit={{ opacity: 0 }}\r\n                            onClick={() => setIsProfileModalOpen(false)}\r\n                            className=\"absolute inset-0 bg-black/40 backdrop-blur-sm\"\r\n                        />\r\n                        <motion.div\r\n                            initial={{ scale: 0.9, opacity: 0, y: 20 }}\r\n                            animate={{ scale: 1, opacity: 1, y: 0 }}\r\n                            exit={{ scale: 0.9, opacity: 0, y: 20 }}\r\n                            className=\"bg-surface-light dark:bg-surface-dark w-full max-w-xs rounded-4xl overflow-hidden shadow-luxury relative z-10 p-7\"\r\n                        >\r\n                            <div className=\"flex justify-between items-start mb-6\">\r\n                                <h3 className=\"font-black text-lg tracking-tight text-heading-light dark:text-text-dark\">Identity</h3>\r\n                                <button onClick={() => setIsProfileModalOpen(false)} className=\"p-1 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full\">\r\n                                    <X className=\"w-5 h-5\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"flex flex-col items-center text-center mb-8\">\r\n                                <div className=\"w-24 h-24 rounded-full bg-gradient-to-br from-accent to-silver mb-4 flex items-center justify-center text-white shadow-glow relative\">\r\n                                    <User className=\"w-12 h-12\" />\r\n                                    <div className=\"absolute -bottom-1 -right-1 w-8 h-8 bg-green-500 border-4 border-white dark:border-surface-dark rounded-full\" />\r\n                                </div>\r\n                                <h4 className=\"font-black text-2xl text-heading-light dark:text-text-dark\">{profile.firstName}</h4>\r\n                                <p className=\"text-[10px] text-accent font-black uppercase tracking-widest mt-1\">Personal Developer OS</p>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-3 mb-8\">\r\n                                <div className=\"bg-white-smoke dark:bg-background-dark p-5 rounded-3xl border border-border-light dark:border-border-dark text-center\">\r\n                                    <p className=\"text-2xl font-black text-accent\">{codingStats.streak}</p>\r\n                                    <p className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest\">Streak</p>\r\n                                </div>\r\n                                <div className=\"bg-white-smoke dark:bg-background-dark p-5 rounded-3xl border border-border-light dark:border-border-dark text-center\">\r\n                                    <p className=\"text-2xl font-black text-accent\">{state.dsaProblems.filter(p => p.status === 'solved').length}</p>\r\n                                    <p className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest\">Growth</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button className=\"w-full py-4 bg-accent text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-elegant hover:shadow-luxury transition-all\">\r\n                                Update Core Systems\r\n                            </button>\r\n                        </motion.div>\r\n                    </div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- SECTION 1: LEARNING PATHS ---\r\nfunction LearningPathsSection({ store, onAdd }: { store: LifeTrackerStore; onAdd: () => void }) {\r\n    const state = store.getState();\r\n    const paths: CodingLearningPath[] = state.codingLearningPaths;\r\n    const [selectedPathId, setSelectedPathId] = useState(paths[0]?.id || 'fs');\r\n    const [addingTopicToWeek, setAddingTopicToWeek] = useState<string | null>(null);\r\n    const [newTopicBuffer, setNewTopicBuffer] = useState('');\r\n\r\n    const activePath = paths.find(p => p.id === selectedPathId);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Domain Selector */}\r\n            <div className=\"flex gap-2 p-1.5 bg-surface-light dark:bg-surface-dark rounded-3xl border border-border-light dark:border-border-dark shadow-soft\">\r\n                {paths.map(path => (\r\n                    <button\r\n                        key={path.id}\r\n                        onClick={() => setSelectedPathId(path.id)}\r\n                        className={`flex-1 py-3 px-4 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${selectedPathId === path.id\r\n                            ? 'bg-accent text-white shadow-glow'\r\n                            : 'text-subtext-light dark:text-subtext-dark hover:text-accent'\r\n                            }`}\r\n                    >\r\n                        {path.title}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Weekly Planner */}\r\n            <div className=\"space-y-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <h3 className=\"text-[10px] font-black uppercase tracking-widest text-[#847777]/60 ml-2\">Weekly Planner</h3>\r\n                    <button\r\n                        onClick={onAdd}\r\n                        className=\"flex items-center gap-1.5 px-4 py-2 bg-accent/10 text-accent rounded-full text-[10px] font-black uppercase tracking-widest border border-accent/20 hover:bg-accent/20 transition-all\"\r\n                    >\r\n                        <Plus className=\"w-3.5 h-3.5\" /> Add Week\r\n                    </button>\r\n                </div>\r\n\r\n                {(!activePath || activePath.weeks.length === 0) ? (\r\n                    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"p-16 text-center bg-surface-light dark:bg-surface-dark rounded-4xl border border-dashed border-border-light dark:border-border-dark\">\r\n                        <MapIcon className=\"w-12 h-12 text-silver mx-auto mb-4 opacity-30\" />\r\n                        <p className=\"text-sm font-bold text-subtext-light dark:text-subtext-dark\">Domain silence.</p>\r\n                        <p className=\"text-[10px] uppercase tracking-widest mt-2 text-silver\">Map your path.</p>\r\n                    </motion.div>\r\n                ) : (\r\n                    <div className=\"space-y-4\">\r\n                        {activePath.weeks.map((week, idx) => (\r\n                            <motion.div\r\n                                key={week.id}\r\n                                layout\r\n                                initial={{ opacity: 0, y: 15 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                transition={{ delay: idx * 0.05 }}\r\n                                className=\"bg-surface-light dark:bg-surface-dark p-6 rounded-4xl border border-border-light dark:border-border-dark shadow-soft group hover:border-accent/40 transition-all\"\r\n                            >\r\n                                <div className=\"flex items-start justify-between mb-5\">\r\n                                    <div>\r\n                                        <h4 className=\"font-black text-lg text-heading-light dark:text-text-dark tracking-tight leading-none mb-1\">Week {week.weekNumber}</h4>\r\n                                        <p className=\"text-[10px] font-bold text-accent uppercase tracking-widest\">{week.weekRange}</p>\r\n                                    </div>\r\n                                    <div className={`px-3 py-1 rounded-full text-[8px] font-black uppercase tracking-widest ${week.status === 'completed' ? 'bg-green-100 text-green-600' :\r\n                                        week.status === 'in-progress' ? 'bg-blue-100 text-blue-600' : 'bg-white-smoke dark:bg-background-dark text-silver shadow-inner'\r\n                                        }`}>\r\n                                        {week.status}\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"space-y-4\">\r\n                                    {/* Focus Area */}\r\n                                    <div className=\"bg-white-smoke/50 dark:bg-background-dark/50 p-3 rounded-2xl border border-border-light dark:border-border-dark\">\r\n                                        <p className=\"text-[9px] font-black text-accent uppercase tracking-widest mb-1.5 flex items-center gap-1\">\r\n                                            <Sparkles className=\"w-3 h-3\" /> Core Focus\r\n                                        </p>\r\n                                        <textarea\r\n                                            className=\"w-full bg-transparent text-[11px] font-medium leading-relaxed text-subtext-light dark:text-subtext-dark focus:outline-none min-h-[40px] resize-none\"\r\n                                            placeholder=\"What is the primary goal this week?\"\r\n                                            defaultValue={week.weekRange}\r\n                                            onBlur={(e) => store.updateCodingLearningWeek(selectedPathId, week.id, { weekRange: e.target.value })}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <div className=\"flex flex-wrap gap-2\">\r\n                                        {week.topics.map((topic, tIdx) => (\r\n                                            <span key={tIdx} className=\"group/topic px-3 py-1.5 bg-white-smoke dark:bg-background-dark border border-border-light dark:border-border-dark rounded-xl text-[10px] font-bold text-heading-light dark:text-text-dark flex items-center gap-2\">\r\n                                                {topic}\r\n                                                <button\r\n                                                    onClick={() => store.updateCodingLearningWeek(selectedPathId, week.id, {\r\n                                                        topics: week.topics.filter((_, i) => i !== tIdx)\r\n                                                    })}\r\n                                                    className=\"opacity-0 group-hover/topic:opacity-100 transition-opacity hover:text-rose-500\"\r\n                                                >\r\n                                                    <X className=\"w-3 h-3\" />\r\n                                                </button>\r\n                                            </span>\r\n                                        ))}\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            {addingTopicToWeek === week.id ? (\r\n                                                <div className=\"flex gap-2 items-center bg-white-smoke dark:bg-background-dark p-1 pr-2 rounded-xl border border-accent/30 animate-in fade-in slide-in-from-left-2 duration-300\">\r\n                                                    <input\r\n                                                        autoFocus\r\n                                                        type=\"text\"\r\n                                                        value={newTopicBuffer}\r\n                                                        onChange={(e) => setNewTopicBuffer(e.target.value)}\r\n                                                        onKeyDown={(e) => {\r\n                                                            if (e.key === 'Enter' && newTopicBuffer.trim()) {\r\n                                                                store.updateCodingLearningWeek(selectedPathId, week.id, { topics: [...week.topics, newTopicBuffer.trim()] });\r\n                                                                setAddingTopicToWeek(null);\r\n                                                                setNewTopicBuffer('');\r\n                                                            }\r\n                                                            if (e.key === 'Escape') setAddingTopicToWeek(null);\r\n                                                        }}\r\n                                                        placeholder=\"Focus Area...\"\r\n                                                        className=\"bg-transparent text-[10px] font-bold px-2 py-1 focus:outline-none w-24 text-heading-light dark:text-text-dark\"\r\n                                                    />\r\n                                                    <button onClick={() => setAddingTopicToWeek(null)} className=\"text-silver hover:text-rose-500\">\r\n                                                        <X className=\"w-3 h-3\" />\r\n                                                    </button>\r\n                                                </div>\r\n                                            ) : (\r\n                                                <button\r\n                                                    onClick={() => setAddingTopicToWeek(week.id)}\r\n                                                    className=\"px-4 py-2 bg-accent/5 border border-dashed border-accent/30 rounded-xl text-[10px] font-black uppercase text-accent hover:bg-accent/10 transition-all flex items-center gap-1.5 shadow-sm\"\r\n                                                >\r\n                                                    <Plus className=\"w-3.5 h-3.5\" /> Add Topic\r\n                                                </button>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"mt-6 pt-5 border-t border-border-light dark:border-border-dark flex items-center justify-between\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <button\r\n                                            onClick={() => store.updateCodingLearningWeek(selectedPathId, week.id, { status: week.status === 'completed' ? 'pending' : week.status === 'in-progress' ? 'completed' : 'in-progress' })}\r\n                                            className=\"flex items-center gap-2\"\r\n                                        >\r\n                                            <div className={`w-2 h-2 rounded-full ${week.status === 'completed' ? 'bg-green-500' : week.status === 'in-progress' ? 'bg-blue-500 animate-pulse' : 'bg-silver'}`} />\r\n                                            <span className=\"text-[10px] font-black text-silver uppercase tracking-widest\">{week.status || 'Planned'}</span>\r\n                                        </button>\r\n                                    </div>\r\n                                    {addingTopicToWeek === `edit-desc-${week.id}` ? (\r\n                                        <div className=\"flex gap-2 items-center bg-white-smoke dark:bg-background-dark p-1 pr-2 rounded-xl border border-accent/30 animate-in fade-in slide-in-from-right-2 duration-300\">\r\n                                            <input\r\n                                                autoFocus\r\n                                                type=\"text\"\r\n                                                value={newTopicBuffer}\r\n                                                onChange={(e) => setNewTopicBuffer(e.target.value)}\r\n                                                onKeyDown={(e) => {\r\n                                                    if (e.key === 'Enter' && newTopicBuffer.trim()) {\r\n                                                        store.updateCodingLearningWeek(selectedPathId, week.id, { weekRange: newTopicBuffer.trim() });\r\n                                                        setAddingTopicToWeek(null);\r\n                                                        setNewTopicBuffer('');\r\n                                                    }\r\n                                                    if (e.key === 'Escape') setAddingTopicToWeek(null);\r\n                                                }}\r\n                                                className=\"bg-transparent text-[10px] font-bold px-2 py-1 focus:outline-none w-32 text-accent\"\r\n                                            />\r\n                                            <button onClick={() => setAddingTopicToWeek(null)} className=\"text-silver hover:text-rose-500\">\r\n                                                <X className=\"w-3 h-3\" />\r\n                                            </button>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <button\r\n                                            onClick={() => {\r\n                                                setAddingTopicToWeek(`edit-desc-${week.id}`);\r\n                                                setNewTopicBuffer(week.weekRange);\r\n                                            }}\r\n                                            className=\"text-[10px] font-black text-accent uppercase tracking-widest flex items-center gap-1 group-hover:gap-2 transition-all\"\r\n                                        >\r\n                                            Edit Details <ChevronRight className=\"w-3.5 h-3.5\" />\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            </motion.div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// --- SECTION 2: PRACTICE REFLECTION ---\r\nfunction ProblemSolvingSection({ store, onAdd }: { store: LifeTrackerStore; onAdd: () => void }) {\r\n    const state = store.getState();\r\n    const reflections: PracticeReflection[] = state.dsaProblems;\r\n    const [expandedCardId, setExpandedCardId] = useState<string | null>(null);\r\n    const [showFilters, setShowFilters] = useState(false);\r\n\r\n    // Filter states\r\n    const [filterPlatform, setFilterPlatform] = useState<'all' | 'LeetCode' | 'HackerRank' | 'Codeforces' | 'Other'>('all');\r\n    const [filterDifficulty, setFilterDifficulty] = useState<'all' | 'easy' | 'medium' | 'hard'>('all');\r\n    const [filterReviewStatus, setFilterReviewStatus] = useState<'all' | 'not-reviewed' | 'needs-review' | 'mastered'>('all');\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n\r\n    // Available topics for multi-select\r\n    const availableTopics = [\r\n        'Arrays', 'Strings', 'Two Pointers', 'Sliding Window', 'Binary Search',\r\n        'Trees', 'Graphs', 'DP', 'Backtracking', 'Heap', 'Stack', 'Queue',\r\n        'Linked List', 'Hash Map', 'Sorting', 'Recursion', 'Greedy', 'BFS', 'DFS',\r\n        'Trie', 'Union Find', 'Bit Manipulation', 'Math', 'Simulation'\r\n    ];\r\n\r\n    const platforms = [\r\n        { id: 'LeetCode', label: 'LeetCode', color: 'bg-orange-500' },\r\n        { id: 'HackerRank', label: 'HackerRank', color: 'bg-green-500' },\r\n        { id: 'Codeforces', label: 'Codeforces', color: 'bg-blue-500' },\r\n        { id: 'Other', label: 'Other', color: 'bg-purple-500' }\r\n    ];\r\n\r\n    // Filter reflections\r\n    const filteredReflections = reflections.filter(r => {\r\n        const matchesPlatform = filterPlatform === 'all' || r.platform === filterPlatform;\r\n        const matchesDifficulty = filterDifficulty === 'all' || r.difficulty === filterDifficulty;\r\n        const matchesReviewStatus = filterReviewStatus === 'all' || r.reviewStatus === filterReviewStatus;\r\n        const matchesSearch = searchQuery === '' ||\r\n            r.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            r.problemId.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            r.topics.some(t => t.toLowerCase().includes(searchQuery.toLowerCase()));\r\n        return matchesPlatform && matchesDifficulty && matchesReviewStatus && matchesSearch;\r\n    });\r\n\r\n    // Stats\r\n    const stats = {\r\n        total: reflections.length,\r\n        mastered: reflections.filter(r => r.reviewStatus === 'mastered').length,\r\n        needsReview: reflections.filter(r => r.reviewStatus === 'needs-review').length,\r\n        thisWeek: reflections.filter(r => {\r\n            if (!r.dateSolved) return false;\r\n            const date = new Date(r.dateSolved);\r\n            const weekAgo = new Date();\r\n            weekAgo.setDate(weekAgo.getDate() - 7);\r\n            return date >= weekAgo;\r\n        }).length\r\n    };\r\n\r\n    const getDifficultyStyle = (difficulty: string) => {\r\n        switch (difficulty) {\r\n            case 'easy': return 'bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400';\r\n            case 'medium': return 'bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400';\r\n            case 'hard': return 'bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400';\r\n            default: return 'bg-gray-100 text-gray-600';\r\n        }\r\n    };\r\n\r\n    const getReviewStatusStyle = (status: string) => {\r\n        switch (status) {\r\n            case 'mastered': return 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border-green-200';\r\n            case 'needs-review': return 'bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400 border-orange-200';\r\n            default: return 'bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400 border-gray-200';\r\n        }\r\n    };\r\n\r\n    const getPlatformColor = (platform: string) => {\r\n        switch (platform) {\r\n            case 'LeetCode': return 'bg-gradient-to-br from-orange-400 to-orange-600';\r\n            case 'HackerRank': return 'bg-gradient-to-br from-green-400 to-green-600';\r\n            case 'Codeforces': return 'bg-gradient-to-br from-blue-400 to-blue-600';\r\n            default: return 'bg-gradient-to-br from-purple-400 to-purple-600';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header Section with Stats */}\r\n            <div className=\"bg-gradient-to-br from-accent/5 via-transparent to-accent/10 rounded-4xl p-6 border border-accent/10\">\r\n                <div className=\"flex items-center justify-between mb-5\">\r\n                    <div>\r\n                        <h2 className=\"text-lg font-black text-heading-light dark:text-text-dark tracking-tight\">Practice Reflection</h2>\r\n                        <p className=\"text-[10px] text-silver font-bold uppercase tracking-widest mt-1\">Manual coding problem tracker</p>\r\n                    </div>\r\n                    <button\r\n                        onClick={onAdd}\r\n                        className=\"flex items-center gap-2 px-5 py-3 bg-accent text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-glow hover:scale-105 active:scale-95 transition-all\"\r\n                    >\r\n                        <Plus className=\"w-4 h-4\" /> Log Problem\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Quick Stats */}\r\n                <div className=\"grid grid-cols-4 gap-3\">\r\n                    <div className=\"bg-surface-light dark:bg-surface-dark p-4 rounded-2xl border border-border-light dark:border-border-dark text-center\">\r\n                        <p className=\"text-2xl font-black text-accent\">{stats.total}</p>\r\n                        <p className=\"text-[8px] font-bold text-silver uppercase tracking-widest\">Total</p>\r\n                    </div>\r\n                    <div className=\"bg-surface-light dark:bg-surface-dark p-4 rounded-2xl border border-border-light dark:border-border-dark text-center\">\r\n                        <p className=\"text-2xl font-black text-green-500\">{stats.mastered}</p>\r\n                        <p className=\"text-[8px] font-bold text-silver uppercase tracking-widest\">Mastered</p>\r\n                    </div>\r\n                    <div className=\"bg-surface-light dark:bg-surface-dark p-4 rounded-2xl border border-border-light dark:border-border-dark text-center\">\r\n                        <p className=\"text-2xl font-black text-orange-500\">{stats.needsReview}</p>\r\n                        <p className=\"text-[8px] font-bold text-silver uppercase tracking-widest\">Review</p>\r\n                    </div>\r\n                    <div className=\"bg-surface-light dark:bg-surface-dark p-4 rounded-2xl border border-border-light dark:border-border-dark text-center\">\r\n                        <p className=\"text-2xl font-black text-blue-500\">{stats.thisWeek}</p>\r\n                        <p className=\"text-[8px] font-bold text-silver uppercase tracking-widest\">This Week</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Search & Filter Bar */}\r\n            <div className=\"space-y-4\">\r\n                <div className=\"flex gap-3\">\r\n                    <div className=\"flex-1 relative group\">\r\n                        <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-silver group-focus-within:text-accent transition-colors\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search by title, ID, or topic...\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                            className=\"w-full pl-11 pr-4 py-3.5 bg-surface-light dark:bg-surface-dark border border-border-light dark:border-border-dark rounded-2xl text-sm font-medium placeholder:text-silver/50 focus:outline-none focus:ring-2 focus:ring-accent/20 focus:border-accent/30 transition-all\"\r\n                        />\r\n                    </div>\r\n                    <button\r\n                        onClick={() => setShowFilters(!showFilters)}\r\n                        className={`p-3.5 rounded-2xl border transition-all ${showFilters\r\n                            ? 'bg-accent text-white border-accent'\r\n                            : 'bg-surface-light dark:bg-surface-dark border-border-light dark:border-border-dark text-silver hover:text-accent hover:border-accent/30'}`}\r\n                    >\r\n                        <Filter className=\"w-5 h-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Expandable Filters */}\r\n                <AnimatePresence>\r\n                    {showFilters && (\r\n                        <motion.div\r\n                            initial={{ height: 0, opacity: 0 }}\r\n                            animate={{ height: 'auto', opacity: 1 }}\r\n                            exit={{ height: 0, opacity: 0 }}\r\n                            className=\"overflow-hidden\"\r\n                        >\r\n                            <div className=\"bg-surface-light dark:bg-surface-dark p-5 rounded-3xl border border-border-light dark:border-border-dark space-y-4\">\r\n                                {/* Platform Filter */}\r\n                                <div>\r\n                                    <p className=\"text-[9px] font-black text-silver uppercase tracking-widest mb-2\">Platform</p>\r\n                                    <div className=\"flex flex-wrap gap-2\">\r\n                                        <button\r\n                                            onClick={() => setFilterPlatform('all')}\r\n                                            className={`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${filterPlatform === 'all' ? 'bg-accent text-white' : 'bg-white-smoke dark:bg-background-dark text-silver hover:text-accent'}`}\r\n                                        >\r\n                                            All\r\n                                        </button>\r\n                                        {platforms.map(p => (\r\n                                            <button\r\n                                                key={p.id}\r\n                                                onClick={() => setFilterPlatform(p.id as typeof filterPlatform)}\r\n                                                className={`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${filterPlatform === p.id ? 'bg-accent text-white' : 'bg-white-smoke dark:bg-background-dark text-silver hover:text-accent'}`}\r\n                                            >\r\n                                                {p.label}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Difficulty Filter */}\r\n                                <div>\r\n                                    <p className=\"text-[9px] font-black text-silver uppercase tracking-widest mb-2\">Difficulty</p>\r\n                                    <div className=\"flex gap-2\">\r\n                                        {['all', 'easy', 'medium', 'hard'].map(d => (\r\n                                            <button\r\n                                                key={d}\r\n                                                onClick={() => setFilterDifficulty(d as typeof filterDifficulty)}\r\n                                                className={`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${filterDifficulty === d ? 'bg-accent text-white' : 'bg-white-smoke dark:bg-background-dark text-silver hover:text-accent'}`}\r\n                                            >\r\n                                                {d === 'all' ? 'All' : d}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Review Status Filter */}\r\n                                <div>\r\n                                    <p className=\"text-[9px] font-black text-silver uppercase tracking-widest mb-2\">Review Status</p>\r\n                                    <div className=\"flex flex-wrap gap-2\">\r\n                                        {[\r\n                                            { id: 'all', label: 'All' },\r\n                                            { id: 'not-reviewed', label: 'Not Reviewed' },\r\n                                            { id: 'needs-review', label: 'Needs Review' },\r\n                                            { id: 'mastered', label: 'Mastered' }\r\n                                        ].map(s => (\r\n                                            <button\r\n                                                key={s.id}\r\n                                                onClick={() => setFilterReviewStatus(s.id as typeof filterReviewStatus)}\r\n                                                className={`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${filterReviewStatus === s.id ? 'bg-accent text-white' : 'bg-white-smoke dark:bg-background-dark text-silver hover:text-accent'}`}\r\n                                            >\r\n                                                {s.label}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </div>\r\n\r\n            {/* Reflection Cards */}\r\n            <div className=\"space-y-4\">\r\n                {filteredReflections.length === 0 ? (\r\n                    <div className=\"p-16 text-center bg-surface-light dark:bg-surface-dark rounded-4xl border border-dashed border-border-light dark:border-border-dark\">\r\n                        <Lightbulb className=\"w-12 h-12 text-accent/30 mx-auto mb-4\" />\r\n                        <p className=\"text-sm font-bold text-subtext-light dark:text-subtext-dark\">No reflections yet</p>\r\n                        <p className=\"text-[10px] text-silver uppercase tracking-widest mt-2\">Log your first solved problem to start tracking</p>\r\n                        <button\r\n                            onClick={onAdd}\r\n                            className=\"mt-6 px-6 py-3 bg-accent/10 text-accent rounded-2xl text-[10px] font-black uppercase tracking-widest border border-accent/20 hover:bg-accent/20 transition-all\"\r\n                        >\r\n                            <Plus className=\"w-4 h-4 inline mr-2\" /> Add First Reflection\r\n                        </button>\r\n                    </div>\r\n                ) : (\r\n                    filteredReflections.map((reflection) => {\r\n                        const isExpanded = expandedCardId === reflection.id;\r\n                        return (\r\n                            <motion.div\r\n                                key={reflection.id}\r\n                                layout\r\n                                initial={{ opacity: 0, y: 10 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                className={`bg-surface-light dark:bg-surface-dark rounded-3xl border overflow-hidden transition-all ${isExpanded\r\n                                    ? 'border-accent shadow-luxury ring-1 ring-accent/10'\r\n                                    : 'border-border-light dark:border-border-dark hover:border-accent/30'}`}\r\n                            >\r\n                                {/* Card Header - Always Visible */}\r\n                                <div\r\n                                    className=\"p-5 cursor-pointer\"\r\n                                    onClick={() => setExpandedCardId(isExpanded ? null : reflection.id)}\r\n                                >\r\n                                    <div className=\"flex items-start gap-4\">\r\n                                        {/* Platform Badge */}\r\n                                        <div className={`w-12 h-12 ${getPlatformColor(reflection.platform)} rounded-2xl flex items-center justify-center text-white shadow-md flex-shrink-0`}>\r\n                                            <Code2 className=\"w-6 h-6\" />\r\n                                        </div>\r\n\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <div className=\"flex items-start justify-between gap-2\">\r\n                                                <div>\r\n                                                    <h4 className=\"font-black text-heading-light dark:text-text-dark tracking-tight line-clamp-1\">\r\n                                                        {reflection.title || `Problem #${reflection.problemId}`}\r\n                                                    </h4>\r\n                                                    <div className=\"flex items-center gap-2 mt-1.5 flex-wrap\">\r\n                                                        <span className=\"text-[9px] font-bold text-silver uppercase tracking-wider\">\r\n                                                            {reflection.platform} â€¢ #{reflection.problemId}\r\n                                                        </span>\r\n                                                        <span className={`text-[8px] font-black uppercase px-2 py-0.5 rounded-md ${getDifficultyStyle(reflection.difficulty)}`}>\r\n                                                            {reflection.difficulty}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <ChevronRight className={`w-5 h-5 text-silver flex-shrink-0 transition-transform duration-300 ${isExpanded ? 'rotate-90 text-accent' : ''}`} />\r\n                                            </div>\r\n\r\n                                            {/* Topics Tags */}\r\n                                            {reflection.topics && reflection.topics.length > 0 && (\r\n                                                <div className=\"flex flex-wrap gap-1.5 mt-3\">\r\n                                                    {reflection.topics.slice(0, 4).map((topic, idx) => (\r\n                                                        <span\r\n                                                            key={idx}\r\n                                                            className=\"px-2 py-1 bg-accent/10 text-accent text-[9px] font-bold rounded-lg\"\r\n                                                        >\r\n                                                            {topic}\r\n                                                        </span>\r\n                                                    ))}\r\n                                                    {reflection.topics.length > 4 && (\r\n                                                        <span className=\"px-2 py-1 bg-gray-100 dark:bg-gray-800 text-silver text-[9px] font-bold rounded-lg\">\r\n                                                            +{reflection.topics.length - 4}\r\n                                                        </span>\r\n                                                    )}\r\n                                                </div>\r\n                                            )}\r\n\r\n                                            {/* Quick Info Row */}\r\n                                            <div className=\"flex items-center gap-4 mt-3 text-[10px] text-silver\">\r\n                                                <span className=\"flex items-center gap-1\">\r\n                                                    <Calendar className=\"w-3 h-3\" />\r\n                                                    {reflection.dateSolved ? new Date(reflection.dateSolved).toLocaleDateString() : 'Today'}\r\n                                                </span>\r\n                                                {reflection.timeSpent && (\r\n                                                    <span className=\"flex items-center gap-1\">\r\n                                                        <Clock className=\"w-3 h-3\" />\r\n                                                        {reflection.timeSpent} min\r\n                                                    </span>\r\n                                                )}\r\n                                                <span className={`px-2 py-0.5 rounded-md text-[8px] font-bold uppercase ${getReviewStatusStyle(reflection.reviewStatus)}`}>\r\n                                                    {reflection.reviewStatus.replace('-', ' ')}\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Expanded Content */}\r\n                                <AnimatePresence>\r\n                                    {isExpanded && (\r\n                                        <motion.div\r\n                                            initial={{ height: 0, opacity: 0 }}\r\n                                            animate={{ height: 'auto', opacity: 1 }}\r\n                                            exit={{ height: 0, opacity: 0 }}\r\n                                            className=\"border-t border-border-light dark:border-border-dark\"\r\n                                        >\r\n                                            <div className=\"p-5 space-y-5 bg-white-smoke/30 dark:bg-background-dark/30\">\r\n                                                {/* What I Learned */}\r\n                                                <div className=\"space-y-2\">\r\n                                                    <p className=\"text-[9px] font-black text-accent uppercase tracking-widest flex items-center gap-1.5\">\r\n                                                        <Lightbulb className=\"w-3 h-3\" /> What I Learned\r\n                                                    </p>\r\n                                                    <textarea\r\n                                                        className=\"w-full bg-surface-light dark:bg-surface-dark text-[11px] font-medium leading-relaxed text-subtext-light dark:text-subtext-dark focus:outline-none focus:ring-2 focus:ring-accent/20 min-h-[80px] resize-none p-3 rounded-xl border border-border-light dark:border-border-dark\"\r\n                                                        placeholder=\"Key insight, algorithm used, mistakes made, optimization learned...\"\r\n                                                        defaultValue={reflection.whatILearned}\r\n                                                        onBlur={(e) => store.updateDSAProblem(reflection.id, { whatILearned: e.target.value })}\r\n                                                    />\r\n                                                </div>\r\n\r\n                                                {/* Comparison Notes */}\r\n                                                <div className=\"space-y-2\">\r\n                                                    <p className=\"text-[9px] font-black text-blue-500/70 uppercase tracking-widest flex items-center gap-1.5\">\r\n                                                        <FileText className=\"w-3 h-3\" /> Comparison Notes (Optional)\r\n                                                    </p>\r\n                                                    <textarea\r\n                                                        className=\"w-full bg-surface-light dark:bg-surface-dark text-[11px] font-medium leading-relaxed text-subtext-light dark:text-subtext-dark focus:outline-none focus:ring-2 focus:ring-accent/20 min-h-[60px] resize-none p-3 rounded-xl border border-border-light dark:border-border-dark\"\r\n                                                        placeholder=\"How does this relate to similar problems on other platforms?\"\r\n                                                        defaultValue={reflection.comparisonNotes || ''}\r\n                                                        onBlur={(e) => store.updateDSAProblem(reflection.id, { comparisonNotes: e.target.value })}\r\n                                                    />\r\n                                                </div>\r\n\r\n                                                {/* Topic Tags Editor */}\r\n                                                <div className=\"space-y-2\">\r\n                                                    <p className=\"text-[9px] font-black text-silver uppercase tracking-widest\">Topics / Patterns</p>\r\n                                                    <div className=\"flex flex-wrap gap-1.5\">\r\n                                                        {availableTopics.map(topic => {\r\n                                                            const isSelected = reflection.topics?.includes(topic);\r\n                                                            return (\r\n                                                                <button\r\n                                                                    key={topic}\r\n                                                                    onClick={() => {\r\n                                                                        const newTopics = isSelected\r\n                                                                            ? reflection.topics.filter(t => t !== topic)\r\n                                                                            : [...(reflection.topics || []), topic];\r\n                                                                        store.updateDSAProblem(reflection.id, { topics: newTopics });\r\n                                                                    }}\r\n                                                                    className={`px-2.5 py-1 rounded-lg text-[9px] font-bold transition-all ${isSelected\r\n                                                                        ? 'bg-accent text-white'\r\n                                                                        : 'bg-white-smoke dark:bg-background-dark text-silver hover:text-accent hover:bg-accent/10 border border-border-light dark:border-border-dark'}`}\r\n                                                                >\r\n                                                                    {topic}\r\n                                                                </button>\r\n                                                            );\r\n                                                        })}\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                {/* Review Status Selector */}\r\n                                                <div className=\"space-y-2\">\r\n                                                    <p className=\"text-[9px] font-black text-silver uppercase tracking-widest\">Review Status</p>\r\n                                                    <div className=\"flex gap-2\">\r\n                                                        {[\r\n                                                            { id: 'not-reviewed', label: 'Not Reviewed', icon: Circle },\r\n                                                            { id: 'needs-review', label: 'Needs Review', icon: AlertCircle },\r\n                                                            { id: 'mastered', label: 'Mastered', icon: CheckCircle2 }\r\n                                                        ].map(status => {\r\n                                                            const isActive = reflection.reviewStatus === status.id;\r\n                                                            return (\r\n                                                                <button\r\n                                                                    key={status.id}\r\n                                                                    onClick={() => store.updateDSAProblem(reflection.id, { reviewStatus: status.id as PracticeReflection['reviewStatus'] })}\r\n                                                                    className={`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-[10px] font-bold uppercase tracking-wider transition-all border ${isActive\r\n                                                                        ? getReviewStatusStyle(status.id) + ' border-current'\r\n                                                                        : 'bg-white-smoke dark:bg-background-dark text-silver border-border-light dark:border-border-dark hover:border-accent/30'}`}\r\n                                                                >\r\n                                                                    <status.icon className=\"w-4 h-4\" />\r\n                                                                    {status.label.split(' ')[0]}\r\n                                                                </button>\r\n                                                            );\r\n                                                        })}\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                {/* Time & Link */}\r\n                                                <div className=\"grid grid-cols-2 gap-3\">\r\n                                                    <div className=\"space-y-1.5\">\r\n                                                        <p className=\"text-[9px] font-black text-silver uppercase tracking-widest\">Time Spent (min)</p>\r\n                                                        <input\r\n                                                            type=\"number\"\r\n                                                            className=\"w-full bg-surface-light dark:bg-surface-dark text-[11px] font-medium p-3 rounded-xl border border-border-light dark:border-border-dark focus:outline-none focus:ring-2 focus:ring-accent/20\"\r\n                                                            placeholder=\"e.g. 45\"\r\n                                                            defaultValue={reflection.timeSpent || ''}\r\n                                                            onBlur={(e) => store.updateDSAProblem(reflection.id, { timeSpent: parseInt(e.target.value) || undefined })}\r\n                                                        />\r\n                                                    </div>\r\n                                                    <div className=\"space-y-1.5\">\r\n                                                        <p className=\"text-[9px] font-black text-silver uppercase tracking-widest\">Problem Link</p>\r\n                                                        <input\r\n                                                            type=\"url\"\r\n                                                            className=\"w-full bg-surface-light dark:bg-surface-dark text-[11px] font-medium p-3 rounded-xl border border-border-light dark:border-border-dark focus:outline-none focus:ring-2 focus:ring-accent/20\"\r\n                                                            placeholder=\"https://...\"\r\n                                                            defaultValue={reflection.link || ''}\r\n                                                            onBlur={(e) => store.updateDSAProblem(reflection.id, { link: e.target.value })}\r\n                                                        />\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                {/* Action Buttons */}\r\n                                                <div className=\"flex items-center justify-between pt-3 border-t border-border-light dark:border-border-dark\">\r\n                                                    <div className=\"flex gap-2\">\r\n                                                        <button\r\n                                                            onClick={() => store.duplicateDSAProblem(reflection.id)}\r\n                                                            className=\"flex items-center gap-1.5 px-4 py-2 bg-white-smoke dark:bg-background-dark text-silver rounded-xl text-[10px] font-bold uppercase tracking-wider hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all border border-border-light dark:border-border-dark\"\r\n                                                        >\r\n                                                            <Copy className=\"w-3.5 h-3.5\" /> Duplicate\r\n                                                        </button>\r\n                                                        <button\r\n                                                            onClick={() => {\r\n                                                                if (confirm('Delete this reflection?')) {\r\n                                                                    store.deleteDSAProblem(reflection.id);\r\n                                                                }\r\n                                                            }}\r\n                                                            className=\"flex items-center gap-1.5 px-4 py-2 bg-white-smoke dark:bg-background-dark text-silver rounded-xl text-[10px] font-bold uppercase tracking-wider hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-all border border-border-light dark:border-border-dark\"\r\n                                                        >\r\n                                                            <Trash2 className=\"w-3.5 h-3.5\" /> Delete\r\n                                                        </button>\r\n                                                    </div>\r\n                                                    {reflection.link && (\r\n                                                        <button\r\n                                                            onClick={() => window.open(reflection.link, '_blank')}\r\n                                                            className=\"flex items-center gap-1.5 px-4 py-2 bg-accent/10 text-accent rounded-xl text-[10px] font-bold uppercase tracking-wider hover:bg-accent/20 transition-all\"\r\n                                                        >\r\n                                                            <ExternalLink className=\"w-3.5 h-3.5\" /> Open Problem\r\n                                                        </button>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                        </motion.div>\r\n                                    )}\r\n                                </AnimatePresence>\r\n                            </motion.div>\r\n                        );\r\n                    })\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n// --- SECTION 3: VIDEO RESOURCE LIBRARY ---\r\nfunction VideoLibrarySection({ store, onAdd }: { store: LifeTrackerStore; onAdd: () => void }) {\r\n    const { logBlockedAttempt, checkKeywords, checkUrl } = useContentProtection();\r\n    const state = store.getState();\r\n    const videos: VideoResource[] = state.videoResources;\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [activeFilter, setActiveFilter] = useState('All');\r\n    const [refiningVideoId, setRefiningVideoId] = useState<string | null>(null);\r\n    const [refiningBuffer, setRefiningBuffer] = useState('');\r\n    const scrollRef = React.useRef<HTMLDivElement>(null);\r\n\r\n    const scrollFilters = (direction: 'left' | 'right') => {\r\n        if (scrollRef.current) {\r\n            // Paging: Scroll by roughly 4 items width (each ~120px + gap)\r\n            const scrollAmount = 480;\r\n            scrollRef.current.scrollBy({ left: direction === 'left' ? -scrollAmount : scrollAmount, behavior: 'smooth' });\r\n        }\r\n    };\r\n\r\n    const filters = ['All', 'Full Stack', 'Data Science', 'DevOps', 'DSA', 'Core CS', 'System Design', 'ML', 'AI', 'Agents', 'Neural Networks'];\r\n\r\n    const getYoutubeID = (url: string) => {\r\n        const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\r\n        const match = url.match(regExp);\r\n        return (match && match[2].length === 11) ? match[2] : null;\r\n    };\r\n\r\n    const filteredVideos = videos.filter(v => {\r\n        const matchesFilter = activeFilter === 'All' || v.domain === activeFilter;\r\n        const matchesSearch = v.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            (v.description || '').toLowerCase().includes(searchQuery.toLowerCase());\r\n        return matchesFilter && matchesSearch;\r\n    });\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            {/* Search & Filter */}\r\n            <div className=\"space-y-6\">\r\n                <div className=\"relative group\">\r\n                    <Search className=\"absolute left-5 top-1/2 -translate-y-1/2 w-4 h-4 text-silver group-focus-within:text-accent transition-all duration-300\" />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search Intel & Archives...\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => {\r\n                            const val = e.target.value;\r\n                            if (val.trim()) {\r\n                                const keywordResult = checkKeywords(val);\r\n                                if (keywordResult.blocked) {\r\n                                    alert(`Search Blocked: ${keywordResult.reason}`);\r\n                                    logBlockedAttempt(undefined, val, keywordResult.reason);\r\n                                    return;\r\n                                }\r\n                            }\r\n                            setSearchQuery(val);\r\n                        }}\r\n                        className=\"w-full pl-12 pr-6 py-4 bg-surface-light dark:bg-surface-dark border border-border-light dark:border-border-dark rounded-2xl text-sm font-bold placeholder:text-silver/50 focus:outline-none focus:ring-2 focus:ring-accent/10 transition-all shadow-soft\"\r\n                    />\r\n                </div>\r\n                <div className=\"relative group/carousel\">\r\n                    {/* Carousel Nav */}\r\n                    <button\r\n                        onClick={() => scrollFilters('left')}\r\n                        className=\"absolute -left-4 top-1/2 -translate-y-1/2 z-20 p-2 bg-surface-light dark:bg-surface-dark border border-border-light dark:border-border-dark rounded-full shadow-luxury opacity-0 group-hover/carousel:opacity-100 transition-opacity\"\r\n                    >\r\n                        <ArrowLeft className=\"w-4 h-4 text-accent\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={() => scrollFilters('right')}\r\n                        className=\"absolute -right-4 top-1/2 -translate-y-1/2 z-20 p-2 bg-surface-light dark:bg-surface-dark border border-border-light dark:border-border-dark rounded-full shadow-luxury opacity-0 group-hover/carousel:opacity-100 transition-opacity\"\r\n                    >\r\n                        <ChevronRight className=\"w-4 h-4 text-accent\" />\r\n                    </button>\r\n\r\n                    <div ref={scrollRef} className=\"flex gap-3 overflow-x-auto no-scrollbar pb-4 scroll-smooth px-1 mask-fade-edges\">\r\n                        {filters.map(filter => (\r\n                            <button\r\n                                key={filter}\r\n                                onClick={() => setActiveFilter(filter)}\r\n                                className={`px-8 py-4.5 rounded-[22px] text-[11px] font-black uppercase tracking-[0.1em] whitespace-nowrap transition-all border-2 ${activeFilter === filter\r\n                                    ? 'bg-accent text-white border-accent shadow-[0_10px_30px_rgba(var(--accent-rgb),0.3)] scale-105 z-10'\r\n                                    : 'bg-surface-light dark:bg-surface-dark text-silver border-border-light dark:border-border-dark hover:border-accent/30 hover:bg-accent/5'\r\n                                    }`}\r\n                            >\r\n                                {filter}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 gap-5\">\r\n                <div className=\"flex items-center justify-between px-2\">\r\n                    <h3 className=\"text-[10px] font-black uppercase tracking-widest text-[#847777]/60\">Categorized Intel</h3>\r\n                    <button\r\n                        onClick={onAdd}\r\n                        className=\"p-2 bg-accent/10 text-accent rounded-2xl hover:bg-accent/20 transition-all border border-accent/10\"\r\n                    >\r\n                        <Plus className=\"w-5 h-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {filteredVideos.length === 0 ? (\r\n                    <div className=\"p-20 text-center\">\r\n                        <Youtube className=\"w-12 h-12 text-silver mx-auto mb-5 opacity-20\" />\r\n                        <p className=\"text-[10px] font-black text-silver uppercase tracking-widest\">Library empty.</p>\r\n                    </div>\r\n                ) : (\r\n                    filteredVideos.map(video => {\r\n                        const thumbId = getYoutubeID(video.url);\r\n                        return (\r\n                            <motion.div\r\n                                key={video.id}\r\n                                layout\r\n                                className=\"bg-surface-light dark:bg-surface-dark rounded-4xl overflow-hidden border border-border-light dark:border-border-dark shadow-soft group hover:shadow-luxury transition-all\"\r\n                            >\r\n                                <div className=\"aspect-video bg-background-dark/80 flex items-center justify-center relative shadow-inner overflow-hidden\">\r\n                                    {thumbId ? (\r\n                                        <img\r\n                                            src={`https://img.youtube.com/vi/${thumbId}/maxresdefault.jpg`}\r\n                                            alt={video.title}\r\n                                            className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700\"\r\n                                            onError={(e) => { (e.target as HTMLImageElement).src = `https://img.youtube.com/vi/${thumbId}/0.jpg`; }}\r\n                                        />\r\n                                    ) : (\r\n                                        <Play className=\"w-12 h-12 text-white/30 group-hover:scale-110 group-hover:text-accent/60 transition-all duration-500\" />\r\n                                    )}\r\n                                    <div className=\"absolute inset-0 bg-black/20 group-hover:bg-black/0 transition-colors\" />\r\n                                    <div className=\"absolute top-5 left-5\">\r\n                                        <span className=\"px-3 py-1.5 bg-black/60 backdrop-blur-md text-white text-[9px] font-black uppercase rounded-xl border border-white/10 tracking-widest\">\r\n                                            {video.domain}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div className=\"absolute bottom-5 right-5 p-3 bg-accent rounded-2xl opacity-0 group-hover:opacity-100 transition-all translate-y-2 group-hover:translate-y-0 shadow-glow\">\r\n                                        <Play className=\"w-5 h-5 text-white fill-current\" />\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"p-6\">\r\n                                    <h4 className=\"font-black text-xl text-heading-light dark:text-text-dark mb-2 leading-tight tracking-tight\">{video.title}</h4>\r\n                                    <div className=\"flex items-center gap-2 mb-4\">\r\n                                        <Youtube className=\"w-3.5 h-3.5 text-rose-500\" />\r\n                                        <span className=\"text-[10px] font-mono text-silver truncate max-w-[200px]\">{video.url}</span>\r\n                                    </div>\r\n                                    <p className=\"text-xs text-silver line-clamp-2 mb-6 font-medium leading-relaxed\">\r\n                                        {video.description}\r\n                                    </p>\r\n                                    <div className=\"grid grid-cols-2 gap-3\">\r\n                                        {refiningVideoId === video.id ? (\r\n                                            <div className=\"col-span-1 flex gap-2 items-center bg-white-smoke dark:bg-background-dark p-1 pr-2 rounded-2xl border border-accent/30 animate-in fade-in slide-in-from-bottom-2 duration-300\">\r\n                                                <input\r\n                                                    autoFocus\r\n                                                    type=\"text\"\r\n                                                    value={refiningBuffer}\r\n                                                    onChange={(e) => setRefiningBuffer(e.target.value)}\r\n                                                    onKeyDown={(e) => {\r\n                                                        if (e.key === 'Enter' && refiningBuffer.trim()) {\r\n                                                            store.addVideoResource({ ...video, description: refiningBuffer.trim() });\r\n                                                            setRefiningVideoId(null);\r\n                                                            setRefiningBuffer('');\r\n                                                        }\r\n                                                        if (e.key === 'Escape') setRefiningVideoId(null);\r\n                                                    }}\r\n                                                    className=\"bg-transparent text-[10px] font-bold px-3 py-3 focus:outline-none w-full text-accent\"\r\n                                                />\r\n                                                <button onClick={() => setRefiningVideoId(null)} className=\"text-silver hover:text-rose-500 p-2\">\r\n                                                    <X className=\"w-4 h-4\" />\r\n                                                </button>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <button\r\n                                                onClick={() => {\r\n                                                    setRefiningVideoId(video.id);\r\n                                                    setRefiningBuffer(video.description || '');\r\n                                                }}\r\n                                                className=\"py-4 bg-white-smoke dark:bg-background-dark border border-border-light dark:border-border-dark text-silver rounded-2xl text-[10px] font-black uppercase tracking-widest hover:border-accent transition-all relative overflow-hidden group/edit\"\r\n                                            >\r\n                                                <span className=\"relative z-10\">Refine Intel</span>\r\n                                                <div className=\"absolute inset-0 bg-accent translate-y-full group-hover/edit:translate-y-0 transition-transform duration-300 opacity-5\" />\r\n                                            </button>\r\n                                        )}\r\n                                        <button\r\n                                            onClick={() => {\r\n                                                if (!video.url) return;\r\n                                                const protectionResult = checkUrl(video.url);\r\n                                                if (protectionResult.blocked) {\r\n                                                    alert(`Access Blocked: ${protectionResult.reason}`);\r\n                                                    logBlockedAttempt(video.url, undefined, protectionResult.reason);\r\n                                                    return;\r\n                                                }\r\n                                                window.open(video.url, '_blank');\r\n                                            }}\r\n                                            className=\"py-4 bg-white-smoke dark:bg-background-dark border border-border-light dark:border-border-dark text-accent rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-elegant hover:shadow-luxury transition-all flex items-center justify-center gap-2\"\r\n                                        >\r\n                                            Launch <ExternalLink className=\"w-4 h-4\" />\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </motion.div>\r\n                        );\r\n                    })\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n// --- SECTION 4: PROJECTS & VAULT ---\r\nfunction ProjectsVaultSection({ store, onAdd }: { store: LifeTrackerStore; onAdd: () => void }) {\r\n    const state = store.getState();\r\n    const projects: CodingProject[] = state.codingProjects;\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <div className=\"flex items-center justify-between px-2\">\r\n                <div>\r\n                    <h3 className=\"text-[10px] font-black uppercase tracking-widest text-[#847777]/60\">Execution Lab</h3>\r\n                    <p className=\"text-[9px] text-silver font-bold uppercase tracking-widest mt-1\">Materialize Thoughts</p>\r\n                </div>\r\n                <button\r\n                    onClick={onAdd}\r\n                    className=\"flex items-center gap-2.5 px-6 py-3 bg-accent text-white rounded-3xl text-[10px] font-black uppercase tracking-widest shadow-glow hover:scale-105 active:scale-95 transition-all\"\r\n                >\r\n                    <Plus className=\"w-4 h-4\" /> Add Project\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"space-y-5\">\r\n                {projects.length === 0 ? (\r\n                    <div className=\"p-16 text-center bg-surface-light dark:bg-surface-dark rounded-4xl border border-dashed border-border-light dark:border-border-dark\">\r\n                        <Layout className=\"w-12 h-12 text-silver mx-auto mb-4 opacity-20\" />\r\n                        <p className=\"text-[10px] font-black text-silver uppercase tracking-widest\">Lab Inactive.</p>\r\n                    </div>\r\n                ) : (\r\n                    projects.map(project => (\r\n                        <div key={project.id} className=\"bg-surface-light dark:bg-surface-dark rounded-4xl border border-border-light dark:border-border-dark shadow-soft overflow-hidden group hover:border-accent/40 transition-all\">\r\n                            <div className=\"p-7\">\r\n                                <div className=\"flex items-start justify-between mb-6\">\r\n                                    <div>\r\n                                        <h4 className=\"font-black text-2xl text-heading-light dark:text-text-dark tracking-tighter leading-none mb-2\">{project.title}</h4>\r\n                                        <div className={`inline-flex px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest ${project.status === 'completed' ? 'bg-green-100 text-green-600' :\r\n                                            project.status === 'in-progress' ? 'bg-blue-100 text-blue-600' : 'bg-white-smoke dark:bg-background-dark text-silver shadow-inner'\r\n                                            }`}>\r\n                                            {project.status}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2 p-2 bg-white-smoke dark:bg-background-dark rounded-xl\">\r\n                                        <Clock className=\"w-3.5 h-3.5 text-accent\" />\r\n                                        <span className=\"text-[9px] font-black text-accent uppercase tracking-widest\">Active</span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-2 gap-6 mb-8\">\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <p className=\"text-[9px] font-black text-silver uppercase tracking-widest\">Core Objective</p>\r\n                                        <p className=\"text-[11px] font-medium leading-relaxed text-subtext-light dark:text-subtext-dark line-clamp-2\">{project.objective}</p>\r\n                                    </div>\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <p className=\"text-[9px] font-black text-silver uppercase tracking-widest\">Tech Stack</p>\r\n                                        <div className=\"flex flex-wrap gap-1.5\">\r\n                                            {project.techStack.length === 0 ? (\r\n                                                <button\r\n                                                    onClick={() => {\r\n                                                        const tech = prompt('Add Tech (e.g. React, Node):');\r\n                                                        if (tech) store.updateCodingProject(project.id, { techStack: [...project.techStack, tech] });\r\n                                                    }}\r\n                                                    className=\"text-[10px] text-accent font-black uppercase tracking-widest border border-dashed border-accent/20 px-2 py-1 rounded-lg\"\r\n                                                >\r\n                                                    + Tech\r\n                                                </button>\r\n                                            ) : (\r\n                                                project.techStack.map(t => (\r\n                                                    <span key={t} className=\"px-2 py-1 bg-accent/5 border border-accent/10 rounded-lg text-[9px] font-black text-accent tracking-widest\">{t}</span>\r\n                                                ))\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-2 gap-3 mb-8\">\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            const newGoal = prompt('Update Objective:', project.objective);\r\n                                            if (newGoal) store.updateCodingProject(project.id, { objective: newGoal });\r\n                                        }}\r\n                                        className=\"py-3.5 bg-white-smoke dark:bg-background-dark border border-border-light dark:border-border-dark rounded-2xl text-[9px] font-black uppercase tracking-widest hover:border-accent transition-all\"\r\n                                    >\r\n                                        Edit Objective\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            const status = prompt('Set Status (planning, in-progress, completed):', project.status);\r\n                                            if (status) store.updateCodingProject(project.id, { status: status as 'planning' | 'in-progress' | 'completed' });\r\n                                        }}\r\n                                        className=\"py-3.5 bg-white-smoke dark:bg-background-dark border border-border-light dark:border-border-dark rounded-2xl text-[9px] font-black uppercase tracking-widest hover:border-accent transition-all\"\r\n                                    >\r\n                                        Update Status\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <div className=\"pt-6 border-t border-border-light dark:border-border-dark\">\r\n                                    <div className=\"space-y-4\">\r\n                                        <div className=\"p-5 bg-white-smoke/50 dark:bg-background-dark/50 rounded-3xl border border-border-light dark:border-border-dark group-hover:border-accent/10 transition-all\">\r\n                                            <p className=\"text-[9px] font-black text-accent uppercase tracking-widest mb-2 flex items-center gap-2\">\r\n                                                <Sparkles className=\"w-4 h-4\" /> Learned Essence\r\n                                            </p>\r\n                                            <p className=\"text-[11px] text-silver font-medium leading-relaxed italic\">\r\n                                                {project.notes?.learnings || 'Scanning for insights...'}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button className=\"w-full mt-6 flex items-center justify-center gap-2 text-[10px] font-black text-silver uppercase tracking-widest hover:text-accent transition-all group-hover:translate-x-1 duration-500\">\r\n                                        Detailed Vessel Logs <ChevronRight className=\"w-4 h-4\" />\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// --- SECTION 5: KNOWLEDGE BASE ---\r\nfunction KnowledgeBaseSection({ store, onAddConcept, onAddLog, onAddJournal }: { store: LifeTrackerStore; onAddConcept: () => void; onAddLog: () => void; onAddJournal: () => void }) {\r\n    const { logBlockedAttempt, checkKeywords } = useContentProtection();\r\n    const state = store.getState();\r\n    const [selectedType, setSelectedType] = useState<'Concept' | 'Debug' | 'Daily'>('Concept');\r\n\r\n    const types: { id: 'Concept' | 'Debug' | 'Daily'; icon: LucideIcon; label: string; desc: string }[] = [\r\n        { id: 'Concept', icon: Book, label: 'Vault', desc: 'Conceptual Core' },\r\n        { id: 'Debug', icon: Bug, label: 'Logs', desc: 'Anomalies & Fixes' },\r\n        { id: 'Daily', icon: Edit2, label: 'Journal', desc: 'Flow State Logs' }\r\n    ];\r\n\r\n    const logs = state.debugLogs;\r\n    const notes = state.csNotes;\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            {/* Minimal Search Bar */}\r\n            <div className=\"relative group\">\r\n                <Search className=\"absolute left-5 top-1/2 -translate-y-1/2 w-4 h-4 text-silver group-focus-within:text-accent transition-all duration-300\" />\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Search Knowledge Base / Logs / Daily...\"\r\n                    onChange={(e) => {\r\n                        const val = e.target.value;\r\n                        if (val.trim()) {\r\n                            const keywordResult = checkKeywords(val);\r\n                            if (keywordResult.blocked) {\r\n                                alert(`Search Blocked: ${keywordResult.reason}`);\r\n                                logBlockedAttempt(undefined, val, keywordResult.reason);\r\n                                return;\r\n                            }\r\n                        }\r\n                    }}\r\n                    className=\"w-full pl-12 pr-6 py-4 bg-surface-light dark:bg-surface-dark border border-border-light dark:border-border-dark rounded-2xl text-sm font-bold placeholder:text-silver/50 focus:outline-none focus:ring-2 focus:ring-accent/10 transition-all shadow-soft\"\r\n                />\r\n            </div>\r\n\r\n            {/* Sidebar-like Type Tabs */}\r\n            <div className=\"flex gap-3\">\r\n                {types.map(t => (\r\n                    <button\r\n                        key={t.id}\r\n                        onClick={() => setSelectedType(t.id)}\r\n                        className={`flex-1 p-5 rounded-4xl border transition-all text-center flex flex-col items-center gap-3 ${selectedType === t.id\r\n                            ? 'bg-surface-light dark:bg-surface-dark border-accent shadow-luxury ring-1 ring-accent/10'\r\n                            : 'bg-surface-light dark:bg-surface-dark border-border-light dark:border-border-dark opacity-60'\r\n                            }`}\r\n                    >\r\n                        <t.icon className={`w-6 h-6 ${selectedType === t.id ? 'text-accent' : 'text-silver'}`} />\r\n                        <div>\r\n                            <span className=\"text-[9px] font-black uppercase tracking-widest text-heading-light dark:text-text-dark leading-none\">{t.label}</span>\r\n                            <p className=\"text-[7px] text-silver font-bold uppercase mt-1 tracking-tighter line-clamp-1\">{t.desc}</p>\r\n                        </div>\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"space-y-5\">\r\n                <div className=\"flex items-center justify-between px-2\">\r\n                    <h3 className=\"text-[10px] font-black uppercase tracking-widest text-[#847777]/60\">{selectedType} Stream</h3>\r\n                    <button\r\n                        onClick={() => {\r\n                            if (selectedType === 'Debug') onAddLog();\r\n                            else if (selectedType === 'Concept') onAddConcept();\r\n                            else onAddJournal();\r\n                        }}\r\n                        className=\"p-2.5 bg-accent/10 text-accent rounded-2xl hover:bg-accent/20 transition-all border border-accent/10\"\r\n                    >\r\n                        <Plus className=\"w-5 h-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                <AnimatePresence mode=\"wait\">\r\n                    {selectedType === 'Debug' ? (\r\n                        <motion.div\r\n                            key=\"debug\"\r\n                            initial={{ opacity: 0, scale: 0.98 }}\r\n                            animate={{ opacity: 1, scale: 1 }}\r\n                            exit={{ opacity: 0, scale: 0.98 }}\r\n                            className=\"space-y-4\"\r\n                        >\r\n                            {logs.length === 0 ? (\r\n                                <div className=\"p-16 text-center text-silver font-black text-[10px] uppercase tracking-widest italic opacity-40\">System Stable.</div>\r\n                            ) : (\r\n                                logs.map((log: DebugLog) => (\r\n                                    <div\r\n                                        key={log.id}\r\n                                        className=\"bg-background-dark p-6 rounded-4xl border border-white/5 shadow-luxury group\"\r\n                                    >\r\n                                        <div className=\"flex items-center gap-3 mb-4\">\r\n                                            <div className=\"w-2.5 h-2.5 rounded-full bg-rose-500 animate-pulse shadow-[0_0_10px_rgba(244,63,94,0.5)]\" />\r\n                                            <span className=\"text-[9px] font-black text-white/30 uppercase tracking-widest font-mono\">{log.date}</span>\r\n                                        </div>\r\n                                        <h4 className=\"text-white font-black text-lg mb-4 tracking-tight leading-tight group-hover:text-accent transition-colors\">{log.issue}</h4>\r\n                                        <div className=\"bg-white/5 p-5 rounded-3xl border border-white/5 shadow-inner\">\r\n                                            <div className=\"flex items-center gap-2 mb-2.5\">\r\n                                                <span className=\"text-[9px] font-black text-accent uppercase tracking-widest\">Protocol Solution</span>\r\n                                            </div>\r\n                                            <p className=\"text-[11px] text-gray-400 font-medium leading-relaxed font-mono\">\r\n                                                {log.solution}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                ))\r\n                            )}\r\n                        </motion.div>\r\n                    ) : (\r\n                        <motion.div\r\n                            key=\"notes\"\r\n                            initial={{ opacity: 0, scale: 0.98 }}\r\n                            animate={{ opacity: 1, scale: 1 }}\r\n                            exit={{ opacity: 0, scale: 0.98 }}\r\n                            className=\"space-y-5\"\r\n                        >\r\n                            {notes.length === 0 ? (\r\n                                <div className=\"p-20 text-center text-silver font-black text-[10px] uppercase tracking-widest italic opacity-40\">Frequency Clear.</div>\r\n                            ) : (\r\n                                notes.map((note: CSNote) => (\r\n                                    <div key={note.id} className=\"bg-surface-light dark:bg-surface-dark p-6 rounded-4xl border border-border-light dark:border-border-dark shadow-soft group hover:border-accent/40 transition-all\">\r\n                                        <h4 className=\"font-black text-xl text-heading-light dark:text-text-dark mb-3 tracking-tighter\">{note.title}</h4>\r\n                                        <p className=\"text-xs text-silver leading-loose font-medium line-clamp-4 italic mb-5\">\r\n                                            {note.content}\r\n                                        </p>\r\n                                        <div className=\"flex flex-wrap gap-2\">\r\n                                            {note.tags.map((tag: string) => (\r\n                                                <span key={tag} className=\"px-3 py-1 bg-white-smoke dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-[9px] font-black text-accent uppercase tracking-widest\">\r\n                                                    #{tag}\r\n                                                </span>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                ))\r\n                            )}\r\n\r\n                            {/* Rich Text Editor Mockup */}\r\n                            <div className=\"p-10 border-2 border-dashed border-border-light dark:border-border-dark rounded-4xl flex items-center justify-center group hover:border-accent transition-all cursor-pointer\">\r\n                                <div className=\"text-center group-hover:scale-105 transition-transform\">\r\n                                    <div className=\"w-12 h-12 bg-accent/10 rounded-full flex items-center justify-center text-accent mx-auto mb-3\">\r\n                                        <Edit2 className=\"w-6 h-6\" />\r\n                                    </div>\r\n                                    <p className=\"text-[10px] font-black text-silver uppercase tracking-widest\">Open Knowledge Editor</p>\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// --- SECTION 6: SKILL MASTERY & READINESS ---\r\nfunction MasteryTrackingSection({ store, onAdd }: { store: LifeTrackerStore; onAdd: () => void }) {\r\n    const state = store.getState();\r\n    const skills = state.skillMastery;\r\n    const [expandedSkillId, setExpandedSkillId] = useState<string | null>(null);\r\n\r\n    const getDepthColor = (rating: number) => {\r\n        if (rating <= 2) return 'text-rose-500';\r\n        if (rating <= 4) return 'text-accent';\r\n        return 'text-green-500';\r\n    };\r\n\r\n    const getReadinessLabel = (level: SkillMastery['readiness']) => {\r\n        switch (level) {\r\n            case 'not-ready': return { text: 'Not Ready', color: 'bg-silver/10 text-silver border-silver/20' };\r\n            case 'can-explain': return { text: 'Can Explain', color: 'bg-accent/10 text-accent border-accent/20' };\r\n            case 'can-defend': return { text: 'Can Defend', color: 'bg-green-100 text-green-600 border-green-200' };\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <div className=\"flex items-center justify-between px-2\">\r\n                <div>\r\n                    <h3 className=\"text-[10px] font-black uppercase tracking-widest text-[#847777]/60\">Mastery Hub</h3>\r\n                    <p className=\"text-[9px] text-silver font-bold uppercase tracking-widest mt-1\">True Skill Depth</p>\r\n                </div>\r\n                <button\r\n                    onClick={onAdd}\r\n                    className=\"flex items-center gap-2.5 px-6 py-3 bg-accent text-white rounded-3xl text-[10px] font-black uppercase tracking-widest shadow-glow hover:scale-105 active:scale-95 transition-all\"\r\n                >\r\n                    <Plus className=\"w-4 h-4\" /> Add Skill\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n                {skills.length === 0 ? (\r\n                    <div className=\"p-16 text-center bg-surface-light dark:bg-surface-dark rounded-4xl border border-dashed border-border-light dark:border-border-dark\">\r\n                        <Award className=\"w-12 h-12 text-silver mx-auto mb-4 opacity-20\" />\r\n                        <p className=\"text-[10px] font-black text-silver uppercase tracking-widest\">No skills tracked yet.</p>\r\n                    </div>\r\n                ) : (\r\n                    skills.map((skill) => {\r\n                        const isExpanded = expandedSkillId === skill.id;\r\n                        const readiness = getReadinessLabel(skill.readiness);\r\n\r\n                        return (\r\n                            <motion.div\r\n                                key={skill.id}\r\n                                layout\r\n                                className={`bg-surface-light dark:bg-surface-dark rounded-4xl border transition-all overflow-hidden ${isExpanded ? 'border-accent shadow-luxury ring-1 ring-accent/10' : 'border-border-light dark:border-border-dark'}`}\r\n                            >\r\n                                <div className=\"p-6 cursor-pointer\" onClick={() => setExpandedSkillId(isExpanded ? null : skill.id)}>\r\n                                    <div className=\"flex items-start justify-between mb-4\">\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <div className=\"p-3 bg-accent/5 rounded-2xl\">\r\n                                                <Target className=\"w-6 h-6 text-accent\" />\r\n                                            </div>\r\n                                            <div>\r\n                                                <h4 className={`font-black text-lg tracking-tight leading-none mb-1.5 ${getDepthColor(skill.depthRating)}`}>\r\n                                                    {skill.name}\r\n                                                </h4>\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    <span className=\"text-[9px] font-bold text-silver uppercase tracking-widest\">{skill.category}</span>\r\n                                                    <div className=\"flex items-center gap-0.5\">\r\n                                                        {[1, 2, 3, 4, 5].map((s) => (\r\n                                                            <div key={s} className={`w-1.5 h-1.5 rounded-full ${s <= skill.depthRating ? 'bg-accent shadow-glow' : 'bg-silver/20'}`} />\r\n                                                        ))}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className={`px-3 py-1.5 rounded-xl text-[8px] font-black uppercase tracking-widest border ${readiness.color}`}>\r\n                                            {readiness.text}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex items-center justify-between mt-6\">\r\n                                        <div className=\"flex items-center gap-6\">\r\n                                            <div className=\"flex flex-col\">\r\n                                                <span className=\"text-[8px] font-bold text-silver uppercase tracking-widest leading-none mb-1\">Projects</span>\r\n                                                <span className=\"text-xs font-black text-heading-light dark:text-text-dark\">{skill.linkedProjects.length}</span>\r\n                                            </div>\r\n                                            <div className=\"flex flex-col\">\r\n                                                <span className=\"text-[8px] font-bold text-silver uppercase tracking-widest leading-none mb-1\">Errors</span>\r\n                                                <span className=\"text-xs font-black text-rose-500\">{skill.errorPatterns.length}</span>\r\n                                            </div>\r\n                                            <div className=\"flex flex-col\">\r\n                                                <span className=\"text-[8px] font-bold text-silver uppercase tracking-widest leading-none mb-1\">Next Revision</span>\r\n                                                <span className=\"text-xs font-black text-accent\">{new Date(skill.nextRevision).toLocaleDateString()}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <ChevronRight className={`w-4 h-4 text-silver transition-transform duration-300 ${isExpanded ? 'rotate-90 text-accent' : ''}`} />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <AnimatePresence>\r\n                                    {isExpanded && (\r\n                                        <motion.div\r\n                                            initial={{ height: 0, opacity: 0 }}\r\n                                            animate={{ height: 'auto', opacity: 1 }}\r\n                                            exit={{ height: 0, opacity: 0 }}\r\n                                            className=\"border-t border-border-light dark:border-border-dark bg-white-smoke/20 dark:bg-background-dark/20 p-7 space-y-8\"\r\n                                        >\r\n                                            {/* Depth & Readiness Controls */}\r\n                                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                                <div className=\"p-4 bg-surface-light dark:bg-surface-dark rounded-3xl border border-border-light dark:border-border-dark\">\r\n                                                    <p className=\"text-[9px] font-black text-accent uppercase tracking-widest mb-3 flex items-center gap-2\">\r\n                                                        <TrendingUp className=\"w-3 h-3\" /> Skill Depth (1-5)\r\n                                                    </p>\r\n                                                    <div className=\"flex items-center justify-between\">\r\n                                                        {[1, 2, 3, 4, 5].map((val) => (\r\n                                                            <button\r\n                                                                key={val}\r\n                                                                onClick={() => store.updateSkillMastery(skill.id, { depthRating: val })}\r\n                                                                className={`w-8 h-8 rounded-full text-[10px] font-black transition-all ${skill.depthRating === val\r\n                                                                    ? 'bg-accent text-white shadow-glow'\r\n                                                                    : 'bg-white-smoke dark:bg-background-dark text-silver hover:text-accent'\r\n                                                                    }`}\r\n                                                            >\r\n                                                                {val}\r\n                                                            </button>\r\n                                                        ))}\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"p-4 bg-surface-light dark:bg-surface-dark rounded-3xl border border-border-light dark:border-border-dark\">\r\n                                                    <p className=\"text-[9px] font-black text-accent uppercase tracking-widest mb-3 flex items-center gap-2\">\r\n                                                        <ListChecks className=\"w-3 h-3\" /> Readiness\r\n                                                    </p>\r\n                                                    <select\r\n                                                        value={skill.readiness}\r\n                                                        onChange={(e) => store.updateSkillMastery(skill.id, { readiness: e.target.value as any })}\r\n                                                        className=\"w-full bg-white-smoke dark:bg-background-dark text-[10px] font-bold py-2 px-3 rounded-xl border-none focus:ring-1 focus:ring-accent\"\r\n                                                    >\r\n                                                        <option value=\"not-ready\">Not Ready</option>\r\n                                                        <option value=\"can-explain\">Can Explain</option>\r\n                                                        <option value=\"can-defend\">Can Defend</option>\r\n                                                    </select>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            {/* Mini-Project Mapping */}\r\n                                            <div className=\"space-y-4\">\r\n                                                <div className=\"flex items-center justify-between\">\r\n                                                    <p className=\"text-[9px] font-black text-accent uppercase tracking-widest flex items-center gap-2\">\r\n                                                        <Layout className=\"w-3 h-3\" /> Application Projects\r\n                                                    </p>\r\n                                                    <button\r\n                                                        onClick={() => {\r\n                                                            const pTitle = prompt('Project Title:');\r\n                                                            if (pTitle) {\r\n                                                                store.updateSkillMastery(skill.id, {\r\n                                                                    linkedProjects: [...skill.linkedProjects, { projectId: generateId(), projectTitle: pTitle, depth: 'toy' }]\r\n                                                                });\r\n                                                            }\r\n                                                        }}\r\n                                                        className=\"text-[8px] font-black text-accent uppercase tracking-tight\"\r\n                                                    >\r\n                                                        + Map Project\r\n                                                    </button>\r\n                                                </div>\r\n                                                <div className=\"space-y-2\">\r\n                                                    {skill.linkedProjects.map((proj, idx) => (\r\n                                                        <div key={idx} className=\"flex items-center justify-between bg-white-smoke font-mono dark:bg-background-dark/50 p-3 rounded-2xl border border-border-light dark:border-border-dark\">\r\n                                                            <span className=\"text-[10px] font-bold text-heading-light dark:text-text-dark\">{proj.projectTitle}</span>\r\n                                                            <div className=\"flex gap-2\">\r\n                                                                {['toy', 'partial', 'production'].map((d) => (\r\n                                                                    <button\r\n                                                                        key={d}\r\n                                                                        onClick={() => {\r\n                                                                            const updated = [...skill.linkedProjects];\r\n                                                                            updated[idx].depth = d as any;\r\n                                                                            store.updateSkillMastery(skill.id, { linkedProjects: updated });\r\n                                                                        }}\r\n                                                                        className={`px-2 py-1 rounded-lg text-[7px] font-black uppercase tracking-tighter border transition-all ${proj.depth === d\r\n                                                                            ? 'bg-accent/10 border-accent text-accent'\r\n                                                                            : 'border-border-light dark:border-border-dark text-silver opacity-40'}`}\r\n                                                                    >\r\n                                                                        {d}\r\n                                                                    </button>\r\n                                                                ))}\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            {/* Error Pattern Tracker */}\r\n                                            <div className=\"space-y-4\">\r\n                                                <div className=\"flex items-center justify-between\">\r\n                                                    <p className=\"text-[9px] font-black text-rose-500/60 uppercase tracking-widest flex items-center gap-2\">\r\n                                                        <Bug className=\"w-3 h-3\" /> Repeated Error Patterns\r\n                                                    </p>\r\n                                                    <button\r\n                                                        onClick={() => {\r\n                                                            const desc = prompt('Error Description:');\r\n                                                            if (desc) store.addErrorPatternToSkill(skill.id, { description: desc });\r\n                                                        }}\r\n                                                        className=\"text-[8px] font-black text-rose-500 uppercase tracking-tight\"\r\n                                                    >\r\n                                                        + Log Pattern\r\n                                                    </button>\r\n                                                </div>\r\n                                                <div className=\"space-y-2\">\r\n                                                    {skill.errorPatterns.map((err) => (\r\n                                                        <div key={err.id} className=\"p-4 bg-rose-50 dark:bg-rose-900/10 rounded-2xl border border-rose-100 dark:border-rose-900/20\">\r\n                                                            <div className=\"flex justify-between items-start mb-2\">\r\n                                                                <p className=\"text-[10px] font-bold text-rose-700 dark:text-rose-400 leading-relaxed\">{err.description}</p>\r\n                                                                <span className=\"px-2 py-0.5 bg-rose-200 text-rose-800 rounded-md text-[8px] font-black\">x{err.frequency}</span>\r\n                                                            </div>\r\n                                                            <p className=\"text-[8px] text-rose-600/60 font-medium\">Last seen: {new Date(err.lastOccurred).toLocaleDateString()}</p>\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            {/* Revision Controls */}\r\n                                            <div className=\"pt-4 border-t border-border-light dark:border-border-dark flex items-center justify-between\">\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    <RefreshCw className=\"w-3.5 h-3.5 text-accent animate-spin-slow\" />\r\n                                                    <span className=\"text-[9px] font-black text-silver uppercase tracking-widest\">Spaced Revision</span>\r\n                                                </div>\r\n                                                <div className=\"flex gap-2\">\r\n                                                    <button\r\n                                                        onClick={() => {\r\n                                                            const next = new Date();\r\n                                                            next.setDate(next.getDate() + 7);\r\n                                                            store.updateSkillMastery(skill.id, {\r\n                                                                lastRevised: new Date().toISOString(),\r\n                                                                nextRevision: next.toISOString(),\r\n                                                                revisionHistory: [...skill.revisionHistory, new Date().toISOString()]\r\n                                                            });\r\n                                                        }}\r\n                                                        className=\"px-4 py-2 bg-accent text-white rounded-xl text-[8px] font-black uppercase tracking-widest shadow-glow\"\r\n                                                    >\r\n                                                        Mark Revised\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>\r\n                                        </motion.div>\r\n                                    )}\r\n                                </AnimatePresence>\r\n                            </motion.div>\r\n                        );\r\n                    })\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// --- ADD CONTENT OVERLAY ---\r\nfunction AddContentOverlay({\r\n    type,\r\n    onClose,\r\n    store,\r\n    activePathId\r\n}: {\r\n    type: SectionId | 'log' | 'concept' | 'journal' | 'mastery';\r\n    onClose: () => void;\r\n    store: LifeTrackerStore;\r\n    activePathId?: string;\r\n}) {\r\n    const { logBlockedAttempt, checkKeywords, checkUrl } = useContentProtection();\r\n    const [formData, setFormData] = useState<ContentFormData>({\r\n        title: '',\r\n        content: '',\r\n        url: '',\r\n        domain: 'Full Stack',\r\n        difficulty: 'medium',\r\n        category: 'DSA',\r\n        status: 'pending',\r\n        techStack: []\r\n    });\r\n\r\n    const handleSubmit = () => {\r\n        if (!formData.title && type !== 'paths') {\r\n            alert('Title is required');\r\n            return;\r\n        }\r\n\r\n        // Content Protection Check\r\n        // Check Keywords in Title and Content\r\n        const titleResult = checkKeywords(formData.title);\r\n        const contentResult = checkKeywords(formData.content);\r\n\r\n        if (titleResult.blocked) {\r\n            alert(`Content Blocked: ${titleResult.reason}`);\r\n            logBlockedAttempt(undefined, formData.title, titleResult.reason);\r\n            return;\r\n        }\r\n        if (contentResult.blocked) {\r\n            alert(`Content Blocked: ${contentResult.reason}`);\r\n            logBlockedAttempt(undefined, formData.content, contentResult.reason);\r\n            return;\r\n        }\r\n\r\n        // Check URL if applicable\r\n        if (formData.url) {\r\n            const urlResult = checkUrl(formData.url);\r\n            if (urlResult.blocked) {\r\n                alert(`URL Blocked: ${urlResult.reason}`);\r\n                logBlockedAttempt(formData.url, undefined, urlResult.reason);\r\n                return;\r\n            }\r\n        }\r\n\r\n        switch (type) {\r\n            case 'paths': {\r\n                if (!activePathId) return;\r\n                const path = store.getState().codingLearningPaths.find((p: CodingLearningPath) => p.id === activePathId);\r\n                store.addCodingLearningWeek(activePathId, {\r\n                    weekNumber: (path?.weeks.length || 0) + 1,\r\n                    weekRange: formData.title || `Week ${(path?.weeks.length || 0) + 1}`,\r\n                    topics: formData.techStack,\r\n                    resources: [],\r\n                    status: 'pending'\r\n                });\r\n                break;\r\n            }\r\n            case 'dsa':\r\n                store.addDSAProblem({\r\n                    platform: 'LeetCode',\r\n                    problemId: formData.title.split(' ')[0] || '1',\r\n                    title: formData.title,\r\n                    difficulty: formData.difficulty,\r\n                    topics: formData.techStack || [],\r\n                    whatILearned: formData.content || '',\r\n                    reviewStatus: 'not-reviewed',\r\n                    status: 'solved'\r\n                });\r\n                break;\r\n            case 'videos':\r\n                store.addVideoResource({\r\n                    title: formData.title,\r\n                    description: formData.content,\r\n                    url: formData.url,\r\n                    domain: formData.domain,\r\n                    tags: formData.techStack\r\n                });\r\n                break;\r\n            case 'projects':\r\n                store.addCodingProject({\r\n                    title: formData.title,\r\n                    objective: formData.content,\r\n                    techStack: formData.techStack,\r\n                    description: '',\r\n                    outcomes: [],\r\n                    links: [],\r\n                    status: 'planning'\r\n                });\r\n                break;\r\n            case 'concept':\r\n                store.addCSNote({\r\n                    title: formData.title,\r\n                    content: formData.content,\r\n                    category: 'CS Core',\r\n                    tags: ['concept', ...formData.techStack]\r\n                });\r\n                break;\r\n            case 'log':\r\n                store.addDebugLog({\r\n                    issue: formData.title,\r\n                    solution: formData.content,\r\n                    tags: ['bug', ...formData.techStack]\r\n                });\r\n                break;\r\n            case 'journal':\r\n                store.addCSNote({\r\n                    title: formData.title,\r\n                    content: formData.content,\r\n                    category: 'System Design',\r\n                    tags: ['journal', ...formData.techStack]\r\n                });\r\n                break;\r\n            case 'mastery': {\r\n                const next = new Date();\r\n                next.setDate(next.getDate() + 7); // Default to 1 week revision\r\n                store.addSkillMastery({\r\n                    name: formData.title,\r\n                    category: formData.category,\r\n                    depthRating: 1,\r\n                    linkedProjects: [],\r\n                    readiness: 'not-ready',\r\n                    lastRevised: new Date().toISOString(),\r\n                    nextRevision: next.toISOString(),\r\n                    revisionHistory: [],\r\n                    errorPatterns: []\r\n                });\r\n                break;\r\n            }\r\n        }\r\n        onClose();\r\n    };\r\n\r\n    const getTitle = () => {\r\n        switch (type) {\r\n            case 'paths': return 'New Sprint';\r\n            case 'dsa': return 'New Logic Challenge';\r\n            case 'videos': return 'Library Intel';\r\n            case 'projects': return 'New Build Vessel';\r\n            case 'concept': return 'Core Concept';\r\n            case 'log': return 'Anomaly Fix';\r\n            case 'journal': return 'Flow Insight';\r\n            case 'mastery': return 'New Skill Mastery';\r\n            default: return 'Add Content';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-0 sm:p-5\">\r\n            <motion.div\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n                onClick={onClose}\r\n                className=\"absolute inset-0 bg-black/60 backdrop-blur-xl\"\r\n            />\r\n            <motion.div\r\n                initial={{ y: '100%' }}\r\n                animate={{ y: 0 }}\r\n                exit={{ y: '100%' }}\r\n                className=\"bg-surface-light dark:bg-surface-dark w-full max-w-lg h-[90vh] sm:h-auto sm:max-h-[85vh] rounded-t-[40px] sm:rounded-4xl overflow-hidden shadow-luxury relative z-10 flex flex-col\"\r\n            >\r\n                {/* Modal Header */}\r\n                <div className=\"px-8 pt-8 pb-4 flex justify-between items-center\">\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-black tracking-tight text-heading-light dark:text-text-dark\">{getTitle()}</h2>\r\n                        <p className=\"text-[10px] font-bold text-accent uppercase tracking-widest mt-1\">Materialize your progress</p>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors\">\r\n                        <X className=\"w-6 h-6\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Form Content */}\r\n                <div className=\"flex-1 overflow-y-auto px-8 py-6 space-y-8 no-scrollbar\">\r\n                    {/* Primary Input */}\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-[10px] font-black text-silver uppercase tracking-widest ml-1\">\r\n                            {type === 'paths' ? 'Week Reference / Title' : 'Identity / Title'}\r\n                        </label>\r\n                        <input\r\n                            autoFocus\r\n                            type=\"text\"\r\n                            placeholder={type === 'paths' ? \"e.g. Frontend Mastery\" : \"Universal handle...\"}\r\n                            value={formData.title}\r\n                            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n                            className=\"w-full bg-white-smoke dark:bg-background-dark border border-border-light dark:border-border-dark rounded-3xl px-6 py-4.5 text-sm font-bold focus:outline-none focus:ring-2 focus:ring-accent/20 transition-all\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* YouTube URL for Videos */}\r\n                    {type === 'videos' && (\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-[10px] font-black text-rose-500 uppercase tracking-widest ml-1\">Video Stream URL (YouTube)</label>\r\n                            <div className=\"relative group/input\">\r\n                                <Youtube className=\"absolute left-5 top-1/2 -translate-y-1/2 w-4 h-4 text-silver group-focus-within/input:text-rose-500 transition-colors\" />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"https://youtube.com/watch?v=...\"\r\n                                    value={formData.url}\r\n                                    onChange={(e) => setFormData({ ...formData, url: e.target.value })}\r\n                                    className=\"w-full pl-12 pr-6 py-4 bg-white-smoke dark:bg-background-dark border border-border-light dark:border-border-dark rounded-3xl text-xs font-mono focus:outline-none focus:ring-2 focus:ring-rose-500/20\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Content / Objective */}\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-[10px] font-black text-silver uppercase tracking-widest ml-1\">Essence / Description</label>\r\n                        <textarea\r\n                            placeholder=\"Architectural details, goals, or core logic...\"\r\n                            value={formData.content}\r\n                            onChange={(e) => setFormData({ ...formData, content: e.target.value })}\r\n                            className=\"w-full bg-white-smoke dark:bg-background-dark border border-border-light dark:border-border-dark rounded-3xl px-6 py-4.5 text-sm font-medium min-h-[140px] focus:outline-none focus:ring-2 focus:ring-accent/20 transition-all resize-none\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Selectors based on Type */}\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        {type === 'dsa' && (\r\n                            <>\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-[10px] font-black text-silver uppercase tracking-widest ml-1\">Difficulty</label>\r\n                                    <select\r\n                                        value={formData.difficulty}\r\n                                        onChange={(e) => setFormData({ ...formData, difficulty: e.target.value as 'easy' | 'medium' | 'hard' })}\r\n                                        className=\"w-full bg-white-smoke dark:bg-background-dark border border-border-light dark:border-border-dark rounded-2xl px-4 py-3 text-[10px] font-bold uppercase tracking-widest focus:outline-none appearance-none cursor-pointer\"\r\n                                    >\r\n                                        <option value=\"easy\">Easy</option>\r\n                                        <option value=\"medium\">Medium</option>\r\n                                        <option value=\"hard\">Hard</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-[10px] font-black text-silver uppercase tracking-widest ml-1\">Focus</label>\r\n                                    <select\r\n                                        value={formData.category}\r\n                                        onChange={(e) => setFormData({ ...formData, category: e.target.value as 'DSA' | 'CS Core' | 'System Design' })}\r\n                                        className=\"w-full bg-white-smoke dark:bg-background-dark border border-border-light dark:border-border-dark rounded-2xl px-4 py-3 text-[10px] font-bold uppercase tracking-widest focus:outline-none appearance-none cursor-pointer\"\r\n                                    >\r\n                                        <option value=\"DSA\">DSA</option>\r\n                                        <option value=\"CS Core\">CS Core</option>\r\n                                        <option value=\"System Design\">Architecture</option>\r\n                                    </select>\r\n                                </div>\r\n                            </>\r\n                        )}\r\n\r\n                        {type === 'videos' && (\r\n                            <div className=\"col-span-2 space-y-2\">\r\n                                <label className=\"text-[10px] font-black text-silver uppercase tracking-widest ml-1\">Domain</label>\r\n                                <div className=\"flex gap-2 flex-wrap\">\r\n                                    {['Full Stack', 'Data Science', 'DevOps', 'DSA', 'Core CS', 'ML', 'AI', 'Agents', 'Neural Networks'].map(d => (\r\n                                        <button\r\n                                            key={d}\r\n                                            onClick={() => setFormData({ ...formData, domain: d })}\r\n                                            className={`px-4 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all ${formData.domain === d ? 'bg-accent text-white border-accent shadow-glow' : 'bg-background-dark text-silver border-border-light dark:border-border-dark'}`}\r\n                                        >\r\n                                            {d}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Tech Stack / Topics Tag System */}\r\n                    <div className=\"space-y-4\">\r\n                        <label className=\"text-[10px] font-black text-silver uppercase tracking-widest ml-1\">Stacks & Tags</label>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Add Tag...\"\r\n                                onKeyDown={(e) => {\r\n                                    if (e.key === 'Enter') {\r\n                                        const val = (e.target as HTMLInputElement).value;\r\n                                        if (val) {\r\n                                            setFormData({ ...formData, techStack: [...formData.techStack, val] });\r\n                                            (e.target as HTMLInputElement).value = '';\r\n                                        }\r\n                                    }\r\n                                }}\r\n                                className=\"flex-1 bg-white-smoke dark:bg-background-dark border border-border-light dark:border-border-dark rounded-2xl px-5 py-3 text-[10px] font-bold focus:outline-none\"\r\n                            />\r\n                            <button className=\"p-3 bg-accent text-white rounded-2xl\"><Plus className=\"w-4 h-4\" /></button>\r\n                        </div>\r\n                        <div className=\"flex flex-wrap gap-2 min-h-[40px]\">\r\n                            {formData.techStack.map((tag: string, i: number) => (\r\n                                <span key={i} className=\"px-3 py-1.5 bg-accent/10 border border-accent/20 text-accent rounded-xl text-[9px] font-black uppercase tracking-widest flex items-center gap-2\">\r\n                                    {tag}\r\n                                    <X className=\"w-3 h-3 cursor-pointer\" onClick={() => setFormData({ ...formData, techStack: formData.techStack.filter((_: string, idx: number) => idx !== i) })} />\r\n                                </span>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Footer Actions */}\r\n                <div className=\"p-8 pt-4 border-t border-border-light dark:border-border-dark flex gap-4\">\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"flex-1 py-5 bg-white-smoke dark:bg-background-dark text-silver rounded-2xl text-[10px] font-black uppercase tracking-widest hover:text-heading-light transition-all\"\r\n                    >\r\n                        Abort\r\n                    </button>\r\n                    <button\r\n                        onClick={handleSubmit}\r\n                        className=\"flex-[2] py-5 bg-accent text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-elegant hover:shadow-glow transition-all active:scale-[0.98]\"\r\n                    >\r\n                        Initialize Entry\r\n                    </button>\r\n                </div>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CodingSection;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\CreateCustomExercise.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\CustomCategoryView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\DNSInstructionsModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\Dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1479,1482],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1479,1482],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":299,"column":210,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":299,"endColumn":213,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14537,14540],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14537,14540],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":416,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":416,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20650,20653],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20650,20653],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":421,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":421,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20962,20965],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20962,20965],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":422,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":422,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21066,21069],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21066,21069],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":433,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":433,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21608,21611],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21608,21611],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":438,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":438,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21891,21894],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21891,21894],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":439,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":439,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21995,21998],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21995,21998],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":450,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":450,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22507,22510],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22507,22510],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":454,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":454,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22824,22827],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22824,22827],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":465,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":465,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23307,23310],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23307,23310],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":469,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":469,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23570,23573],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23570,23573],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'store.state.userProfile'. Either include it or remove the dependency array.","line":494,"column":8,"nodeType":"ArrayExpression","endLine":494,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [store.state.userProfile]","fix":{"range":[24759,24761],"text":"[store.state.userProfile]"}}]}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport NanoBananaAI from './NanoBananaAI';\r\n\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useNotifications } from '../contexts/NotificationContext';\r\nimport Button from './ui/Button';\r\nimport Toast from './ui/Toast';\r\n\r\nimport {\r\n    Bell, Target, ArrowRight,\r\n    Dumbbell, Code, Brain, BookOpen, Cpu,\r\n    Users, Briefcase, Fingerprint, Laptop, Sparkles, TrendingUp,\r\n    Utensils, Zap, Wind, Timer,\r\n    Activity, Heart, Moon, Footprints, Plus, XCircle, LayoutGrid, Link as LinkIcon, CheckSquare, Calculator, FileText\r\n} from 'lucide-react';\r\nimport StepCalculator from './calculators/StepCalculator';\r\nimport SleepCalculator from './calculators/SleepCalculator';\r\nimport GoalAssistant from './GoalAssistant';\r\nimport GoalAssistantWidget from './GoalAssistantWidget';\r\nimport { useLifeTracker } from '../utils/lifeTrackerStore';\r\nimport { getVisibleSections, SECTION_REGISTRY, type InterestCategory, type PrimaryGoal } from '../utils/sectionRegistry';\r\n\r\n\r\ninterface Vital {\r\n    label: string;\r\n    value: string;\r\n    icon: React.ElementType;\r\n    color: string;\r\n    bg: string;\r\n}\r\n\r\ninterface Routine {\r\n    id: string;\r\n    title: string;\r\n    icon: React.ElementType;\r\n    color: string;\r\n    bg: string;\r\n    link: string;\r\n    desc: string;\r\n    img?: string | null;\r\n    isCustom?: boolean;\r\n    entries?: any[];\r\n}\r\n\r\ninterface LifeArea {\r\n    id: string;\r\n    title: string;\r\n    color: string;\r\n    indicatorColor: string;\r\n    value: number;\r\n}\r\n\r\ninterface Priority {\r\n    id: string;\r\n    text: string;\r\n    tag: string;\r\n    color: string;\r\n    done: boolean;\r\n}\r\n\r\ninterface AntiGoal {\r\n    id: string;\r\n    text: string;\r\n    why?: string;\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst STATIC_ROUTINES = [\r\n    { id: 'static-board', title: 'Personal Board', icon: LayoutGrid, color: 'text-gray-800', bg: 'bg-gray-100', link: '/board', desc: 'Widgets', img: '/hero-image.png' },\r\n    { id: 'static-workout', title: 'Workout', icon: Dumbbell, color: 'text-orange-500', bg: 'bg-orange-50', link: '/section/workout', desc: 'Active', img: '/images/section-workout.png' },\r\n    { id: 'static-coding', title: 'Coding', icon: Code, color: 'text-blue-500', bg: 'bg-blue-50', link: '/section/coding', desc: '3 Projects', img: '/images/section-coding.jpg' },\r\n    { id: 'static-meditation', title: 'Meditation', icon: Brain, color: 'text-purple-500', bg: 'bg-purple-50', link: '/section/meditation', desc: '10 min/day', img: '/images/section-meditation.jpg' },\r\n    { id: 'static-notes', title: 'Insights & Notes', icon: FileText, color: 'text-violet-500', bg: 'bg-violet-50', link: '/section/notes', desc: 'Reflect', img: '/images/section-reading.jpg' },\r\n    { id: 'static-breathwork', title: 'Breathwork', icon: Wind, color: 'text-rose-500', bg: 'bg-rose-50', link: '/section/meditation?type=breathing', desc: 'Active', img: '/images/section-breathwork.png' },\r\n    { id: 'static-reading', title: 'Reading', icon: BookOpen, color: 'text-yellow-500', bg: 'bg-yellow-50', link: '/section/reading', desc: 'Chapter 4', img: '/images/section-reading.jpg' },\r\n    { id: 'static-networking', title: 'Networking', icon: Users, color: 'text-pink-500', bg: 'bg-pink-50', link: '/section/networking', desc: '2 Sessions', img: '/images/section-teaching.jpg' },\r\n    { id: 'static-ai', title: 'AI', icon: Cpu, color: 'text-teal-500', bg: 'bg-teal-50', link: '/section/ai', desc: 'Learning', img: '/images/section-ai.png' },\r\n    { id: 'static-business', title: 'Business', icon: Briefcase, color: 'text-green-500', bg: 'bg-green-50', link: '/section/business', desc: 'Growth', img: '/images/section-business.jpg' },\r\n    { id: 'static-branding', title: 'Personal Branding', icon: Fingerprint, color: 'text-indigo-500', bg: 'bg-indigo-50', link: '/section/branding', desc: 'Content', img: '/images/section-branding.png' },\r\n    { id: 'static-freelancing', title: 'Freelancing', icon: Laptop, color: 'text-blue-600', bg: 'bg-blue-50', link: '/section/freelancing', desc: 'Active Gigs', img: '/images/section-freelancing.png' },\r\n    { id: 'static-looksmaxing', title: 'Looksmaxing', icon: Sparkles, color: 'text-rose-500', bg: 'bg-rose-50', link: '/section/looksmaxing', desc: 'Routine', img: '/images/section-looksmaxing-new.png' },\r\n    { id: 'static-market', title: 'Market', icon: TrendingUp, color: 'text-emerald-500', bg: 'bg-emerald-50', link: '/section/market', desc: 'Analysis', img: '/images/section-market.png' },\r\n    { id: 'static-financial-learning', title: 'Wealth Builder', icon: TrendingUp, color: 'text-emerald-500', bg: 'bg-emerald-50', link: '/section/finance-learning', desc: 'Startup & Stocks', img: '/images/section-market.png' },\r\n    { id: 'static-cooking', title: 'Cooking', icon: Utensils, color: 'text-red-500', bg: 'bg-red-50', link: '/section/cooking', desc: 'Recipes', img: '/images/section-cooking.png' },\r\n    { id: 'static-kickboxing', title: 'Kickboxing', icon: Zap, color: 'text-orange-600', bg: 'bg-orange-50', link: '/workout/kickboxing', desc: 'Striking', img: '/images/section-kickboxing.png' },\r\n    { id: 'static-mobility', title: 'Mobility Flow', icon: Wind, color: 'text-sky-500', bg: 'bg-sky-50', link: '/workout/mobility', desc: 'Flexibility', img: '/images/section-mobility.png' },\r\n    { id: 'static-endurance', title: 'Endurance Run', icon: Timer, color: 'text-emerald-600', bg: 'bg-emerald-50', link: '/workout/endurance', desc: 'Cardio', img: '/images/track-run.png' },\r\n    { id: 'static-powerlifting', title: 'Powerlifting', icon: Dumbbell, color: 'text-indigo-600', bg: 'bg-indigo-50', link: '/workout/powerlifting', desc: 'Strength', img: '/images/squat.png' },\r\n    { id: 'static-plyometrics', title: 'Plyometrics', icon: Sparkles, color: 'text-amber-500', bg: 'bg-amber-50', link: '/workout/plyometrics', desc: 'Explosive', img: '/images/section-plyometrics.png' }\r\n];\r\n\r\nconst VITALS_DEFAULT = [\r\n    { label: 'Energy', value: 'High', icon: Zap, color: 'text-yellow-500', bg: 'bg-yellow-50' },\r\n    { label: 'Sleep', value: '7.2h', icon: Moon, color: 'text-indigo-500', bg: 'bg-indigo-50' },\r\n    { label: 'Steps', value: '8.4k', icon: Footprints, color: 'text-emerald-500', bg: 'bg-emerald-50' },\r\n    { label: 'Focus', value: 'Deep', icon: Target, color: 'text-rose-500', bg: 'bg-rose-50' },\r\n];\r\n\r\nconst Dashboard: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const { user, isAuthenticated, isAdmin } = useAuth();\r\n    const store = useLifeTracker();\r\n    const {\r\n        requestPermission,\r\n        permissionGranted,\r\n        notifyIncompleteAction,\r\n        checkAndNotifyPendingTasks\r\n    } = useNotifications();\r\n    const [isNanoBananaOpen, setIsNanoBananaOpen] = useState(false);\r\n    const [showWeeklyToast, setShowWeeklyToast] = useState(false);\r\n    const [isGoalAssistantOpen, setIsGoalAssistantOpen] = useState(false);\r\n\r\n    // Request notification permission on first visit\r\n    useEffect(() => {\r\n        if (isAuthenticated && !permissionGranted) {\r\n            // Ask for permission after a short delay\r\n            const timeout = setTimeout(() => {\r\n                requestPermission();\r\n            }, 3000);\r\n            return () => clearTimeout(timeout);\r\n        }\r\n    }, [isAuthenticated, permissionGranted, requestPermission]);\r\n\r\n    // Check for pending tasks when dashboard loads\r\n    useEffect(() => {\r\n        if (isAuthenticated && permissionGranted) {\r\n            // Check for pending tasks after data loads\r\n            const timeout = setTimeout(() => {\r\n                checkAndNotifyPendingTasks();\r\n            }, 5000);\r\n            return () => clearTimeout(timeout);\r\n        }\r\n    }, [isAuthenticated, permissionGranted, checkAndNotifyPendingTasks]);\r\n\r\n    // Check onboarding and notify if incomplete\r\n    useEffect(() => {\r\n        if (isAuthenticated && user) {\r\n            const storeState = store.getState();\r\n            const profile = storeState.userProfile;\r\n\r\n            if (!profile?.onboardingCompleted && permissionGranted) {\r\n                // Notify about incomplete onboarding after 10 seconds\r\n                const timeout = setTimeout(() => {\r\n                    notifyIncompleteAction(\r\n                        'Complete Your Setup',\r\n                        'Personalize your experience by completing the onboarding.',\r\n                        '/onboarding'\r\n                    );\r\n                }, 10000);\r\n                return () => clearTimeout(timeout);\r\n            }\r\n        }\r\n    }, [isAuthenticated, user, store, permissionGranted, notifyIncompleteAction]);\r\n\r\n    useEffect(() => {\r\n        const checkWeeklyToast = () => {\r\n            const now = new Date();\r\n            // Check if it's Monday (1)\r\n            const isMonday = now.getDay() === 1;\r\n\r\n            // For testing/demo purposes, we can uncomment this to force it:\r\n            // const isMonday = true; \r\n\r\n            if (isMonday) {\r\n                const todayStr = now.toDateString();\r\n                const lastShown = localStorage.getItem('lastWeeklyToast');\r\n                if (lastShown !== todayStr) {\r\n                    setShowWeeklyToast(true);\r\n                    localStorage.setItem('lastWeeklyToast', todayStr);\r\n                }\r\n            }\r\n        };\r\n        checkWeeklyToast();\r\n    }, []);\r\n\r\n\r\n    // Get time-based greeting\r\n    const getGreeting = () => {\r\n        const hour = new Date().getHours();\r\n        if (hour < 12) return 'Good Morning';\r\n        if (hour < 17) return 'Good Afternoon';\r\n        return 'Good Evening';\r\n    };\r\n\r\n    // Get display name\r\n    const getDisplayName = () => {\r\n        if (!isAuthenticated || !user) return 'Guest';\r\n        return user.displayName || user.email?.split('@')[0] || 'User';\r\n    };\r\n\r\n    const [routines, setRoutines] = useState<Routine[]>([]);\r\n    const [vitals, setVitals] = useState<Vital[]>(VITALS_DEFAULT);\r\n    const [isEditingLifeAreas, setIsEditingLifeAreas] = useState(false);\r\n    const [lifeAreas, setLifeAreas] = useState<LifeArea[]>(() => {\r\n        const saved = localStorage.getItem('dashboard_life_areas');\r\n        if (saved) return JSON.parse(saved);\r\n        return [\r\n            { id: 'life', title: 'Life', color: 'text-rosy-granite', indicatorColor: 'bg-rosy-granite', value: 85 },\r\n            { id: 'mindless', title: 'Mindless', color: 'text-silver', indicatorColor: 'bg-silver', value: 20 },\r\n            { id: 'physical', title: 'Physical', color: 'text-graphite', indicatorColor: 'bg-graphite', value: 70 }\r\n        ];\r\n    });\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('dashboard_life_areas', JSON.stringify(lifeAreas));\r\n    }, [lifeAreas]);\r\n\r\n    const handleAreaUpdate = (id: string, field: string, value: string | number) => {\r\n        setLifeAreas((prev: LifeArea[]) => prev.map((area: LifeArea) => area.id === id ? { ...area, [field]: value } : area));\r\n    };\r\n\r\n\r\n\r\n    // Planner Previews\r\n    const [priorities] = useState<Priority[]>(() => JSON.parse(localStorage.getItem('planner_priorities') || '[]'));\r\n    const [antiGoals] = useState<AntiGoal[]>(() => JSON.parse(localStorage.getItem('planner_anti_goals') || '[]'));\r\n\r\n    // Focus Score State\r\n    const [focusPeriod, setFocusPeriod] = useState<'Today' | 'Weekly' | 'Monthly'>('Today');\r\n\r\n    const [focusData, setFocusData] = useState({\r\n        Today: { score: 0, data: [65, 75, 84, 80, 72, 84] },\r\n        Weekly: { score: 0, data: [70, 65, 80, 78, 85, 90, 78] },\r\n        Monthly: { score: 0, data: [75, 80, 78, 85, 82, 88, 80, 75, 82] }\r\n    });\r\n\r\n    useEffect(() => {\r\n        const calculateStats = () => {\r\n            const state = store.getState();\r\n            const today = new Date().toISOString().split('T')[0];\r\n\r\n            // Calculate Today's Stats\r\n            const dailyTasks = state?.dailyTasks || [];\r\n            const todayTasks = dailyTasks.filter(t => t.date === today);\r\n            const goalsCompleted = todayTasks.filter(t => t.completed).length;\r\n            const totalGoals = todayTasks.length;\r\n\r\n            const meditationSessions = state?.meditationSessions || [];\r\n            const meditationMinutes = meditationSessions\r\n                .filter((s: { date: string }) => s.date === today)\r\n                .reduce((acc, s) => acc + (s.duration || 0), 0);\r\n\r\n            const sectionLogs = state?.sectionLogs || [];\r\n            const workouts = sectionLogs\r\n                .filter((log: { sectionId: string; date: string }) => log.sectionId === 'workout' && log.date === today).length;\r\n\r\n            // Simple Focus Score Calculation (0-100)\r\n            let score = 0;\r\n            // Goals: up to 40 points\r\n            if (totalGoals > 0) score += (goalsCompleted / totalGoals) * 40;\r\n            // Meditation: up to 20 points (20 mins = max)\r\n            score += Math.min(meditationMinutes / 20, 1) * 20;\r\n            // Workouts: up to 40 points (1 workout = max)\r\n            score += Math.min(workouts, 1) * 40;\r\n\r\n            const finalScore = Math.round(Math.min(score, 100));\r\n\r\n            setFocusData(prev => ({\r\n                ...prev,\r\n                Today: {\r\n                    score: finalScore,\r\n                    data: [...prev.Today.data.slice(1), finalScore]\r\n                }\r\n            }));\r\n\r\n            // Update Vitals based on real stats\r\n            setVitals(prev => prev.map(v => {\r\n                if (v.label === 'Focus') {\r\n                    return { ...v, value: finalScore > 80 ? 'Deep' : finalScore > 50 ? 'Flow' : 'Low' };\r\n                }\r\n                if (v.label === 'Energy') {\r\n                    return { ...v, value: workouts > 0 ? 'High' : 'Stable' };\r\n                }\r\n                return v;\r\n            }));\r\n        };\r\n\r\n        calculateStats();\r\n        // Subscribe to store updates\r\n        const unsubscribe = store.subscribe(calculateStats);\r\n        return () => unsubscribe();\r\n    }, [store]);\r\n\r\n    const currentFocus = focusData[focusPeriod];\r\n\r\n\r\n    useEffect(() => {\r\n        const loadCustomRoutines = () => {\r\n            const customData = localStorage.getItem('customCategories');\r\n\r\n            let mappedCustom: Routine[] = [];\r\n            if (customData) {\r\n                const parsed = JSON.parse(customData);\r\n                mappedCustom = parsed.map((cat: { id: string; title: string; subtitle?: string; img?: string | null; type?: 'workout' | 'links' | 'checklist' | 'prd-generated'; displayType?: string; entries?: any[] }) => {\r\n                    const key = `category_override_${cat.id}`;\r\n                    const overrideStr = localStorage.getItem(key);\r\n                    const override = overrideStr ? JSON.parse(overrideStr) : null;\r\n\r\n                    let Icon = Dumbbell;\r\n                    let desc = 'Custom Section';\r\n                    let link = `/section/custom/${cat.id}`;\r\n                    let defaultImg = null;\r\n\r\n                    if (cat.type === 'prd-generated') {\r\n                        // PRD-generated sections\r\n                        Icon = Calculator;\r\n                        desc = cat.displayType || 'AI Generated';\r\n                        link = `/section/dynamic/${cat.id}`;\r\n                        if (cat.displayType === 'tracker') defaultImg = '/images/section-workout.png';\r\n                        else if (cat.displayType === 'calculator') defaultImg = '/images/section-calculator.png';\r\n                        else if (cat.displayType === 'journal') defaultImg = '/images/section-journal.png';\r\n                        else if (cat.displayType === 'steps') defaultImg = '/images/section-steps.png';\r\n                        else defaultImg = '/images/section-ai.png';\r\n                    } else if (cat.type === 'links') {\r\n                        Icon = LinkIcon;\r\n                        desc = 'Links';\r\n                        defaultImg = '/images/section-links.png';\r\n                    } else if (cat.type === 'checklist') {\r\n                        Icon = CheckSquare;\r\n                        desc = 'Tasks';\r\n                        defaultImg = '/images/section-checklist.png';\r\n                    } else {\r\n                        // Default / Workout\r\n                        Icon = Dumbbell;\r\n                        desc = 'Workout';\r\n                        defaultImg = '/images/section-workout.png';\r\n                    }\r\n\r\n                    return {\r\n                        id: cat.id,\r\n                        title: override?.title || cat.title,\r\n                        icon: Icon,\r\n                        color: 'text-indigo-500',\r\n                        bg: 'bg-indigo-50',\r\n                        link,\r\n                        desc: cat.subtitle || desc,\r\n                        img: override?.img || cat.img || defaultImg,\r\n                        isCustom: true,\r\n                        entries: cat.entries || []\r\n                    };\r\n                });\r\n            }\r\n\r\n            setRoutines(() => {\r\n                const hidden = JSON.parse(localStorage.getItem('hiddenRoutines') || '[]');\r\n\r\n                // Get user preferences for filtering\r\n                const profile = store.state.userProfile;\r\n                const interests: InterestCategory[] = (profile?.userInterests || []) as InterestCategory[];\r\n                const goal: PrimaryGoal | null = (profile?.primaryGoal || null) as PrimaryGoal | null;\r\n                const hasCompletedOnboarding = profile?.onboardingCompleted || false;\r\n\r\n                let filteredStatic: Routine[];\r\n\r\n                if (hasCompletedOnboarding && interests.length > 0) {\r\n                    // Use section registry to get visible sections based on preferences\r\n                    const visibleSections = getVisibleSections(interests, goal);\r\n                    const visibleIds = visibleSections.map(s => s.id);\r\n\r\n                    // Map visible sections to routines using STATIC_ROUTINES data\r\n                    filteredStatic = STATIC_ROUTINES\r\n                        .filter(r => {\r\n                            // Map static routine IDs to section registry IDs\r\n                            const sectionId = r.id.replace('static-', '');\r\n                            return visibleIds.includes(sectionId) && !hidden.includes(r.id);\r\n                        })\r\n                        .map(r => {\r\n                            const key = `category_override_${r.id}`;\r\n                            const overrideStr = localStorage.getItem(key);\r\n                            const override = overrideStr ? JSON.parse(overrideStr) : null;\r\n                            return {\r\n                                ...r,\r\n                                title: override?.title || r.title,\r\n                                img: override?.img || r.img\r\n                            };\r\n                        });\r\n\r\n                    // Sort by priority goal matching\r\n                    if (goal) {\r\n                        filteredStatic.sort((a, b) => {\r\n                            const sectionA = SECTION_REGISTRY.find(s => `static-${s.id}` === a.id);\r\n                            const sectionB = SECTION_REGISTRY.find(s => `static-${s.id}` === b.id);\r\n                            const aPriority = sectionA?.priorityGoal === goal ? 1 : 0;\r\n                            const bPriority = sectionB?.priorityGoal === goal ? 1 : 0;\r\n                            return bPriority - aPriority;\r\n                        });\r\n                    }\r\n                } else {\r\n                    // No onboarding completed - show all sections (legacy behavior)\r\n                    filteredStatic = STATIC_ROUTINES.filter(r => !hidden.includes(r.id)).map(r => {\r\n                        const key = `category_override_${r.id}`;\r\n                        const overrideStr = localStorage.getItem(key);\r\n                        const override = overrideStr ? JSON.parse(overrideStr) : null;\r\n                        return {\r\n                            ...r,\r\n                            title: override?.title || r.title,\r\n                            img: override?.img || r.img\r\n                        };\r\n                    });\r\n                }\r\n\r\n                return [...filteredStatic, ...mappedCustom];\r\n            });\r\n\r\n            // Calculate dynamic vitals from custom categories\r\n            if (customData) {\r\n                const categories = JSON.parse(customData);\r\n                const today = new Date().toISOString().split('T')[0];\r\n\r\n                // 1. Steps Tracker\r\n                const stepTracker = categories.find((cat: any) =>\r\n                    (cat.displayType === 'tracker' || cat.displayType === 'steps' || cat.title.toLowerCase().includes('step'))\r\n                );\r\n                if (stepTracker && stepTracker.entries) {\r\n                    const todaySteps = stepTracker.entries\r\n                        .filter((e: any) => e.timestamp && e.timestamp.startsWith(today))\r\n                        .reduce((sum: number, e: any) => sum + (Number(e.steps) || 0), 0);\r\n                    if (todaySteps > 0) {\r\n                        setVitals(v => v.map(vital =>\r\n                            vital.label === 'Steps'\r\n                                ? { ...vital, value: todaySteps >= 1000 ? `${(todaySteps / 1000).toFixed(1)}k` : todaySteps.toString() }\r\n                                : vital\r\n                        ));\r\n                    }\r\n                }\r\n\r\n                // 2. Water Tracker\r\n                const waterTracker = categories.find((cat: any) =>\r\n                    (cat.displayType === 'water' || cat.title.toLowerCase().includes('water'))\r\n                );\r\n                if (waterTracker && waterTracker.entries) {\r\n                    const todayWater = waterTracker.entries\r\n                        .filter((e: any) => e.timestamp && e.timestamp.startsWith(today))\r\n                        .reduce((sum: number, e: any) => sum + (Number(e.intake) || 0), 0);\r\n                    if (todayWater > 0) {\r\n                        setVitals(v => v.map(vital =>\r\n                            vital.label === 'Water'\r\n                                ? { ...vital, value: `${(todayWater / 1000).toFixed(1)}L` }\r\n                                : vital\r\n                        ));\r\n                    }\r\n                }\r\n\r\n                // 3. Calorie/Nutrition Tracker\r\n                const calorieTracker = categories.find((cat: any) =>\r\n                    (cat.displayType === 'calculator' || cat.displayType === 'nutrition' || cat.title.toLowerCase().includes('calorie'))\r\n                );\r\n                if (calorieTracker && calorieTracker.entries) {\r\n                    const lastEntry = [...calorieTracker.entries].reverse().find((e: any) => e.targetCalories);\r\n                    if (lastEntry) {\r\n                        setVitals(v => v.map(vital =>\r\n                            vital.label === 'Calories'\r\n                                ? { ...vital, value: lastEntry.targetCalories.toString() }\r\n                                : vital\r\n                        ));\r\n                    }\r\n                }\r\n\r\n                // 4. Reading Tracker\r\n                const readingTracker = categories.find((cat: any) =>\r\n                    (cat.displayType === 'reading' || cat.title.toLowerCase().includes('read'))\r\n                );\r\n                if (readingTracker && readingTracker.entries) {\r\n                    const completed = readingTracker.entries.filter((e: any) => e.status === 'Completed').length;\r\n                    if (completed > 0) {\r\n                        setVitals(v => {\r\n                            const hasReading = v.some(vital => vital.label === 'Books');\r\n                            if (hasReading) {\r\n                                return v.map(vital =>\r\n                                    vital.label === 'Books' ? { ...vital, value: completed.toString() } : vital\r\n                                );\r\n                            } else {\r\n                                return [...v, { icon: BookOpen, label: 'Books', value: completed.toString(), color: 'text-amber-500', bg: 'bg-amber-50' }];\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        loadCustomRoutines();\r\n        // Listen for updates\r\n        window.addEventListener('storage', loadCustomRoutines);\r\n        window.addEventListener('routinesUpdated', loadCustomRoutines);\r\n        return () => {\r\n            window.removeEventListener('storage', loadCustomRoutines);\r\n            window.removeEventListener('routinesUpdated', loadCustomRoutines);\r\n        };\r\n    }, []);\r\n\r\n\r\n\r\n    const handleAddRoutine = () => {\r\n        navigate('/workout/categories/add');\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#FAFAFA] dark:bg-[#111] pb-28 font-sans text-gray-900 dark:text-white transition-colors duration-500\">\r\n            {/* Nano Banana AI Chat Overlay */}\r\n            <NanoBananaAI isOpen={isNanoBananaOpen} onClose={() => setIsNanoBananaOpen(false)} />\r\n\r\n            {/* Header */}\r\n            <header className=\"sticky top-0 z-40 px-6 py-4 flex justify-between items-center bg-[#FAFAFA]/90 dark:bg-[#111]/90 backdrop-blur-xl border-b border-gray-200 dark:border-gray-800\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div>\r\n                        <p className=\"text-[10px] text-gray-500 font-bold uppercase tracking-widest\">{getGreeting()}</p>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <h1 className=\"text-xl font-black leading-none tracking-tight\">{getDisplayName()}</h1>\r\n                            {isAdmin && (\r\n                                <span className=\"text-[8px] font-bold uppercase tracking-wider bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 px-1.5 py-0.5 rounded-full\">\r\n                                    Admin\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex gap-2 items-center\">\r\n                    <button\r\n                        onClick={() => navigate('/planner')}\r\n                        className=\"p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700 hover:scale-105 transition-transform flex items-center justify-center\"\r\n                    >\r\n                        <Target className=\"w-5 h-5 text-gray-600 dark:text-gray-300\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setIsNanoBananaOpen(true)}\r\n                        className=\"p-2 rounded-full bg-[#FFE135] shadow-sm border border-[#FDD835] hover:scale-105 transition-transform flex items-center justify-center\"\r\n                    >\r\n                        <span className=\"text-lg\">ðŸŒ</span>\r\n                    </button>\r\n                    <button className=\"relative p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700 hover:scale-105 transition-transform\">\r\n                        <Bell className=\"w-5 h-5 text-gray-600 dark:text-gray-300\" />\r\n                        <span className=\"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border border-white dark:border-gray-800\"></span>\r\n                    </button>\r\n                    {/* <UserMenu /> */}\r\n                </div>\r\n            </header>\r\n\r\n            <main className=\"px-6 pt-6 space-y-8 max-w-md mx-auto\">\r\n                {/* Focus Score Card */}\r\n                {/* Focus Score Card */}\r\n                {/* Focus Score Card */}\r\n                <section className=\"animate-in slide-in-from-bottom-4 duration-500\">\r\n                    <div className=\"relative overflow-hidden rounded-[1.5rem] bg-black text-white p-5 shadow-xl\">\r\n                        <div className=\"flex justify-between items-center mb-4\">\r\n                            <div>\r\n                                <h2 className=\"text-xl font-black tracking-tighter leading-none\">{focusPeriod === 'Today' ? \"Today's\" : focusPeriod} Focus</h2>\r\n                                <p className=\"text-gray-400 text-[10px] font-bold mt-1 uppercase tracking-wide\">Productivity Score</p>\r\n                            </div>\r\n                            <div className=\"flex bg-gray-900 rounded-full p-1 border border-gray-800 scale-90 origin-right\">\r\n                                {(['Today', 'Weekly', 'Monthly'] as const).map((period) => (\r\n                                    <button\r\n                                        key={period}\r\n                                        onClick={() => setFocusPeriod(period)}\r\n                                        className={`px-3 py-1.5 rounded-full text-[10px] font-bold transition-all ${focusPeriod === period ? 'bg-white text-black' : 'text-gray-500 hover:text-white'}`}\r\n                                    >\r\n                                        {period}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-end justify-between gap-4\">\r\n                            <div className=\"flex flex-col\">\r\n                                <span className=\"text-5xl font-black tracking-tighter leading-none\">{currentFocus.score}</span>\r\n                                <span className=\"text-[10px] font-bold text-green-500 mt-1\">Excellent Score</span>\r\n                            </div>\r\n\r\n                            {/* Bar Chart Visualization - Compact */}\r\n                            <div className=\"h-12 flex items-end justify-between gap-1.5 w-1/2\">\r\n                                {currentFocus.data.map((h, i) => (\r\n                                    <div key={i} className=\"flex flex-col items-center gap-1 w-full group\">\r\n                                        <div\r\n                                            className={`w-full rounded-t-sm transition-all duration-500 ease-out ${i === currentFocus.data.length - 1 ? 'bg-white' : 'bg-gray-800 group-hover:bg-gray-700'}`}\r\n                                            style={{ height: `${h}%` }}\r\n                                        ></div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                {/* Goal Assistant Widget */}\r\n                <section>\r\n                    <GoalAssistantWidget onClick={() => setIsGoalAssistantOpen(true)} />\r\n                </section>\r\n\r\n                {/* Calculators Grid */}\r\n                <section className=\"grid grid-cols-2 gap-4\">\r\n                    <StepCalculator />\r\n                    <SleepCalculator />\r\n                </section>\r\n\r\n                {/* Vitals Grid */}\r\n                <section className=\"grid grid-cols-2 gap-4\">\r\n                    {vitals.map((vital, index) => (\r\n                        <div key={index} className=\"bg-white dark:bg-[#252525] p-5 rounded-[2rem] border border-gray-100 dark:border-white/5 flex flex-col gap-3 shadow-sm hover:shadow-md transition-shadow\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className={`p-3 rounded-2xl ${vital.bg} ${vital.color}`}>\r\n                                    <vital.icon className=\"w-5 h-5 fill-current\" />\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-[10px] font-bold text-gray-400 uppercase tracking-wider\">{vital.label}</p>\r\n                                    <p className=\"text-xl font-black text-gray-900 dark:text-white leading-none mt-0.5\">{vital.value}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </section>\r\n\r\n                {/* Life Areas - Minimal Horizontal Scroll */}\r\n                <section>\r\n                    <div className=\"flex justify-between items-center mb-3 px-1\">\r\n                        <h3 className=\"text-sm font-bold uppercase tracking-wider text-gray-500\">Life Areas</h3>\r\n                        <button\r\n                            onClick={() => setIsEditingLifeAreas(!isEditingLifeAreas)}\r\n                            className=\"text-gray-400 text-[10px] font-bold uppercase tracking-widest hover:text-gray-900 dark:hover:text-white transition-colors\"\r\n                        >\r\n                            {isEditingLifeAreas ? 'Done' : 'Edit'}\r\n                        </button>\r\n                    </div>\r\n\r\n                    {isEditingLifeAreas ? (\r\n                        <div className=\"bg-white dark:bg-[#1A1A1A] rounded-[1.5rem] p-4 border border-gray-100 dark:border-gray-800 space-y-4\">\r\n                            {lifeAreas.map((area: LifeArea) => (\r\n                                <div key={area.id} className=\"flex flex-col gap-2\">\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <label className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest\">{area.id}</label>\r\n                                        <span className=\"text-xs font-bold text-gray-900 dark:text-gray-100\">{area.value}%</span>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={area.title}\r\n                                            onChange={(e) => handleAreaUpdate(area.id, 'title', e.target.value)}\r\n                                            className=\"flex-1 px-3 py-1.5 text-xs font-bold bg-gray-50 dark:bg-black border border-gray-200 dark:border-gray-800 rounded-lg focus:outline-none focus:border-black dark:focus:border-white transition-colors\"\r\n                                            placeholder=\"Area Name\"\r\n                                        />\r\n                                        <input\r\n                                            type=\"range\"\r\n                                            min=\"0\"\r\n                                            max=\"100\"\r\n                                            value={area.value}\r\n                                            onChange={(e) => handleAreaUpdate(area.id, 'value', parseInt(e.target.value))}\r\n                                            className=\"w-24 accent-black dark:accent-white\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"flex space-x-3 overflow-x-auto pb-4 snap-x -mx-6 px-6 [&::-webkit-scrollbar]:hidden\" style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}>\r\n                            {lifeAreas.map((area: LifeArea) => (\r\n                                <div\r\n                                    key={area.id}\r\n                                    className=\"flex-shrink-0 snap-start bg-white dark:bg-[#1A1A1A] p-4 rounded-2xl border border-gray-100 dark:border-gray-800 shadow-sm min-w-[140px] flex flex-col items-start gap-3\"\r\n                                >\r\n                                    <div className={`p-2 rounded-xl bg-gray-50 dark:bg-black/50 text-gray-900 dark:text-white`}>\r\n                                        {area.id === 'physical' ? <Activity className=\"w-4 h-4\" /> : area.id === 'life' ? <Heart className=\"w-4 h-4\" /> : <Sparkles className=\"w-4 h-4\" />}\r\n                                    </div>\r\n                                    <div>\r\n                                        <h4 className=\"text-xs font-black text-gray-900 dark:text-white mb-1\">{area.title}</h4>\r\n                                        <div className=\"flex items-center gap-1.5\">\r\n                                            <div className={`w-1.5 h-1.5 rounded-full ${area.indicatorColor}`}></div>\r\n                                            <span className=\"text-[10px] font-bold text-gray-400\">{area.value}% Satisfaction</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </section>\r\n\r\n                {/* Priorities & Anti-Goals Grid */}\r\n                <section>\r\n                    <motion.div\r\n                        whileHover={{ scale: 1.01 }}\r\n                        onClick={() => navigate('/planner')}\r\n                        className=\"bg-white dark:bg-[#1A1A1A] border border-gray-100 dark:border-gray-800 shadow-sm p-6 flex flex-col group cursor-pointer relative overflow-hidden\"\r\n                        style={{ borderRadius: '1.5rem' }}\r\n                    >\r\n                        <div className=\"flex items-center justify-between mb-6 relative z-10\">\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <div className=\"w-12 h-12 bg-gray-50 dark:bg-black rounded-2xl flex items-center justify-center text-gray-900 dark:text-white shadow-sm border border-gray-100 dark:border-gray-800\">\r\n                                    <Target className=\"w-6 h-6\" />\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"font-black text-gray-900 dark:text-white text-lg\">Focus Planner</h3>\r\n                                    <p className=\"text-gray-400 text-xs font-medium\">Your Daily OS</p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"w-8 h-8 rounded-full bg-gray-50 dark:bg-black flex items-center justify-center text-gray-400 group-hover:bg-black group-hover:dark:bg-white group-hover:text-white group-hover:dark:text-black transition-all\">\r\n                                <ArrowRight className=\"w-4 h-4\" />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* 4 Sections Stacked One-by-One */}\r\n                        <div className=\"space-y-2 relative z-10\">\r\n                            {/* Priorities */}\r\n                            <div className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-black/50 rounded-xl border border-gray-100 dark:border-gray-800/50\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"p-1.5 bg-white dark:bg-[#1A1A1A] rounded-lg shadow-sm\">\r\n                                        <Target className=\"w-3.5 h-3.5 text-gray-900 dark:text-white\" />\r\n                                    </div>\r\n                                    <span className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest\">Priorities</span>\r\n                                </div>\r\n                                <p className=\"text-xs font-black text-gray-900 dark:text-white\">{priorities.filter(p => !p.done).length} Active</p>\r\n                            </div>\r\n\r\n                            {/* Anti-Goals */}\r\n                            <div className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-black/50 rounded-xl border border-gray-100 dark:border-gray-800/50\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"p-1.5 bg-white dark:bg-[#1A1A1A] rounded-lg shadow-sm\">\r\n                                        <XCircle className=\"w-3.5 h-3.5 text-gray-900 dark:text-white\" />\r\n                                    </div>\r\n                                    <span className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest\">Anti-Goals</span>\r\n                                </div>\r\n                                <p className=\"text-xs font-black text-gray-900 dark:text-white\">{antiGoals.length} Set</p>\r\n                            </div>\r\n                        </div>\r\n                    </motion.div>\r\n                </section>\r\n\r\n                {/* Learning Hub - Featured Section */}\r\n                <section>\r\n                    <motion.div\r\n                        whileHover={{ scale: 1.01 }}\r\n                        onClick={() => navigate('/learning')}\r\n                        className=\"bg-black text-white rounded-[1.5rem] p-6 relative overflow-hidden cursor-pointer\"\r\n                    >\r\n                        <div className=\"relative z-10 flex flex-col h-full justify-between gap-6\">\r\n                            <div>\r\n                                <div className=\"w-12 h-12 bg-white/10 backdrop-blur-sm rounded-xl flex items-center justify-center text-white border border-white/20 mb-4\">\r\n                                    <Brain className=\"w-6 h-6\" />\r\n                                </div>\r\n                                <h3 className=\"text-2xl font-black mb-2\">Learning Hub</h3>\r\n                                <p className=\"text-gray-400 text-sm max-w-[200px] leading-relaxed\">\r\n                                    Master any topic with AI mind maps and personalized podcasts.\r\n                                </p>\r\n                            </div>\r\n\r\n                            <button className=\"self-start px-5 py-2.5 bg-white text-black rounded-lg text-xs font-black uppercase tracking-wider flex items-center gap-2 hover:bg-gray-200 transition-colors\">\r\n                                Start Learning <ArrowRight className=\"w-3 h-3\" />\r\n                            </button>\r\n                        </div>\r\n                    </motion.div>\r\n                </section>\r\n\r\n\r\n                {/* Categories Grid */}\r\n                <section>\r\n                    <div className=\"flex justify-between items-center mb-3\">\r\n                        <h3 className=\"text-sm font-bold uppercase tracking-wider text-gray-500\">Quick Access</h3>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-2 gap-3\">\r\n                        {routines.map((item, i) => (\r\n                            <div\r\n                                key={i}\r\n                                onClick={() => navigate(item.link)}\r\n                                className={`\r\n                                    relative overflow-hidden p-4 group cursor-pointer\r\n                                    bg-white dark:bg-[#1A1A1A] border border-gray-100 dark:border-gray-800 shadow-sm overflow-hidden\r\n                                     flex flex-col justify-end h-44\r\n                                `}\r\n                                style={{ borderRadius: '1.5rem', animationDelay: `${i * 0.03}s` }}\r\n                            >\r\n                                {item.img ? (\r\n                                    <>\r\n                                        <div className=\"absolute inset-0 z-0 bg-gray-50 dark:bg-gray-900 rounded-[1.5rem] overflow-hidden\">\r\n                                            <img\r\n                                                src={item.img}\r\n                                                alt=\"\"\r\n                                                className=\"w-full h-full transition-transform duration-700 group-hover:scale-105 object-cover\"\r\n                                            />\r\n                                            <div className=\"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent\"></div>\r\n                                        </div>\r\n                                        <div className=\"relative z-10 w-full pt-2\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <div className=\"w-10 h-10 rounded-xl bg-white/20 backdrop-blur-md flex items-center justify-center text-white border border-white/10 shrink-0\">\r\n                                                    <item.icon className=\"w-5 h-5\" />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <h4 className=\"font-bold text-base text-white leading-tight drop-shadow-sm\">\r\n                                                        {item.title}\r\n                                                    </h4>\r\n                                                    <p className=\"text-[10px] font-bold text-white/90 mt-0.5\">\r\n                                                        {item.isCustom && item.entries ? `${item.entries.length} Entries` : (item.desc || 'View Section')}\r\n                                                    </p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </>\r\n                                ) : (\r\n                                    <div className=\"relative z-10 flex flex-col gap-3\">\r\n                                        <div className=\"flex justify-between items-start\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <div className=\"w-10 h-10 rounded-xl bg-gray-50 dark:bg-black flex items-center justify-center text-gray-900 dark:text-white shrink-0\">\r\n                                                    <item.icon className=\"w-5 h-5\" />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <h4 className=\"font-bold text-base text-gray-900 dark:text-white leading-tight\">\r\n                                                        {item.title}\r\n                                                    </h4>\r\n                                                    <p className=\"text-[10px] font-bold text-gray-400 mt-0.5\">\r\n                                                        {item.desc || 'View'}\r\n                                                    </p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    <Button\r\n                        variant=\"primary\"\r\n                        fullWidth\r\n                        size=\"lg\"\r\n                        className=\"rounded-2xl mt-4\"\r\n                        onClick={handleAddRoutine}\r\n                        leftIcon={<Plus className=\"w-5 h-5\" />}\r\n                    >\r\n                        Add Custom Section\r\n                    </Button>\r\n                </section>\r\n            </main>\r\n\r\n            <Toast\r\n                isVisible={showWeeklyToast}\r\n                onClose={() => setShowWeeklyToast(false)}\r\n                message=\"ðŸ“ˆ Weekly Recap is ready! Check your progress.\"\r\n                type=\"success\"\r\n            />\r\n\r\n            {/* Floating Action Button */}\r\n            <div className=\"fixed bottom-28 right-6 z-[60]\">\r\n                <button\r\n                    onClick={handleAddRoutine}\r\n                    className=\"w-14 h-14 bg-black dark:bg-white text-white dark:text-black rounded-full shadow-lg flex items-center justify-center hover:scale-110 active:scale-95 transition-all\"\r\n                >\r\n                    <Plus className=\"w-6 h-6\" />\r\n                </button>\r\n            </div>\r\n\r\n            {/* Goal Assistant Modal */}\r\n            <GoalAssistant\r\n                isOpen={isGoalAssistantOpen}\r\n                onClose={() => setIsGoalAssistantOpen(false)}\r\n            />\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default Dashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\DynamicSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[794,797],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[794,797],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1067,1070],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1067,1070],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1201,1204],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1201,1204],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`loadSection` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\DynamicSection.tsx:38:9\n  36 |\n  37 |     useEffect(() => {\n> 38 |         loadSection();\n     |         ^^^^^^^^^^^ `loadSection` accessed before it is declared\n  39 |     }, [id]);\n  40 |\n  41 |     const loadSection = () => {\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\DynamicSection.tsx:41:5\n  39 |     }, [id]);\n  40 |\n> 41 |     const loadSection = () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 42 |         const customData = localStorage.getItem('customCategories');\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 43 |         if (customData) {\n     â€¦\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 52 |         }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 53 |     };\n     | ^^^^^^^ `loadSection` is declared here\n  54 |\n  55 |     const handleInputChange = (fieldName: string, value: any) => {\n  56 |         setFormData(prev => ({ ...prev, [fieldName]: value }));","line":38,"column":9,"nodeType":null,"endLine":38,"endColumn":20},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadSection'. Either include it or remove the dependency array.","line":39,"column":8,"nodeType":"ArrayExpression","endLine":39,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [id, loadSection]","fix":{"range":[1269,1273],"text":"[id, loadSection]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1513,1516],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1513,1516],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1792,1795],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1792,1795],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2116,2119],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2116,2119],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":123,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":123,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4340,4343],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4340,4343],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":149,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":149,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5180,5183],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5180,5183],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":381,"column":85,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":381,"endColumn":88,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18225,18228],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18225,18228],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":387,"column":108,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":387,"endColumn":111,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18817,18820],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18817,18820],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":388,"column":108,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":388,"endColumn":111,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18940,18943],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18940,18943],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":393,"column":90,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":393,"endColumn":93,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19421,19424],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19421,19424],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":396,"column":117,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":396,"endColumn":120,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19684,19687],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19684,19687],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":399,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":399,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19871,19874],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19871,19874],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { ArrowLeft, Plus, Trash2, Save, TrendingUp, Calendar, BookOpen, CheckCircle2 } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\n\r\ninterface FieldSchema {\r\n    id: string;\r\n    name: string;\r\n    label: string;\r\n    type: 'text' | 'number' | 'date' | 'select' | 'textarea' | 'checkbox' | 'slider';\r\n    required?: boolean;\r\n    options?: string[];\r\n    min?: number;\r\n    max?: number;\r\n    unit?: string;\r\n}\r\n\r\ninterface SectionData {\r\n    id: string;\r\n    title: string;\r\n    subtitle: string;\r\n    type: 'prd-generated';\r\n    fields: FieldSchema[];\r\n    layout: 'form' | 'cards' | 'table' | 'tracker';\r\n    displayType: string;\r\n    entries: Record<string, any>[];\r\n}\r\n\r\nconst DynamicSection: React.FC = () => {\r\n    const { id } = useParams<{ id: string }>();\r\n    const navigate = useNavigate();\r\n    const [section, setSection] = useState<SectionData | null>(null);\r\n    const [formData, setFormData] = useState<Record<string, any>>({});\r\n    const [isAdding, setIsAdding] = useState(false);\r\n    const [calculations, setCalculations] = useState<Record<string, any>>({});\r\n\r\n    useEffect(() => {\r\n        loadSection();\r\n    }, [id]);\r\n\r\n    const loadSection = () => {\r\n        const customData = localStorage.getItem('customCategories');\r\n        if (customData) {\r\n            const categories = JSON.parse(customData);\r\n            const found = categories.find((cat: any) => cat.id === id);\r\n            if (found) {\r\n                setSection(found);\r\n                if (!found.entries) {\r\n                    found.entries = [];\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleInputChange = (fieldName: string, value: any) => {\r\n        setFormData(prev => ({ ...prev, [fieldName]: value }));\r\n\r\n        // Auto-calculate for calorie calculator\r\n        if (section?.displayType === 'calculator') {\r\n            calculateCalories({ ...formData, [fieldName]: value });\r\n        }\r\n    };\r\n\r\n    const calculateCalories = (data: Record<string, any>) => {\r\n        if (data.age && data.weight && data.height && data.gender) {\r\n            // Mifflin-St Jeor Equation\r\n            let bmr = 0;\r\n            if (data.gender === 'Male') {\r\n                bmr = 10 * parseFloat(data.weight) + 6.25 * parseFloat(data.height) - 5 * parseFloat(data.age) + 5;\r\n            } else {\r\n                bmr = 10 * parseFloat(data.weight) + 6.25 * parseFloat(data.height) - 5 * parseFloat(data.age) - 161;\r\n            }\r\n\r\n            // Activity multipliers\r\n            const activityMultipliers: Record<string, number> = {\r\n                'Sedentary': 1.2,\r\n                'Lightly Active': 1.375,\r\n                'Moderately Active': 1.55,\r\n                'Very Active': 1.725,\r\n                'Extremely Active': 1.9\r\n            };\r\n\r\n            const tdee = bmr * (activityMultipliers[data.activity] || 1.2);\r\n\r\n            // Adjust for goals\r\n            let targetCalories = tdee;\r\n            if (data.goal === 'Lose Weight') {\r\n                targetCalories = tdee - 500;\r\n            } else if (data.goal === 'Gain Muscle') {\r\n                targetCalories = tdee + 300;\r\n            }\r\n\r\n            setCalculations({\r\n                bmr: Math.round(bmr),\r\n                tdee: Math.round(tdee),\r\n                targetCalories: Math.round(targetCalories),\r\n                protein: Math.round(data.weight * 2.2),\r\n                carbs: Math.round(targetCalories * 0.4 / 4),\r\n                fats: Math.round(targetCalories * 0.3 / 9)\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleSaveEntry = () => {\r\n        if (!section) return;\r\n\r\n        const newEntry = {\r\n            id: Date.now().toString(),\r\n            ...formData,\r\n            timestamp: new Date().toISOString(),\r\n            ...(section.displayType === 'calculator' ? calculations : {})\r\n        };\r\n\r\n        const updatedSection = {\r\n            ...section,\r\n            entries: [...(section.entries || []), newEntry]\r\n        };\r\n\r\n        // Update localStorage\r\n        const customData = localStorage.getItem('customCategories');\r\n        if (customData) {\r\n            const categories = JSON.parse(customData);\r\n            const updatedCategories = categories.map((cat: any) =>\r\n                cat.id === id ? updatedSection : cat\r\n            );\r\n            localStorage.setItem('customCategories', JSON.stringify(updatedCategories));\r\n        }\r\n\r\n        setSection(updatedSection);\r\n        setFormData({});\r\n        setIsAdding(false);\r\n        setCalculations({});\r\n\r\n        // Notify dashboard\r\n        window.dispatchEvent(new Event('routinesUpdated'));\r\n    };\r\n\r\n    const deleteEntry = (entryId: string) => {\r\n        if (!section) return;\r\n\r\n        const updatedSection = {\r\n            ...section,\r\n            entries: section.entries.filter(e => e.id !== entryId)\r\n        };\r\n\r\n        const customData = localStorage.getItem('customCategories');\r\n        if (customData) {\r\n            const categories = JSON.parse(customData);\r\n            const updatedCategories = categories.map((cat: any) =>\r\n                cat.id === id ? updatedSection : cat\r\n            );\r\n            localStorage.setItem('customCategories', JSON.stringify(updatedCategories));\r\n        }\r\n\r\n        setSection(updatedSection);\r\n\r\n        // Notify dashboard\r\n        window.dispatchEvent(new Event('routinesUpdated'));\r\n    };\r\n\r\n    const renderField = (field: FieldSchema) => {\r\n        const value = formData[field.name] || '';\r\n\r\n        switch (field.type) {\r\n            case 'text':\r\n            case 'number':\r\n                return (\r\n                    <input\r\n                        type={field.type}\r\n                        value={value}\r\n                        onChange={(e) => handleInputChange(field.name, e.target.value)}\r\n                        placeholder={field.label}\r\n                        min={field.min}\r\n                        max={field.max}\r\n                        className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-0 text-base\"\r\n                    />\r\n                );\r\n            case 'textarea':\r\n                return (\r\n                    <textarea\r\n                        value={value}\r\n                        onChange={(e) => handleInputChange(field.name, e.target.value)}\r\n                        placeholder={field.label}\r\n                        className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-0 resize-none h-24 text-base\"\r\n                    />\r\n                );\r\n            case 'select':\r\n                return (\r\n                    <select\r\n                        value={value}\r\n                        onChange={(e) => handleInputChange(field.name, e.target.value)}\r\n                        className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-0 text-base\"\r\n                    >\r\n                        <option value=\"\">Select {field.label}</option>\r\n                        {field.options?.map(opt => (\r\n                            <option key={opt} value={opt}>{opt}</option>\r\n                        ))}\r\n                    </select>\r\n                );\r\n            case 'checkbox':\r\n                return (\r\n                    <label className=\"flex items-center gap-3 cursor-pointer\">\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            checked={value || false}\r\n                            onChange={(e) => handleInputChange(field.name, e.target.checked)}\r\n                            className=\"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500\"\r\n                        />\r\n                        <span className=\"text-base font-medium text-gray-700\">{field.label}</span>\r\n                    </label>\r\n                );\r\n            case 'slider':\r\n                return (\r\n                    <div>\r\n                        <input\r\n                            type=\"range\"\r\n                            min={field.min || 0}\r\n                            max={field.max || 100}\r\n                            value={value || field.min || 0}\r\n                            onChange={(e) => handleInputChange(field.name, parseInt(e.target.value))}\r\n                            className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-600\"\r\n                        />\r\n                        <div className=\"flex justify-between text-sm text-gray-600 mt-1\">\r\n                            <span>{field.min || 0}</span>\r\n                            <span className=\"font-bold text-indigo-600\">{value || field.min || 0}</span>\r\n                            <span>{field.max || 100}</span>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            case 'date':\r\n                return (\r\n                    <input\r\n                        type=\"datetime-local\"\r\n                        value={value}\r\n                        onChange={(e) => handleInputChange(field.name, e.target.value)}\r\n                        className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-0 text-base\"\r\n                    />\r\n                );\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    if (!section) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center\">\r\n                <p className=\"text-gray-500\">Loading section...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-white\">\r\n            {/* Header */}\r\n            <header className=\"sticky top-0 z-20 bg-white/80 backdrop-blur-md border-b border-gray-100\">\r\n                <div className=\"max-w-4xl mx-auto px-6 py-4\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <button onClick={() => navigate('/dashboard')} className=\"flex items-center gap-2 text-gray-600 hover:text-gray-900\">\r\n                            <ArrowLeft className=\"w-5 h-5\" />\r\n                            <span className=\"font-semibold\">Back</span>\r\n                        </button>\r\n                        <div className=\"text-center\">\r\n                            <h1 className=\"text-xl font-black text-gray-900\">{section.title}</h1>\r\n                            <p className=\"text-sm text-gray-500\">{section.subtitle}</p>\r\n                        </div>\r\n                        <div className=\"w-20\"></div>\r\n                    </div>\r\n                </div>\r\n            </header>\r\n\r\n            <main className=\"max-w-4xl mx-auto px-6 py-8 space-y-6\">\r\n                {/* Add New Entry */}\r\n                {!isAdding ? (\r\n                    <button\r\n                        onClick={() => setIsAdding(true)}\r\n                        className=\"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-2xl font-bold flex items-center justify-center gap-3 shadow-lg hover:shadow-xl transition-all\"\r\n                    >\r\n                        <Plus className=\"w-5 h-5\" />\r\n                        Add New Entry\r\n                    </button>\r\n                ) : (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: 20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        className=\"bg-white rounded-3xl p-6 shadow-lg border border-gray-200 space-y-4\"\r\n                    >\r\n                        <h3 className=\"text-lg font-bold text-gray-900 mb-4\">New Entry</h3>\r\n                        {section.fields.map(field => (\r\n                            <div key={field.id}>\r\n                                <label className=\"block text-sm font-bold text-gray-700 mb-2\">\r\n                                    {field.label} {field.required && <span className=\"text-red-500\">*</span>}\r\n                                    {field.unit && <span className=\"text-gray-400 font-normal\"> ({field.unit})</span>}\r\n                                </label>\r\n                                {renderField(field)}\r\n                            </div>\r\n                        ))}\r\n\r\n                        {/* Calorie Calculator Results */}\r\n                        {section.displayType === 'calculator' && calculations.bmr && (\r\n                            <div className=\"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-6 space-y-3 mt-6\">\r\n                                <h4 className=\"font-bold text-indigo-900 text-lg\">Your Results</h4>\r\n                                <div className=\"grid grid-cols-2 gap-4\">\r\n                                    <div className=\"bg-white rounded-xl p-4\">\r\n                                        <p className=\"text-xs text-gray-500 font-bold uppercase\">BMR</p>\r\n                                        <p className=\"text-2xl font-black text-gray-900\">{calculations.bmr}</p>\r\n                                        <p className=\"text-xs text-gray-500\">kcal/day</p>\r\n                                    </div>\r\n                                    <div className=\"bg-white rounded-xl p-4\">\r\n                                        <p className=\"text-xs text-gray-500 font-bold uppercase\">TDEE</p>\r\n                                        <p className=\"text-2xl font-black text-gray-900\">{calculations.tdee}</p>\r\n                                        <p className=\"text-xs text-gray-500\">kcal/day</p>\r\n                                    </div>\r\n                                    <div className=\"col-span-2 bg-white rounded-xl p-4\">\r\n                                        <p className=\"text-xs text-gray-500 font-bold uppercase\">Target Calories</p>\r\n                                        <p className=\"text-3xl font-black text-indigo-600\">{calculations.targetCalories}</p>\r\n                                        <p className=\"text-xs text-gray-500\">kcal/day for your goal</p>\r\n                                    </div>\r\n                                    <div className=\"bg-white rounded-xl p-3\">\r\n                                        <p className=\"text-xs text-gray-500 font-bold\">Protein</p>\r\n                                        <p className=\"text-lg font-black text-gray-900\">{calculations.protein}g</p>\r\n                                    </div>\r\n                                    <div className=\"bg-white rounded-xl p-3\">\r\n                                        <p className=\"text-xs text-gray-500 font-bold\">Carbs</p>\r\n                                        <p className=\"text-lg font-black text-gray-900\">{calculations.carbs}g</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"flex gap-3 pt-4\">\r\n                            <button\r\n                                onClick={() => {\r\n                                    setIsAdding(false);\r\n                                    setFormData({});\r\n                                    setCalculations({});\r\n                                }}\r\n                                className=\"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition-colors\"\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                            <button\r\n                                onClick={handleSaveEntry}\r\n                                className=\"flex-1 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-bold flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all\"\r\n                            >\r\n                                <Save className=\"w-5 h-5\" />\r\n                                Save\r\n                            </button>\r\n                        </div>\r\n                    </motion.div>\r\n                )}\r\n\r\n                {/* Entries List */}\r\n                {section.entries && section.entries.length > 0 && (\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <h3 className=\"text-lg font-bold text-gray-900\">History</h3>\r\n                            <span className=\"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm font-bold\">\r\n                                {section.entries.length} {section.entries.length === 1 ? 'entry' : 'entries'}\r\n                            </span>\r\n                        </div>\r\n                        {section.entries.slice().reverse().map((entry) => (\r\n                            <motion.div\r\n                                key={entry.id}\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                className=\"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow\"\r\n                            >\r\n                                <div className=\"flex items-start justify-between mb-3\">\r\n                                    <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                                        <Calendar className=\"w-4 h-4\" />\r\n                                        {new Date(entry.timestamp).toLocaleDateString()} â€¢ {new Date(entry.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={() => deleteEntry(entry.id)}\r\n                                        className=\"text-red-500 hover:text-red-700 transition-colors\"\r\n                                    >\r\n                                        <Trash2 className=\"w-4 h-4\" />\r\n                                    </button>\r\n                                </div>\r\n                                <div className=\"grid gap-2\">\r\n                                    {section.displayType === 'reading' && (entry as any).book && (\r\n                                        <div className=\"flex items-center gap-4 mb-2\">\r\n                                            <div className=\"w-10 h-14 bg-amber-50 rounded border-r-4 border-amber-200 flex items-center justify-center text-amber-500\">\r\n                                                <BookOpen className=\"w-5 h-5\" />\r\n                                            </div>\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <p className=\"font-bold text-gray-900 truncate\">{(entry as any).book}</p>\r\n                                                <p className=\"text-[10px] text-gray-500 italic\">{(entry as any).author}</p>\r\n                                                <div className=\"flex items-center gap-2 mt-1\">\r\n                                                    <div className=\"flex-1 h-1 bg-gray-100 rounded-full overflow-hidden\">\r\n                                                        <div\r\n                                                            className=\"h-full bg-amber-500\"\r\n                                                            style={{ width: `${(entry as any).progress || 0}% ` }}\r\n                                                        />\r\n                                                    </div>\r\n                                                    <span className=\"text-[8px] font-bold text-gray-400\">{(entry as any).progress}%</span>\r\n                                                </div>\r\n                                            </div>\r\n                                            {(entry as any).status === 'Completed' && (\r\n                                                <div className=\"p-1 bg-green-50 rounded-full\">\r\n                                                    <CheckCircle2 className=\"w-3 h-3 text-green-500\" />\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {section.displayType !== 'reading' && section.fields.map(field => (\r\n                                        entry[field.name] !== undefined && entry[field.name] !== '' && (\r\n                                            <div key={field.id} className=\"flex justify-between items-center\">\r\n                                                <span className=\"text-sm font-medium text-gray-600\">{field.label}:</span>\r\n                                                <span className=\"text-sm font-bold text-gray-900\">\r\n                                                    {field.type === 'checkbox'\r\n                                                        ? (entry[field.name] ? 'âœ“ Yes' : 'âœ— No')\r\n                                                        : entry[field.name]}\r\n                                                    {field.unit && ` ${field.unit} `}\r\n                                                </span>\r\n                                            </div>\r\n                                        )\r\n                                    ))}\r\n                                    {entry.targetCalories && (\r\n                                        <div className=\"mt-3 pt-3 border-t border-gray-100\">\r\n                                            <div className=\"grid grid-cols-3 gap-2 text-center\">\r\n                                                <div>\r\n                                                    <p className=\"text-xs text-gray-500 font-bold\">Target</p>\r\n                                                    <p className=\"text-base font-black text-indigo-600\">{entry.targetCalories}</p>\r\n                                                </div>\r\n                                                <div>\r\n                                                    <p className=\"text-xs text-gray-500 font-bold\">Protein</p>\r\n                                                    <p className=\"text-base font-black text-gray-900\">{entry.protein}g</p>\r\n                                                </div>\r\n                                                <div>\r\n                                                    <p className=\"text-xs text-gray-500 font-bold\">Carbs</p>\r\n                                                    <p className=\"text-base font-black text-gray-900\">{entry.carbs}g</p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </motion.div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n                {section.entries && section.entries.length === 0 && !isAdding && (\r\n                    <div className=\"text-center py-12\">\r\n                        <TrendingUp className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\r\n                        <p className=\"text-gray-500 font-medium\">No entries yet. Add your first one!</p>\r\n                    </div>\r\n                )}\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DynamicSection;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\EditWorkouts.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\EditWorkouts.tsx:368:9\n  366 |     useEffect(() => {\n  367 |         const last = getLastSessionSummary(workoutId);\n> 368 |         setLastSession(last);\n      |         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  369 |         const rec = generateRecommendation(workoutId);\n  370 |         setRecommendation(rec);\n  371 |         const injuries = getActiveInjuryNotes(workoutId);","line":368,"column":9,"nodeType":null,"endLine":368,"endColumn":23},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":402,"column":17,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":402,"endColumn":30,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[13202,13215],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    ArrowLeft, Clock, Dumbbell, Plus, MoreHorizontal, Check, Trash2, Camera,\r\n    TrendingUp, TrendingDown, Minus, AlertTriangle, Activity, Zap, Battery,\r\n    BatteryLow, BatteryMedium, X, Heart, Flame, Target\r\n} from 'lucide-react';\r\nimport {\r\n    getCustomExercises,\r\n    saveCategoryOverride,\r\n    getCategoryOverride,\r\n    saveSessionSummary,\r\n    getLastSessionSummary,\r\n    generateRecommendation,\r\n    saveInjuryNote,\r\n    getActiveInjuryNotes,\r\n    deleteInjuryNote,\r\n    BODY_PARTS,\r\n    type FatigueStatus,\r\n    type EffortLevel,\r\n    type SessionSummary,\r\n    type InjuryNote,\r\n    type NextSessionRecommendation\r\n} from '../utils/workoutStore';\r\nimport { lifeTrackerStore as store } from '../utils/lifeTrackerStore';\r\n\r\n// --- Data Definitions ---\r\n\r\nconst CoreStrengthContent = {\r\n    id: 'core',\r\n    name: 'Core Strength',\r\n    description: 'Focus on abdominal and lower back stability.',\r\n    duration: '30 min',\r\n    exerciseCount: 4,\r\n    tags: ['Core', 'Stability', 'Abs'],\r\n    exercises: [\r\n        {\r\n            id: 'c1',\r\n            name: 'Plank',\r\n            muscle: 'Core â€¢ Abs',\r\n            sets: [{ id: 1, weight: 0, reps: 60, completed: false }]\r\n        },\r\n        {\r\n            id: 'c2',\r\n            name: 'Russian Twists',\r\n            muscle: 'Obliques â€¢ Core',\r\n            sets: [{ id: 1, weight: 10, reps: 20, completed: false }]\r\n        },\r\n        {\r\n            id: 'c3',\r\n            name: 'Leg Raises',\r\n            muscle: 'Lower Abs',\r\n            sets: [{ id: 1, weight: 0, reps: 15, completed: false }]\r\n        },\r\n        {\r\n            id: 'c4',\r\n            name: 'Superman',\r\n            muscle: 'Lower Back',\r\n            sets: [{ id: 1, weight: 0, reps: 12, completed: false }]\r\n        }\r\n    ]\r\n};\r\n\r\nconst KettlebellContent = {\r\n    id: 'kettlebell',\r\n    name: 'Kettlebell Crush',\r\n    description: 'High intensity interval training with kettlebells.',\r\n    duration: '40 min',\r\n    exerciseCount: 5,\r\n    tags: ['HIIT', 'Strength', 'Cardio'],\r\n    exercises: [\r\n        {\r\n            id: 'k1',\r\n            name: 'Kettlebell Swings',\r\n            muscle: 'Hips â€¢ Glutes',\r\n            sets: [{ id: 1, weight: 35, reps: 20, completed: false }]\r\n        },\r\n        {\r\n            id: 'k2',\r\n            name: 'Goblet Squats',\r\n            muscle: 'Legs â€¢ Core',\r\n            sets: [{ id: 1, weight: 35, reps: 15, completed: false }]\r\n        }\r\n    ]\r\n};\r\n\r\nconst CalisthenicsContent = {\r\n    id: 'calisthenics',\r\n    name: 'Calisthenics Flow',\r\n    description: 'Bodyweight mastery and control.',\r\n    duration: '60 min',\r\n    exerciseCount: 6,\r\n    tags: ['Bodyweight', 'Skill', 'Control'],\r\n    exercises: [\r\n        {\r\n            id: 'cal1',\r\n            name: 'Muscle Ups',\r\n            muscle: 'Full Body',\r\n            sets: [{ id: 1, weight: 0, reps: 5, completed: false }]\r\n        },\r\n        {\r\n            id: 'cal2',\r\n            name: 'Front Lever',\r\n            muscle: 'Core â€¢ Back',\r\n            sets: [{ id: 1, weight: 0, reps: 10, completed: false }]\r\n        }\r\n    ]\r\n};\r\n\r\nconst UpperBodyContent = {\r\n    id: 'upper-body',\r\n    name: 'Upper Body Power',\r\n    description: 'Push & Pull focus with heavy compound movements.',\r\n    duration: '45 min',\r\n    exerciseCount: 5,\r\n    tags: ['Strength', 'Upper', 'Power'],\r\n    exercises: [\r\n        {\r\n            id: 'ub1',\r\n            name: 'Bench Press',\r\n            muscle: 'Chest â€¢ Pushing',\r\n            sets: [\r\n                { id: 1, weight: 135, reps: 6, completed: false },\r\n                { id: 2, weight: 135, reps: 6, completed: false },\r\n                { id: 3, weight: 135, reps: 6, completed: false }\r\n            ]\r\n        },\r\n        {\r\n            id: 'ub2',\r\n            name: 'Pull Ups',\r\n            muscle: 'Back â€¢ Pulling',\r\n            sets: [\r\n                { id: 1, weight: 0, reps: 8, completed: false },\r\n                { id: 2, weight: 0, reps: 8, completed: false }\r\n            ]\r\n        },\r\n        {\r\n            id: 'ub3',\r\n            name: 'Overhead Press',\r\n            muscle: 'Shoulders â€¢ Pushing',\r\n            sets: [\r\n                { id: 1, weight: 65, reps: 10, completed: false }\r\n            ]\r\n        }\r\n    ]\r\n};\r\n\r\nconst AestheticContent = {\r\n    id: 'aesthetic',\r\n    name: 'Aesthetic Body',\r\n    description: 'High-volume session focusing on the V-taper and upper chest density.',\r\n    duration: '75 min',\r\n    exerciseCount: 8,\r\n    tags: ['Symmetry', 'Definition', 'Hypertrophy'],\r\n    exercises: [\r\n        {\r\n            id: 'aes1',\r\n            name: 'Lateral Raises',\r\n            muscle: 'Side Delts â€¢ Dumbbells',\r\n            sets: [\r\n                { id: 1, weight: 12, reps: 12, completed: false },\r\n                { id: 2, weight: 12, reps: 12, completed: false }\r\n            ]\r\n        },\r\n        {\r\n            id: 'aes2',\r\n            name: 'Incline Flyes',\r\n            muscle: 'Upper Chest â€¢ Dumbbells',\r\n            sets: [\r\n                { id: 1, weight: 18, reps: 12, completed: false }\r\n            ]\r\n        }\r\n    ]\r\n};\r\n\r\nconst HybridTrainingContent = {\r\n    id: 'hybrid',\r\n    name: 'Hybrid Training',\r\n    description: 'Combination of strength and endurance training.',\r\n    duration: '50 min',\r\n    exerciseCount: 0,\r\n    tags: ['Hybrid', 'Endurance', 'Strength'],\r\n    exercises: []\r\n};\r\n\r\nconst KickboxingContent = {\r\n    id: 'kickboxing',\r\n    name: 'Kickboxing',\r\n    description: 'High-intensity striking and conditioning.',\r\n    duration: '45 min',\r\n    exerciseCount: 1,\r\n    tags: ['Martial Arts', 'HIIT', 'Fat Burn'],\r\n    exercises: [\r\n        {\r\n            id: 'kb1',\r\n            name: 'Shadow Boxing',\r\n            muscle: 'Full Body â€¢ Cardio',\r\n            sets: [{ id: 1, weight: 0, reps: 180, completed: false }]\r\n        }\r\n    ]\r\n};\r\n\r\nconst MobilityFlowContent = {\r\n    id: 'mobility',\r\n    name: 'Mobility Flow',\r\n    description: 'Improve range of motion and joint health.',\r\n    duration: '20 min',\r\n    exerciseCount: 1,\r\n    tags: ['Flexibility', 'Recovery', 'Yoga'],\r\n    exercises: [\r\n        { id: 'mf1', name: 'Cat-Cow', muscle: 'Spine â€¢ Core', sets: [{ id: 1, weight: 0, reps: 10, completed: false }] }\r\n    ]\r\n};\r\n\r\nconst EnduranceContent = {\r\n    id: 'endurance',\r\n    name: 'Endurance Run',\r\n    description: 'Steady-state cardio for lung capacity.',\r\n    duration: '60 min',\r\n    exerciseCount: 1,\r\n    tags: ['Cardio', 'Lungs', 'Steady-State'],\r\n    exercises: [\r\n        { id: 'er1', name: 'Zone 2 Jog', muscle: 'Legs â€¢ Heart', sets: [{ id: 1, weight: 0, reps: 60, completed: false }] }\r\n    ]\r\n};\r\n\r\nconst PowerliftingContent = {\r\n    id: 'powerlifting',\r\n    name: 'Powerlifting',\r\n    description: 'Focus on Big 3: Squat, Bench, Deadlift.',\r\n    duration: '90 min',\r\n    exerciseCount: 3,\r\n    tags: ['Strength', 'Compound', 'Heavy'],\r\n    exercises: [\r\n        { id: 'pl1', name: 'Back Squat', muscle: 'Full Body â€¢ Legs', sets: [{ id: 1, weight: 225, reps: 5, completed: false }] }\r\n    ]\r\n};\r\n\r\nconst PlyometricsContent = {\r\n    id: 'plyometrics',\r\n    name: 'Plyometrics',\r\n    description: 'Explosive power and vertical jump training.',\r\n    duration: '35 min',\r\n    exerciseCount: 2,\r\n    tags: ['Power', 'Speed', 'Explosive'],\r\n    exercises: [\r\n        { id: 'plyo1', name: 'Box Jumps', muscle: 'Legs â€¢ Explosive', sets: [{ id: 1, weight: 0, reps: 8, completed: false }] }\r\n    ]\r\n};\r\n\r\nconst PlaceholderContent = (name: string) => ({\r\n    name: name,\r\n    description: 'Workout description placeholder.',\r\n    duration: '0 min',\r\n    exerciseCount: 0,\r\n    tags: ['Workout'],\r\n    exercises: []\r\n});\r\n\r\nconst getInitials = (name: string) => {\r\n    return name ? name.slice(0, 2).toUpperCase() : '??';\r\n};\r\n\r\nconst getGradient = (name: string) => {\r\n    const gradients = [\r\n        'bg-blue-100 text-blue-700',\r\n        'bg-green-100 text-green-700',\r\n        'bg-purple-100 text-purple-700',\r\n        'bg-orange-100 text-orange-700',\r\n        'bg-pink-100 text-pink-700',\r\n        'bg-teal-100 text-teal-700',\r\n    ];\r\n    let hash = 0;\r\n    for (let i = 0; i < name.length; i++) {\r\n        hash = name.charCodeAt(i) + ((hash << 5) - hash);\r\n    }\r\n    return gradients[Math.abs(hash) % gradients.length];\r\n};\r\n\r\ninterface WorkoutSet {\r\n    id: number;\r\n    weight: number;\r\n    reps: number;\r\n    completed: boolean;\r\n}\r\n\r\ninterface WorkoutExercise {\r\n    id: string;\r\n    name: string;\r\n    muscle: string;\r\n    sets: WorkoutSet[];\r\n}\r\n\r\ninterface WorkoutData {\r\n    id?: string;\r\n    name: string;\r\n    description: string;\r\n    duration: string;\r\n    exerciseCount: number;\r\n    tags: string[];\r\n    exercises: WorkoutExercise[];\r\n    image?: string;\r\n}\r\n\r\n// --- Main Layout Component ---\r\n\r\nexport const EditWorkoutLayout: React.FC<{\r\n    initialData: WorkoutData,\r\n    title: string\r\n}> = ({ initialData, title }) => {\r\n    const navigate = useNavigate();\r\n    const workoutId = initialData.id || title.toLowerCase().replace(/\\s+/g, '-');\r\n\r\n    // Core workout state\r\n    const [exercises, setExercises] = useState<WorkoutExercise[]>(() => [...initialData.exercises, ...getCustomExercises(initialData.name)]);\r\n    const [workoutTitle, setWorkoutTitle] = useState(initialData.name);\r\n    const [workoutDesc, setWorkoutDesc] = useState(initialData.description);\r\n    const [activeMenu, setActiveMenu] = useState<string | null>(null);\r\n    const [coverImage, setCoverImage] = useState<string | null>(() => {\r\n        const override = getCategoryOverride(initialData.id || title);\r\n        const val = override?.img || initialData.image || null;\r\n        // If it looks like a path (not data: or http), return null to wait for async resolution\r\n        if (val && !val.startsWith('data:') && !val.startsWith('http')) return null;\r\n        return val;\r\n    });\r\n\r\n    // Resolve cover image if it's a Supabase path\r\n    useEffect(() => {\r\n        const loadCover = async () => {\r\n            const override = getCategoryOverride(initialData.id || title);\r\n            const val = override?.img || initialData.image || null;\r\n\r\n            if (val && !val.startsWith('data:') && !val.startsWith('http')) {\r\n                const signedUrl = await store.getPrivateFileUrl('workout-media', val);\r\n                if (signedUrl) {\r\n                    setCoverImage(signedUrl);\r\n                }\r\n            } else if (val && (val.startsWith('data:') || val.startsWith('http'))) {\r\n                // Ideally we already set this in useState, but ensuring sync\r\n                setCoverImage(val);\r\n            }\r\n        };\r\n        loadCover();\r\n    }, [initialData.id, title, initialData.image]);\r\n\r\n    // Session tracking state\r\n    const [sessionStartTime] = useState<Date>(new Date());\r\n    const [effortLevel, setEffortLevel] = useState<EffortLevel>(3);\r\n    const [fatigueStatus, setFatigueStatus] = useState<FatigueStatus>('moderate');\r\n    const [showSessionSummary, setShowSessionSummary] = useState(false);\r\n    const [showInjuryModal, setShowInjuryModal] = useState(false);\r\n    const [showRecommendation, setShowRecommendation] = useState(true);\r\n    const [sessionNotes, setSessionNotes] = useState('');\r\n\r\n    // Injury state\r\n    const [activeInjuries, setActiveInjuries] = useState<InjuryNote[]>([]);\r\n    const [newInjuryBodyPart, setNewInjuryBodyPart] = useState(BODY_PARTS[0]);\r\n    const [newInjuryPainLevel, setNewInjuryPainLevel] = useState<1 | 2 | 3 | 4 | 5>(2);\r\n    const [newInjuryDescription, setNewInjuryDescription] = useState('');\r\n\r\n    // Last session data\r\n    const [lastSession, setLastSession] = useState<SessionSummary | null>(null);\r\n    const [recommendation, setRecommendation] = useState<NextSessionRecommendation | null>(null);\r\n\r\n    // Load previous session data\r\n    useEffect(() => {\r\n        const last = getLastSessionSummary(workoutId);\r\n        setLastSession(last);\r\n        const rec = generateRecommendation(workoutId);\r\n        setRecommendation(rec);\r\n        const injuries = getActiveInjuryNotes(workoutId);\r\n        setActiveInjuries(injuries);\r\n    }, [workoutId]);\r\n\r\n    // Calculate total volume in real-time\r\n    const totalVolume = useMemo(() => {\r\n        return exercises.reduce((total, exercise) => {\r\n            const exerciseVolume = exercise.sets.reduce((setTotal, set) => {\r\n                if (set.completed) {\r\n                    return setTotal + (set.weight * set.reps);\r\n                }\r\n                return setTotal;\r\n            }, 0);\r\n            return total + exerciseVolume;\r\n        }, 0);\r\n    }, [exercises]);\r\n\r\n    // Calculate completed sets/exercises\r\n    const completedSets = useMemo(() => {\r\n        return exercises.reduce((total, ex) => total + ex.sets.filter(s => s.completed).length, 0);\r\n    }, [exercises]);\r\n\r\n    const completedExercises = useMemo(() => {\r\n        return exercises.filter(ex => ex.sets.length > 0 && ex.sets.every(s => s.completed)).length;\r\n    }, [exercises]);\r\n\r\n    // Handle image upload\r\n    const handleImageUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            try {\r\n                // @ts-ignore\r\n                const path = await store.uploadFile(file, 'workout-media');\r\n                if (path) {\r\n                    // Resolve URL immediately for UI\r\n                    const signedUrl = await store.getPrivateFileUrl('workout-media', path);\r\n                    if (signedUrl) setCoverImage(signedUrl);\r\n\r\n                    // Save PATH to storage\r\n                    saveCategoryOverride(initialData.id || title, { img: path });\r\n                    window.dispatchEvent(new Event('routinesUpdated'));\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Upload failed\", error);\r\n                alert(\"Failed to upload image\");\r\n            }\r\n        }\r\n    };\r\n\r\n    const removeExercise = (exerciseId: string) => {\r\n        setExercises(exercises.filter((ex: WorkoutExercise) => ex.id !== exerciseId));\r\n        setActiveMenu(null);\r\n    };\r\n\r\n    const toggleSet = (exerciseId: string, setId: number) => {\r\n        setExercises(exercises.map((ex: WorkoutExercise) => {\r\n            if (ex.id !== exerciseId) return ex;\r\n            return {\r\n                ...ex,\r\n                sets: ex.sets.map((s: WorkoutSet) => s.id === setId ? { ...s, completed: !s.completed } : s)\r\n            };\r\n        }));\r\n    };\r\n\r\n    const addSet = (exerciseId: string) => {\r\n        setExercises(exercises.map((ex: WorkoutExercise) => {\r\n            if (ex.id !== exerciseId) return ex;\r\n            const lastSet = ex.sets.length > 0 ? ex.sets[ex.sets.length - 1] : { id: 0, weight: 0, reps: 0, completed: false };\r\n            const newSet = {\r\n                id: (ex.sets.length > 0 ? Math.max(...ex.sets.map((s: WorkoutSet) => s.id)) : 0) + 1,\r\n                weight: lastSet.weight || 0,\r\n                reps: lastSet.reps || 0,\r\n                completed: false\r\n            };\r\n            return { ...ex, sets: [...ex.sets, newSet] };\r\n        }));\r\n    };\r\n\r\n    const removeSet = (exerciseId: string, setId: number) => {\r\n        setExercises(exercises.map((ex: WorkoutExercise) => {\r\n            if (ex.id !== exerciseId) return ex;\r\n            return { ...ex, sets: ex.sets.filter((s: WorkoutSet) => s.id !== setId) };\r\n        }));\r\n    };\r\n\r\n    // Save session and end workout\r\n    const handleEndSession = () => {\r\n        const duration = Math.round((new Date().getTime() - sessionStartTime.getTime()) / 60000);\r\n        const summary: SessionSummary = {\r\n            workoutId,\r\n            date: new Date().toISOString(),\r\n            totalVolume,\r\n            effortLevel,\r\n            fatigueStatus,\r\n            duration,\r\n            exercisesCompleted: completedExercises,\r\n            notes: sessionNotes || undefined\r\n        };\r\n        saveSessionSummary(summary);\r\n        setShowSessionSummary(false);\r\n        navigate(-1);\r\n    };\r\n\r\n    // Add injury note\r\n    const handleAddInjury = () => {\r\n        if (!newInjuryBodyPart) return;\r\n        const injury: InjuryNote = {\r\n            id: `injury_${Date.now()}`,\r\n            workoutId,\r\n            bodyPart: newInjuryBodyPart,\r\n            painLevel: newInjuryPainLevel,\r\n            description: newInjuryDescription,\r\n            date: new Date().toISOString(),\r\n            isActive: true\r\n        };\r\n        saveInjuryNote(injury);\r\n        setActiveInjuries([...activeInjuries, injury]);\r\n        setNewInjuryDescription('');\r\n        setNewInjuryPainLevel(2);\r\n        setShowInjuryModal(false);\r\n    };\r\n\r\n    // Remove injury\r\n    const handleRemoveInjury = (injuryId: string) => {\r\n        deleteInjuryNote(injuryId);\r\n        setActiveInjuries(activeInjuries.filter(i => i.id !== injuryId));\r\n    };\r\n\r\n    // Get fatigue icon and color\r\n    const getFatigueDisplay = (status: FatigueStatus) => {\r\n        switch (status) {\r\n            case 'low':\r\n                return { icon: Battery, color: 'text-emerald-500', bg: 'bg-emerald-50', label: 'Low' };\r\n            case 'moderate':\r\n                return { icon: BatteryMedium, color: 'text-amber-500', bg: 'bg-amber-50', label: 'Moderate' };\r\n            case 'high':\r\n                return { icon: BatteryLow, color: 'text-red-500', bg: 'bg-red-50', label: 'High' };\r\n        }\r\n    };\r\n\r\n    // Get recommendation styling\r\n    const getRecommendationStyle = (rec: NextSessionRecommendation | null) => {\r\n        if (!rec) return { icon: Minus, color: 'text-gray-500', bg: 'bg-gray-50' };\r\n        switch (rec.recommendation) {\r\n            case 'increase':\r\n                return { icon: TrendingUp, color: 'text-emerald-600', bg: 'bg-emerald-50' };\r\n            case 'decrease':\r\n                return { icon: TrendingDown, color: 'text-red-500', bg: 'bg-red-50' };\r\n            default:\r\n                return { icon: Minus, color: 'text-amber-500', bg: 'bg-amber-50' };\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#F8F9FA] text-[#1a1a1a] font-sans relative pb-28\">\r\n            <header className=\"sticky top-0 z-40 bg-[#F8F9FA]/80 backdrop-blur-xl border-b border-gray-100\">\r\n                <div className=\"flex items-center justify-between px-4 py-3 h-14\">\r\n                    <button onClick={() => navigate(-1)} className=\"flex items-center justify-center size-10 -ml-2 rounded-full active:scale-95 transition-all hover:bg-black/5\">\r\n                        <ArrowLeft className=\"w-5 h-5 text-[#1a1a1a]\" />\r\n                    </button>\r\n                    <h2 className=\"text-lg font-bold tracking-tight\">{title}</h2>\r\n                    <button className=\"flex items-center justify-end px-2 font-bold text-base text-[#1a1a1a] hover:opacity-70 transition-opacity\">\r\n                        Save\r\n                    </button>\r\n                </div>\r\n                <div className=\"px-4 pb-3 flex gap-2 overflow-x-auto no-scrollbar\">\r\n                    {initialData.tags && initialData.tags.map((tag: string, i: number) => (\r\n                        <div key={i} className={`flex items-center justify-center px-4 py-1.5 rounded-full shadow-sm border border-gray-200 ${i === 0 ? 'bg-black text-white' : 'bg-white text-gray-500'}`}>\r\n                            <span className=\"text-[10px] font-black uppercase tracking-widest\">{tag}</span>\r\n                        </div>\r\n                    ))}\r\n                    {!initialData.tags && (\r\n                        <div className=\"flex items-center justify-center px-4 py-1.5 rounded-full bg-black text-white shadow-sm\">\r\n                            <span className=\"text-[10px] font-black uppercase tracking-widest\">WORKOUT</span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </header>\r\n\r\n            {/* Custom Background Image Header */}\r\n            <div className=\"relative h-48 w-full overflow-hidden bg-gray-200\">\r\n                {coverImage ? (\r\n                    <img src={coverImage} alt=\"Cover\" className=\"w-full h-full object-cover\" />\r\n                ) : (\r\n                    <div className=\"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200\">\r\n                        <Dumbbell className=\"w-12 h-12 text-gray-300\" />\r\n                    </div>\r\n                )}\r\n                <div className=\"absolute inset-0 bg-black/20\" />\r\n                <label className=\"absolute bottom-4 right-4 flex items-center gap-2 px-3 py-2 bg-white/90 backdrop-blur-md rounded-xl shadow-lg cursor-pointer hover:bg-white transition-colors active:scale-95\">\r\n                    <input type=\"file\" className=\"hidden\" accept=\"image/*\" onChange={handleImageUpload} />\r\n                    <Camera className=\"w-4 h-4 text-gray-700\" />\r\n                    <span className=\"text-xs font-bold text-gray-700\">Change Cover</span>\r\n                </label>\r\n            </div>\r\n\r\n            <main className=\"flex flex-col gap-6 px-4 pt-6\">\r\n                <section className=\"flex flex-col gap-5 bg-white p-6 rounded-2xl shadow-[0_4px_20px_-4px_rgba(0,0,0,0.05)] border border-gray-50\">\r\n                    <div className=\"flex flex-col gap-1\">\r\n                        <label className=\"text-[10px] font-bold text-gray-500 uppercase tracking-[0.1em]\">Routine Title</label>\r\n                        <input\r\n                            className=\"w-full bg-transparent border-0 border-b border-gray-100 focus:border-[#b4f835] focus:ring-0 px-0 py-1 text-2xl font-black text-[#1a1a1a] placeholder-gray-300 transition-colors\"\r\n                            type=\"text\"\r\n                            value={workoutTitle}\r\n                            onChange={(e) => setWorkoutTitle(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex flex-col gap-1\">\r\n                        <label className=\"text-[10px] font-bold text-gray-500 uppercase tracking-[0.1em]\">Focus Description</label>\r\n                        <textarea\r\n                            className=\"w-full bg-gray-50 rounded-xl border-0 focus:ring-1 focus:ring-[#b4f835]/50 px-4 py-3 text-sm text-[#1a1a1a] resize-none placeholder-gray-400 leading-relaxed\"\r\n                            rows={2}\r\n                            value={workoutDesc}\r\n                            onChange={(e) => setWorkoutDesc(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex items-center justify-around py-2 border-t border-gray-50\">\r\n                        <div className=\"flex flex-col items-center gap-1\">\r\n                            <span className=\"text-xl font-black text-[#1a1a1a]\">{initialData.duration || '0 min'}</span>\r\n                            <span className=\"text-[10px] font-bold text-gray-500 uppercase flex items-center gap-1\">\r\n                                <Clock className=\"w-3 h-3\" /> Duration\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"w-px h-8 bg-gray-100\"></div>\r\n                        <div className=\"flex flex-col items-center gap-1\">\r\n                            <span className=\"text-xl font-black text-[#1a1a1a]\">{exercises.length}</span>\r\n                            <span className=\"text-[10px] font-bold text-gray-500 uppercase flex items-center gap-1\">\r\n                                <Dumbbell className=\"w-3 h-3\" /> Exercises\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"w-px h-8 bg-gray-100\"></div>\r\n                        <div className=\"flex flex-col items-center gap-1\">\r\n                            <span className=\"text-xl font-black text-[#b4f835]\">{totalVolume.toLocaleString()}</span>\r\n                            <span className=\"text-[10px] font-bold text-gray-500 uppercase flex items-center gap-1\">\r\n                                <Activity className=\"w-3 h-3\" /> Volume\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                {/* Next Session Recommendation Banner */}\r\n                {recommendation && showRecommendation && (\r\n                    <section className={`flex flex-col gap-3 p-4 rounded-2xl border ${getRecommendationStyle(recommendation).bg} border-opacity-50 shadow-sm relative overflow-hidden`}>\r\n                        <button\r\n                            onClick={() => setShowRecommendation(false)}\r\n                            className=\"absolute top-2 right-2 p-1 rounded-full hover:bg-black/10 transition-colors\"\r\n                        >\r\n                            <X className=\"w-4 h-4 text-gray-500\" />\r\n                        </button>\r\n                        <div className=\"flex items-center gap-3\">\r\n                            {(() => {\r\n                                const RecIcon = getRecommendationStyle(recommendation).icon;\r\n                                return <RecIcon className={`w-6 h-6 ${getRecommendationStyle(recommendation).color}`} />;\r\n                            })()}\r\n                            <div>\r\n                                <h3 className=\"text-sm font-black uppercase tracking-wide text-[#1a1a1a]\">\r\n                                    Next Session: {recommendation.recommendation === 'increase' ? 'Increase Weight' :\r\n                                        recommendation.recommendation === 'decrease' ? 'Decrease Weight' : 'Maintain Weight'}\r\n                                    {recommendation.percentageChange !== 0 && ` (${recommendation.percentageChange > 0 ? '+' : ''}${recommendation.percentageChange}%)`}\r\n                                </h3>\r\n                                <p className=\"text-xs text-gray-600 mt-0.5\">{recommendation.reason}</p>\r\n                            </div>\r\n                        </div>\r\n                        {recommendation.deloadRecommended && (\r\n                            <div className=\"flex items-center gap-2 px-3 py-2 bg-red-100 rounded-xl border border-red-200\">\r\n                                <AlertTriangle className=\"w-4 h-4 text-red-600\" />\r\n                                <span className=\"text-xs font-bold text-red-700\">Recovery Check: Deload Week Recommended</span>\r\n                            </div>\r\n                        )}\r\n                        {lastSession && (\r\n                            <div className=\"flex items-center gap-4 text-xs text-gray-500 mt-1\">\r\n                                <span>Last session: {new Date(lastSession.date).toLocaleDateString()}</span>\r\n                                <span>Volume: {lastSession.totalVolume.toLocaleString()} lbs</span>\r\n                            </div>\r\n                        )}\r\n                    </section>\r\n                )}\r\n\r\n                {/* Active Injury Notes Warning */}\r\n                {activeInjuries.length > 0 && (\r\n                    <section className=\"flex flex-col gap-3 p-4 rounded-2xl bg-orange-50 border border-orange-100 shadow-sm\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <Heart className=\"w-5 h-5 text-orange-500\" />\r\n                                <h3 className=\"text-sm font-black uppercase tracking-wide text-orange-700\">Active Injuries</h3>\r\n                            </div>\r\n                            <span className=\"text-xs font-bold text-orange-600 bg-orange-100 px-2 py-1 rounded-full\">{activeInjuries.length} noted</span>\r\n                        </div>\r\n                        <div className=\"flex flex-col gap-2\">\r\n                            {activeInjuries.map((injury) => (\r\n                                <div key={injury.id} className=\"flex items-center justify-between bg-white rounded-xl p-3 border border-orange-100\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${injury.painLevel >= 4 ? 'bg-red-100 text-red-600' :\r\n                                            injury.painLevel >= 3 ? 'bg-orange-100 text-orange-600' :\r\n                                                'bg-yellow-100 text-yellow-600'\r\n                                            }`}>\r\n                                            <AlertTriangle className=\"w-4 h-4\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"text-sm font-bold text-[#1a1a1a]\">{injury.bodyPart}</p>\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <span className=\"text-[10px] font-medium text-gray-500\">Pain Level: {injury.painLevel}/5</span>\r\n                                                {injury.painLevel >= 4 && (\r\n                                                    <span className=\"text-[10px] font-bold text-red-600 bg-red-50 px-1.5 py-0.5 rounded\">Limit Progression</span>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={() => handleRemoveInjury(injury.id)}\r\n                                        className=\"p-2 rounded-lg hover:bg-red-50 transition-colors text-gray-400 hover:text-red-500\"\r\n                                    >\r\n                                        <Trash2 className=\"w-4 h-4\" />\r\n                                    </button>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </section>\r\n                )}\r\n\r\n                {/* Training Session Summary (Live) */}\r\n                <section className=\"flex flex-col gap-4 bg-white p-5 rounded-2xl shadow-sm border border-gray-100\">\r\n                    <h3 className=\"text-sm font-black uppercase tracking-widest text-[#1a1a1a] flex items-center gap-2\">\r\n                        <Flame className=\"w-4 h-4 text-orange-500\" />\r\n                        Training Session Summary\r\n                    </h3>\r\n                    <span className=\"text-xs font-medium text-gray-500\">{completedSets} sets completed</span>\r\n\r\n                    {/* Total Volume Display */}\r\n                    <div className=\"flex items-center justify-center py-4 bg-gray-50 rounded-xl border border-gray-100\">\r\n                        <div className=\"text-center\">\r\n                            <p className=\"text-3xl font-black text-black\">{totalVolume.toLocaleString()} <span className=\"text-lg text-gray-500\">lbs</span></p>\r\n                            <p className=\"text-[10px] font-bold text-gray-500 uppercase tracking-wider mt-1\">Total Volume (Sets Ã— Reps Ã— Weight)</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Effort Level */}\r\n                    <div className=\"flex flex-col gap-2\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <label className=\"text-[10px] font-bold text-gray-500 uppercase tracking-widest flex items-center gap-1\">\r\n                                <Zap className=\"w-3 h-3 text-amber-500\" /> Effort Level\r\n                            </label>\r\n                            <span className=\"text-sm font-black text-[#1a1a1a]\">{effortLevel}/5</span>\r\n                        </div>\r\n                        <div className=\"flex gap-2\">\r\n                            {([1, 2, 3, 4, 5] as EffortLevel[]).map((level) => (\r\n                                <button\r\n                                    key={level}\r\n                                    onClick={() => setEffortLevel(level)}\r\n                                    className={`flex-1 py-3 rounded-xl text-sm font-bold transition-all ${effortLevel >= level\r\n                                        ? 'bg-black text-white'\r\n                                        : 'bg-gray-100 text-gray-400 hover:bg-gray-200'\r\n                                        }`}\r\n                                >\r\n                                    {level}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                        <div className=\"flex justify-between text-[9px] text-gray-500 px-1\">\r\n                            <span>Easy</span>\r\n                            <span>Moderate</span>\r\n                            <span>Maximum</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Fatigue Status */}\r\n                    <div className=\"flex flex-col gap-2\">\r\n                        <label className=\"text-[10px] font-bold text-gray-500 uppercase tracking-widest flex items-center gap-1\">\r\n                            <Target className=\"w-3 h-3 text-blue-500\" /> Fatigue Status\r\n                        </label>\r\n                        <div className=\"grid grid-cols-3 gap-2\">\r\n                            {(['low', 'moderate', 'high'] as FatigueStatus[]).map((status) => {\r\n                                const display = getFatigueDisplay(status);\r\n                                const FatigueIcon = display.icon;\r\n                                return (\r\n                                    <button\r\n                                        key={status}\r\n                                        onClick={() => setFatigueStatus(status)}\r\n                                        className={`flex flex-col items-center gap-1 py-3 rounded-xl transition-all ${fatigueStatus === status\r\n                                            ? `${display.bg} border-2 border-current ${display.color}`\r\n                                            : 'bg-gray-100 text-gray-400 border-2 border-transparent hover:bg-gray-200'\r\n                                            }`}\r\n                                    >\r\n                                        <FatigueIcon className=\"w-5 h-5\" />\r\n                                        <span className=\"text-[10px] font-bold uppercase\">{display.label}</span>\r\n                                    </button>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Session Notes */}\r\n                    <div className=\"flex flex-col gap-2\">\r\n                        <label className=\"text-[10px] font-bold text-gray-500 uppercase tracking-widest\">Session Notes</label>\r\n                        <textarea\r\n                            value={sessionNotes}\r\n                            onChange={(e) => setSessionNotes(e.target.value)}\r\n                            placeholder=\"How did the session feel? Any observations...\"\r\n                            className=\"w-full bg-gray-50 border border-gray-100 rounded-xl p-3 text-sm text-[#1a1a1a] placeholder-gray-400 focus:ring-2 focus:ring-black/5 resize-none transition-all\"\r\n                            rows={2}\r\n                        />\r\n                    </div>\r\n                </section>\r\n\r\n                {/* Add Injury Note Button */}\r\n                <button\r\n                    onClick={() => setShowInjuryModal(true)}\r\n                    className=\"flex items-center justify-center gap-2 py-3 px-4 rounded-xl bg-orange-50 border border-orange-100 text-orange-600 font-bold text-sm hover:bg-orange-100 transition-colors\"\r\n                >\r\n                    <AlertTriangle className=\"w-4 h-4\" />\r\n                    Log Injury / Pain\r\n                </button>\r\n\r\n                {/* Injury Modal */}\r\n                {showInjuryModal && (\r\n                    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n                        <div className=\"bg-white rounded-3xl w-full max-w-md p-6 shadow-2xl animate-in fade-in zoom-in-95 duration-300\">\r\n                            <div className=\"flex items-center justify-between mb-6\">\r\n                                <h3 className=\"text-lg font-black text-[#1a1a1a]\">Log Injury / Pain</h3>\r\n                                <button\r\n                                    onClick={() => setShowInjuryModal(false)}\r\n                                    className=\"p-2 rounded-full hover:bg-gray-100 transition-colors\"\r\n                                >\r\n                                    <X className=\"w-5 h-5 text-gray-500\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"flex flex-col gap-4\">\r\n                                <div>\r\n                                    <label className=\"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2 block\">Body Part</label>\r\n                                    <select\r\n                                        value={newInjuryBodyPart}\r\n                                        onChange={(e) => setNewInjuryBodyPart(e.target.value)}\r\n                                        className=\"w-full bg-gray-50 border-0 rounded-xl py-3 px-4 text-sm text-[#1a1a1a] focus:ring-2 focus:ring-[#b4f835]\"\r\n                                    >\r\n                                        {BODY_PARTS.map((part) => (\r\n                                            <option key={part} value={part}>{part}</option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2 block\">Pain Level</label>\r\n                                    <div className=\"flex gap-2\">\r\n                                        {([1, 2, 3, 4, 5] as const).map((level) => (\r\n                                            <button\r\n                                                key={level}\r\n                                                onClick={() => setNewInjuryPainLevel(level)}\r\n                                                className={`flex-1 py-3 rounded-xl text-sm font-bold transition-all ${newInjuryPainLevel === level\r\n                                                    ? level >= 4 ? 'bg-red-500 text-white' : level >= 3 ? 'bg-orange-500 text-white' : 'bg-yellow-400 text-black'\r\n                                                    : 'bg-gray-100 text-gray-500 hover:bg-gray-200'\r\n                                                    }`}\r\n                                            >\r\n                                                {level}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                    <div className=\"flex justify-between text-[9px] text-gray-500 px-1 mt-1\">\r\n                                        <span>Mild</span>\r\n                                        <span>Moderate</span>\r\n                                        <span>Severe</span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2 block\">Description (optional)</label>\r\n                                    <textarea\r\n                                        value={newInjuryDescription}\r\n                                        onChange={(e) => setNewInjuryDescription(e.target.value)}\r\n                                        placeholder=\"Describe the pain or injury...\"\r\n                                        className=\"w-full bg-gray-50 border-0 rounded-xl p-3 text-sm text-[#1a1a1a] placeholder-gray-400 focus:ring-2 focus:ring-[#b4f835] resize-none\"\r\n                                        rows={3}\r\n                                    />\r\n                                </div>\r\n\r\n                                <button\r\n                                    onClick={handleAddInjury}\r\n                                    className=\"w-full py-4 rounded-xl bg-orange-500 text-white font-bold text-sm hover:bg-orange-600 transition-colors flex items-center justify-center gap-2\"\r\n                                >\r\n                                    <Plus className=\"w-4 h-4\" />\r\n                                    Add Injury Note\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Session Summary Modal */}\r\n                {showSessionSummary && (\r\n                    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n                        <div className=\"bg-white rounded-3xl w-full max-w-md p-6 shadow-2xl animate-in fade-in zoom-in-95 duration-300\">\r\n                            <h3 className=\"text-xl font-black text-[#1a1a1a] mb-6 text-center\">End Session?</h3>\r\n\r\n                            <div className=\"bg-gray-50 rounded-2xl p-4 mb-6\">\r\n                                <div className=\"grid grid-cols-2 gap-4 text-center\">\r\n                                    <div>\r\n                                        <p className=\"text-2xl font-black text-[#b4f835]\">{totalVolume.toLocaleString()}</p>\r\n                                        <p className=\"text-[10px] font-bold text-gray-500 uppercase\">Total Volume</p>\r\n                                    </div>\r\n                                    <div>\r\n                                        <p className=\"text-2xl font-black text-[#1a1a1a]\">{completedExercises}/{exercises.length}</p>\r\n                                        <p className=\"text-[10px] font-bold text-gray-500 uppercase\">Exercises Done</p>\r\n                                    </div>\r\n                                    <div>\r\n                                        <p className=\"text-2xl font-black text-[#1a1a1a]\">{effortLevel}/5</p>\r\n                                        <p className=\"text-[10px] font-bold text-gray-500 uppercase\">Effort Level</p>\r\n                                    </div>\r\n                                    <div>\r\n                                        <p className={`text-2xl font-black ${getFatigueDisplay(fatigueStatus).color}`}>\r\n                                            {getFatigueDisplay(fatigueStatus).label}\r\n                                        </p>\r\n                                        <p className=\"text-[10px] font-bold text-gray-500 uppercase\">Fatigue</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex gap-3\">\r\n                                <button\r\n                                    onClick={() => setShowSessionSummary(false)}\r\n                                    className=\"flex-1 py-3 rounded-xl bg-gray-100 text-gray-600 font-bold text-sm hover:bg-gray-200 transition-colors\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleEndSession}\r\n                                    className=\"flex-1 py-3 rounded-xl bg-[#b4f835] text-black font-bold text-sm hover:bg-[#a3e030] transition-colors\"\r\n                                >\r\n                                    Save & Exit\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Workout Flow Section */}\r\n\r\n                <div className=\"flex items-center justify-between mb-1\">\r\n                    <h3 className=\"text-sm font-black uppercase tracking-widest text-[#1a1a1a]\">Workout Flow</h3>\r\n                    <button className=\"text-[11px] font-bold text-blue-600 uppercase tracking-wider\">Reorder</button>\r\n                </div>\r\n\r\n                {exercises.map((ex: WorkoutExercise) => {\r\n                    const initials = getInitials(ex.name);\r\n                    const gradientClass = getGradient(ex.name);\r\n\r\n                    return (\r\n                        <article key={ex.id} className=\"flex flex-col bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden\">\r\n                            <div className=\"flex items-center justify-between p-4 border-b border-gray-50 bg-gray-50/30\">\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className={`size-10 rounded-xl shadow-sm border border-gray-100 flex items-center justify-center ${gradientClass}`}>\r\n                                        <span className=\"text-sm font-black tracking-tight\">{initials}</span>\r\n                                    </div>\r\n                                    <div>\r\n                                        <h4 className=\"text-base font-bold text-[#1a1a1a]\">{ex.name}</h4>\r\n                                        <p className=\"text-[11px] font-medium text-gray-500 uppercase tracking-tight\">{ex.muscle}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"relative\">\r\n                                    <button\r\n                                        onClick={() => setActiveMenu(activeMenu === ex.id ? null : ex.id)}\r\n                                        className=\"text-gray-300 hover:text-[#1a1a1a] p-1 transition-colors\"\r\n                                    >\r\n                                        <MoreHorizontal className=\"w-5 h-5\" />\r\n                                    </button>\r\n\r\n                                    {activeMenu === ex.id && (\r\n                                        <button\r\n                                            onClick={() => removeExercise(ex.id)}\r\n                                            className=\"absolute right-0 top-8 bg-white border border-gray-100 shadow-xl rounded-xl py-2 px-4 flex items-center gap-2 text-red-600 text-xs font-bold whitespace-nowrap z-30 animate-in fade-in zoom-in-95 duration-200\"\r\n                                        >\r\n                                            <Trash2 className=\"w-4 h-4\" /> Delete Exercise\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"px-4\">\r\n                                <div className=\"grid grid-cols-[2.5rem_1fr_1fr_1fr_2rem] gap-3 py-3 border-b border-gray-50\">\r\n                                    <span className=\"text-[9px] font-black text-gray-400 uppercase text-center\">Set</span>\r\n                                    <span className=\"text-[9px] font-black text-gray-400 uppercase text-center\">Weight</span>\r\n                                    <span className=\"text-[9px] font-black text-gray-400 uppercase text-center\">Reps</span>\r\n                                    <span className=\"text-[9px] font-black text-gray-400 uppercase text-center\">Hit</span>\r\n                                    <span className=\"text-[9px] font-black text-gray-400 uppercase text-center\"></span>\r\n                                </div>\r\n\r\n                                <div className=\"flex flex-col\">\r\n                                    {ex.sets.map((set: WorkoutSet) => (\r\n                                        <div key={set.id} className=\"grid grid-cols-[2.5rem_1fr_1fr_1fr_2rem] gap-3 items-center py-3 border-b border-gray-50/50 last:border-0\">\r\n                                            <div className=\"text-xs font-black text-[#1a1a1a] text-center\">{set.id}</div>\r\n                                            <input\r\n                                                className=\"text-center bg-gray-50 border-0 rounded-lg py-2 text-sm font-bold focus:ring-2 focus:ring-[#b4f835]/30 w-full\"\r\n                                                type=\"number\"\r\n                                                defaultValue={set.weight || 0}\r\n                                            />\r\n                                            <input\r\n                                                className=\"text-center bg-gray-50 border-0 rounded-lg py-2 text-sm font-bold focus:ring-2 focus:ring-[#b4f835]/30 w-full\"\r\n                                                type=\"number\"\r\n                                                defaultValue={set.reps}\r\n                                            />\r\n                                            <button\r\n                                                onClick={() => toggleSet(ex.id, set.id)}\r\n                                                className={`flex items-center justify-center h-8 rounded-lg transition-colors ${set.completed ? 'bg-[#b4f835] text-black' : 'bg-gray-100 text-gray-400'}`}\r\n                                            >\r\n                                                <Check className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                            <button onClick={() => removeSet(ex.id, set.id)} className=\"text-gray-300 hover:text-red-500\">\r\n                                                <Trash2 className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"px-4 pb-4 pt-2 flex flex-col gap-3\">\r\n                                <button\r\n                                    onClick={() => addSet(ex.id)}\r\n                                    className=\"w-full py-2.5 rounded-xl border-2 border-dashed border-gray-100 text-[10px] font-black uppercase tracking-widest text-gray-500 hover:bg-gray-50 transition-colors flex items-center justify-center gap-2\"\r\n                                >\r\n                                    <Plus className=\"w-4 h-4\" /> Add Set\r\n                                </button>\r\n                                <details className=\"group\">\r\n                                    <summary className=\"list-none cursor-pointer flex items-center gap-1 text-[10px] font-black uppercase tracking-widest text-gray-400 hover:text-[#1a1a1a] transition-colors\">\r\n                                        <span>ðŸ“</span> Notes\r\n                                    </summary>\r\n                                    <textarea className=\"mt-2 w-full text-xs bg-gray-50 border-0 rounded-xl p-3 text-[#1a1a1a] placeholder-gray-400 focus:ring-1 focus:ring-[#b4f835] resize-none\" placeholder=\"Add exercise notes...\" rows={2}></textarea>\r\n                                </details>\r\n                            </div>\r\n                        </article>\r\n                    );\r\n                })}\r\n\r\n                <div className=\"h-8\"></div>\r\n                <div className=\"flex justify-center pb-8 px-6 w-full\">\r\n                    <button\r\n                        onClick={() => navigate('/workout/add-exercise', { state: { sourceWorkout: initialData.name } })}\r\n                        className=\"w-full max-w-xs flex items-center justify-center gap-3 bg-[#b4f835] text-black px-6 py-4 rounded-2xl font-black uppercase tracking-widest text-xs shadow-[0_12px_24px_-8px_rgba(180,248,53,0.5)] active:scale-[0.98] transition-all transform hover:scale-105\"\r\n                    >\r\n                        <Plus className=\"w-5 h-5\" />\r\n                        Add Exercise\r\n                    </button>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const EditCoreStrength = () => <EditWorkoutLayout initialData={CoreStrengthContent} title=\"Core Strength\" />;\r\nexport const EditKettlebell = () => <EditWorkoutLayout initialData={KettlebellContent} title=\"Kettlebell Crush\" />;\r\nexport const EditCalisthenics = () => <EditWorkoutLayout initialData={CalisthenicsContent} title=\"Calisthenics Flow\" />;\r\nexport const EditUpperBody = () => <EditWorkoutLayout initialData={UpperBodyContent} title=\"Upper Body Power\" />;\r\nexport const EditAesthetic = () => <EditWorkoutLayout initialData={AestheticContent} title=\"Aesthetic Body\" />;\r\n\r\nexport const EditKickboxing = () => <EditWorkoutLayout initialData={KickboxingContent} title=\"Kickboxing\" />;\r\nexport const EditMobilityFlow = () => <EditWorkoutLayout initialData={MobilityFlowContent} title=\"Mobility Flow\" />;\r\nexport const EditEnduranceRun = () => <EditWorkoutLayout initialData={EnduranceContent} title=\"Endurance Run\" />;\r\nexport const EditPowerlifting = () => <EditWorkoutLayout initialData={PowerliftingContent} title=\"Powerlifting\" />;\r\nexport const EditPlyometrics = () => <EditWorkoutLayout initialData={PlyometricsContent} title=\"Plyometrics\" />;\r\n\r\nexport const EditFieldTraining = () => <EditWorkoutLayout initialData={PlaceholderContent('Field Training')} title=\"Field Training\" />;\r\nexport const EditFoamRolling = () => <EditWorkoutLayout initialData={PlaceholderContent('Foam Rolling')} title=\"Foam Rolling\" />;\r\nexport const EditHybrid = () => <EditWorkoutLayout initialData={HybridTrainingContent} title=\"Hybrid Training\" />;\r\nexport const EditLowerBody = () => <EditWorkoutLayout initialData={PlaceholderContent('Lower Body')} title=\"Lower Body Blast\" />;\r\nexport const EditRecovery = () => <EditWorkoutLayout initialData={PlaceholderContent('Active Recovery')} title=\"Active Recovery\" />;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\FinancialLearningSection\\LessonViewer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\FinancialLearningSection\\ModuleList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\FinancialLearningSection\\QuizModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\FinancialLearningSection\\TrackSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\FinancialLearningSection\\data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\FinancialLearningSection\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\FinancialLearningSection\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\FocusPlanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\FreelancingSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\GoalAssistant.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_editingGoal' is assigned a value but never used.","line":63,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":63,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * GoalAssistant Component\r\n * \r\n * An AI-powered personal goal & reminder assistant with a friendly,\r\n * supportive buddy-like interface. Features goal tracking, gentle reminders,\r\n * and encouraging messages.\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    Target, Plus, X, Check, Clock, Sparkles,\r\n    MessageSquare, Flame, Bell,\r\n    BookOpen, Dumbbell, Brain, Heart, Music,\r\n    Pencil, Trash2, TrendingUp, Award\r\n} from 'lucide-react';\r\nimport { useGoalAssistant, type PersonalGoal, type GoalCategory, type GoalFrequency } from '../hooks/useGoalAssistant';\r\n\r\ninterface GoalAssistantProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nconst CATEGORY_CONFIG: Record<GoalCategory, { icon: React.ElementType; color: string; bg: string }> = {\r\n    health: { icon: Heart, color: 'text-rose-500', bg: 'bg-rose-50 dark:bg-rose-900/20' },\r\n    productivity: { icon: Target, color: 'text-blue-500', bg: 'bg-blue-50 dark:bg-blue-900/20' },\r\n    learning: { icon: BookOpen, color: 'text-amber-500', bg: 'bg-amber-50 dark:bg-amber-900/20' },\r\n    mindfulness: { icon: Brain, color: 'text-purple-500', bg: 'bg-purple-50 dark:bg-purple-900/20' },\r\n    fitness: { icon: Dumbbell, color: 'text-orange-500', bg: 'bg-orange-50 dark:bg-orange-900/20' },\r\n    creative: { icon: Music, color: 'text-pink-500', bg: 'bg-pink-50 dark:bg-pink-900/20' },\r\n    social: { icon: MessageSquare, color: 'text-teal-500', bg: 'bg-teal-50 dark:bg-teal-900/20' },\r\n    custom: { icon: Sparkles, color: 'text-indigo-500', bg: 'bg-indigo-50 dark:bg-indigo-900/20' }\r\n};\r\n\r\nconst FREQUENCY_LABELS: Record<GoalFrequency, string> = {\r\n    daily: 'Every Day',\r\n    weekly: 'Once a Week',\r\n    custom: 'Custom Days'\r\n};\r\n\r\nconst DAY_NAMES = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n\r\nconst GoalAssistant: React.FC<GoalAssistantProps> = ({ isOpen, onClose }) => {\r\n    const {\r\n        activeGoals,\r\n        todaysGoals,\r\n        pendingGoals,\r\n        messages,\r\n        unreadMessages,\r\n        stats,\r\n        addGoal,\r\n        deleteGoal,\r\n        completeGoal,\r\n        isGoalCompletedToday,\r\n        getStreak,\r\n        getCompletionRate,\r\n        markAllMessagesAsRead,\r\n        generateTestMessages\r\n    } = useGoalAssistant();\r\n\r\n    const [activeTab, setActiveTab] = useState<'today' | 'goals' | 'messages'>('today');\r\n    const [showAddGoal, setShowAddGoal] = useState(false);\r\n    const [_editingGoal, setEditingGoal] = useState<PersonalGoal | null>(null);\r\n    const [selectedGoalForComplete, setSelectedGoalForComplete] = useState<string | null>(null);\r\n    const [completionNote, setCompletionNote] = useState('');\r\n    const [completionMood, setCompletionMood] = useState<'great' | 'good' | 'okay' | 'tough'>('good');\r\n\r\n    // New goal form state\r\n    const [newGoal, setNewGoal] = useState({\r\n        title: '',\r\n        description: '',\r\n        category: 'productivity' as GoalCategory,\r\n        frequency: 'daily' as GoalFrequency,\r\n        customDays: [] as number[],\r\n        scheduledTime: '09:00',\r\n        reminderEnabled: true,\r\n        reminderMinutesBefore: 15,\r\n        isReflective: false,\r\n        isActive: true\r\n    });\r\n\r\n    // Mark messages as read when viewing messages tab\r\n    useEffect(() => {\r\n        if (activeTab === 'messages' && unreadMessages.length > 0) {\r\n            markAllMessagesAsRead();\r\n        }\r\n    }, [activeTab, unreadMessages.length, markAllMessagesAsRead]);\r\n\r\n    const handleAddGoal = () => {\r\n        if (!newGoal.title.trim()) return;\r\n\r\n        addGoal({\r\n            ...newGoal,\r\n            customDays: newGoal.frequency === 'custom' ? newGoal.customDays : undefined\r\n        });\r\n\r\n        // Reset form\r\n        setNewGoal({\r\n            title: '',\r\n            description: '',\r\n            category: 'productivity',\r\n            frequency: 'daily',\r\n            customDays: [],\r\n            scheduledTime: '09:00',\r\n            reminderEnabled: true,\r\n            reminderMinutesBefore: 15,\r\n            isReflective: false,\r\n            isActive: true\r\n        });\r\n        setShowAddGoal(false);\r\n    };\r\n\r\n    const handleCompleteGoal = (goalId: string) => {\r\n        completeGoal(goalId, completionNote || undefined, completionMood);\r\n        setSelectedGoalForComplete(null);\r\n        setCompletionNote('');\r\n        setCompletionMood('good');\r\n    };\r\n\r\n    const toggleCustomDay = (day: number) => {\r\n        setNewGoal(prev => ({\r\n            ...prev,\r\n            customDays: prev.customDays.includes(day)\r\n                ? prev.customDays.filter(d => d !== day)\r\n                : [...prev.customDays, day]\r\n        }));\r\n    };\r\n\r\n    const getGreeting = () => {\r\n        const hour = new Date().getHours();\r\n        if (hour < 12) return 'Good morning! â˜€ï¸';\r\n        if (hour < 17) return 'Good afternoon! ðŸŒ¤ï¸';\r\n        return 'Good evening! ðŸŒ™';\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n                className=\"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-end sm:items-center justify-center p-4\"\r\n                onClick={onClose}\r\n            >\r\n                <motion.div\r\n                    initial={{ y: 100, opacity: 0 }}\r\n                    animate={{ y: 0, opacity: 1 }}\r\n                    exit={{ y: 100, opacity: 0 }}\r\n                    transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n                    onClick={(e) => e.stopPropagation()}\r\n                    className=\"w-full max-w-md bg-white dark:bg-[#1A1A1A] rounded-t-[2rem] sm:rounded-[2rem] shadow-2xl max-h-[85vh] overflow-hidden flex flex-col\"\r\n                >\r\n                    {/* Header */}\r\n                    <div className=\"relative p-6 pb-4 bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500\">\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"absolute top-4 right-4 p-2 rounded-full bg-white/20 hover:bg-white/30 transition-colors\"\r\n                        >\r\n                            <X className=\"w-5 h-5 text-white\" />\r\n                        </button>\r\n\r\n                        <div className=\"flex items-center gap-3 mb-4\">\r\n                            <div className=\"w-14 h-14 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center\">\r\n                                <span className=\"text-3xl\">ðŸŽ¯</span>\r\n                            </div>\r\n                            <div>\r\n                                <h2 className=\"text-2xl font-black text-white\">Goal Buddy</h2>\r\n                                <p className=\"text-white/80 text-sm\">{getGreeting()}</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Quick Stats */}\r\n                        <div className=\"flex gap-4\">\r\n                            <div className=\"flex-1 bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/10\">\r\n                                <p className=\"text-white/70 text-[10px] font-bold uppercase tracking-widest\">Today</p>\r\n                                <p className=\"text-2xl font-black text-white\">{stats.completedToday}/{todaysGoals.length}</p>\r\n                            </div>\r\n                            <div className=\"flex-1 bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/10\">\r\n                                <p className=\"text-white/70 text-[10px] font-bold uppercase tracking-widest\">Rate</p>\r\n                                <p className=\"text-2xl font-black text-white\">{stats.averageCompletionRate}%</p>\r\n                            </div>\r\n                            <div className=\"flex-1 bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/10\">\r\n                                <p className=\"text-white/70 text-[10px] font-bold uppercase tracking-widest\">Active</p>\r\n                                <p className=\"text-2xl font-black text-white\">{stats.activeGoals}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Tabs */}\r\n                    <div className=\"flex border-b border-gray-100 dark:border-gray-800 px-6\">\r\n                        {(['today', 'goals', 'messages'] as const).map((tab) => (\r\n                            <button\r\n                                key={tab}\r\n                                onClick={() => setActiveTab(tab)}\r\n                                className={`flex-1 py-3 text-sm font-bold uppercase tracking-wide transition-colors relative ${activeTab === tab\r\n                                    ? 'text-indigo-600 dark:text-indigo-400'\r\n                                    : 'text-gray-400 hover:text-gray-600'\r\n                                    }`}\r\n                            >\r\n                                {tab === 'messages' && unreadMessages.length > 0 && (\r\n                                    <span className=\"absolute top-2 right-1/4 w-2 h-2 bg-red-500 rounded-full\" />\r\n                                )}\r\n                                {tab.charAt(0).toUpperCase() + tab.slice(1)}\r\n                                {activeTab === tab && (\r\n                                    <motion.div\r\n                                        layoutId=\"activeTab\"\r\n                                        className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-500\"\r\n                                    />\r\n                                )}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Content */}\r\n                    <div className=\"flex-1 overflow-y-auto p-6\">\r\n                        <AnimatePresence mode=\"wait\">\r\n                            {/* TODAY TAB */}\r\n                            {activeTab === 'today' && (\r\n                                <motion.div\r\n                                    key=\"today\"\r\n                                    initial={{ opacity: 0, x: -20 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    exit={{ opacity: 0, x: 20 }}\r\n                                    className=\"space-y-4\"\r\n                                >\r\n                                    {todaysGoals.length === 0 ? (\r\n                                        <div className=\"text-center py-12\">\r\n                                            <div className=\"w-20 h-20 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center\">\r\n                                                <Target className=\"w-10 h-10 text-gray-400\" />\r\n                                            </div>\r\n                                            <h3 className=\"font-bold text-gray-900 dark:text-white mb-2\">No goals for today</h3>\r\n                                            <p className=\"text-sm text-gray-500 mb-4\">Add some goals to get started!</p>\r\n                                            <button\r\n                                                onClick={() => { setActiveTab('goals'); setShowAddGoal(true); }}\r\n                                                className=\"px-6 py-3 bg-indigo-500 text-white rounded-xl font-bold hover:bg-indigo-600 transition-colors\"\r\n                                            >\r\n                                                Add Your First Goal\r\n                                            </button>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <>\r\n                                            {pendingGoals.length > 0 && (\r\n                                                <div className=\"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-4 mb-4\">\r\n                                                    <p className=\"text-sm text-amber-700 dark:text-amber-300\">\r\n                                                        <span className=\"font-bold\">{pendingGoals.length}</span> goal{pendingGoals.length > 1 ? 's' : ''} waiting for you. No pressure â€” take it one step at a time! ðŸ’ª\r\n                                                    </p>\r\n                                                </div>\r\n                                            )}\r\n\r\n                                            {todaysGoals.map((goal) => {\r\n                                                const config = CATEGORY_CONFIG[goal.category];\r\n                                                const Icon = config.icon;\r\n                                                const completed = isGoalCompletedToday(goal.id);\r\n                                                const streak = getStreak(goal.id);\r\n\r\n                                                return (\r\n                                                    <motion.div\r\n                                                        key={goal.id}\r\n                                                        layout\r\n                                                        className={`relative overflow-hidden rounded-2xl border ${completed\r\n                                                            ? 'bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800'\r\n                                                            : 'bg-white dark:bg-[#252525] border-gray-100 dark:border-gray-800'\r\n                                                            } p-4`}\r\n                                                    >\r\n                                                        <div className=\"flex items-start gap-4\">\r\n                                                            <div className={`p-3 rounded-xl ${completed ? 'bg-green-100 dark:bg-green-900/40' : config.bg}`}>\r\n                                                                {completed ? (\r\n                                                                    <Check className=\"w-6 h-6 text-green-600 dark:text-green-400\" />\r\n                                                                ) : (\r\n                                                                    <Icon className={`w-6 h-6 ${config.color}`} />\r\n                                                                )}\r\n                                                            </div>\r\n                                                            <div className=\"flex-1\">\r\n                                                                <h4 className={`font-bold ${completed ? 'text-green-700 dark:text-green-300 line-through' : 'text-gray-900 dark:text-white'}`}>\r\n                                                                    {goal.title}\r\n                                                                </h4>\r\n                                                                <div className=\"flex items-center gap-3 mt-1\">\r\n                                                                    {goal.scheduledTime && (\r\n                                                                        <span className=\"text-xs text-gray-400 flex items-center gap-1\">\r\n                                                                            <Clock className=\"w-3 h-3\" />\r\n                                                                            {goal.scheduledTime}\r\n                                                                        </span>\r\n                                                                    )}\r\n                                                                    {streak && streak.currentStreak > 0 && (\r\n                                                                        <span className=\"text-xs text-orange-500 font-bold flex items-center gap-1\">\r\n                                                                            <Flame className=\"w-3 h-3\" />\r\n                                                                            {streak.currentStreak} day{streak.currentStreak > 1 ? 's' : ''}\r\n                                                                        </span>\r\n                                                                    )}\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            {!completed && (\r\n                                                                <button\r\n                                                                    onClick={() => setSelectedGoalForComplete(goal.id)}\r\n                                                                    className=\"p-2 rounded-full bg-indigo-100 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-200 transition-colors\"\r\n                                                                >\r\n                                                                    <Check className=\"w-5 h-5\" />\r\n                                                                </button>\r\n                                                            )}\r\n                                                        </div>\r\n\r\n                                                        {/* Completion Modal */}\r\n                                                        <AnimatePresence>\r\n                                                            {selectedGoalForComplete === goal.id && (\r\n                                                                <motion.div\r\n                                                                    initial={{ opacity: 0, height: 0 }}\r\n                                                                    animate={{ opacity: 1, height: 'auto' }}\r\n                                                                    exit={{ opacity: 0, height: 0 }}\r\n                                                                    className=\"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700\"\r\n                                                                >\r\n                                                                    <p className=\"text-sm font-bold text-gray-700 dark:text-gray-300 mb-3\">How are you feeling? ðŸ’­</p>\r\n                                                                    <div className=\"flex gap-2 mb-3\">\r\n                                                                        {(['great', 'good', 'okay', 'tough'] as const).map((mood) => (\r\n                                                                            <button\r\n                                                                                key={mood}\r\n                                                                                onClick={() => setCompletionMood(mood)}\r\n                                                                                className={`flex-1 py-2 rounded-lg text-sm font-bold transition-colors ${completionMood === mood\r\n                                                                                    ? 'bg-indigo-500 text-white'\r\n                                                                                    : 'bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300'\r\n                                                                                    }`}\r\n                                                                            >\r\n                                                                                {mood === 'great' && 'ðŸŒŸ'}\r\n                                                                                {mood === 'good' && 'ðŸ˜Š'}\r\n                                                                                {mood === 'okay' && 'ðŸ˜'}\r\n                                                                                {mood === 'tough' && 'ðŸ˜”'}\r\n                                                                            </button>\r\n                                                                        ))}\r\n                                                                    </div>\r\n                                                                    <input\r\n                                                                        type=\"text\"\r\n                                                                        placeholder=\"Quick note (optional)\"\r\n                                                                        value={completionNote}\r\n                                                                        onChange={(e) => setCompletionNote(e.target.value)}\r\n                                                                        className=\"w-full px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white text-sm mb-3 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n                                                                    />\r\n                                                                    <div className=\"flex gap-2\">\r\n                                                                        <button\r\n                                                                            onClick={() => setSelectedGoalForComplete(null)}\r\n                                                                            className=\"flex-1 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 font-bold hover:bg-gray-200 transition-colors\"\r\n                                                                        >\r\n                                                                            Cancel\r\n                                                                        </button>\r\n                                                                        <button\r\n                                                                            onClick={() => handleCompleteGoal(goal.id)}\r\n                                                                            className=\"flex-1 py-2 rounded-lg bg-green-500 text-white font-bold hover:bg-green-600 transition-colors\"\r\n                                                                        >\r\n                                                                            Complete! ðŸŽ‰\r\n                                                                        </button>\r\n                                                                    </div>\r\n                                                                </motion.div>\r\n                                                            )}\r\n                                                        </AnimatePresence>\r\n                                                    </motion.div>\r\n                                                );\r\n                                            })}\r\n                                        </>\r\n                                    )}\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {/* GOALS TAB */}\r\n                            {activeTab === 'goals' && (\r\n                                <motion.div\r\n                                    key=\"goals\"\r\n                                    initial={{ opacity: 0, x: -20 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    exit={{ opacity: 0, x: 20 }}\r\n                                    className=\"space-y-4\"\r\n                                >\r\n                                    {/* Add Goal Button */}\r\n                                    <button\r\n                                        onClick={() => setShowAddGoal(true)}\r\n                                        className=\"w-full p-4 rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-700 flex items-center justify-center gap-2 text-gray-500 hover:border-indigo-400 hover:text-indigo-500 transition-colors\"\r\n                                    >\r\n                                        <Plus className=\"w-5 h-5\" />\r\n                                        <span className=\"font-bold\">Add New Goal</span>\r\n                                    </button>\r\n\r\n                                    {/* Goals List */}\r\n                                    {activeGoals.map((goal) => {\r\n                                        const config = CATEGORY_CONFIG[goal.category];\r\n                                        const Icon = config.icon;\r\n                                        const streak = getStreak(goal.id);\r\n                                        const rate = getCompletionRate(goal.id, 7);\r\n\r\n                                        return (\r\n                                            <motion.div\r\n                                                key={goal.id}\r\n                                                layout\r\n                                                className=\"bg-white dark:bg-[#252525] rounded-2xl border border-gray-100 dark:border-gray-800 p-4\"\r\n                                            >\r\n                                                <div className=\"flex items-start gap-4\">\r\n                                                    <div className={`p-3 rounded-xl ${config.bg}`}>\r\n                                                        <Icon className={`w-6 h-6 ${config.color}`} />\r\n                                                    </div>\r\n                                                    <div className=\"flex-1\">\r\n                                                        <h4 className=\"font-bold text-gray-900 dark:text-white\">{goal.title}</h4>\r\n                                                        <p className=\"text-xs text-gray-400 mt-0.5\">\r\n                                                            {FREQUENCY_LABELS[goal.frequency]}\r\n                                                            {goal.scheduledTime && ` â€¢ ${goal.scheduledTime}`}\r\n                                                        </p>\r\n                                                        <div className=\"flex items-center gap-4 mt-2\">\r\n                                                            <div className=\"flex items-center gap-1\">\r\n                                                                <TrendingUp className=\"w-3 h-3 text-green-500\" />\r\n                                                                <span className=\"text-xs font-bold text-gray-600 dark:text-gray-400\">{rate}%</span>\r\n                                                            </div>\r\n                                                            {streak && streak.currentStreak > 0 && (\r\n                                                                <div className=\"flex items-center gap-1\">\r\n                                                                    <Flame className=\"w-3 h-3 text-orange-500\" />\r\n                                                                    <span className=\"text-xs font-bold text-gray-600 dark:text-gray-400\">{streak.currentStreak} days</span>\r\n                                                                </div>\r\n                                                            )}\r\n                                                            {streak && streak.longestStreak > 0 && (\r\n                                                                <div className=\"flex items-center gap-1\">\r\n                                                                    <Award className=\"w-3 h-3 text-purple-500\" />\r\n                                                                    <span className=\"text-xs font-bold text-gray-600 dark:text-gray-400\">Best: {streak.longestStreak}</span>\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"flex gap-1\">\r\n                                                        <button\r\n                                                            onClick={() => setEditingGoal(goal)}\r\n                                                            className=\"p-2 rounded-lg text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n                                                        >\r\n                                                            <Pencil className=\"w-4 h-4\" />\r\n                                                        </button>\r\n                                                        <button\r\n                                                            onClick={() => deleteGoal(goal.id)}\r\n                                                            className=\"p-2 rounded-lg text-gray-400 hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/20 transition-colors\"\r\n                                                        >\r\n                                                            <Trash2 className=\"w-4 h-4\" />\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </motion.div>\r\n                                        );\r\n                                    })}\r\n\r\n                                    {activeGoals.length === 0 && !showAddGoal && (\r\n                                        <div className=\"text-center py-8 text-gray-500\">\r\n                                            <p>No active goals yet. Add one to get started!</p>\r\n                                        </div>\r\n                                    )}\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {/* MESSAGES TAB */}\r\n                            {activeTab === 'messages' && (\r\n                                <motion.div\r\n                                    key=\"messages\"\r\n                                    initial={{ opacity: 0, x: -20 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    exit={{ opacity: 0, x: 20 }}\r\n                                    className=\"space-y-3\"\r\n                                >\r\n                                    {messages.length === 0 ? (\r\n                                        <div className=\"text-center py-12 text-gray-500\">\r\n                                            <MessageSquare className=\"w-12 h-12 mx-auto mb-4 text-gray-300\" />\r\n                                            <p>No messages yet. Complete goals to hear from me! ðŸ’¬</p>\r\n                                            <button\r\n                                                onClick={() => generateTestMessages()}\r\n                                                className=\"mt-4 px-4 py-2 bg-indigo-500 text-white rounded-xl font-bold text-sm hover:bg-indigo-600 transition-colors\"\r\n                                            >\r\n                                                ðŸ§ª Generate Test Messages\r\n                                            </button>\r\n                                        </div>\r\n                                    ) : (\r\n                                        messages.map((msg) => (\r\n                                            <motion.div\r\n                                                key={msg.id}\r\n                                                initial={{ opacity: 0, y: 10 }}\r\n                                                animate={{ opacity: 1, y: 0 }}\r\n                                                className={`p-4 rounded-2xl ${msg.type === 'acknowledgment' || msg.type === 'streak-celebration'\r\n                                                    ? 'bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800'\r\n                                                    : msg.type === 'reminder'\r\n                                                        ? 'bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800'\r\n                                                        : msg.type === 'gentle-nudge'\r\n                                                            ? 'bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800'\r\n                                                            : 'bg-gray-50 dark:bg-gray-800 border border-gray-100 dark:border-gray-700'\r\n                                                    }`}\r\n                                            >\r\n                                                <p className=\"text-sm text-gray-700 dark:text-gray-200\">{msg.message}</p>\r\n                                                <p className=\"text-[10px] text-gray-400 mt-2\">\r\n                                                    {new Date(msg.timestamp).toLocaleString()}\r\n                                                </p>\r\n                                            </motion.div>\r\n                                        ))\r\n                                    )}\r\n                                </motion.div>\r\n                            )}\r\n                        </AnimatePresence>\r\n                    </div>\r\n\r\n                    {/* Add Goal Modal */}\r\n                    <AnimatePresence>\r\n                        {showAddGoal && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                exit={{ opacity: 0 }}\r\n                                className=\"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-end justify-center\"\r\n                                onClick={() => setShowAddGoal(false)}\r\n                            >\r\n                                <motion.div\r\n                                    initial={{ y: '100%' }}\r\n                                    animate={{ y: 0 }}\r\n                                    exit={{ y: '100%' }}\r\n                                    transition={{ type: 'spring', damping: 25 }}\r\n                                    onClick={(e) => e.stopPropagation()}\r\n                                    className=\"w-full bg-white dark:bg-[#1A1A1A] rounded-t-[2rem] p-6 max-h-[80vh] overflow-y-auto\"\r\n                                >\r\n                                    <div className=\"flex items-center justify-between mb-6\">\r\n                                        <h3 className=\"text-xl font-black text-gray-900 dark:text-white\">Add New Goal</h3>\r\n                                        <button\r\n                                            onClick={() => setShowAddGoal(false)}\r\n                                            className=\"p-2 rounded-full bg-gray-100 dark:bg-gray-800\"\r\n                                        >\r\n                                            <X className=\"w-5 h-5 text-gray-500\" />\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-5\">\r\n                                        {/* Title */}\r\n                                        <div>\r\n                                            <label className=\"text-xs font-bold text-gray-500 uppercase tracking-widest\">What's your goal?</label>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={newGoal.title}\r\n                                                onChange={(e) => setNewGoal(prev => ({ ...prev, title: e.target.value }))}\r\n                                                placeholder=\"e.g., Meditate for 10 minutes\"\r\n                                                className=\"w-full mt-2 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n                                            />\r\n                                        </div>\r\n\r\n                                        {/* Category */}\r\n                                        <div>\r\n                                            <label className=\"text-xs font-bold text-gray-500 uppercase tracking-widest\">Category</label>\r\n                                            <div className=\"grid grid-cols-4 gap-2 mt-2\">\r\n                                                {(Object.keys(CATEGORY_CONFIG) as GoalCategory[]).map((cat) => {\r\n                                                    const config = CATEGORY_CONFIG[cat];\r\n                                                    const Icon = config.icon;\r\n                                                    return (\r\n                                                        <button\r\n                                                            key={cat}\r\n                                                            onClick={() => setNewGoal(prev => ({ ...prev, category: cat }))}\r\n                                                            className={`p-3 rounded-xl flex flex-col items-center gap-1 transition-colors ${newGoal.category === cat\r\n                                                                ? 'bg-indigo-100 dark:bg-indigo-900/40 ring-2 ring-indigo-500'\r\n                                                                : 'bg-gray-100 dark:bg-gray-800'\r\n                                                                }`}\r\n                                                        >\r\n                                                            <Icon className={`w-5 h-5 ${config.color}`} />\r\n                                                            <span className=\"text-[10px] font-bold text-gray-600 dark:text-gray-300 capitalize\">{cat}</span>\r\n                                                        </button>\r\n                                                    );\r\n                                                })}\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {/* Frequency */}\r\n                                        <div>\r\n                                            <label className=\"text-xs font-bold text-gray-500 uppercase tracking-widest\">Frequency</label>\r\n                                            <div className=\"flex gap-2 mt-2\">\r\n                                                {(['daily', 'weekly', 'custom'] as GoalFrequency[]).map((freq) => (\r\n                                                    <button\r\n                                                        key={freq}\r\n                                                        onClick={() => setNewGoal(prev => ({ ...prev, frequency: freq }))}\r\n                                                        className={`flex-1 py-3 rounded-xl font-bold text-sm transition-colors ${newGoal.frequency === freq\r\n                                                            ? 'bg-indigo-500 text-white'\r\n                                                            : 'bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300'\r\n                                                            }`}\r\n                                                    >\r\n                                                        {FREQUENCY_LABELS[freq]}\r\n                                                    </button>\r\n                                                ))}\r\n                                            </div>\r\n\r\n                                            {/* Custom Days */}\r\n                                            {newGoal.frequency === 'custom' && (\r\n                                                <div className=\"flex gap-1 mt-3\">\r\n                                                    {DAY_NAMES.map((day, i) => (\r\n                                                        <button\r\n                                                            key={day}\r\n                                                            onClick={() => toggleCustomDay(i)}\r\n                                                            className={`flex-1 py-2 rounded-lg text-xs font-bold transition-colors ${newGoal.customDays.includes(i)\r\n                                                                ? 'bg-indigo-500 text-white'\r\n                                                                : 'bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300'\r\n                                                                }`}\r\n                                                        >\r\n                                                            {day}\r\n                                                        </button>\r\n                                                    ))}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        {/* Scheduled Time */}\r\n                                        <div>\r\n                                            <label className=\"text-xs font-bold text-gray-500 uppercase tracking-widest\">Scheduled Time</label>\r\n                                            <input\r\n                                                type=\"time\"\r\n                                                value={newGoal.scheduledTime}\r\n                                                onChange={(e) => setNewGoal(prev => ({ ...prev, scheduledTime: e.target.value }))}\r\n                                                className=\"w-full mt-2 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n                                            />\r\n                                        </div>\r\n\r\n                                        {/* Reminder Toggle */}\r\n                                        <div className=\"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-xl\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <Bell className=\"w-5 h-5 text-indigo-500\" />\r\n                                                <div>\r\n                                                    <p className=\"font-bold text-gray-900 dark:text-white text-sm\">Reminders</p>\r\n                                                    <p className=\"text-xs text-gray-500\">{newGoal.reminderMinutesBefore} min before</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <button\r\n                                                onClick={() => setNewGoal(prev => ({ ...prev, reminderEnabled: !prev.reminderEnabled }))}\r\n                                                className={`w-12 h-7 rounded-full transition-colors relative ${newGoal.reminderEnabled ? 'bg-indigo-500' : 'bg-gray-300 dark:bg-gray-600'\r\n                                                    }`}\r\n                                            >\r\n                                                <div className={`absolute top-1 w-5 h-5 rounded-full bg-white transition-all shadow-sm ${newGoal.reminderEnabled ? 'left-6' : 'left-1'\r\n                                                    }`} />\r\n                                            </button>\r\n                                        </div>\r\n\r\n                                        {/* Reflective Goal Toggle */}\r\n                                        <div className=\"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-xl\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <Pencil className=\"w-5 h-5 text-purple-500\" />\r\n                                                <div>\r\n                                                    <p className=\"font-bold text-gray-900 dark:text-white text-sm\">Low-effort Goal</p>\r\n                                                    <p className=\"text-xs text-gray-500\">Like journaling or reflection</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <button\r\n                                                onClick={() => setNewGoal(prev => ({ ...prev, isReflective: !prev.isReflective }))}\r\n                                                className={`w-12 h-7 rounded-full transition-colors relative ${newGoal.isReflective ? 'bg-purple-500' : 'bg-gray-300 dark:bg-gray-600'\r\n                                                    }`}\r\n                                            >\r\n                                                <div className={`absolute top-1 w-5 h-5 rounded-full bg-white transition-all shadow-sm ${newGoal.isReflective ? 'left-6' : 'left-1'\r\n                                                    }`} />\r\n                                            </button>\r\n                                        </div>\r\n\r\n                                        {/* Submit Button */}\r\n                                        <button\r\n                                            onClick={handleAddGoal}\r\n                                            disabled={!newGoal.title.trim()}\r\n                                            className=\"w-full py-4 bg-indigo-500 text-white rounded-2xl font-bold shadow-lg shadow-indigo-500/30 hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                        >\r\n                                            Add Goal ðŸŽ¯\r\n                                        </button>\r\n                                    </div>\r\n                                </motion.div>\r\n                            </motion.div>\r\n                        )}\r\n                    </AnimatePresence>\r\n                </motion.div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n};\r\n\r\nexport default GoalAssistant;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\GoalAssistantWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\LearningSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\LenisProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\LooksmaxxingSection.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\LooksmaxxingSection.tsx:113:13\n  111 |             const yesterday = new Date(); yesterday.setDate(yesterday.getDate() - 1);\n  112 |             const yesterdayStr = yesterday.toISOString().split('T')[0];\n> 113 |             setProgress(prev => ({\n      |             ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  114 |                 ...prev,\n  115 |                 streak: prev.lastActiveDate === yesterdayStr ? prev.streak + 1 : 1,\n  116 |                 lastActiveDate: today","line":113,"column":13,"nodeType":null,"endLine":113,"endColumn":24},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'progress.lastActiveDate'. Either include it or remove the dependency array.","line":119,"column":8,"nodeType":"ArrayExpression","endLine":119,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [progress.lastActiveDate]","fix":{"range":[8450,8452],"text":"[progress.lastActiveDate]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    ArrowLeft, Sparkles, Apple, Dumbbell, Zap, Smile, Heart,\r\n    BookOpen, Trophy, CheckCircle2, Lock, ChevronRight, Flame,\r\n    X, Clock, Video, FileText, Award, Moon, Sun, Target,\r\n    Footprints, Wind, Hand, Utensils, Play\r\n} from 'lucide-react';\r\nimport { THEME_CLASSES, LUXURY_ANIMATIONS } from '../utils/theme';\r\n\r\n// Types\r\ninterface Lesson { id: string; title: string; description: string; duration: string; type: 'text' | 'video'; completed: boolean; }\r\ninterface Module { id: string; title: string; description: string; icon: React.ElementType; color: string; lessons: Lesson[]; }\r\ninterface HabitEntry { date: string; habits: { [key: string]: boolean }; }\r\ninterface UserProgress { completedLessons: string[]; completedModules: string[]; quizScores: { [id: string]: number }; streak: number; lastActiveDate: string; badges: string[]; totalXP: number; habits: HabitEntry[]; }\r\n\r\n// Five Pillars Data\r\nconst PILLARS: Module[] = [\r\n    {\r\n        id: 'diet', title: 'Diet & Nutrition', description: '100% clean eating - red meat, fruit, eggs, raw dairy',\r\n        icon: Apple, color: 'from-green-500 to-emerald-600',\r\n        lessons: [\r\n            { id: 'd1', title: 'Core Philosophy', description: 'Health is Looks - why clean eating transforms appearance', duration: '5 min', type: 'text', completed: false },\r\n            { id: 'd2', title: 'Allowed Foods', description: 'Red meat, fruit, eggs, honey, raw A2 dairy explained', duration: '6 min', type: 'video', completed: false },\r\n            { id: 'd3', title: 'Foods to Avoid', description: 'Seed oils, processed foods, and why they damage you', duration: '5 min', type: 'text', completed: false },\r\n            { id: 'd4', title: 'Cooking Guidelines', description: 'Cast iron, tallow, proper preparation methods', duration: '4 min', type: 'video', completed: false },\r\n            { id: 'd5', title: 'Advanced: Organ Meats', description: 'Liver, bone broth, and nutrient density', duration: '5 min', type: 'text', completed: false },\r\n            { id: 'd6', title: 'Meal Timing', description: 'When to eat for optimal hormones and energy', duration: '4 min', type: 'text', completed: false },\r\n        ]\r\n    },\r\n    {\r\n        id: 'fitness', title: 'Fitness & Movement', description: 'Natural movement patterns - walking, sprinting, sports',\r\n        icon: Dumbbell, color: 'from-orange-500 to-red-500',\r\n        lessons: [\r\n            { id: 'f1', title: 'Movement Philosophy', description: 'Why natural movement beats gym routines', duration: '4 min', type: 'text', completed: false },\r\n            { id: 'f2', title: 'Daily Walking', description: '10,000+ steps - the foundation of fitness', duration: '3 min', type: 'video', completed: false },\r\n            { id: 'f3', title: 'Sprint Protocol', description: '10-second all-out sprints, proper recovery', duration: '5 min', type: 'video', completed: false },\r\n            { id: 'f4', title: 'Recreational Sports', description: 'Basketball, swimming, climbing for fun fitness', duration: '4 min', type: 'text', completed: false },\r\n            { id: 'f5', title: 'Avoid Long Cardio', description: 'Why marathon running ages you', duration: '3 min', type: 'text', completed: false },\r\n        ]\r\n    },\r\n    {\r\n        id: 'hormones', title: 'Hormone Optimization', description: 'Avoid endocrine disruptors, optimize thyroid',\r\n        icon: Zap, color: 'from-purple-500 to-violet-600',\r\n        lessons: [\r\n            { id: 'h1', title: 'Endocrine Disruptors', description: 'Fragrances, plastics, polyester - hidden dangers', duration: '5 min', type: 'text', completed: false },\r\n            { id: 'h2', title: 'Thyroid Health', description: 'The master gland for metabolism and appearance', duration: '6 min', type: 'video', completed: false },\r\n            { id: 'h3', title: 'Sleep Optimization', description: 'Dark room, cool temp, consistent schedule', duration: '4 min', type: 'text', completed: false },\r\n            { id: 'h4', title: 'Sunlight Exposure', description: 'Morning sun for circadian rhythm and vitamin D', duration: '4 min', type: 'text', completed: false },\r\n        ]\r\n    },\r\n    {\r\n        id: 'facial', title: 'Facial Techniques', description: 'Mewing, thumb pulling, chin tucking for structure',\r\n        icon: Smile, color: 'from-blue-500 to-cyan-500',\r\n        lessons: [\r\n            { id: 'fc1', title: 'Proper Tongue Posture', description: 'Mewing basics - tongue on palate 24/7', duration: '5 min', type: 'video', completed: false },\r\n            { id: 'fc2', title: 'Thumb Pulling', description: 'Palate expansion technique for wider face', duration: '6 min', type: 'video', completed: false },\r\n            { id: 'fc3', title: 'Chin Tucking', description: 'Correct forward head posture', duration: '4 min', type: 'video', completed: false },\r\n            { id: 'fc4', title: 'Chewing Practice', description: 'Hard chewing for masseter development', duration: '4 min', type: 'text', completed: false },\r\n        ]\r\n    },\r\n    {\r\n        id: 'habits', title: 'Myofunctional Habits', description: 'Breathing, posture, swallowing patterns',\r\n        icon: Heart, color: 'from-pink-500 to-rose-500',\r\n        lessons: [\r\n            { id: 'hb1', title: 'Nasal Breathing', description: 'Mouth closed 24/7, even during exercise', duration: '4 min', type: 'text', completed: false },\r\n            { id: 'hb2', title: 'Proper Swallowing', description: 'Tongue-driven swallow without facial muscles', duration: '5 min', type: 'video', completed: false },\r\n            { id: 'hb3', title: 'Posture Correction', description: 'Shoulders back, chin tucked, spine aligned', duration: '5 min', type: 'video', completed: false },\r\n            { id: 'hb4', title: 'Lip Seal', description: 'Maintaining closed lips at rest', duration: '3 min', type: 'text', completed: false },\r\n        ]\r\n    }\r\n];\r\n\r\nconst DAILY_HABITS = [\r\n    { id: 'steps', label: '10K Steps', icon: Footprints },\r\n    { id: 'sprint', label: 'Sprint Session', icon: Zap },\r\n    { id: 'thumbpull', label: 'Thumb Pulling', icon: Hand },\r\n    { id: 'chewing', label: 'Hard Chewing', icon: Utensils },\r\n    { id: 'cleaneating', label: 'Clean Eating', icon: Apple },\r\n    { id: 'nasalbreath', label: 'Nasal Breathing', icon: Wind },\r\n];\r\n\r\nconst BADGES = [\r\n    { id: 'first-lesson', name: 'First Step', description: 'Complete your first lesson', icon: 'ðŸŽ¯' },\r\n    { id: 'pillar-master', name: 'Pillar Master', description: 'Complete a full pillar', icon: 'ðŸ›ï¸' },\r\n    { id: 'streak-7', name: 'Week Warrior', description: '7-day streak', icon: 'ðŸ”¥' },\r\n    { id: 'habit-king', name: 'Habit King', description: 'Complete all daily habits', icon: 'ðŸ‘‘' },\r\n    { id: 'all-pillars', name: 'Ascended', description: 'Complete all 5 pillars', icon: 'â­' },\r\n    { id: 'xp-500', name: 'Dedicated', description: 'Earn 500 XP', icon: 'ðŸ’Ž' },\r\n];\r\n\r\nconst LooksmaxxingSection: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const [activeTab, setActiveTab] = useState<'learn' | 'habits' | 'progress' | 'badges'>('learn');\r\n    const [selectedPillar, setSelectedPillar] = useState<Module | null>(null);\r\n    const [selectedLesson, setSelectedLesson] = useState<Lesson | null>(null);\r\n    const [isDarkMode, setIsDarkMode] = useState(() => document.documentElement.classList.contains('dark'));\r\n\r\n    const [progress, setProgress] = useState<UserProgress>(() => {\r\n        const saved = localStorage.getItem('looksmaxxing_progress');\r\n        if (saved) return JSON.parse(saved);\r\n        return { completedLessons: [], completedModules: [], quizScores: {}, streak: 0, lastActiveDate: '', badges: [], totalXP: 0, habits: [] };\r\n    });\r\n\r\n    useEffect(() => { localStorage.setItem('looksmaxxing_progress', JSON.stringify(progress)); }, [progress]);\r\n\r\n    useEffect(() => {\r\n        const today = new Date().toISOString().split('T')[0];\r\n        if (progress.lastActiveDate !== today) {\r\n            const yesterday = new Date(); yesterday.setDate(yesterday.getDate() - 1);\r\n            const yesterdayStr = yesterday.toISOString().split('T')[0];\r\n            setProgress(prev => ({\r\n                ...prev,\r\n                streak: prev.lastActiveDate === yesterdayStr ? prev.streak + 1 : 1,\r\n                lastActiveDate: today\r\n            }));\r\n        }\r\n    }, []);\r\n\r\n    const getPillarProgress = (pillar: Module) => {\r\n        const completed = pillar.lessons.filter(l => progress.completedLessons.includes(l.id)).length;\r\n        return Math.round((completed / pillar.lessons.length) * 100);\r\n    };\r\n\r\n    const getTotalProgress = () => {\r\n        const total = PILLARS.reduce((acc, p) => acc + p.lessons.length, 0);\r\n        return Math.round((progress.completedLessons.length / total) * 100);\r\n    };\r\n\r\n    const completeLesson = (lessonId: string) => {\r\n        if (!progress.completedLessons.includes(lessonId)) {\r\n            const newProgress = { ...progress };\r\n            newProgress.completedLessons.push(lessonId);\r\n            newProgress.totalXP += 15;\r\n\r\n            if (newProgress.completedLessons.length === 1 && !newProgress.badges.includes('first-lesson')) {\r\n                newProgress.badges.push('first-lesson');\r\n            }\r\n            if (newProgress.totalXP >= 500 && !newProgress.badges.includes('xp-500')) {\r\n                newProgress.badges.push('xp-500');\r\n            }\r\n\r\n            // Check pillar completion\r\n            PILLARS.forEach(pillar => {\r\n                const allDone = pillar.lessons.every(l => newProgress.completedLessons.includes(l.id));\r\n                if (allDone && !newProgress.completedModules.includes(pillar.id)) {\r\n                    newProgress.completedModules.push(pillar.id);\r\n                    if (!newProgress.badges.includes('pillar-master')) newProgress.badges.push('pillar-master');\r\n                }\r\n            });\r\n\r\n            if (newProgress.completedModules.length === 5 && !newProgress.badges.includes('all-pillars')) {\r\n                newProgress.badges.push('all-pillars');\r\n            }\r\n\r\n            setProgress(newProgress);\r\n        }\r\n        setSelectedLesson(null);\r\n    };\r\n\r\n    const toggleHabit = (habitId: string) => {\r\n        const today = new Date().toISOString().split('T')[0];\r\n        const newProgress = { ...progress };\r\n        let todayEntry = newProgress.habits.find(h => h.date === today);\r\n\r\n        if (!todayEntry) {\r\n            todayEntry = { date: today, habits: {} };\r\n            newProgress.habits.push(todayEntry);\r\n        }\r\n\r\n        todayEntry.habits[habitId] = !todayEntry.habits[habitId];\r\n\r\n        // Check if all habits completed\r\n        const allDone = DAILY_HABITS.every(h => todayEntry!.habits[h.id]);\r\n        if (allDone && !newProgress.badges.includes('habit-king')) {\r\n            newProgress.badges.push('habit-king');\r\n            newProgress.totalXP += 50;\r\n        }\r\n\r\n        setProgress(newProgress);\r\n    };\r\n\r\n    const getTodayHabits = () => {\r\n        const today = new Date().toISOString().split('T')[0];\r\n        return progress.habits.find(h => h.date === today)?.habits || {};\r\n    };\r\n\r\n    const toggleDarkMode = () => {\r\n        document.documentElement.classList.toggle('dark');\r\n        setIsDarkMode(!isDarkMode);\r\n    };\r\n\r\n    return (\r\n        <div className={`min-h-screen ${THEME_CLASSES.BG_PRIMARY} pb-24 font-sans`}>\r\n            {/* Header */}\r\n            <header className=\"sticky top-0 z-40 px-6 py-5 bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-xl border-b border-border-light dark:border-border-dark\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                    <button onClick={() => navigate('/dashboard')} className=\"p-2 -ml-2 rounded-xl hover:bg-black/5 dark:hover:bg-white/5 transition-all\">\r\n                        <ArrowLeft className=\"w-6 h-6\" />\r\n                    </button>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Sparkles className=\"w-6 h-6 text-rose-500\" />\r\n                        <h1 className=\"text-xl font-black tracking-tight text-heading-light dark:text-text-dark\">Looksmaxxing</h1>\r\n                    </div>\r\n                    <button onClick={toggleDarkMode} className=\"p-2 rounded-xl hover:bg-black/5 dark:hover:bg-white/5 transition-all\">\r\n                        {isDarkMode ? <Sun className=\"w-5 h-5 text-yellow-500\" /> : <Moon className=\"w-5 h-5\" />}\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Tabs */}\r\n                <div className=\"flex gap-1 overflow-x-auto no-scrollbar\">\r\n                    {[\r\n                        { id: 'learn', label: 'Learn', icon: BookOpen },\r\n                        { id: 'habits', label: 'Daily', icon: Target },\r\n                        { id: 'progress', label: 'Progress', icon: Trophy },\r\n                        { id: 'badges', label: 'Badges', icon: Award },\r\n                    ].map(tab => (\r\n                        <button\r\n                            key={tab.id}\r\n                            onClick={() => setActiveTab(tab.id as typeof activeTab)}\r\n                            className={`flex items-center gap-1.5 px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-all whitespace-nowrap ${activeTab === tab.id\r\n                                ? 'bg-gradient-to-r from-rose-500 to-pink-500 text-white shadow-lg'\r\n                                : 'text-subtext-light dark:text-subtext-dark hover:bg-black/5 dark:hover:bg-white/5'}`}\r\n                        >\r\n                            <tab.icon className=\"w-3.5 h-3.5\" />\r\n                            {tab.label}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </header>\r\n\r\n            <main className=\"px-6 py-6 max-w-lg mx-auto\">\r\n                <AnimatePresence mode=\"wait\">\r\n                    {/* LEARN TAB */}\r\n                    {activeTab === 'learn' && (\r\n                        <motion.div key=\"learn\" variants={LUXURY_ANIMATIONS.fadeIn} initial=\"initial\" animate=\"animate\" exit=\"initial\" className=\"space-y-6\">\r\n                            {/* Stats */}\r\n                            <div className=\"grid grid-cols-3 gap-3\">\r\n                                <div className={`${THEME_CLASSES.CARD} p-4 text-center`}>\r\n                                    <div className=\"flex items-center justify-center gap-1 mb-1\">\r\n                                        <Flame className=\"w-4 h-4 text-orange-500\" />\r\n                                        <span className=\"text-lg font-black text-heading-light dark:text-text-dark\">{progress.streak}</span>\r\n                                    </div>\r\n                                    <p className=\"text-[9px] font-bold uppercase text-subtext-light tracking-widest\">Streak</p>\r\n                                </div>\r\n                                <div className={`${THEME_CLASSES.CARD} p-4 text-center`}>\r\n                                    <div className=\"flex items-center justify-center gap-1 mb-1\">\r\n                                        <Zap className=\"w-4 h-4 text-yellow-500\" />\r\n                                        <span className=\"text-lg font-black text-heading-light dark:text-text-dark\">{progress.totalXP}</span>\r\n                                    </div>\r\n                                    <p className=\"text-[9px] font-bold uppercase text-subtext-light tracking-widest\">XP</p>\r\n                                </div>\r\n                                <div className={`${THEME_CLASSES.CARD} p-4 text-center`}>\r\n                                    <div className=\"flex items-center justify-center gap-1 mb-1\">\r\n                                        <Sparkles className=\"w-4 h-4 text-rose-500\" />\r\n                                        <span className=\"text-lg font-black text-heading-light dark:text-text-dark\">{getTotalProgress()}%</span>\r\n                                    </div>\r\n                                    <p className=\"text-[9px] font-bold uppercase text-subtext-light tracking-widest\">Complete</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Pillars */}\r\n                            <div className=\"space-y-4\">\r\n                                {PILLARS.map((pillar, index) => {\r\n                                    const pillarProgress = getPillarProgress(pillar);\r\n                                    const isCompleted = progress.completedModules.includes(pillar.id);\r\n                                    return (\r\n                                        <motion.div\r\n                                            key={pillar.id}\r\n                                            initial={{ opacity: 0, y: 20 }}\r\n                                            animate={{ opacity: 1, y: 0 }}\r\n                                            transition={{ delay: index * 0.1 }}\r\n                                            onClick={() => setSelectedPillar(pillar)}\r\n                                            className={`${THEME_CLASSES.CARD} p-5 cursor-pointer group overflow-hidden relative`}\r\n                                        >\r\n                                            <div className={`absolute inset-0 bg-gradient-to-r ${pillar.color} opacity-5 group-hover:opacity-10 transition-opacity`} />\r\n                                            <div className=\"relative z-10 flex items-start gap-4\">\r\n                                                <div className={`w-14 h-14 rounded-2xl bg-gradient-to-br ${pillar.color} flex items-center justify-center text-white shadow-lg`}>\r\n                                                    <pillar.icon className=\"w-6 h-6\" />\r\n                                                </div>\r\n                                                <div className=\"flex-1\">\r\n                                                    <div className=\"flex items-center gap-2 mb-1\">\r\n                                                        <h3 className=\"font-bold text-heading-light dark:text-text-dark\">{pillar.title}</h3>\r\n                                                        {isCompleted && <CheckCircle2 className=\"w-4 h-4 text-green-500\" />}\r\n                                                    </div>\r\n                                                    <p className=\"text-xs text-subtext-light dark:text-subtext-dark mb-3\">{pillar.description}</p>\r\n                                                    <div className=\"flex items-center gap-3\">\r\n                                                        <div className=\"flex-1 h-1.5 bg-border-light dark:bg-border-dark rounded-full overflow-hidden\">\r\n                                                            <div className={`h-full bg-gradient-to-r ${pillar.color} transition-all duration-500`} style={{ width: `${pillarProgress}%` }} />\r\n                                                        </div>\r\n                                                        <span className=\"text-[10px] font-bold text-rose-500\">{pillarProgress}%</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <ChevronRight className=\"w-5 h-5 text-subtext-light group-hover:translate-x-1 transition-transform\" />\r\n                                            </div>\r\n                                        </motion.div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {/* HABITS TAB */}\r\n                    {activeTab === 'habits' && (\r\n                        <motion.div key=\"habits\" variants={LUXURY_ANIMATIONS.fadeIn} initial=\"initial\" animate=\"animate\" exit=\"initial\" className=\"space-y-6\">\r\n                            <div className={`${THEME_CLASSES.CARD} p-6`}>\r\n                                <h3 className=\"font-bold text-heading-light dark:text-text-dark mb-4 flex items-center gap-2\">\r\n                                    <Target className=\"w-5 h-5 text-rose-500\" />\r\n                                    Daily Habits\r\n                                </h3>\r\n                                <div className=\"space-y-3\">\r\n                                    {DAILY_HABITS.map(habit => {\r\n                                        const isChecked = getTodayHabits()[habit.id] || false;\r\n                                        return (\r\n                                            <div\r\n                                                key={habit.id}\r\n                                                onClick={() => toggleHabit(habit.id)}\r\n                                                className={`flex items-center gap-4 p-4 rounded-2xl border cursor-pointer transition-all ${isChecked\r\n                                                    ? 'bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800'\r\n                                                    : 'bg-white dark:bg-surface-dark border-border-light dark:border-border-dark hover:border-rose-300'}`}\r\n                                            >\r\n                                                <div className={`w-10 h-10 rounded-xl flex items-center justify-center ${isChecked ? 'bg-green-500 text-white' : 'bg-rose-100 dark:bg-rose-900/30 text-rose-500'}`}>\r\n                                                    {isChecked ? <CheckCircle2 className=\"w-5 h-5\" /> : <habit.icon className=\"w-5 h-5\" />}\r\n                                                </div>\r\n                                                <span className={`font-medium flex-1 ${isChecked ? 'text-green-700 dark:text-green-400 line-through' : 'text-heading-light dark:text-text-dark'}`}>\r\n                                                    {habit.label}\r\n                                                </span>\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                                <p className=\"text-xs text-subtext-light text-center mt-4\">\r\n                                    {Object.values(getTodayHabits()).filter(Boolean).length} / {DAILY_HABITS.length} completed today\r\n                                </p>\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {/* PROGRESS TAB */}\r\n                    {activeTab === 'progress' && (\r\n                        <motion.div key=\"progress\" variants={LUXURY_ANIMATIONS.fadeIn} initial=\"initial\" animate=\"animate\" exit=\"initial\" className=\"space-y-6\">\r\n                            <div className={`${THEME_CLASSES.CARD} p-6`}>\r\n                                <h3 className=\"font-bold text-heading-light dark:text-text-dark mb-4\">Your Journey</h3>\r\n                                <div className=\"grid grid-cols-2 gap-4 mb-6\">\r\n                                    {PILLARS.map(pillar => (\r\n                                        <div key={pillar.id} className={`p-4 rounded-2xl bg-gradient-to-br ${pillar.color} bg-opacity-10`}>\r\n                                            <pillar.icon className=\"w-6 h-6 text-white mb-2\" />\r\n                                            <p className=\"text-2xl font-black text-white\">{getPillarProgress(pillar)}%</p>\r\n                                            <p className=\"text-[10px] font-bold text-white/80 uppercase\">{pillar.title.split(' ')[0]}</p>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                                <div className=\"space-y-3\">\r\n                                    <div className=\"flex justify-between text-sm\"><span>Total XP</span><span className=\"font-bold text-yellow-600\">{progress.totalXP} XP</span></div>\r\n                                    <div className=\"flex justify-between text-sm\"><span>Streak</span><span className=\"font-bold text-orange-600\">{progress.streak} days</span></div>\r\n                                    <div className=\"flex justify-between text-sm\"><span>Lessons</span><span className=\"font-bold text-rose-600\">{progress.completedLessons.length} completed</span></div>\r\n                                    <div className=\"flex justify-between text-sm\"><span>Badges</span><span className=\"font-bold text-purple-600\">{progress.badges.length} / {BADGES.length}</span></div>\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {/* BADGES TAB */}\r\n                    {activeTab === 'badges' && (\r\n                        <motion.div key=\"badges\" variants={LUXURY_ANIMATIONS.fadeIn} initial=\"initial\" animate=\"animate\" exit=\"initial\" className=\"grid grid-cols-2 gap-4\">\r\n                            {BADGES.map((badge, index) => {\r\n                                const isEarned = progress.badges.includes(badge.id);\r\n                                return (\r\n                                    <motion.div\r\n                                        key={badge.id}\r\n                                        initial={{ opacity: 0, scale: 0.9 }}\r\n                                        animate={{ opacity: 1, scale: 1 }}\r\n                                        transition={{ delay: index * 0.1 }}\r\n                                        className={`${THEME_CLASSES.CARD} p-5 text-center ${!isEarned && 'opacity-50'}`}\r\n                                    >\r\n                                        <div className={`text-4xl mb-3 ${!isEarned && 'grayscale'}`}>{badge.icon}</div>\r\n                                        <h4 className=\"font-bold text-sm text-heading-light dark:text-text-dark mb-1\">{badge.name}</h4>\r\n                                        <p className=\"text-[10px] text-subtext-light\">{badge.description}</p>\r\n                                        {isEarned && (\r\n                                            <div className=\"mt-2 flex items-center justify-center gap-1 text-green-500\">\r\n                                                <CheckCircle2 className=\"w-3 h-3\" />\r\n                                                <span className=\"text-[10px] font-bold\">Earned</span>\r\n                                            </div>\r\n                                        )}\r\n                                    </motion.div>\r\n                                );\r\n                            })}\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </main>\r\n\r\n            {/* Pillar Modal */}\r\n            <AnimatePresence>\r\n                {selectedPillar && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-50 flex items-end justify-center bg-black/60 backdrop-blur-sm px-4 pb-4\"\r\n                        onClick={() => setSelectedPillar(null)}\r\n                    >\r\n                        <motion.div\r\n                            initial={{ y: '100%' }}\r\n                            animate={{ y: 0 }}\r\n                            exit={{ y: '100%' }}\r\n                            transition={{ type: 'spring', damping: 25 }}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                            className=\"w-full max-w-md bg-white dark:bg-surface-dark rounded-[2rem] max-h-[85vh] overflow-hidden\"\r\n                        >\r\n                            <div className={`p-6 bg-gradient-to-r ${selectedPillar.color} text-white relative`}>\r\n                                <button onClick={() => setSelectedPillar(null)} className=\"absolute top-4 right-4 p-2 rounded-full bg-white/20 hover:bg-white/30\">\r\n                                    <X className=\"w-4 h-4\" />\r\n                                </button>\r\n                                <selectedPillar.icon className=\"w-10 h-10 mb-3\" />\r\n                                <h2 className=\"text-xl font-black mb-1\">{selectedPillar.title}</h2>\r\n                                <p className=\"text-sm opacity-90\">{selectedPillar.description}</p>\r\n                            </div>\r\n                            <div className=\"p-6 overflow-y-auto max-h-[50vh]\">\r\n                                <h3 className=\"text-xs font-black uppercase text-subtext-light tracking-widest mb-4\">Lessons</h3>\r\n                                <div className=\"space-y-3\">\r\n                                    {selectedPillar.lessons.map((lesson, index) => {\r\n                                        const isCompleted = progress.completedLessons.includes(lesson.id);\r\n                                        const isLocked = index > 0 && !progress.completedLessons.includes(selectedPillar.lessons[index - 1].id);\r\n                                        return (\r\n                                            <div\r\n                                                key={lesson.id}\r\n                                                onClick={() => !isLocked && setSelectedLesson(lesson)}\r\n                                                className={`p-4 rounded-2xl border transition-all ${isLocked\r\n                                                    ? 'bg-gray-50 dark:bg-gray-800/50 border-gray-100 dark:border-gray-700 opacity-50 cursor-not-allowed'\r\n                                                    : 'bg-white dark:bg-surface-dark border-border-light dark:border-border-dark cursor-pointer hover:border-rose-300'}`}\r\n                                            >\r\n                                                <div className=\"flex items-center gap-4\">\r\n                                                    <div className={`w-10 h-10 rounded-xl flex items-center justify-center ${isCompleted ? 'bg-green-100 text-green-500' : isLocked ? 'bg-gray-100 text-gray-400' : 'bg-rose-100 text-rose-500'}`}>\r\n                                                        {isCompleted ? <CheckCircle2 className=\"w-5 h-5\" /> : isLocked ? <Lock className=\"w-5 h-5\" /> : lesson.type === 'video' ? <Video className=\"w-5 h-5\" /> : <FileText className=\"w-5 h-5\" />}\r\n                                                    </div>\r\n                                                    <div className=\"flex-1\">\r\n                                                        <h4 className=\"font-bold text-sm text-heading-light dark:text-text-dark\">{lesson.title}</h4>\r\n                                                        <p className=\"text-[11px] text-subtext-light\">{lesson.description}</p>\r\n                                                    </div>\r\n                                                    <div className=\"flex items-center gap-1 text-[10px] font-bold text-subtext-light\">\r\n                                                        <Clock className=\"w-3 h-3\" />\r\n                                                        {lesson.duration}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n\r\n                {/* Lesson Modal */}\r\n                {selectedLesson && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-xl px-4\"\r\n                    >\r\n                        <motion.div\r\n                            initial={{ scale: 0.9, opacity: 0 }}\r\n                            animate={{ scale: 1, opacity: 1 }}\r\n                            exit={{ scale: 0.9, opacity: 0 }}\r\n                            className=\"w-full max-w-md bg-white dark:bg-surface-dark rounded-[2rem] p-8\"\r\n                        >\r\n                            <div className=\"flex items-center gap-3 mb-6\">\r\n                                <div className=\"p-3 rounded-xl bg-rose-100 dark:bg-rose-900/30 text-rose-500\">\r\n                                    {selectedLesson.type === 'video' ? <Video className=\"w-6 h-6\" /> : <FileText className=\"w-6 h-6\" />}\r\n                                </div>\r\n                                <div>\r\n                                    <h2 className=\"text-lg font-black text-heading-light dark:text-text-dark\">{selectedLesson.title}</h2>\r\n                                    <p className=\"text-xs text-subtext-light\">{selectedLesson.duration} â€¢ {selectedLesson.type}</p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"mb-8 p-6 bg-gradient-to-br from-rose-50 to-pink-50 dark:from-rose-900/20 dark:to-pink-900/20 rounded-2xl min-h-[200px] flex items-center justify-center\">\r\n                                <div className=\"text-center\">\r\n                                    <div className=\"w-16 h-16 rounded-full bg-rose-500/20 flex items-center justify-center mx-auto mb-4\">\r\n                                        <Play className=\"w-8 h-8 text-rose-500\" />\r\n                                    </div>\r\n                                    <p className=\"text-sm text-subtext-light\">{selectedLesson.description}</p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex gap-3\">\r\n                                <button onClick={() => setSelectedLesson(null)} className=\"flex-1 py-4 rounded-2xl font-bold border border-border-light dark:border-border-dark\">\r\n                                    Close\r\n                                </button>\r\n                                <button onClick={() => completeLesson(selectedLesson.id)} className=\"flex-1 py-4 rounded-2xl font-bold bg-gradient-to-r from-rose-500 to-pink-500 text-white flex items-center justify-center gap-2\">\r\n                                    <CheckCircle2 className=\"w-5 h-5\" />\r\n                                    Complete\r\n                                </button>\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LooksmaxxingSection;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\MarketSection.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\MarketSection.tsx:260:17\n  258 |\n  259 |             if (lastActive === yesterdayStr) {\n> 260 |                 setProgress(prev => ({ ...prev, streak: prev.streak + 1, lastActiveDate: today }));\n      |                 ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  261 |             } else if (lastActive !== today) {\n  262 |                 setProgress(prev => ({ ...prev, streak: 1, lastActiveDate: today }));\n  263 |             }","line":260,"column":17,"nodeType":null,"endLine":260,"endColumn":28},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'progress.lastActiveDate'. Either include it or remove the dependency array.","line":265,"column":8,"nodeType":"ArrayExpression","endLine":265,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [progress.lastActiveDate]","fix":{"range":[14207,14209],"text":"[progress.lastActiveDate]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    ArrowLeft, TrendingUp, Rocket, BookOpen, Play, CheckCircle2,\r\n    Lock, Award, Trophy, Flame, ChevronRight, Search,\r\n    BarChart3, Target, DollarSign, Shield,\r\n    PieChart, Zap, Clock, Volume2, Video, FileText,\r\n    HelpCircle, X, Check, Moon, Sun, GraduationCap\r\n} from 'lucide-react';\r\nimport { THEME_CLASSES, LUXURY_ANIMATIONS } from '../utils/theme';\r\n\r\n// ================== TYPE DEFINITIONS ==================\r\n\r\ninterface Lesson {\r\n    id: string;\r\n    title: string;\r\n    description: string;\r\n    duration: string;\r\n    type: 'text' | 'video' | 'audio';\r\n    completed: boolean;\r\n    locked: boolean;\r\n}\r\n\r\ninterface Module {\r\n    id: string;\r\n    title: string;\r\n    description: string;\r\n    icon: React.ElementType;\r\n    color: string;\r\n    lessons: Lesson[];\r\n    quizCompleted: boolean;\r\n}\r\n\r\ninterface GlossaryTerm {\r\n    term: string;\r\n    definition: string;\r\n    category: 'startup' | 'stocks';\r\n}\r\n\r\ninterface Quiz {\r\n    question: string;\r\n    options: string[];\r\n    correctIndex: number;\r\n}\r\n\r\ninterface UserProgress {\r\n    startupTrack: {\r\n        completedLessons: string[];\r\n        completedModules: string[];\r\n        quizScores: { [moduleId: string]: number };\r\n    };\r\n    stockTrack: {\r\n        completedLessons: string[];\r\n        completedModules: string[];\r\n        quizScores: { [moduleId: string]: number };\r\n    };\r\n    streak: number;\r\n    lastActiveDate: string;\r\n    badges: string[];\r\n    totalXP: number;\r\n}\r\n\r\n// ================== INITIAL DATA ==================\r\n\r\nconst STARTUP_MODULES: Module[] = [\r\n    {\r\n        id: 'startup-intro',\r\n        title: 'What is a Startup?',\r\n        description: 'Learn the fundamentals of startups and entrepreneurship.',\r\n        icon: Rocket,\r\n        color: 'from-purple-500 to-indigo-600',\r\n        quizCompleted: false,\r\n        lessons: [\r\n            { id: 's1-l1', title: 'Defining Startups', description: 'What makes a startup different from a small business?', duration: '3 min', type: 'video', completed: false, locked: false },\r\n            { id: 's1-l2', title: 'Startup Ecosystem', description: 'VCs, accelerators, incubators explained.', duration: '4 min', type: 'text', completed: false, locked: true },\r\n            { id: 's1-l3', title: 'Famous Success Stories', description: 'Learn from unicorns like Airbnb, Uber, Stripe.', duration: '5 min', type: 'audio', completed: false, locked: true },\r\n        ]\r\n    },\r\n    {\r\n        id: 'startup-mvp',\r\n        title: 'MVP & Product-Market Fit',\r\n        description: 'Build something people actually want.',\r\n        icon: Target,\r\n        color: 'from-orange-500 to-red-500',\r\n        quizCompleted: false,\r\n        lessons: [\r\n            { id: 's2-l1', title: 'What is an MVP?', description: 'Minimum Viable Product explained.', duration: '3 min', type: 'video', completed: false, locked: false },\r\n            { id: 's2-l2', title: 'Finding Product-Market Fit', description: 'The holy grail of startups.', duration: '4 min', type: 'text', completed: false, locked: true },\r\n            { id: 's2-l3', title: 'Iterating Based on Feedback', description: 'Build, measure, learn.', duration: '3 min', type: 'audio', completed: false, locked: true },\r\n        ]\r\n    },\r\n    {\r\n        id: 'startup-funding',\r\n        title: 'Funding & Pitching',\r\n        description: 'Raise capital and pitch to investors.',\r\n        icon: DollarSign,\r\n        color: 'from-emerald-500 to-teal-600',\r\n        quizCompleted: false,\r\n        lessons: [\r\n            { id: 's3-l1', title: 'Funding Stages', description: 'Pre-seed to Series A and beyond.', duration: '4 min', type: 'video', completed: false, locked: false },\r\n            { id: 's3-l2', title: 'Creating a Pitch Deck', description: 'The 10-slide formula.', duration: '5 min', type: 'text', completed: false, locked: true },\r\n            { id: 's3-l3', title: 'Talking to Investors', description: 'VC mindset and negotiation.', duration: '4 min', type: 'audio', completed: false, locked: true },\r\n        ]\r\n    },\r\n    {\r\n        id: 'startup-legal',\r\n        title: 'Legal Structures & Team',\r\n        description: 'Set up your company the right way.',\r\n        icon: Shield,\r\n        color: 'from-blue-500 to-cyan-500',\r\n        quizCompleted: false,\r\n        lessons: [\r\n            { id: 's4-l1', title: 'Choosing a Legal Structure', description: 'LLC, C-Corp, and more.', duration: '3 min', type: 'video', completed: false, locked: false },\r\n            { id: 's4-l2', title: 'Co-Founder Agreements', description: 'Avoid future conflicts.', duration: '4 min', type: 'text', completed: false, locked: true },\r\n            { id: 's4-l3', title: 'Building Your Team', description: 'First hires and culture.', duration: '4 min', type: 'audio', completed: false, locked: true },\r\n        ]\r\n    }\r\n];\r\n\r\nconst STOCK_MODULES: Module[] = [\r\n    {\r\n        id: 'stocks-intro',\r\n        title: 'What are Stocks & Funds?',\r\n        description: 'Understanding the basics of equity investing.',\r\n        icon: BarChart3,\r\n        color: 'from-green-500 to-emerald-600',\r\n        quizCompleted: false,\r\n        lessons: [\r\n            { id: 'st1-l1', title: 'Stocks 101', description: 'What does owning a stock mean?', duration: '3 min', type: 'video', completed: false, locked: false },\r\n            { id: 'st1-l2', title: 'Mutual Funds & ETFs', description: 'Diversified investing made simple.', duration: '4 min', type: 'text', completed: false, locked: true },\r\n            { id: 'st1-l3', title: 'Index Funds', description: 'Why Warren Buffett recommends them.', duration: '3 min', type: 'audio', completed: false, locked: true },\r\n        ]\r\n    },\r\n    {\r\n        id: 'stocks-sip',\r\n        title: 'SIPs & Diversification',\r\n        description: 'Systematic investing for long-term wealth.',\r\n        icon: PieChart,\r\n        color: 'from-blue-500 to-indigo-600',\r\n        quizCompleted: false,\r\n        lessons: [\r\n            { id: 'st2-l1', title: 'What is a SIP?', description: 'Systematic Investment Plans explained.', duration: '3 min', type: 'video', completed: false, locked: false },\r\n            { id: 'st2-l2', title: 'Power of Compounding', description: 'How small amounts grow big.', duration: '4 min', type: 'text', completed: false, locked: true },\r\n            { id: 'st2-l3', title: 'Portfolio Diversification', description: 'Dont put all eggs in one basket.', duration: '3 min', type: 'audio', completed: false, locked: true },\r\n        ]\r\n    },\r\n    {\r\n        id: 'stocks-technical',\r\n        title: 'Technical Analysis',\r\n        description: 'Read charts and understand patterns.',\r\n        icon: TrendingUp,\r\n        color: 'from-orange-500 to-amber-500',\r\n        quizCompleted: false,\r\n        lessons: [\r\n            { id: 'st3-l1', title: 'Candlestick Patterns', description: 'Red vs green, wicks explained.', duration: '5 min', type: 'video', completed: false, locked: false },\r\n            { id: 'st3-l2', title: 'Support & Resistance', description: 'Key price levels to watch.', duration: '4 min', type: 'text', completed: false, locked: true },\r\n            { id: 'st3-l3', title: 'Trend Lines & Indicators', description: 'Moving averages, RSI, MACD.', duration: '5 min', type: 'audio', completed: false, locked: true },\r\n        ]\r\n    },\r\n    {\r\n        id: 'stocks-risk',\r\n        title: 'Risk Management',\r\n        description: 'Protect your capital and manage emotions.',\r\n        icon: Shield,\r\n        color: 'from-red-500 to-rose-600',\r\n        quizCompleted: false,\r\n        lessons: [\r\n            { id: 'st4-l1', title: 'Understanding Risk', description: 'Different types of investment risk.', duration: '3 min', type: 'video', completed: false, locked: false },\r\n            { id: 'st4-l2', title: 'Position Sizing', description: 'How much to invest per trade.', duration: '4 min', type: 'text', completed: false, locked: true },\r\n            { id: 'st4-l3', title: 'Emotional Discipline', description: 'Fear and greed management.', duration: '4 min', type: 'audio', completed: false, locked: true },\r\n        ]\r\n    }\r\n];\r\n\r\nconst GLOSSARY: GlossaryTerm[] = [\r\n    { term: 'MVP', definition: 'Minimum Viable Product - the simplest version of a product that can be released to test a business hypothesis.', category: 'startup' },\r\n    { term: 'Product-Market Fit', definition: 'When a product satisfies strong market demand.', category: 'startup' },\r\n    { term: 'Unicorn', definition: 'A privately held startup valued at over $1 billion.', category: 'startup' },\r\n    { term: 'Pitch Deck', definition: 'A presentation used to provide a brief overview of your business plan to investors.', category: 'startup' },\r\n    { term: 'Equity', definition: 'Ownership stake in a company.', category: 'startup' },\r\n    { term: 'VC (Venture Capital)', definition: 'Private equity financing provided to startups with high growth potential.', category: 'startup' },\r\n    { term: 'IPO', definition: 'Initial Public Offering - when a private company offers shares to the public for the first time.', category: 'stocks' },\r\n    { term: 'Bull Market', definition: 'A market condition where prices are rising or expected to rise.', category: 'stocks' },\r\n    { term: 'Bear Market', definition: 'A market condition where prices are falling or expected to fall.', category: 'stocks' },\r\n    { term: 'SIP', definition: 'Systematic Investment Plan - investing fixed amounts at regular intervals.', category: 'stocks' },\r\n    { term: 'ETF', definition: 'Exchange-Traded Fund - a basket of securities that trades like a stock.', category: 'stocks' },\r\n    { term: 'Dividend', definition: 'A portion of company earnings distributed to shareholders.', category: 'stocks' },\r\n    { term: 'P/E Ratio', definition: 'Price-to-Earnings Ratio - stock price divided by earnings per share.', category: 'stocks' },\r\n    { term: 'Market Cap', definition: 'Total market value of a companys outstanding shares.', category: 'stocks' },\r\n];\r\n\r\nconst SAMPLE_QUIZZES: { [moduleId: string]: Quiz[] } = {\r\n    'startup-intro': [\r\n        { question: 'What differentiates a startup from a traditional small business?', options: ['Size of the company', 'Focus on scalable growth', 'Number of employees', 'Location'], correctIndex: 1 },\r\n        { question: 'What is a unicorn in startup terminology?', options: ['A rare species', 'A startup valued at $1 billion+', 'A type of investor', 'A business model'], correctIndex: 1 },\r\n        { question: 'What does VC stand for?', options: ['Virtual Currency', 'Venture Capital', 'Value Creation', 'Verified Company'], correctIndex: 1 },\r\n    ],\r\n    'stocks-intro': [\r\n        { question: 'What does owning a stock represent?', options: ['A loan to the company', 'Ownership in the company', 'A bond', 'Insurance'], correctIndex: 1 },\r\n        { question: 'What is an ETF?', options: ['Electronic Transfer Fund', 'Exchange-Traded Fund', 'Equity Trade Fee', 'Extended Time Frame'], correctIndex: 1 },\r\n        { question: 'Why are index funds popular?', options: ['High risk', 'Low fees and diversification', 'Guaranteed returns', 'Short-term gains'], correctIndex: 1 },\r\n    ],\r\n};\r\n\r\nconst BADGES = [\r\n    { id: 'first-lesson', name: 'First Step', description: 'Complete your first lesson', icon: 'ðŸŽ¯' },\r\n    { id: 'module-master', name: 'Module Master', description: 'Complete a full module', icon: 'ðŸ“š' },\r\n    { id: 'quiz-ace', name: 'Quiz Ace', description: 'Score 100% on a quiz', icon: 'ðŸ†' },\r\n    { id: 'streak-7', name: 'Week Warrior', description: 'Maintain a 7-day streak', icon: 'ðŸ”¥' },\r\n    { id: 'dual-track', name: 'Dual Learner', description: 'Complete lessons in both tracks', icon: 'âš¡' },\r\n];\r\n\r\n// ================== MAIN COMPONENT ==================\r\n\r\nconst MarketSection: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const [activeTrack, setActiveTrack] = useState<'startup' | 'stocks'>('startup');\r\n    const [activeTab, setActiveTab] = useState<'learn' | 'progress' | 'glossary' | 'achievements'>('learn');\r\n    const [selectedModule, setSelectedModule] = useState<Module | null>(null);\r\n    const [selectedLesson, setSelectedLesson] = useState<Lesson | null>(null);\r\n    const [showQuiz, setShowQuiz] = useState(false);\r\n    const [currentQuizIndex, setCurrentQuizIndex] = useState(0);\r\n    const [quizScore, setQuizScore] = useState(0);\r\n    const [quizAnswered, setQuizAnswered] = useState(false);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [showGlossaryTerm, setShowGlossaryTerm] = useState<GlossaryTerm | null>(null);\r\n    const [isDarkMode, setIsDarkMode] = useState(() => document.documentElement.classList.contains('dark'));\r\n\r\n    // User Progress State\r\n    const [progress, setProgress] = useState<UserProgress>(() => {\r\n        const saved = localStorage.getItem('market_section_progress');\r\n        if (saved) return JSON.parse(saved);\r\n        return {\r\n            startupTrack: { completedLessons: [], completedModules: [], quizScores: {} },\r\n            stockTrack: { completedLessons: [], completedModules: [], quizScores: {} },\r\n            streak: 0,\r\n            lastActiveDate: '',\r\n            badges: [],\r\n            totalXP: 0\r\n        };\r\n    });\r\n\r\n    // Persist progress\r\n    useEffect(() => {\r\n        localStorage.setItem('market_section_progress', JSON.stringify(progress));\r\n    }, [progress]);\r\n\r\n    // Update streak on mount\r\n    useEffect(() => {\r\n        const today = new Date().toISOString().split('T')[0];\r\n        const lastActive = progress.lastActiveDate;\r\n\r\n        if (lastActive !== today) {\r\n            const yesterday = new Date();\r\n            yesterday.setDate(yesterday.getDate() - 1);\r\n            const yesterdayStr = yesterday.toISOString().split('T')[0];\r\n\r\n            if (lastActive === yesterdayStr) {\r\n                setProgress(prev => ({ ...prev, streak: prev.streak + 1, lastActiveDate: today }));\r\n            } else if (lastActive !== today) {\r\n                setProgress(prev => ({ ...prev, streak: 1, lastActiveDate: today }));\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    const handleBack = () => navigate('/dashboard');\r\n\r\n    const currentModules = activeTrack === 'startup' ? STARTUP_MODULES : STOCK_MODULES;\r\n    const currentProgress = activeTrack === 'startup' ? progress.startupTrack : progress.stockTrack;\r\n\r\n    const getModuleProgress = (module: Module) => {\r\n        const completedCount = module.lessons.filter(l =>\r\n            currentProgress.completedLessons.includes(l.id)\r\n        ).length;\r\n        return Math.round((completedCount / module.lessons.length) * 100);\r\n    };\r\n\r\n    const getTotalProgress = () => {\r\n        const totalLessons = currentModules.reduce((acc, m) => acc + m.lessons.length, 0);\r\n        const completedLessons = currentProgress.completedLessons.length;\r\n        return Math.round((completedLessons / totalLessons) * 100);\r\n    };\r\n\r\n    const completeLesson = (lessonId: string) => {\r\n        const trackKey = activeTrack === 'startup' ? 'startupTrack' : 'stockTrack';\r\n        if (!progress[trackKey].completedLessons.includes(lessonId)) {\r\n            const newProgress = { ...progress };\r\n            newProgress[trackKey].completedLessons.push(lessonId);\r\n            newProgress.totalXP += 10;\r\n\r\n            // Check for first lesson badge\r\n            if (newProgress[trackKey].completedLessons.length === 1 && !newProgress.badges.includes('first-lesson')) {\r\n                newProgress.badges.push('first-lesson');\r\n            }\r\n\r\n            // Check for dual-track badge\r\n            if (newProgress.startupTrack.completedLessons.length > 0 &&\r\n                newProgress.stockTrack.completedLessons.length > 0 &&\r\n                !newProgress.badges.includes('dual-track')) {\r\n                newProgress.badges.push('dual-track');\r\n            }\r\n\r\n            setProgress(newProgress);\r\n        }\r\n        setSelectedLesson(null);\r\n    };\r\n\r\n    const handleQuizAnswer = (answerIndex: number) => {\r\n        if (quizAnswered) return;\r\n\r\n        const quizzes = SAMPLE_QUIZZES[selectedModule?.id || ''] || [];\r\n        if (answerIndex === quizzes[currentQuizIndex].correctIndex) {\r\n            setQuizScore(prev => prev + 1);\r\n        }\r\n        setQuizAnswered(true);\r\n\r\n        setTimeout(() => {\r\n            if (currentQuizIndex < quizzes.length - 1) {\r\n                setCurrentQuizIndex(prev => prev + 1);\r\n                setQuizAnswered(false);\r\n            } else {\r\n                // Quiz completed\r\n                const trackKey = activeTrack === 'startup' ? 'startupTrack' : 'stockTrack';\r\n                const finalScore = Math.round(((quizScore + (answerIndex === quizzes[currentQuizIndex].correctIndex ? 1 : 0)) / quizzes.length) * 100);\r\n\r\n                const newProgress = { ...progress };\r\n                newProgress[trackKey].quizScores[selectedModule?.id || ''] = finalScore;\r\n                newProgress.totalXP += finalScore;\r\n\r\n                // Check for quiz ace badge\r\n                if (finalScore === 100 && !newProgress.badges.includes('quiz-ace')) {\r\n                    newProgress.badges.push('quiz-ace');\r\n                }\r\n\r\n                // Check for module completion\r\n                const module = currentModules.find(m => m.id === selectedModule?.id);\r\n                if (module) {\r\n                    const allLessonsCompleted = module.lessons.every(l =>\r\n                        newProgress[trackKey].completedLessons.includes(l.id)\r\n                    );\r\n                    if (allLessonsCompleted && finalScore >= 70 && !newProgress[trackKey].completedModules.includes(module.id)) {\r\n                        newProgress[trackKey].completedModules.push(module.id);\r\n                        if (!newProgress.badges.includes('module-master')) {\r\n                            newProgress.badges.push('module-master');\r\n                        }\r\n                    }\r\n                }\r\n\r\n                setProgress(newProgress);\r\n                setShowQuiz(false);\r\n                setCurrentQuizIndex(0);\r\n                setQuizScore(0);\r\n                setQuizAnswered(false);\r\n            }\r\n        }, 1500);\r\n    };\r\n\r\n    const filteredGlossary = GLOSSARY.filter(term =>\r\n        term.term.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        term.definition.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    const toggleDarkMode = () => {\r\n        document.documentElement.classList.toggle('dark');\r\n        setIsDarkMode(!isDarkMode);\r\n    };\r\n\r\n    return (\r\n        <div className={`min-h-screen ${THEME_CLASSES.BG_PRIMARY} pb-24 font-sans`}>\r\n            {/* Header */}\r\n            <header className=\"sticky top-0 z-40 px-6 py-5 bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-xl border-b border-border-light dark:border-border-dark\">\r\n                <div className=\"flex items-center justify-between mb-5\">\r\n                    <button onClick={handleBack} className=\"p-2 -ml-2 rounded-xl hover:bg-black/5 dark:hover:bg-white/5 transition-all\">\r\n                        <ArrowLeft className=\"w-6 h-6\" />\r\n                    </button>\r\n                    <h1 className=\"text-xl font-black tracking-tight text-heading-light dark:text-text-dark\">Learn & Grow</h1>\r\n                    <button onClick={toggleDarkMode} className=\"p-2 rounded-xl hover:bg-black/5 dark:hover:bg-white/5 transition-all\">\r\n                        {isDarkMode ? <Sun className=\"w-5 h-5 text-yellow-500\" /> : <Moon className=\"w-5 h-5\" />}\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Track Selector */}\r\n                <div className=\"flex gap-2 p-1.5 bg-surface-light dark:bg-surface-dark rounded-2xl border border-border-light dark:border-border-dark mb-4\">\r\n                    <button\r\n                        onClick={() => setActiveTrack('startup')}\r\n                        className={`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-bold text-sm transition-all ${activeTrack === 'startup'\r\n                            ? 'bg-gradient-to-r from-purple-500 to-indigo-600 text-white shadow-lg shadow-purple-500/25'\r\n                            : 'text-subtext-light dark:text-subtext-dark hover:bg-black/5 dark:hover:bg-white/5'\r\n                            }`}\r\n                    >\r\n                        <Rocket className=\"w-4 h-4\" />\r\n                        Startups\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTrack('stocks')}\r\n                        className={`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-bold text-sm transition-all ${activeTrack === 'stocks'\r\n                            ? 'bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg shadow-green-500/25'\r\n                            : 'text-subtext-light dark:text-subtext-dark hover:bg-black/5 dark:hover:bg-white/5'\r\n                            }`}\r\n                    >\r\n                        <TrendingUp className=\"w-4 h-4\" />\r\n                        Stock Market\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Tab Navigation */}\r\n                <div className=\"flex gap-1 overflow-x-auto no-scrollbar\">\r\n                    {[\r\n                        { id: 'learn', label: 'Learn', icon: BookOpen },\r\n                        { id: 'progress', label: 'Progress', icon: BarChart3 },\r\n                        { id: 'glossary', label: 'Glossary', icon: HelpCircle },\r\n                        { id: 'achievements', label: 'Badges', icon: Trophy },\r\n                    ].map(tab => (\r\n                        <button\r\n                            key={tab.id}\r\n                            onClick={() => setActiveTab(tab.id as typeof activeTab)}\r\n                            className={`flex items-center gap-1.5 px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-all whitespace-nowrap ${activeTab === tab.id\r\n                                ? 'bg-accent text-white shadow-glow'\r\n                                : 'text-subtext-light dark:text-subtext-dark hover:bg-black/5 dark:hover:bg-white/5'\r\n                                }`}\r\n                        >\r\n                            <tab.icon className=\"w-3.5 h-3.5\" />\r\n                            {tab.label}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </header>\r\n\r\n            <main className=\"px-6 py-6 max-w-lg mx-auto\">\r\n                <AnimatePresence mode=\"wait\">\r\n                    {/* LEARN TAB */}\r\n                    {activeTab === 'learn' && (\r\n                        <motion.div\r\n                            key=\"learn\"\r\n                            variants={LUXURY_ANIMATIONS.fadeIn}\r\n                            initial=\"initial\"\r\n                            animate=\"animate\"\r\n                            exit=\"initial\"\r\n                            className=\"space-y-6\"\r\n                        >\r\n                            {/* Stats Bar */}\r\n                            <div className=\"grid grid-cols-3 gap-3\">\r\n                                <div className={`${THEME_CLASSES.CARD} p-4 text-center`}>\r\n                                    <div className=\"flex items-center justify-center gap-1 mb-1\">\r\n                                        <Flame className=\"w-4 h-4 text-orange-500\" />\r\n                                        <span className=\"text-lg font-black text-heading-light dark:text-text-dark\">{progress.streak}</span>\r\n                                    </div>\r\n                                    <p className=\"text-[9px] font-bold uppercase text-subtext-light dark:text-subtext-dark tracking-widest\">Streak</p>\r\n                                </div>\r\n                                <div className={`${THEME_CLASSES.CARD} p-4 text-center`}>\r\n                                    <div className=\"flex items-center justify-center gap-1 mb-1\">\r\n                                        <Zap className=\"w-4 h-4 text-yellow-500\" />\r\n                                        <span className=\"text-lg font-black text-heading-light dark:text-text-dark\">{progress.totalXP}</span>\r\n                                    </div>\r\n                                    <p className=\"text-[9px] font-bold uppercase text-subtext-light dark:text-subtext-dark tracking-widest\">XP</p>\r\n                                </div>\r\n                                <div className={`${THEME_CLASSES.CARD} p-4 text-center`}>\r\n                                    <div className=\"flex items-center justify-center gap-1 mb-1\">\r\n                                        <GraduationCap className=\"w-4 h-4 text-accent\" />\r\n                                        <span className=\"text-lg font-black text-heading-light dark:text-text-dark\">{getTotalProgress()}%</span>\r\n                                    </div>\r\n                                    <p className=\"text-[9px] font-bold uppercase text-subtext-light dark:text-subtext-dark tracking-widest\">Complete</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Module Cards */}\r\n                            <div className=\"space-y-4\">\r\n                                {currentModules.map((module, index) => {\r\n                                    const moduleProgress = getModuleProgress(module);\r\n                                    const isCompleted = currentProgress.completedModules.includes(module.id);\r\n\r\n                                    return (\r\n                                        <motion.div\r\n                                            key={module.id}\r\n                                            initial={{ opacity: 0, y: 20 }}\r\n                                            animate={{ opacity: 1, y: 0 }}\r\n                                            transition={{ delay: index * 0.1 }}\r\n                                            onClick={() => setSelectedModule(module)}\r\n                                            className={`${THEME_CLASSES.CARD} p-5 cursor-pointer group overflow-hidden relative`}\r\n                                        >\r\n                                            <div className={`absolute inset-0 bg-gradient-to-r ${module.color} opacity-5 group-hover:opacity-10 transition-opacity`} />\r\n\r\n                                            <div className=\"relative z-10 flex items-start gap-4\">\r\n                                                <div className={`w-14 h-14 rounded-2xl bg-gradient-to-br ${module.color} flex items-center justify-center text-white shadow-lg`}>\r\n                                                    <module.icon className=\"w-6 h-6\" />\r\n                                                </div>\r\n\r\n                                                <div className=\"flex-1\">\r\n                                                    <div className=\"flex items-center gap-2 mb-1\">\r\n                                                        <h3 className=\"font-bold text-heading-light dark:text-text-dark\">{module.title}</h3>\r\n                                                        {isCompleted && <CheckCircle2 className=\"w-4 h-4 text-green-500\" />}\r\n                                                    </div>\r\n                                                    <p className=\"text-xs text-subtext-light dark:text-subtext-dark mb-3\">{module.description}</p>\r\n\r\n                                                    <div className=\"flex items-center gap-3\">\r\n                                                        <div className=\"flex-1 h-1.5 bg-border-light dark:bg-border-dark rounded-full overflow-hidden\">\r\n                                                            <div\r\n                                                                className={`h-full bg-gradient-to-r ${module.color} transition-all duration-500`}\r\n                                                                style={{ width: `${moduleProgress}%` }}\r\n                                                            />\r\n                                                        </div>\r\n                                                        <span className=\"text-[10px] font-bold text-accent\">{moduleProgress}%</span>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <ChevronRight className=\"w-5 h-5 text-subtext-light group-hover:translate-x-1 transition-transform\" />\r\n                                            </div>\r\n                                        </motion.div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {/* PROGRESS TAB */}\r\n                    {activeTab === 'progress' && (\r\n                        <motion.div\r\n                            key=\"progress\"\r\n                            variants={LUXURY_ANIMATIONS.fadeIn}\r\n                            initial=\"initial\"\r\n                            animate=\"animate\"\r\n                            exit=\"initial\"\r\n                            className=\"space-y-6\"\r\n                        >\r\n                            {/* Overall Progress Card */}\r\n                            <div className={`${THEME_CLASSES.CARD} p-6 relative overflow-hidden`}>\r\n                                <div className=\"absolute top-0 right-0 w-32 h-32 bg-accent/10 blur-3xl rounded-full\" />\r\n                                <div className=\"relative z-10\">\r\n                                    <h3 className=\"font-bold text-heading-light dark:text-text-dark mb-4\">Your Learning Journey</h3>\r\n\r\n                                    <div className=\"grid grid-cols-2 gap-4 mb-6\">\r\n                                        <div className=\"text-center p-4 bg-purple-500/10 rounded-2xl\">\r\n                                            <Rocket className=\"w-6 h-6 text-purple-500 mx-auto mb-2\" />\r\n                                            <p className=\"text-2xl font-black text-purple-600\">{progress.startupTrack.completedLessons.length}</p>\r\n                                            <p className=\"text-[10px] font-bold text-subtext-light uppercase\">Startup Lessons</p>\r\n                                        </div>\r\n                                        <div className=\"text-center p-4 bg-green-500/10 rounded-2xl\">\r\n                                            <TrendingUp className=\"w-6 h-6 text-green-500 mx-auto mb-2\" />\r\n                                            <p className=\"text-2xl font-black text-green-600\">{progress.stockTrack.completedLessons.length}</p>\r\n                                            <p className=\"text-[10px] font-bold text-subtext-light uppercase\">Stock Lessons</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-3\">\r\n                                        <div className=\"flex items-center justify-between text-sm\">\r\n                                            <span className=\"font-medium\">Total XP Earned</span>\r\n                                            <span className=\"font-bold text-yellow-600\">{progress.totalXP} XP</span>\r\n                                        </div>\r\n                                        <div className=\"flex items-center justify-between text-sm\">\r\n                                            <span className=\"font-medium\">Current Streak</span>\r\n                                            <span className=\"font-bold text-orange-600\">{progress.streak} days</span>\r\n                                        </div>\r\n                                        <div className=\"flex items-center justify-between text-sm\">\r\n                                            <span className=\"font-medium\">Badges Earned</span>\r\n                                            <span className=\"font-bold text-accent\">{progress.badges.length} / {BADGES.length}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Quiz Scores */}\r\n                            <div className={`${THEME_CLASSES.CARD} p-6`}>\r\n                                <h3 className=\"font-bold text-heading-light dark:text-text-dark mb-4\">Quiz Scores</h3>\r\n                                <div className=\"space-y-3\">\r\n                                    {Object.entries({ ...progress.startupTrack.quizScores, ...progress.stockTrack.quizScores }).map(([moduleId, score]) => {\r\n                                        const module = [...STARTUP_MODULES, ...STOCK_MODULES].find(m => m.id === moduleId);\r\n                                        if (!module) return null;\r\n                                        return (\r\n                                            <div key={moduleId} className=\"flex items-center justify-between p-3 bg-surface-light dark:bg-surface-dark rounded-xl\">\r\n                                                <span className=\"text-sm font-medium\">{module.title}</span>\r\n                                                <span className={`text-sm font-bold ${score >= 70 ? 'text-green-500' : 'text-red-500'}`}>\r\n                                                    {score}%\r\n                                                </span>\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                    {Object.keys({ ...progress.startupTrack.quizScores, ...progress.stockTrack.quizScores }).length === 0 && (\r\n                                        <p className=\"text-center text-sm text-subtext-light py-4\">No quizzes completed yet</p>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {/* GLOSSARY TAB */}\r\n                    {activeTab === 'glossary' && (\r\n                        <motion.div\r\n                            key=\"glossary\"\r\n                            variants={LUXURY_ANIMATIONS.fadeIn}\r\n                            initial=\"initial\"\r\n                            animate=\"animate\"\r\n                            exit=\"initial\"\r\n                            className=\"space-y-4\"\r\n                        >\r\n                            {/* Search */}\r\n                            <div className=\"relative\">\r\n                                <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-subtext-light\" />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Search terms...\"\r\n                                    value={searchTerm}\r\n                                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                                    className={`w-full pl-12 pr-4 py-4 ${THEME_CLASSES.INPUT} rounded-2xl`}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Terms List */}\r\n                            <div className=\"space-y-2\">\r\n                                {filteredGlossary.map((term, index) => (\r\n                                    <motion.div\r\n                                        key={term.term}\r\n                                        initial={{ opacity: 0, x: -20 }}\r\n                                        animate={{ opacity: 1, x: 0 }}\r\n                                        transition={{ delay: index * 0.03 }}\r\n                                        onClick={() => setShowGlossaryTerm(term)}\r\n                                        className={`${THEME_CLASSES.CARD} p-4 cursor-pointer flex items-center justify-between group`}\r\n                                    >\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <span className={`px-2 py-1 rounded-lg text-[9px] font-black uppercase ${term.category === 'startup'\r\n                                                ? 'bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400'\r\n                                                : 'bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400'\r\n                                                }`}>\r\n                                                {term.category}\r\n                                            </span>\r\n                                            <span className=\"font-bold text-heading-light dark:text-text-dark\">{term.term}</span>\r\n                                        </div>\r\n                                        <ChevronRight className=\"w-4 h-4 text-subtext-light group-hover:translate-x-1 transition-transform\" />\r\n                                    </motion.div>\r\n                                ))}\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {/* ACHIEVEMENTS TAB */}\r\n                    {activeTab === 'achievements' && (\r\n                        <motion.div\r\n                            key=\"achievements\"\r\n                            variants={LUXURY_ANIMATIONS.fadeIn}\r\n                            initial=\"initial\"\r\n                            animate=\"animate\"\r\n                            exit=\"initial\"\r\n                            className=\"space-y-4\"\r\n                        >\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                {BADGES.map((badge, index) => {\r\n                                    const isEarned = progress.badges.includes(badge.id);\r\n                                    return (\r\n                                        <motion.div\r\n                                            key={badge.id}\r\n                                            initial={{ opacity: 0, scale: 0.9 }}\r\n                                            animate={{ opacity: 1, scale: 1 }}\r\n                                            transition={{ delay: index * 0.1 }}\r\n                                            className={`${THEME_CLASSES.CARD} p-5 text-center ${!isEarned && 'opacity-50'}`}\r\n                                        >\r\n                                            <div className={`text-4xl mb-3 ${!isEarned && 'grayscale'}`}>{badge.icon}</div>\r\n                                            <h4 className=\"font-bold text-sm text-heading-light dark:text-text-dark mb-1\">{badge.name}</h4>\r\n                                            <p className=\"text-[10px] text-subtext-light dark:text-subtext-dark\">{badge.description}</p>\r\n                                            {isEarned && (\r\n                                                <div className=\"mt-2 flex items-center justify-center gap-1 text-green-500\">\r\n                                                    <CheckCircle2 className=\"w-3 h-3\" />\r\n                                                    <span className=\"text-[10px] font-bold\">Earned</span>\r\n                                                </div>\r\n                                            )}\r\n                                        </motion.div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </main>\r\n\r\n            {/* Module Detail Modal */}\r\n            <AnimatePresence>\r\n                {selectedModule && !showQuiz && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-50 flex items-end justify-center bg-black/60 backdrop-blur-sm px-4 pb-4\"\r\n                        onClick={() => setSelectedModule(null)}\r\n                    >\r\n                        <motion.div\r\n                            initial={{ y: '100%' }}\r\n                            animate={{ y: 0 }}\r\n                            exit={{ y: '100%' }}\r\n                            transition={{ type: 'spring', damping: 25 }}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                            className=\"w-full max-w-md bg-white dark:bg-surface-dark rounded-[2rem] max-h-[85vh] overflow-hidden\"\r\n                        >\r\n                            {/* Module Header */}\r\n                            <div className={`p-6 bg-gradient-to-r ${selectedModule.color} text-white relative`}>\r\n                                <button\r\n                                    onClick={() => setSelectedModule(null)}\r\n                                    className=\"absolute top-4 right-4 p-2 rounded-full bg-white/20 hover:bg-white/30 transition-colors\"\r\n                                >\r\n                                    <X className=\"w-4 h-4\" />\r\n                                </button>\r\n                                <selectedModule.icon className=\"w-10 h-10 mb-3\" />\r\n                                <h2 className=\"text-xl font-black mb-1\">{selectedModule.title}</h2>\r\n                                <p className=\"text-sm opacity-90\">{selectedModule.description}</p>\r\n                            </div>\r\n\r\n                            {/* Lessons List */}\r\n                            <div className=\"p-6 overflow-y-auto max-h-[50vh]\">\r\n                                <h3 className=\"text-xs font-black uppercase text-subtext-light dark:text-subtext-dark tracking-widest mb-4\">Lessons</h3>\r\n                                <div className=\"space-y-3\">\r\n                                    {selectedModule.lessons.map((lesson, index) => {\r\n                                        const isCompleted = currentProgress.completedLessons.includes(lesson.id);\r\n                                        const isLocked = index > 0 && !currentProgress.completedLessons.includes(selectedModule.lessons[index - 1].id);\r\n\r\n                                        return (\r\n                                            <div\r\n                                                key={lesson.id}\r\n                                                onClick={() => !isLocked && setSelectedLesson(lesson)}\r\n                                                className={`p-4 rounded-2xl border transition-all ${isLocked\r\n                                                    ? 'bg-gray-50 dark:bg-gray-800/50 border-gray-100 dark:border-gray-700 opacity-50 cursor-not-allowed'\r\n                                                    : 'bg-white dark:bg-surface-dark border-border-light dark:border-border-dark cursor-pointer hover:border-accent'\r\n                                                    }`}\r\n                                            >\r\n                                                <div className=\"flex items-center gap-4\">\r\n                                                    <div className={`w-10 h-10 rounded-xl flex items-center justify-center ${isCompleted\r\n                                                        ? 'bg-green-100 dark:bg-green-900/30 text-green-500'\r\n                                                        : isLocked\r\n                                                            ? 'bg-gray-100 dark:bg-gray-800 text-gray-400'\r\n                                                            : 'bg-accent/10 text-accent'\r\n                                                        }`}>\r\n                                                        {isCompleted ? (\r\n                                                            <CheckCircle2 className=\"w-5 h-5\" />\r\n                                                        ) : isLocked ? (\r\n                                                            <Lock className=\"w-5 h-5\" />\r\n                                                        ) : lesson.type === 'video' ? (\r\n                                                            <Video className=\"w-5 h-5\" />\r\n                                                        ) : lesson.type === 'audio' ? (\r\n                                                            <Volume2 className=\"w-5 h-5\" />\r\n                                                        ) : (\r\n                                                            <FileText className=\"w-5 h-5\" />\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <div className=\"flex-1\">\r\n                                                        <h4 className=\"font-bold text-sm text-heading-light dark:text-text-dark\">{lesson.title}</h4>\r\n                                                        <p className=\"text-[11px] text-subtext-light dark:text-subtext-dark\">{lesson.description}</p>\r\n                                                    </div>\r\n                                                    <div className=\"flex items-center gap-1 text-[10px] font-bold text-subtext-light\">\r\n                                                        <Clock className=\"w-3 h-3\" />\r\n                                                        {lesson.duration}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n\r\n                                {/* Take Quiz Button */}\r\n                                {getModuleProgress(selectedModule) === 100 && SAMPLE_QUIZZES[selectedModule.id] && (\r\n                                    <button\r\n                                        onClick={() => setShowQuiz(true)}\r\n                                        className={`w-full mt-6 py-4 rounded-2xl font-black flex items-center justify-center gap-2 ${THEME_CLASSES.BTN_PRIMARY}`}\r\n                                    >\r\n                                        <Award className=\"w-5 h-5\" />\r\n                                        Take Module Quiz\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n\r\n                {/* Lesson View Modal */}\r\n                {selectedLesson && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-xl px-4\"\r\n                    >\r\n                        <motion.div\r\n                            initial={{ scale: 0.9, opacity: 0 }}\r\n                            animate={{ scale: 1, opacity: 1 }}\r\n                            exit={{ scale: 0.9, opacity: 0 }}\r\n                            className=\"w-full max-w-md bg-white dark:bg-surface-dark rounded-[2rem] p-8\"\r\n                        >\r\n                            <div className=\"flex items-center gap-3 mb-6\">\r\n                                <div className=\"p-3 rounded-xl bg-accent/10 text-accent\">\r\n                                    {selectedLesson.type === 'video' ? <Video className=\"w-6 h-6\" /> :\r\n                                        selectedLesson.type === 'audio' ? <Volume2 className=\"w-6 h-6\" /> :\r\n                                            <FileText className=\"w-6 h-6\" />}\r\n                                </div>\r\n                                <div>\r\n                                    <h2 className=\"text-lg font-black text-heading-light dark:text-text-dark\">{selectedLesson.title}</h2>\r\n                                    <p className=\"text-xs text-subtext-light\">{selectedLesson.duration} â€¢ {selectedLesson.type} lesson</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Simulated Content Area */}\r\n                            <div className=\"mb-8 p-6 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-2xl min-h-[200px] flex items-center justify-center\">\r\n                                {selectedLesson.type === 'video' && (\r\n                                    <div className=\"text-center\">\r\n                                        <div className=\"w-16 h-16 rounded-full bg-accent/10 flex items-center justify-center mx-auto mb-4\">\r\n                                            <Play className=\"w-8 h-8 text-accent fill-accent\" />\r\n                                        </div>\r\n                                        <p className=\"text-sm text-subtext-light\">Video content would play here</p>\r\n                                    </div>\r\n                                )}\r\n                                {selectedLesson.type === 'audio' && (\r\n                                    <div className=\"text-center\">\r\n                                        <div className=\"w-16 h-16 rounded-full bg-accent/10 flex items-center justify-center mx-auto mb-4\">\r\n                                            <Volume2 className=\"w-8 h-8 text-accent\" />\r\n                                        </div>\r\n                                        <p className=\"text-sm text-subtext-light\">Audio content would play here</p>\r\n                                    </div>\r\n                                )}\r\n                                {selectedLesson.type === 'text' && (\r\n                                    <div className=\"text-center\">\r\n                                        <FileText className=\"w-16 h-16 text-accent/30 mx-auto mb-4\" />\r\n                                        <p className=\"text-sm text-subtext-light\">Interactive text content would display here with cards, highlights, and examples.</p>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            <p className=\"text-sm text-subtext-light dark:text-subtext-dark mb-6\">{selectedLesson.description}</p>\r\n\r\n                            <div className=\"flex gap-3\">\r\n                                <button\r\n                                    onClick={() => setSelectedLesson(null)}\r\n                                    className=\"flex-1 py-4 font-bold text-subtext-light hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl transition-colors\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => completeLesson(selectedLesson.id)}\r\n                                    className={`flex-1 py-4 rounded-xl font-black flex items-center justify-center gap-2 ${THEME_CLASSES.BTN_PRIMARY}`}\r\n                                >\r\n                                    <Check className=\"w-5 h-5\" />\r\n                                    Mark Complete\r\n                                </button>\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n\r\n                {/* Quiz Modal */}\r\n                {showQuiz && selectedModule && SAMPLE_QUIZZES[selectedModule.id] && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-[70] flex items-center justify-center bg-black/90 backdrop-blur-xl px-4\"\r\n                    >\r\n                        <motion.div\r\n                            initial={{ scale: 0.9, opacity: 0 }}\r\n                            animate={{ scale: 1, opacity: 1 }}\r\n                            className=\"w-full max-w-md bg-white dark:bg-surface-dark rounded-[2rem] p-8\"\r\n                        >\r\n                            <div className=\"flex items-center justify-between mb-6\">\r\n                                <h2 className=\"text-lg font-black text-heading-light dark:text-text-dark\">Module Quiz</h2>\r\n                                <span className=\"text-sm font-bold text-accent\">\r\n                                    {currentQuizIndex + 1} / {SAMPLE_QUIZZES[selectedModule.id].length}\r\n                                </span>\r\n                            </div>\r\n\r\n                            <div className=\"mb-8\">\r\n                                <div className=\"h-2 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden mb-6\">\r\n                                    <div\r\n                                        className=\"h-full bg-accent transition-all duration-300\"\r\n                                        style={{ width: `${((currentQuizIndex + 1) / SAMPLE_QUIZZES[selectedModule.id].length) * 100}%` }}\r\n                                    />\r\n                                </div>\r\n\r\n                                <h3 className=\"text-lg font-bold text-heading-light dark:text-text-dark mb-6\">\r\n                                    {SAMPLE_QUIZZES[selectedModule.id][currentQuizIndex].question}\r\n                                </h3>\r\n\r\n                                <div className=\"space-y-3\">\r\n                                    {SAMPLE_QUIZZES[selectedModule.id][currentQuizIndex].options.map((option, index) => {\r\n                                        const isCorrect = index === SAMPLE_QUIZZES[selectedModule.id][currentQuizIndex].correctIndex;\r\n                                        const showResult = quizAnswered;\r\n\r\n                                        return (\r\n                                            <button\r\n                                                key={index}\r\n                                                onClick={() => handleQuizAnswer(index)}\r\n                                                disabled={quizAnswered}\r\n                                                className={`w-full p-4 rounded-2xl text-left font-medium transition-all ${showResult\r\n                                                    ? isCorrect\r\n                                                        ? 'bg-green-100 dark:bg-green-900/30 border-2 border-green-500 text-green-700 dark:text-green-400'\r\n                                                        : 'bg-red-50 dark:bg-red-900/20 border-2 border-gray-200 dark:border-gray-700 text-gray-500'\r\n                                                    : 'bg-gray-50 dark:bg-gray-800 border-2 border-gray-100 dark:border-gray-700 hover:border-accent'\r\n                                                    }`}\r\n                                            >\r\n                                                <div className=\"flex items-center gap-3\">\r\n                                                    <span className={`w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold ${showResult && isCorrect\r\n                                                        ? 'bg-green-500 text-white'\r\n                                                        : 'bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400'\r\n                                                        }`}>\r\n                                                        {String.fromCharCode(65 + index)}\r\n                                                    </span>\r\n                                                    {option}\r\n                                                    {showResult && isCorrect && <CheckCircle2 className=\"w-5 h-5 text-green-500 ml-auto\" />}\r\n                                                </div>\r\n                                            </button>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={() => { setShowQuiz(false); setCurrentQuizIndex(0); setQuizScore(0); setQuizAnswered(false); }}\r\n                                className=\"w-full py-3 text-sm font-bold text-subtext-light hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl transition-colors\"\r\n                            >\r\n                                Exit Quiz\r\n                            </button>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n\r\n                {/* Glossary Term Modal */}\r\n                {showGlossaryTerm && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={() => setShowGlossaryTerm(null)}\r\n                        className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4\"\r\n                    >\r\n                        <motion.div\r\n                            initial={{ scale: 0.9 }}\r\n                            animate={{ scale: 1 }}\r\n                            exit={{ scale: 0.9 }}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                            className=\"w-full max-w-sm bg-white dark:bg-surface-dark rounded-[2rem] p-8\"\r\n                        >\r\n                            <div className={`inline-block px-3 py-1 rounded-lg text-[10px] font-black uppercase mb-4 ${showGlossaryTerm.category === 'startup'\r\n                                ? 'bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400'\r\n                                : 'bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400'\r\n                                }`}>\r\n                                {showGlossaryTerm.category}\r\n                            </div>\r\n                            <h2 className=\"text-2xl font-black text-heading-light dark:text-text-dark mb-4\">{showGlossaryTerm.term}</h2>\r\n                            <p className=\"text-sm text-subtext-light dark:text-subtext-dark leading-relaxed mb-6\">{showGlossaryTerm.definition}</p>\r\n                            <button\r\n                                onClick={() => setShowGlossaryTerm(null)}\r\n                                className={`w-full py-4 rounded-xl font-black ${THEME_CLASSES.BTN_PRIMARY}`}\r\n                            >\r\n                                Got it\r\n                            </button>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MarketSection;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\MarketValidationSystem.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":146,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":146,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5383,5386],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5383,5386],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    Target, Users, BarChart3, Scissors, Calendar,\r\n    Plus, Trash2, AlertCircle, TrendingUp, TrendingDown,\r\n    Minus, CheckCircle2, XCircle, Info, Lightbulb,\r\n    ArrowRight\r\n} from 'lucide-react';\r\n\r\ninterface MarketProblem {\r\n    id: string;\r\n    description: string;\r\n    who: string;\r\n    frequency: string;\r\n    existingFailures: string;\r\n}\r\n\r\ninterface CustomerPersona {\r\n    id: string;\r\n    role: string;\r\n    context: string;\r\n    constraints: string;\r\n    pains: string[];\r\n    outcomes: string[];\r\n    triggers: string[];\r\n    source: string;\r\n}\r\n\r\ninterface TractionMetric {\r\n    id: string;\r\n    name: string;\r\n    value: string;\r\n    isVanity: boolean;\r\n    trend: 'up' | 'down' | 'stable';\r\n}\r\n\r\ninterface DecisionThresholds {\r\n    kill: string;\r\n    iterate: string;\r\n    scale: string;\r\n}\r\n\r\ninterface Milestone {\r\n    id: string;\r\n    week: number;\r\n    goal: string;\r\n    validationGoal: string;\r\n    outcome: string;\r\n    status: 'pending' | 'completed' | 'failed';\r\n}\r\n\r\nconst MarketValidationSystem: React.FC = () => {\r\n    const [activeTab, setActiveTab] = useState<'problems' | 'personas' | 'metrics' | 'decisions' | 'timeline'>('problems');\r\n\r\n    // Data States\r\n    const [problems, setProblems] = useState<MarketProblem[]>(() => JSON.parse(localStorage.getItem('mkt_problems') || '[]'));\r\n    const [personas, setPersonas] = useState<CustomerPersona[]>(() => JSON.parse(localStorage.getItem('mkt_personas') || '[]'));\r\n    const [metrics, setMetrics] = useState<TractionMetric[]>(() => JSON.parse(localStorage.getItem('mkt_metrics') || '[]'));\r\n    const [thresholds, setThresholds] = useState<DecisionThresholds>(() => JSON.parse(localStorage.getItem('mkt_thresholds') || '{ \"kill\": \"\", \"iterate\": \"\", \"scale\": \"\" }'));\r\n    const [timeline, setTimeline] = useState<Milestone[]>(() => JSON.parse(localStorage.getItem('mkt_timeline') || '[]'));\r\n\r\n    // Persist data\r\n    useEffect(() => localStorage.setItem('mkt_problems', JSON.stringify(problems)), [problems]);\r\n    useEffect(() => localStorage.setItem('mkt_personas', JSON.stringify(personas)), [personas]);\r\n    useEffect(() => localStorage.setItem('mkt_metrics', JSON.stringify(metrics)), [metrics]);\r\n    useEffect(() => localStorage.setItem('mkt_thresholds', JSON.stringify(thresholds)), [thresholds]);\r\n    useEffect(() => localStorage.setItem('mkt_timeline', JSON.stringify(timeline)), [timeline]);\r\n\r\n    const addProblem = () => {\r\n        const newProblem: MarketProblem = {\r\n            id: Date.now().toString(),\r\n            description: '',\r\n            who: '',\r\n            frequency: '',\r\n            existingFailures: ''\r\n        };\r\n        setProblems([...problems, newProblem]);\r\n    };\r\n\r\n    const addPersona = () => {\r\n        const newPersona: CustomerPersona = {\r\n            id: Date.now().toString(),\r\n            role: '',\r\n            context: '',\r\n            constraints: '',\r\n            pains: [],\r\n            outcomes: [],\r\n            triggers: [],\r\n            source: ''\r\n        };\r\n        setPersonas([...personas, newPersona]);\r\n    };\r\n\r\n    const addMetric = () => {\r\n        const newMetric: TractionMetric = {\r\n            id: Date.now().toString(),\r\n            name: '',\r\n            value: '',\r\n            isVanity: false,\r\n            trend: 'stable'\r\n        };\r\n        setMetrics([...metrics, newMetric]);\r\n    };\r\n\r\n    const addMilestone = () => {\r\n        const newMilestone: Milestone = {\r\n            id: Date.now().toString(),\r\n            week: timeline.length + 1,\r\n            goal: '',\r\n            validationGoal: '',\r\n            outcome: '',\r\n            status: 'pending'\r\n        };\r\n        setTimeline([...timeline, newMilestone]);\r\n    };\r\n\r\n    const updateProblem = (id: string, updates: Partial<MarketProblem>) => {\r\n        setProblems(problems.map(p => p.id === id ? { ...p, ...updates } : p));\r\n    };\r\n\r\n    const updatePersona = (id: string, updates: Partial<CustomerPersona>) => {\r\n        setPersonas(personas.map(p => p.id === id ? { ...p, ...updates } : p));\r\n    };\r\n\r\n    const updateMetric = (id: string, updates: Partial<TractionMetric>) => {\r\n        setMetrics(metrics.map(m => m.id === id ? { ...m, ...updates } : m));\r\n    };\r\n\r\n    const updateMilestone = (id: string, updates: Partial<Milestone>) => {\r\n        setTimeline(timeline.map(m => m.id === id ? { ...m, ...updates } : m));\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white dark:bg-gray-900 rounded-3xl overflow-hidden shadow-2xl border border-gray-100 dark:border-gray-800 flex flex-col h-full\">\r\n            {/* Nav */}\r\n            <div className=\"flex border-b border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-900/50 p-2 overflow-x-auto\">\r\n                {[\r\n                    { id: 'problems', label: 'Problems', icon: Target },\r\n                    { id: 'personas', label: 'Personas', icon: Users },\r\n                    { id: 'metrics', label: 'Metrics', icon: BarChart3 },\r\n                    { id: 'decisions', label: 'Decisions', icon: Scissors },\r\n                    { id: 'timeline', label: 'Timeline', icon: Calendar }\r\n                ].map(tab => (\r\n                    <button\r\n                        key={tab.id}\r\n                        onClick={() => setActiveTab(tab.id as any)}\r\n                        className={`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-semibold transition-all whitespace-nowrap ${activeTab === tab.id ? 'bg-white dark:bg-gray-800 text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700 dark:hover:text-gray-300'}`}\r\n                    >\r\n                        <tab.icon className=\"w-4 h-4\" />\r\n                        {tab.label}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Content Area */}\r\n            <div className=\"flex-1 overflow-y-auto p-6 custom-scrollbar\">\r\n                <AnimatePresence mode=\"wait\">\r\n                    {activeTab === 'problems' && (\r\n                        <motion.div\r\n                            key=\"problems\"\r\n                            initial={{ opacity: 0, y: 10 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: -10 }}\r\n                            className=\"space-y-6\"\r\n                        >\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <div>\r\n                                    <h2 className=\"text-xl font-bold text-gray-800 dark:text-white\">Market Problem Statements</h2>\r\n                                    <p className=\"text-sm text-gray-500\">Define sharp, testable problems being solved.</p>\r\n                                </div>\r\n                                <button onClick={addProblem} className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-blue-600/20 hover:bg-blue-700 transition-all\">\r\n                                    <Plus className=\"w-4 h-4\" /> Add Problem\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"grid gap-6\">\r\n                                {problems.map((problem) => (\r\n                                    <div key={problem.id} className=\"bg-gray-50 dark:bg-gray-800/50 rounded-2xl p-6 border border-gray-100 dark:border-gray-700 group relative\">\r\n                                        <button\r\n                                            onClick={() => setProblems(problems.filter(p => p.id !== problem.id))}\r\n                                            className=\"absolute top-4 right-4 p-2 text-gray-400 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100\"\r\n                                        >\r\n                                            <Trash2 className=\"w-4 h-4\" />\r\n                                        </button>\r\n                                        <div className=\"space-y-4\">\r\n                                            <div>\r\n                                                <label className=\"text-xs font-bold uppercase text-gray-400 mb-1 block\">The Problem</label>\r\n                                                <textarea\r\n                                                    value={problem.description}\r\n                                                    onChange={(e) => updateProblem(problem.id, { description: e.target.value })}\r\n                                                    placeholder=\"What exactly is the friction point?\"\r\n                                                    className=\"w-full bg-white dark:bg-gray-900 border-none rounded-xl p-3 text-sm focus:ring-2 focus:ring-blue-500/20 outline-none\"\r\n                                                    rows={2}\r\n                                                />\r\n                                            </div>\r\n                                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                                <div>\r\n                                                    <label className=\"text-xs font-bold uppercase text-gray-400 mb-1 block\">Who experiences it?</label>\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        value={problem.who}\r\n                                                        onChange={(e) => updateProblem(problem.id, { who: e.target.value })}\r\n                                                        placeholder=\"Target user segment\"\r\n                                                        className=\"w-full bg-white dark:bg-gray-900 border-none rounded-xl p-3 text-sm focus:ring-2 focus:ring-blue-500/20 outline-none\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <label className=\"text-xs font-bold uppercase text-gray-400 mb-1 block\">How often / Why now?</label>\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        value={problem.frequency}\r\n                                                        onChange={(e) => updateProblem(problem.id, { frequency: e.target.value })}\r\n                                                        placeholder=\"Frequency and urgency\"\r\n                                                        className=\"w-full bg-white dark:bg-gray-900 border-none rounded-xl p-3 text-sm focus:ring-2 focus:ring-blue-500/20 outline-none\"\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div>\r\n                                                <label className=\"text-xs font-bold uppercase text-gray-400 mb-1 block\">Why do existing solutions fail?</label>\r\n                                                <textarea\r\n                                                    value={problem.existingFailures}\r\n                                                    onChange={(e) => updateProblem(problem.id, { existingFailures: e.target.value })}\r\n                                                    placeholder=\"The gap in the market...\"\r\n                                                    className=\"w-full bg-white dark:bg-gray-900 border-none rounded-xl p-3 text-sm focus:ring-2 focus:ring-blue-500/20 outline-none\"\r\n                                                    rows={2}\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                                {problems.length === 0 && (\r\n                                    <div className=\"text-center py-12 border-2 border-dashed border-gray-100 dark:border-gray-800 rounded-3xl\">\r\n                                        <Target className=\"w-12 h-12 mx-auto text-gray-300 mb-2\" />\r\n                                        <p className=\"text-gray-500\">No problem statements yet. Start by defining what you're solving.</p>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {activeTab === 'personas' && (\r\n                        <motion.div\r\n                            key=\"personas\"\r\n                            initial={{ opacity: 0, y: 10 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: -10 }}\r\n                            className=\"space-y-6\"\r\n                        >\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <div>\r\n                                    <h2 className=\"text-xl font-bold text-gray-800 dark:text-white\">Customer Persona Mapping</h2>\r\n                                    <p className=\"text-sm text-gray-500\">Map roles, paints, outcomes, and triggers.</p>\r\n                                </div>\r\n                                <button onClick={addPersona} className=\"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-indigo-600/20 hover:bg-indigo-700 transition-all\">\r\n                                    <Plus className=\"w-4 h-4\" /> Add Persona\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"grid gap-6\">\r\n                                {personas.map((persona) => (\r\n                                    <div key={persona.id} className=\"bg-indigo-50/30 dark:bg-indigo-900/10 rounded-2xl p-6 border border-indigo-100/50 dark:border-indigo-900/20 group relative\">\r\n                                        <button\r\n                                            onClick={() => setPersonas(personas.filter(p => p.id !== persona.id))}\r\n                                            className=\"absolute top-4 right-4 p-2 text-gray-400 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100\"\r\n                                        >\r\n                                            <Trash2 className=\"w-4 h-4\" />\r\n                                        </button>\r\n                                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                            <div className=\"space-y-4\">\r\n                                                <div>\r\n                                                    <label className=\"text-xs font-bold uppercase text-indigo-400 mb-1 block\">Role & Identity</label>\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        value={persona.role}\r\n                                                        onChange={(e) => updatePersona(persona.id, { role: e.target.value })}\r\n                                                        placeholder=\"e.g. Early-stage Founder\"\r\n                                                        className=\"w-full bg-white dark:bg-gray-900 border-none rounded-xl p-3 text-sm outline-none\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <label className=\"text-xs font-bold uppercase text-indigo-400 mb-1 block\">Context & Constraints</label>\r\n                                                    <textarea\r\n                                                        value={persona.context}\r\n                                                        onChange={(e) => updatePersona(persona.id, { context: e.target.value })}\r\n                                                        placeholder=\"Work environment, time, budget...\"\r\n                                                        className=\"w-full bg-white dark:bg-gray-900 border-none rounded-xl p-3 text-sm outline-none shadow-sm\"\r\n                                                        rows={2}\r\n                                                    />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <label className=\"text-xs font-bold uppercase text-indigo-400 mb-1 block\">Where do they look for solutions?</label>\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        value={persona.source}\r\n                                                        onChange={(e) => updatePersona(persona.id, { source: e.target.value })}\r\n                                                        placeholder=\"Google, Twitter, Niche Forums...\"\r\n                                                        className=\"w-full bg-white dark:bg-gray-900 border-none rounded-xl p-3 text-sm outline-none\"\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"space-y-4\">\r\n                                                <div>\r\n                                                    <label className=\"text-xs font-bold uppercase text-indigo-400 mb-1 block\">Pains, Outcomes & Triggers</label>\r\n                                                    <div className=\"space-y-2\">\r\n                                                        <textarea\r\n                                                            value={persona.pains.join('\\n')}\r\n                                                            onChange={(e) => updatePersona(persona.id, { pains: e.target.value.split('\\n') })}\r\n                                                            placeholder=\"Core Pains (one per line)\"\r\n                                                            className=\"w-full bg-white dark:bg-gray-900 border-none rounded-xl p-3 text-sm outline-none shadow-sm\"\r\n                                                            rows={2}\r\n                                                        />\r\n                                                        <textarea\r\n                                                            value={persona.outcomes.join('\\n')}\r\n                                                            onChange={(e) => updatePersona(persona.id, { outcomes: e.target.value.split('\\n') })}\r\n                                                            placeholder=\"Desired Outcomes\"\r\n                                                            className=\"w-full bg-white dark:bg-gray-900 border-none rounded-xl p-3 text-sm outline-none shadow-sm\"\r\n                                                            rows={2}\r\n                                                        />\r\n                                                        <input\r\n                                                            type=\"text\"\r\n                                                            value={persona.triggers.join(', ')}\r\n                                                            onChange={(e) => updatePersona(persona.id, { triggers: e.target.value.split(',').map(s => s.trim()) })}\r\n                                                            placeholder=\"Buying Triggers (comma separated)\"\r\n                                                            className=\"w-full bg-white dark:bg-gray-900 border-none rounded-xl p-3 text-sm outline-none\"\r\n                                                        />\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {activeTab === 'metrics' && (\r\n                        <motion.div\r\n                            key=\"metrics\"\r\n                            initial={{ opacity: 0, y: 10 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: -10 }}\r\n                            className=\"space-y-6\"\r\n                        >\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <div>\r\n                                    <h2 className=\"text-xl font-bold text-gray-800 dark:text-white\">Traction Metrics</h2>\r\n                                    <p className=\"text-sm text-gray-500\">Track demand signals and separate vanity from reality.</p>\r\n                                </div>\r\n                                <button onClick={addMetric} className=\"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-emerald-600/20 hover:bg-emerald-700 transition-all\">\r\n                                    <Plus className=\"w-4 h-4\" /> Add Metric\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                                {metrics.map((metric) => (\r\n                                    <div key={metric.id} className=\"bg-white dark:bg-gray-800 rounded-2xl p-5 border border-gray-100 dark:border-gray-700 shadow-sm relative group\">\r\n                                        <button\r\n                                            onClick={() => setMetrics(metrics.filter(m => m.id !== metric.id))}\r\n                                            className=\"absolute top-2 right-2 p-1 text-gray-300 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100\"\r\n                                        >\r\n                                            <Trash2 className=\"w-3 h-3\" />\r\n                                        </button>\r\n                                        <div className=\"space-y-3\">\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={metric.name}\r\n                                                onChange={(e) => updateMetric(metric.id, { name: e.target.value })}\r\n                                                placeholder=\"Metric Name\"\r\n                                                className=\"w-full font-bold text-gray-800 dark:text-white bg-transparent border-none p-0 focus:ring-0 outline-none\"\r\n                                            />\r\n                                            <div className=\"flex items-end justify-between\">\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    value={metric.value}\r\n                                                    onChange={(e) => updateMetric(metric.id, { value: e.target.value })}\r\n                                                    placeholder=\"Value\"\r\n                                                    className=\"text-2xl font-black text-emerald-600 dark:text-emerald-400 bg-transparent border-none p-0 w-24 focus:ring-0 outline-none\"\r\n                                                />\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    <button\r\n                                                        onClick={() => updateMetric(metric.id, { trend: metric.trend === 'up' ? 'down' : metric.trend === 'down' ? 'stable' : 'up' })}\r\n                                                        className={`p-1.5 rounded-lg ${metric.trend === 'up' ? 'bg-emerald-100 text-emerald-600' : metric.trend === 'down' ? 'bg-red-100 text-red-600' : 'bg-gray-100 text-gray-600'}`}\r\n                                                    >\r\n                                                        {metric.trend === 'up' ? <TrendingUp className=\"w-4 h-4\" /> : metric.trend === 'down' ? <TrendingDown className=\"w-4 h-4\" /> : <Minus className=\"w-4 h-4\" />}\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>\r\n                                            <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                                                <input\r\n                                                    type=\"checkbox\"\r\n                                                    checked={metric.isVanity}\r\n                                                    onChange={(e) => updateMetric(metric.id, { isVanity: e.target.checked })}\r\n                                                    className=\"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                                                />\r\n                                                <span className={`text-xs font-bold ${metric.isVanity ? 'text-amber-500' : 'text-gray-400'}`}>\r\n                                                    {metric.isVanity ? 'Vanity Metric' : 'Decision-Driving'}\r\n                                                </span>\r\n                                            </label>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {activeTab === 'decisions' && (\r\n                        <motion.div\r\n                            key=\"decisions\"\r\n                            initial={{ opacity: 0, y: 10 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: -10 }}\r\n                            className=\"space-y-8\"\r\n                        >\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                                <div className=\"bg-red-50 dark:bg-red-900/10 rounded-2xl p-6 border border-red-100 dark:border-red-900/20\">\r\n                                    <div className=\"flex items-center gap-3 mb-4\">\r\n                                        <XCircle className=\"w-6 h-6 text-red-500\" />\r\n                                        <h3 className=\"font-bold text-red-900 dark:text-red-300\">Kill Threshold</h3>\r\n                                    </div>\r\n                                    <textarea\r\n                                        value={thresholds.kill}\r\n                                        onChange={(e) => setThresholds({ ...thresholds, kill: e.target.value })}\r\n                                        placeholder=\"When do we stop or pivot?\"\r\n                                        className=\"w-full bg-white dark:bg-gray-900 border-none rounded-xl p-3 text-sm text-red-900 dark:text-red-200 outline-none\"\r\n                                        rows={4}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"bg-amber-50 dark:bg-amber-900/10 rounded-2xl p-6 border border-amber-100 dark:border-amber-900/20\">\r\n                                    <div className=\"flex items-center gap-3 mb-4\">\r\n                                        <AlertCircle className=\"w-6 h-6 text-amber-500\" />\r\n                                        <h3 className=\"font-bold text-amber-900 dark:text-amber-300\">Iterate Threshold</h3>\r\n                                    </div>\r\n                                    <textarea\r\n                                        value={thresholds.iterate}\r\n                                        onChange={(e) => setThresholds({ ...thresholds, iterate: e.target.value })}\r\n                                        placeholder=\"What assumptions need fixing?\"\r\n                                        className=\"w-full bg-white dark:bg-gray-900 border-none rounded-xl p-3 text-sm text-amber-900 dark:text-amber-200 outline-none\"\r\n                                        rows={4}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"bg-emerald-50 dark:bg-emerald-900/10 rounded-2xl p-6 border border-emerald-100 dark:border-emerald-900/20\">\r\n                                    <div className=\"flex items-center gap-3 mb-4\">\r\n                                        <CheckCircle2 className=\"w-6 h-6 text-emerald-500\" />\r\n                                        <h3 className=\"font-bold text-emerald-900 dark:text-emerald-300\">Scale Threshold</h3>\r\n                                    </div>\r\n                                    <textarea\r\n                                        value={thresholds.scale}\r\n                                        onChange={(e) => setThresholds({ ...thresholds, scale: e.target.value })}\r\n                                        placeholder=\"When do we double down?\"\r\n                                        className=\"w-full bg-white dark:bg-gray-900 border-none rounded-xl p-3 text-sm text-emerald-900 dark:text-emerald-200 outline-none\"\r\n                                        rows={4}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"bg-gray-900 text-white rounded-3xl p-8 relative overflow-hidden\">\r\n                                <div className=\"absolute top-0 right-0 p-8 opacity-10\">\r\n                                    <Info className=\"w-32 h-32\" />\r\n                                </div>\r\n                                <div className=\"relative z-10 max-w-2xl\">\r\n                                    <h3 className=\"text-2xl font-black mb-4 flex items-center gap-3\">\r\n                                        <Lightbulb className=\"w-8 h-8 text-yellow-400\" />\r\n                                        Base decisions on evidence, not attachment.\r\n                                    </h3>\r\n                                    <p className=\"text-gray-400 mb-6\">Set explicit thresholds before you launch. This prevents emotional anchoring and helps you pivot faster.</p>\r\n                                    <div className=\"flex gap-4\">\r\n                                        <button className=\"px-6 py-3 bg-white/10 hover:bg-white/20 rounded-xl font-bold flex items-center gap-2 transition-all\">\r\n                                            Run Rationality Check <ArrowRight className=\"w-4 h-4\" />\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {activeTab === 'timeline' && (\r\n                        <motion.div\r\n                            key=\"timeline\"\r\n                            initial={{ opacity: 0, y: 10 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: -10 }}\r\n                            className=\"space-y-6\"\r\n                        >\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <div>\r\n                                    <h2 className=\"text-xl font-bold text-gray-800 dark:text-white\">Execution Timeline</h2>\r\n                                    <p className=\"text-sm text-gray-500\">Short, concrete milestones focused on validation.</p>\r\n                                </div>\r\n                                <button onClick={addMilestone} className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-blue-600/20 hover:bg-blue-700 transition-all\">\r\n                                    <Plus className=\"w-4 h-4\" /> Add Milestone\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"relative\">\r\n                                <div className=\"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-100 dark:bg-gray-800\" />\r\n                                <div className=\"space-y-8 relative\">\r\n                                    {timeline.map((milestone) => (\r\n                                        <div key={milestone.id} className=\"flex gap-6 group\">\r\n                                            <div className={`w-16 h-16 rounded-2xl flex items-center justify-center font-black text-xl z-10 transition-all ${milestone.status === 'completed' ? 'bg-emerald-500 text-white' : milestone.status === 'failed' ? 'bg-red-500 text-white' : 'bg-white dark:bg-gray-800 border-2 border-gray-100 dark:border-gray-700 text-gray-400'}`}>\r\n                                                {milestone.week}\r\n                                            </div>\r\n                                            <div className=\"flex-1 bg-white dark:bg-gray-800 rounded-3xl p-6 border border-gray-100 dark:border-gray-700 shadow-sm relative\">\r\n                                                <button\r\n                                                    onClick={() => setTimeline(timeline.filter(m => m.id !== milestone.id))}\r\n                                                    className=\"absolute top-4 right-4 p-2 text-gray-300 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100\"\r\n                                                >\r\n                                                    <Trash2 className=\"w-4 h-4\" />\r\n                                                </button>\r\n                                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                                    <div className=\"space-y-4\">\r\n                                                        <div>\r\n                                                            <label className=\"text-[10px] font-black uppercase text-gray-400 mb-1 block\">Goals for Week {milestone.week}</label>\r\n                                                            <textarea\r\n                                                                value={milestone.goal}\r\n                                                                onChange={(e) => updateMilestone(milestone.id, { goal: e.target.value })}\r\n                                                                placeholder=\"Deliverables...\"\r\n                                                                className=\"w-full bg-gray-50 dark:bg-gray-900 border-none rounded-xl p-3 text-sm focus:ring-2 focus:ring-blue-500/20 outline-none\"\r\n                                                                rows={2}\r\n                                                            />\r\n                                                        </div>\r\n                                                        <div>\r\n                                                            <label className=\"text-[10px] font-black uppercase text-gray-400 mb-1 block\">Validation Goal</label>\r\n                                                            <input\r\n                                                                type=\"text\"\r\n                                                                value={milestone.validationGoal}\r\n                                                                onChange={(e) => updateMilestone(milestone.id, { validationGoal: e.target.value })}\r\n                                                                placeholder=\"Specific signal to look for...\"\r\n                                                                className=\"w-full bg-gray-50 dark:bg-gray-900 border-none rounded-xl p-3 text-sm focus:ring-2 focus:ring-blue-500/20 outline-none\"\r\n                                                            />\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"space-y-4\">\r\n                                                        <div>\r\n                                                            <label className=\"text-[10px] font-black uppercase text-gray-400 mb-1 block\">Outcome / Review</label>\r\n                                                            <textarea\r\n                                                                value={milestone.outcome}\r\n                                                                onChange={(e) => updateMilestone(milestone.id, { outcome: e.target.value })}\r\n                                                                placeholder=\"What did we learn?\"\r\n                                                                className=\"w-full bg-gray-50 dark:bg-gray-900 border-none rounded-xl p-3 text-sm focus:ring-2 focus:ring-blue-500/20 outline-none h-full\"\r\n                                                                rows={4}\r\n                                                            />\r\n                                                        </div>\r\n                                                        <div className=\"flex gap-2\">\r\n                                                            {(['pending', 'completed', 'failed'] as const).map((s) => (\r\n                                                                <button\r\n                                                                    key={s}\r\n                                                                    onClick={() => updateMilestone(milestone.id, { status: s })}\r\n                                                                    className={`flex-1 py-2 rounded-xl text-[10px] font-black uppercase transition-all ${milestone.status === s ? (s === 'completed' ? 'bg-emerald-100 text-emerald-600' : s === 'failed' ? 'bg-red-100 text-red-600' : 'bg-gray-100 text-gray-600') : 'bg-transparent text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700'}`}\r\n                                                                >\r\n                                                                    {s}\r\n                                                                </button>\r\n                                                            ))}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MarketValidationSystem;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\MeditationSystem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\NanoBananaAI.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\NetworkingSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":222,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11091,11094],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11091,11094],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":273,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":273,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14050,14053],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14050,14053],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":427,"column":87,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":427,"endColumn":90,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23530,23533],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23530,23533],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":580,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":580,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[33112,33115],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[33112,33115],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    Users, Plus, ArrowLeft, MessageSquare, Target, Zap,\r\n    ChevronRight, X, UserPlus, Heart, Send,\r\n    Repeat, Filter, Link, DollarSign\r\n} from 'lucide-react';\r\nimport { THEME_CLASSES, LUXURY_ANIMATIONS } from '../utils/theme';\r\nimport { useLifeTracker } from '../utils/lifeTrackerStore';\r\nimport type {\r\n    NetworkingConnection,\r\n    NetworkingOutcomeType,\r\n    ConnectionOutcome,\r\n    RelationshipRetrospective\r\n} from '../utils/lifeTrackerStore';\r\n\r\nconst NetworkingSection: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const store = useLifeTracker();\r\n    const { networking } = store.getState();\r\n    const { connections, reusableAssets } = networking;\r\n\r\n    const [activeTab, setActiveTab] = useState<'connections' | 'nurture' | 'assets' | 'outcomes'>('connections');\r\n    const [selectedConnection, setSelectedConnection] = useState<NetworkingConnection | null>(null);\r\n    const [isAddConnectionOpen, setIsAddConnectionOpen] = useState(false);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    const handleBack = () => navigate('/dashboard');\r\n\r\n    const addConnection = (conn: Omit<NetworkingConnection, 'id' | 'createdAt' | 'lastInteraction' | 'outcomes' | 'retrospectives'>) => {\r\n        store.addNetworkingConnection(conn);\r\n        setIsAddConnectionOpen(false);\r\n    };\r\n\r\n\r\n    const deleteConnection = (id: string) => {\r\n        if (confirm('Are you sure you want to delete this connection?')) {\r\n            store.deleteNetworkingConnection(id);\r\n            if (selectedConnection?.id === id) setSelectedConnection(null);\r\n        }\r\n    };\r\n\r\n    const filteredConnections = connections.filter(c =>\r\n        c.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        c.platform?.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    return (\r\n        <div className={`min-h-screen ${THEME_CLASSES.BG_PRIMARY} pb-24 font-sans`}>\r\n            {/* Header */}\r\n            <header className=\"sticky top-0 z-40 px-6 py-6 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-md border-b border-border-light dark:border-border-dark\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                    <button onClick={handleBack} className=\"p-2 -ml-2 rounded-xl hover:bg-black/5 dark:hover:bg-white/5 transition-all\">\r\n                        <ArrowLeft className=\"w-6 h-6\" />\r\n                    </button>\r\n                    <h1 className=\"text-xl font-black tracking-tight text-heading-light dark:text-text-dark\">Connection OS</h1>\r\n                    <button\r\n                        onClick={() => setIsAddConnectionOpen(true)}\r\n                        className=\"p-2 bg-accent/10 text-accent rounded-xl hover:bg-accent/20 transition-all\"\r\n                    >\r\n                        <UserPlus className=\"w-6 h-6\" />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"flex gap-1 p-1 bg-surface-light dark:bg-surface-dark rounded-xl border border-border-light dark:border-border-dark overflow-x-auto no-scrollbar\">\r\n                    {(['connections', 'nurture', 'assets', 'outcomes'] as const).map((tab) => (\r\n                        <button\r\n                            key={tab}\r\n                            onClick={() => setActiveTab(tab)}\r\n                            className={`flex-1 px-4 py-2 text-[10px] font-bold uppercase tracking-wider rounded-lg transition-all ${activeTab === tab\r\n                                ? 'bg-accent text-white shadow-glow'\r\n                                : 'text-subtext-light dark:text-subtext-dark hover:bg-black/5 dark:hover:bg-white/5'\r\n                                }`}\r\n                        >\r\n                            {tab}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </header>\r\n\r\n            <main className=\"px-6 py-8 pb-20 max-w-lg mx-auto\">\r\n                <AnimatePresence mode=\"wait\">\r\n                    {activeTab === 'connections' && (\r\n                        <motion.div\r\n                            key=\"connections\"\r\n                            variants={LUXURY_ANIMATIONS.fadeIn}\r\n                            initial=\"initial\"\r\n                            animate=\"animate\"\r\n                            exit=\"initial\"\r\n                            className=\"space-y-6\"\r\n                        >\r\n                            <div className=\"relative\">\r\n                                <Filter className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-subtext-light opacity-50\" />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Search connections...\"\r\n                                    value={searchTerm}\r\n                                    onChange={e => setSearchTerm(e.target.value)}\r\n                                    className={`w-full pl-12 pr-6 py-4 rounded-2xl ${THEME_CLASSES.INPUT} text-sm`}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"grid gap-4\">\r\n                                {filteredConnections.map(conn => (\r\n                                    <ConnectionCard\r\n                                        key={conn.id}\r\n                                        connection={conn}\r\n                                        onClick={() => setSelectedConnection(conn)}\r\n                                    />\r\n                                ))}\r\n                                {filteredConnections.length === 0 && (\r\n                                    <div className=\"text-center py-20 bg-surface-light dark:bg-surface-dark rounded-[2.5rem] border border-dashed border-border-light dark:border-border-dark\">\r\n                                        <Users className=\"w-12 h-12 text-accent/20 mx-auto mb-4\" />\r\n                                        <p className=\"text-sm font-bold text-subtext-light dark:text-subtext-dark\">No connections found.</p>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {activeTab === 'assets' && (\r\n                        <motion.div\r\n                            key=\"assets\"\r\n                            variants={LUXURY_ANIMATIONS.fadeIn}\r\n                            initial=\"initial\"\r\n                            animate=\"animate\"\r\n                            exit=\"initial\"\r\n                        >\r\n                            <ReusableAssetsView\r\n                                assets={reusableAssets}\r\n                                onAddStarter={(s) => store.addNetworkingStarter(s)}\r\n                                onDeleteStarter={(i) => store.deleteNetworkingStarter(i)}\r\n                                onAddTemplate={(t, c) => store.addNetworkingTemplate(t, c)}\r\n                                onDeleteTemplate={(id) => store.deleteNetworkingTemplate(id)}\r\n                            />\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {activeTab === 'outcomes' && (\r\n                        <motion.div\r\n                            key=\"outcomes\"\r\n                            variants={LUXURY_ANIMATIONS.fadeIn}\r\n                            initial=\"initial\"\r\n                            animate=\"animate\"\r\n                            exit=\"initial\"\r\n                            className=\"space-y-6\"\r\n                        >\r\n                            <OutcomesSummary connections={connections} />\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {activeTab === 'nurture' && (\r\n                        <motion.div\r\n                            key=\"nurture\"\r\n                            variants={LUXURY_ANIMATIONS.fadeIn}\r\n                            initial=\"initial\"\r\n                            animate=\"animate\"\r\n                            exit=\"initial\"\r\n                            className=\"space-y-6\"\r\n                        >\r\n                            <NurtureWaitlist connections={connections} />\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </main>\r\n\r\n            <AnimatePresence>\r\n                {isAddConnectionOpen && (\r\n                    <AddConnectionModal\r\n                        onClose={() => setIsAddConnectionOpen(false)}\r\n                        onSave={addConnection}\r\n                    />\r\n                )}\r\n                {selectedConnection && (\r\n                    <ConnectionDetailModal\r\n                        connection={selectedConnection}\r\n                        onClose={() => setSelectedConnection(null)}\r\n                        onUpdate={(updates) => store.updateNetworkingConnection(selectedConnection.id, updates)}\r\n                        onDelete={() => deleteConnection(selectedConnection.id)}\r\n                        onAddOutcome={(outcome) => store.addConnectionOutcome(selectedConnection.id, outcome)}\r\n                        onAddRetro={(retro) => store.addRelationshipRetrospective(selectedConnection.id, retro)}\r\n                    />\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- Sub-components ---\r\n\r\nconst ConnectionCard: React.FC<{ connection: NetworkingConnection, onClick: () => void }> = ({ connection, onClick }) => (\r\n    <motion.div\r\n        whileHover={{ y: -2 }}\r\n        onClick={onClick}\r\n        className={`${THEME_CLASSES.CARD} p-5 cursor-pointer flex items-center justify-between group`}\r\n    >\r\n        <div className=\"flex items-center gap-4\">\r\n            <div className={`w-12 h-12 rounded-2xl flex items-center justify-center font-black text-white ${connection.status === 'active' ? 'bg-green-500 shadow-glow-green' :\r\n                connection.status === 'nurturing' ? 'bg-accent shadow-glow' :\r\n                    'bg-gray-400'\r\n                }`}>\r\n                {connection.name.charAt(0)}\r\n            </div>\r\n            <div>\r\n                <h3 className=\"font-bold text-heading-light dark:text-text-dark\">{connection.name}</h3>\r\n                <div className=\"flex items-center gap-2 mt-1\">\r\n                    <span className=\"text-[9px] font-black uppercase text-accent tracking-widest\">{connection.platform || 'General'}</span>\r\n                    <span className=\"w-1 h-1 rounded-full bg-border-light dark:bg-border-dark\" />\r\n                    <span className=\"text-[9px] font-bold text-subtext-light\">Trust: {connection.trustScore}/10</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <ChevronRight className=\"w-5 h-5 text-subtext-light group-hover:translate-x-1 transition-transform\" />\r\n    </motion.div>\r\n);\r\n\r\nconst ReusableAssetsView: React.FC<{\r\n    assets: {\r\n        starters: string[],\r\n        templates: any[] // Should be NetworkingTemplate but keeping any for now if not imported\r\n    },\r\n    onAddStarter: (s: string) => void,\r\n    onDeleteStarter: (i: number) => void,\r\n    onAddTemplate: (t: string, c: string) => void,\r\n    onDeleteTemplate: (id: string) => void\r\n}> = ({ assets, onAddStarter, onDeleteStarter, onAddTemplate, onDeleteTemplate }) => {\r\n    const [newStarter, setNewStarter] = useState('');\r\n    const [isAddTemplateOpen, setIsAddTemplateOpen] = useState(false);\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <section>\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                    <h2 className=\"text-xs font-black uppercase tracking-widest text-subtext-light dark:text-subtext-dark\">Conversation Starters</h2>\r\n                    <Zap className=\"w-4 h-4 text-accent\" />\r\n                </div>\r\n                <div className=\"space-y-3\">\r\n                    <div className=\"flex gap-2\">\r\n                        <input\r\n                            value={newStarter}\r\n                            onChange={e => setNewStarter(e.target.value)}\r\n                            placeholder=\"Hook or context starter...\"\r\n                            className={`flex-1 p-4 ${THEME_CLASSES.INPUT} text-sm`}\r\n                        />\r\n                        <button\r\n                            onClick={() => { if (newStarter) { onAddStarter(newStarter); setNewStarter(''); } }}\r\n                            className=\"p-4 bg-accent text-white rounded-2xl\"\r\n                        >\r\n                            <Plus className=\"w-5 h-5\" />\r\n                        </button>\r\n                    </div>\r\n                    {assets.starters.map((starter: string, i: number) => (\r\n                        <div key={i} className=\"group flex justify-between items-center p-4 bg-surface-light dark:bg-surface-dark rounded-2xl border border-border-light dark:border-border-dark\">\r\n                            <p className=\"text-sm font-medium pr-4\">{starter}</p>\r\n                            <button onClick={() => onDeleteStarter(i)} className=\"opacity-0 group-hover:opacity-100 transition-opacity p-2 text-red-500\">\r\n                                <X className=\"w-4 h-4\" />\r\n                            </button>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </section>\r\n\r\n            <section>\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                    <h2 className=\"text-xs font-black uppercase tracking-widest text-subtext-light dark:text-subtext-dark\">DM Templates</h2>\r\n                    <button onClick={() => setIsAddTemplateOpen(true)} className=\"p-2 bg-accent/10 text-accent rounded-lg\">\r\n                        <Plus className=\"w-4 h-4\" />\r\n                    </button>\r\n                </div>\r\n                <div className=\"space-y-4\">\r\n                    {assets.templates.map((template: any) => (\r\n                        <div key={template.id} className={`${THEME_CLASSES.CARD} p-5 relative group`}>\r\n                            <button onClick={() => onDeleteTemplate(template.id)} className=\"absolute top-4 right-4 text-red-500 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                <X className=\"w-4 h-4\" />\r\n                            </button>\r\n                            <h4 className=\"font-bold mb-2\">{template.title}</h4>\r\n                            <p className=\"text-xs text-subtext-light whitespace-pre-wrap\">{template.content}</p>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </section>\r\n\r\n            {isAddTemplateOpen && (\r\n                <AddTemplateModal\r\n                    onClose={() => setIsAddTemplateOpen(false)}\r\n                    onSave={(t, c) => { onAddTemplate(t, c); setIsAddTemplateOpen(false); }}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst AddTemplateModal: React.FC<{ onClose: () => void, onSave: (t: string, c: string) => void }> = ({ onClose, onSave }) => {\r\n    const [title, setTitle] = useState('');\r\n    const [content, setContent] = useState('');\r\n    return (\r\n        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4\">\r\n            <motion.div className=\"w-full max-w-sm bg-white dark:bg-surface-dark rounded-[2.5rem] p-8\">\r\n                <h2 className=\"text-xl font-black mb-6\">New Template</h2>\r\n                <input value={title} onChange={e => setTitle(e.target.value)} placeholder=\"Title (e.g. Follow-up)\" className={`w-full p-4 mb-4 ${THEME_CLASSES.INPUT}`} />\r\n                <textarea value={content} onChange={e => setContent(e.target.value)} placeholder=\"Content...\" className={`w-full h-40 p-4 mb-6 ${THEME_CLASSES.INPUT} resize-none`} />\r\n                <div className=\"flex gap-3\">\r\n                    <button onClick={onClose} className=\"flex-1 py-4 font-bold text-subtext-light\">Cancel</button>\r\n                    <button onClick={() => onSave(title, content)} className={`flex-2 px-8 py-4 rounded-xl font-black ${THEME_CLASSES.BTN_PRIMARY}`}>Save</button>\r\n                </div>\r\n            </motion.div>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nconst OutcomesSummary: React.FC<{ connections: NetworkingConnection[] }> = ({ connections }) => {\r\n    const allOutcomes = connections.flatMap(c => c.outcomes.map(o => ({ ...o, connectionName: c.name })));\r\n    const sortedOutcomes = allOutcomes.sort((a, b) => b.date.localeCompare(a.date));\r\n\r\n    const stats = {\r\n        total: allOutcomes.length,\r\n        leads: allOutcomes.filter(o => o.type === 'Freelancing Lead').length,\r\n        referrals: allOutcomes.filter(o => o.type === 'Job Referral').length,\r\n        collabs: allOutcomes.filter(o => o.type === 'Collaboration').length,\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                {[\r\n                    { label: 'Total Outcomes', value: stats.total, icon: Target, color: 'text-accent' },\r\n                    { label: 'Leads', value: stats.leads, icon: DollarSign, color: 'text-green-500' },\r\n                    { label: 'Referrals', value: stats.referrals, icon: Zap, color: 'text-yellow-500' },\r\n                    { label: 'Collabs', value: stats.collabs, icon: Heart, color: 'text-pink-500' }\r\n                ].map((stat, i) => (\r\n                    <div key={i} className={`${THEME_CLASSES.CARD} p-5 flex flex-col justify-between h-32`}>\r\n                        <div className=\"p-2 bg-surface-light dark:bg-surface-dark rounded-lg self-start\">\r\n                            <stat.icon className={`w-5 h-5 ${stat.color}`} />\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-[10px] font-black uppercase text-subtext-light tracking-widest\">{stat.label}</p>\r\n                            <h4 className=\"text-2xl font-black\">{stat.value}</h4>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            <section>\r\n                <h2 className=\"text-xs font-black uppercase tracking-widest text-subtext-light dark:text-subtext-dark mb-4\">Outcome Feed</h2>\r\n                <div className=\"space-y-4\">\r\n                    {sortedOutcomes.map((outcome) => (\r\n                        <div key={outcome.id} className=\"p-5 bg-surface-light dark:bg-surface-dark rounded-2xl border border-border-light dark:border-border-dark flex gap-4\">\r\n                            <div className=\"flex-none p-3 bg-accent/10 text-accent rounded-xl h-fit\">\r\n                                <ChevronRight className=\"w-5 h-5\" />\r\n                            </div>\r\n                            <div>\r\n                                <div className=\"flex items-center gap-2 mb-1\">\r\n                                    <h4 className=\"font-bold text-sm\">{outcome.type}</h4>\r\n                                    <span className=\"text-[10px] font-bold text-accent\">via {outcome.connectionName}</span>\r\n                                </div>\r\n                                <p className=\"text-xs text-subtext-light leading-relaxed\">{outcome.description}</p>\r\n                                <span className=\"text-[9px] font-black text-subtext-light/50 uppercase mt-2 block\">{new Date(outcome.date).toLocaleDateString()}</span>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                    {sortedOutcomes.length === 0 && (\r\n                        <p className=\"text-center py-10 text-xs text-subtext-light italic\">No outcomes recorded yet. Focus on building trust.</p>\r\n                    )}\r\n                </div>\r\n            </section>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst NurtureWaitlist: React.FC<{ connections: NetworkingConnection[] }> = ({ connections }) => {\r\n    const nurtureList = connections\r\n        .filter(c => c.status === 'nurturing' || c.status === 'dormant')\r\n        .sort((a, b) => a.lastInteraction.localeCompare(b.lastInteraction));\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <header>\r\n                <h2 className=\"text-2xl font-black mb-2\">Waitlist Mastery</h2>\r\n                <p className=\"text-xs text-subtext-light\">Connections requiring a touchpoint.</p>\r\n            </header>\r\n            <div className=\"space-y-4\">\r\n                {nurtureList.map(conn => (\r\n                    <div key={conn.id} className={`${THEME_CLASSES.CARD} p-5 flex items-center justify-between`}>\r\n                        <div className=\"flex gap-4 items-center\">\r\n                            <div className=\"w-10 h-10 rounded-xl bg-accent/10 text-accent flex items-center justify-center font-bold\">\r\n                                {conn.name.charAt(0)}\r\n                            </div>\r\n                            <div>\r\n                                <h4 className=\"font-bold text-sm\">{conn.name}</h4>\r\n                                <p className=\"text-[10px] text-subtext-light\">Last: {new Date(conn.lastInteraction).toLocaleDateString()}</p>\r\n                            </div>\r\n                        </div>\r\n                        <button className=\"p-3 bg-accent text-white rounded-xl shadow-glow\">\r\n                            <Send className=\"w-4 h-4\" />\r\n                        </button>\r\n                    </div>\r\n                ))}\r\n                {nurtureList.length === 0 && (\r\n                    <div className=\"text-center py-20 opacity-50\">\r\n                        <Repeat className=\"w-12 h-12 mx-auto mb-4\" />\r\n                        <p className=\"text-sm font-bold\">Waitlist is empty.</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst AddConnectionModal: React.FC<{ onClose: () => void, onSave: (c: Omit<NetworkingConnection, 'id' | 'createdAt' | 'lastInteraction' | 'outcomes' | 'retrospectives'>) => void }> = ({ onClose, onSave }) => {\r\n    const [name, setName] = useState('');\r\n    const [platform, setPlatform] = useState('');\r\n    const [status, setStatus] = useState<NetworkingConnection['status']>('nurturing');\r\n    const [trustScore, setTrustScore] = useState(5);\r\n\r\n    return (\r\n        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className=\"fixed inset-0 z-50 flex items-end justify-center bg-black/60 backdrop-blur-sm px-4 pb-10\">\r\n            <motion.div initial={{ y: '100%' }} animate={{ y: 0 }} exit={{ y: '100%' }} className=\"w-full max-w-md bg-white dark:bg-surface-dark rounded-[2.5rem] p-8\">\r\n                <div className=\"flex justify-between items-center mb-8\">\r\n                    <h2 className=\"text-2xl font-black\">Add Connection</h2>\r\n                    <button onClick={onClose} className=\"p-2\"><X /></button>\r\n                </div>\r\n                <div className=\"space-y-5\">\r\n                    <input value={name} onChange={e => setName(e.target.value)} placeholder=\"Full Name\" className={`w-full p-4 ${THEME_CLASSES.INPUT}`} />\r\n                    <input value={platform} onChange={e => setPlatform(e.target.value)} placeholder=\"Platform (e.g. Twitter, LinkedIn)\" className={`w-full p-4 ${THEME_CLASSES.INPUT}`} />\r\n                    <select value={status} onChange={e => setStatus(e.target.value as any)} className={`w-full p-4 ${THEME_CLASSES.INPUT}`}>\r\n                        <option value=\"active\">Active Relationship</option>\r\n                        <option value=\"nurturing\">Nurturing</option>\r\n                        <option value=\"lead\">Lead/Prospect</option>\r\n                        <option value=\"dormant\">Dormant</option>\r\n                    </select>\r\n                    <div>\r\n                        <label className=\"text-[10px] font-black uppercase text-subtext-light mb-2 block\">Trust Baseline: {trustScore}/10</label>\r\n                        <input type=\"range\" min=\"1\" max=\"10\" value={trustScore} onChange={e => setTrustScore(parseInt(e.target.value))} className=\"w-full accent-accent\" />\r\n                    </div>\r\n                    <button\r\n                        onClick={() => onSave({ name, platform, status, trustScore, responsivenessScore: 5, mutualValueScore: 5, contextNotes: '', starters: [], dmTemplates: [] })}\r\n                        className={`w-full py-5 mt-4 rounded-2xl font-black ${THEME_CLASSES.BTN_PRIMARY}`}\r\n                    >\r\n                        Index Connection\r\n                    </button>\r\n                </div>\r\n            </motion.div>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nconst ConnectionDetailModal: React.FC<{\r\n    connection: NetworkingConnection,\r\n    onClose: () => void,\r\n    onUpdate: (updates: Partial<NetworkingConnection>) => void,\r\n    onDelete: () => void,\r\n    onAddOutcome: (o: Omit<ConnectionOutcome, 'id'>) => void,\r\n    onAddRetro: (r: Omit<RelationshipRetrospective, 'id'>) => void\r\n}> = ({ connection, onClose, onUpdate, onDelete, onAddOutcome, onAddRetro }) => {\r\n    const [isAddOutcomeOpen, setIsAddOutcomeOpen] = useState(false);\r\n    const [isAddRetroOpen, setIsAddRetroOpen] = useState(false);\r\n\r\n    return (\r\n        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className=\"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-xl px-4 py-8\">\r\n            <div className=\"w-full max-w-sm h-full flex flex-col\">\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                    <span className=\"px-3 py-1 bg-white/10 border border-white/20 rounded-full text-[10px] font-black text-white-smoke uppercase tracking-å¹¿æ³›\">{connection.status}</span>\r\n                    <div className=\"flex gap-2\">\r\n                        <button onClick={() => { if (confirm('Delete connection?')) { onDelete(); onClose(); } }} className=\"text-red-400 p-2\"><X /></button>\r\n                        <button onClick={onClose} className=\"text-white-smoke p-2\"><ChevronRight className=\"w-6 h-6 rotate-90\" /></button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex-1 overflow-y-auto no-scrollbar space-y-8 pb-12\">\r\n                    <header>\r\n                        <h2 className=\"text-3xl font-black text-white-smoke mb-2\">{connection.name}</h2>\r\n                        <a href={connection.link} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-accent text-sm flex items-center gap-2\">\r\n                            <Link className=\"w-4 h-4\" /> {connection.platform || 'Social Profile'}\r\n                        </a>\r\n                    </header>\r\n\r\n                    <div className=\"grid grid-cols-3 gap-2\">\r\n                        {[\r\n                            { label: 'Trust', val: connection.trustScore },\r\n                            { label: 'Resp', val: connection.responsivenessScore },\r\n                            { label: 'Value', val: connection.mutualValueScore }\r\n                        ].map((s, i) => (\r\n                            <div key={i} className=\"bg-white/5 border border-white/10 rounded-2xl p-3 text-center\">\r\n                                <p className=\"text-[8px] font-black uppercase text-subtext-dark mb-1\">{s.label}</p>\r\n                                <p className=\"text-lg font-black text-white-smoke\">{s.val}</p>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    <section className=\"space-y-4\">\r\n                        <div className=\"flex justify-between items-center\">\r\n                            <h3 className=\"text-[10px] font-black uppercase tracking-widest text-accent\">Context & Notes</h3>\r\n                        </div>\r\n                        <textarea\r\n                            value={connection.contextNotes}\r\n                            onChange={e => onUpdate({ contextNotes: e.target.value })}\r\n                            placeholder=\"How did you meet? What do they value?\"\r\n                            className=\"w-full h-32 p-5 bg-white/5 border border-white/10 rounded-3xl text-sm text-silver resize-none outline-none focus:border-accent transition-all\"\r\n                        />\r\n                    </section>\r\n\r\n                    <section className=\"space-y-4\">\r\n                        <div className=\"flex justify-between items-center\">\r\n                            <h3 className=\"text-[10px] font-black uppercase tracking-widest text-accent\">Outcomes</h3>\r\n                            <button onClick={() => setIsAddOutcomeOpen(true)} className=\"p-1.5 bg-accent/20 text-accent rounded-lg\">\r\n                                <Plus className=\"w-4 h-4\" />\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"space-y-3\">\r\n                            {connection.outcomes.map(o => (\r\n                                <div key={o.id} className=\"p-4 bg-white/5 border border-white/10 rounded-2xl\">\r\n                                    <p className=\"text-[10px] font-black text-accent uppercase mb-1\">{o.type}</p>\r\n                                    <p className=\"text-xs text-white-smoke\">{o.description}</p>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </section>\r\n\r\n                    <section className=\"space-y-4\">\r\n                        <div className=\"flex justify-between items-center\">\r\n                            <h3 className=\"text-[10px] font-black uppercase tracking-widest text-accent\">Relationship Retros</h3>\r\n                            <button onClick={() => setIsAddRetroOpen(true)} className=\"p-1.5 bg-accent/20 text-accent rounded-lg\">\r\n                                <Plus className=\"w-4 h-4\" />\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"space-y-3\">\r\n                            {connection.retrospectives.map(r => (\r\n                                <div key={r.id} className=\"p-4 bg-white/5 border border-white/10 rounded-2xl relative\">\r\n                                    <p className=\"text-[8px] font-black text-subtext-dark absolute top-4 right-4\">{new Date(r.date).toLocaleDateString()}</p>\r\n                                    <div className=\"space-y-2\">\r\n                                        <div>\r\n                                            <p className=\"text-[8px] font-black uppercase text-green-500\">What Worked</p>\r\n                                            <p className=\"text-[11px] text-white-smoke/80\">{r.worked}</p>\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"text-[8px] font-black uppercase text-red-400\">What Felt Forced</p>\r\n                                            <p className=\"text-[11px] text-white-smoke/80\">{r.forced}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </section>\r\n                </div>\r\n\r\n                <div className=\"pt-6 border-t border-white/10\">\r\n                    <button className=\"w-full py-5 bg-accent text-white rounded-2xl font-black shadow-glow flex items-center justify-center gap-3\">\r\n                        <MessageSquare className=\"w-5 h-5\" /> Copy Template\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <AnimatePresence>\r\n                {isAddOutcomeOpen && (\r\n                    <AddOutcomeModal\r\n                        onClose={() => setIsAddOutcomeOpen(false)}\r\n                        onSave={(o) => { onAddOutcome(o); setIsAddOutcomeOpen(false); }}\r\n                    />\r\n                )}\r\n                {isAddRetroOpen && (\r\n                    <AddRetroModal\r\n                        onClose={() => setIsAddRetroOpen(false)}\r\n                        onSave={(r) => { onAddRetro(r); setIsAddRetroOpen(false); }}\r\n                    />\r\n                )}\r\n            </AnimatePresence>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nconst AddOutcomeModal: React.FC<{ onClose: () => void, onSave: (o: Omit<ConnectionOutcome, 'id'>) => void }> = ({ onClose, onSave }) => {\r\n    const [type, setType] = useState<NetworkingOutcomeType>('Freelancing Lead');\r\n    const [desc, setDesc] = useState('');\r\n    return (\r\n        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className=\"fixed inset-0 z-[80] flex items-center justify-center bg-black/80 px-4\">\r\n            <motion.div className=\"w-full max-w-sm bg-surface-dark rounded-[2.5rem] p-8 border border-white/10\">\r\n                <h3 className=\"text-xl font-black text-white-smoke mb-6\">Record Outcome</h3>\r\n                <select value={type} onChange={e => setType(e.target.value as any)} className=\"w-full p-4 mb-4 bg-white/5 border border-white/10 rounded-2xl text-white-smoke outline-none\">\r\n                    <option value=\"Freelancing Lead\">Freelancing Lead</option>\r\n                    <option value=\"Job Referral\">Job Referral</option>\r\n                    <option value=\"Collaboration\">Collaboration</option>\r\n                    <option value=\"Audience Growth\">Audience Growth</option>\r\n                    <option value=\"Other\">Other</option>\r\n                </select>\r\n                <textarea value={desc} onChange={e => setDesc(e.target.value)} placeholder=\"What happened? (e.g. Intro to CEO of X)\" className=\"w-full h-32 p-4 mb-6 bg-white/5 border border-white/10 rounded-2xl text-white-smoke resize-none\" />\r\n                <div className=\"flex gap-3\">\r\n                    <button onClick={onClose} className=\"flex-1 py-4 font-bold text-subtext-dark\">Cancel</button>\r\n                    <button onClick={() => onSave({ type, description: desc, date: new Date().toISOString() })} className=\"flex-2 py-4 px-8 bg-accent text-white rounded-xl font-black shadow-glow\">Record</button>\r\n                </div>\r\n            </motion.div>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nconst AddRetroModal: React.FC<{ onClose: () => void, onSave: (r: Omit<RelationshipRetrospective, 'id'>) => void }> = ({ onClose, onSave }) => {\r\n    const [worked, setWorked] = useState('');\r\n    const [forced, setForced] = useState('');\r\n    const [nextTime, setNextTime] = useState('');\r\n    return (\r\n        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className=\"fixed inset-0 z-[80] flex items-center justify-center bg-black/80 px-4\">\r\n            <motion.div className=\"w-full max-w-sm bg-surface-dark rounded-[2.5rem] p-8 border border-white/10\">\r\n                <h3 className=\"text-xl font-black text-white-smoke mb-6\">Interaction Review</h3>\r\n                <div className=\"space-y-4 mb-6\">\r\n                    <textarea value={worked} onChange={e => setWorked(e.target.value)} placeholder=\"What worked well?\" className=\"w-full h-24 p-4 bg-white/5 border border-white/10 rounded-2xl text-white-smoke resize-none\" />\r\n                    <textarea value={forced} onChange={e => setForced(e.target.value)} placeholder=\"What felt forced?\" className=\"w-full h-24 p-4 bg-white/5 border border-white/10 rounded-2xl text-white-smoke resize-none\" />\r\n                    <textarea value={nextTime} onChange={e => setNextTime(e.target.value)} placeholder=\"Do differently next time?\" className=\"w-full h-24 p-4 bg-white/5 border border-white/10 rounded-2xl text-white-smoke resize-none\" />\r\n                </div>\r\n                <div className=\"flex gap-3\">\r\n                    <button onClick={onClose} className=\"flex-1 py-4 font-bold text-subtext-dark\">Cancel</button>\r\n                    <button onClick={() => onSave({ worked, forced, nextTime, date: new Date().toISOString() })} className=\"flex-2 py-4 px-8 bg-accent text-white rounded-xl font-black shadow-glow\">Save Review</button>\r\n                </div>\r\n            </motion.div>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nexport default NetworkingSection;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\NotesReflection.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":98,"column":13,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":98,"endColumn":26,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[3970,3983],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":502,"column":13,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":502,"endColumn":26,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[28278,28291],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    ArrowLeft, Plus, Search, Tag,\r\n    Dumbbell, Brain, BookOpen, Sparkles,\r\n    Calendar, X, Edit3, Paperclip, FileText, Loader2\r\n} from 'lucide-react';\r\nimport { useLifeTracker } from '../utils/lifeTrackerStore';\r\nimport type { LifeNote } from '../utils/lifeTrackerStore';\r\n\r\nconst SYSTEMS = [\r\n    { id: 'workout', label: 'Workout', icon: Dumbbell, color: 'from-orange-500 to-red-500', bg: 'bg-orange-100', text: 'text-orange-600' },\r\n    { id: 'meditation', label: 'Meditation', icon: Brain, color: 'from-purple-500 to-indigo-500', bg: 'bg-purple-100', text: 'text-purple-600' },\r\n    { id: 'reading', label: 'Reading', icon: BookOpen, color: 'from-emerald-500 to-teal-500', bg: 'bg-emerald-100', text: 'text-emerald-600' },\r\n    { id: 'general', label: 'General', icon: Sparkles, color: 'from-blue-500 to-cyan-500', bg: 'bg-blue-100', text: 'text-blue-600' },\r\n] as const;\r\n\r\nconst MOOD_LABELS = ['ðŸ˜”', 'ðŸ˜•', 'ðŸ˜', 'ðŸ™‚', 'ðŸ˜Š'];\r\n\r\nconst NotesReflection: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const store = useLifeTracker();\r\n    const allNotes = store.getNotes();\r\n\r\n    // State\r\n    const [showAddNoteModal, setShowAddNoteModal] = useState(false);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [filterSystem, setFilterSystem] = useState<string | null>(null);\r\n\r\n    // New Note Form\r\n    const [noteContent, setNoteContent] = useState('');\r\n    const [noteSystem, setNoteSystem] = useState<'workout' | 'meditation' | 'reading' | 'general'>('general');\r\n    const [noteMood, setNoteMood] = useState<number | undefined>(undefined);\r\n    const [noteTags, setNoteTags] = useState<string[]>([]);\r\n    const [tagInput, setTagInput] = useState('');\r\n    const [attachmentPath, setAttachmentPath] = useState<string | null>(null);\r\n    const [isUploading, setIsUploading] = useState(false);\r\n\r\n    // Filter notes\r\n    const filteredNotes = allNotes.filter(note => {\r\n        const matchesSearch = !searchQuery ||\r\n            note.content.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            note.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()));\r\n        const matchesSystem = !filterSystem || note.linkedSystem === filterSystem;\r\n        return matchesSearch && matchesSystem;\r\n    });\r\n\r\n    // Group notes by date\r\n    const groupedNotes = filteredNotes.reduce((groups, note) => {\r\n        const date = note.date;\r\n        if (!groups[date]) {\r\n            groups[date] = [];\r\n        }\r\n        groups[date].push(note);\r\n        return groups;\r\n    }, {} as Record<string, LifeNote[]>);\r\n\r\n    const sortedDates = Object.keys(groupedNotes).sort((a, b) => new Date(b).getTime() - new Date(a).getTime());\r\n\r\n    const handleAddTag = () => {\r\n        if (tagInput.trim() && !noteTags.includes(tagInput.trim())) {\r\n            setNoteTags([...noteTags, tagInput.trim()]);\r\n            setTagInput('');\r\n        }\r\n    };\r\n\r\n    const handleRemoveTag = (tag: string) => {\r\n        setNoteTags(noteTags.filter(t => t !== tag));\r\n    };\r\n\r\n    const handleSaveNote = () => {\r\n        if (!noteContent.trim()) return;\r\n\r\n        store.addNote({\r\n            content: noteContent.trim(),\r\n            linkedSystem: noteSystem,\r\n            mood: noteMood,\r\n            tags: noteTags,\r\n            date: new Date().toISOString().split('T')[0],\r\n            attachmentPath: attachmentPath || undefined,\r\n        });\r\n\r\n        setNoteContent('');\r\n        setNoteSystem('general');\r\n        setNoteMood(undefined);\r\n        setNoteTags([]);\r\n        setAttachmentPath(null);\r\n        setShowAddNoteModal(false);\r\n    };\r\n\r\n    const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        setIsUploading(true);\r\n        try {\r\n            // @ts-ignore\r\n            const path = await store.uploadFile(file, 'note-attachments');\r\n            if (path) {\r\n                setAttachmentPath(path);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error uploading file:', error);\r\n            alert('Failed to upload file.');\r\n        } finally {\r\n            setIsUploading(false);\r\n        }\r\n    };\r\n\r\n    const formatDate = (dateStr: string): string => {\r\n        const date = new Date(dateStr);\r\n        const today = new Date();\r\n        const yesterday = new Date(today);\r\n        yesterday.setDate(yesterday.getDate() - 1);\r\n\r\n        if (dateStr === today.toISOString().split('T')[0]) {\r\n            return 'Today';\r\n        } else if (dateStr === yesterday.toISOString().split('T')[0]) {\r\n            return 'Yesterday';\r\n        } else {\r\n            return date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-b from-slate-50 via-white to-blue-50 pb-24\">\r\n            {/* Header */}\r\n            <div className=\"sticky top-0 z-30 bg-white/80 backdrop-blur-xl border-b border-gray-100\">\r\n                <div className=\"px-5 py-4 flex items-center gap-4\">\r\n                    <button\r\n                        onClick={() => navigate(-1)}\r\n                        className=\"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center\"\r\n                    >\r\n                        <ArrowLeft className=\"w-5 h-5 text-gray-700\" />\r\n                    </button>\r\n                    <div className=\"flex-1\">\r\n                        <h1 className=\"text-xl font-bold text-gray-900\">Notes & Reflection</h1>\r\n                        <p className=\"text-xs text-gray-500\">{allNotes.length} entries</p>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => setShowAddNoteModal(true)}\r\n                        className=\"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center shadow-lg\"\r\n                    >\r\n                        <Plus className=\"w-5 h-5 text-white\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Search & Filter */}\r\n                <div className=\"px-5 pb-4 space-y-3\">\r\n                    <div className=\"relative\">\r\n                        <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                            placeholder=\"Search notes...\"\r\n                            className=\"w-full pl-11 pr-4 py-3 bg-gray-100 rounded-xl text-gray-900 placeholder:text-gray-400 focus:ring-2 focus:ring-slate-500 focus:outline-none\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* System Filter Pills */}\r\n                    <div className=\"flex gap-2 overflow-x-auto pb-1 -mx-5 px-5\">\r\n                        <button\r\n                            onClick={() => setFilterSystem(null)}\r\n                            className={`flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all ${!filterSystem\r\n                                ? 'bg-slate-800 text-white'\r\n                                : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                                }`}\r\n                        >\r\n                            All\r\n                        </button>\r\n                        {SYSTEMS.map((sys) => {\r\n                            const Icon = sys.icon;\r\n                            return (\r\n                                <button\r\n                                    key={sys.id}\r\n                                    onClick={() => setFilterSystem(filterSystem === sys.id ? null : sys.id)}\r\n                                    className={`flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium flex items-center gap-2 transition-all ${filterSystem === sys.id\r\n                                        ? 'bg-slate-800 text-white'\r\n                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                                        }`}\r\n                                >\r\n                                    <Icon className=\"w-4 h-4\" />\r\n                                    {sys.label}\r\n                                </button>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Notes List */}\r\n            <div className=\"px-5 py-4\">\r\n                {filteredNotes.length === 0 ? (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        className=\"bg-white rounded-2xl p-8 text-center border border-dashed border-gray-200 mt-4\"\r\n                    >\r\n                        <Edit3 className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\r\n                        <p className=\"text-gray-500 mb-4\">\r\n                            {searchQuery || filterSystem ? 'No notes match your search' : 'No notes yet'}\r\n                        </p>\r\n                        {!searchQuery && !filterSystem && (\r\n                            <button\r\n                                onClick={() => setShowAddNoteModal(true)}\r\n                                className=\"px-4 py-2 bg-slate-800 text-white rounded-lg text-sm font-medium\"\r\n                            >\r\n                                Write Your First Note\r\n                            </button>\r\n                        )}\r\n                    </motion.div>\r\n                ) : (\r\n                    <div className=\"space-y-6\">\r\n                        {sortedDates.map((date) => (\r\n                            <div key={date}>\r\n                                <div className=\"flex items-center gap-2 mb-3\">\r\n                                    <Calendar className=\"w-4 h-4 text-gray-400\" />\r\n                                    <h3 className=\"text-sm font-medium text-gray-500\">{formatDate(date)}</h3>\r\n                                </div>\r\n\r\n                                <div className=\"space-y-3\">\r\n                                    {groupedNotes[date].map((note: LifeNote, index: number) => {\r\n                                        const systemInfo = SYSTEMS.find(s => s.id === note.linkedSystem);\r\n                                        const SystemIcon = systemInfo?.icon || Sparkles;\r\n\r\n                                        return (\r\n                                            <motion.div\r\n                                                key={note.id}\r\n                                                initial={{ opacity: 0, y: 10 }}\r\n                                                animate={{ opacity: 1, y: 0 }}\r\n                                                transition={{ delay: index * 0.03 }}\r\n                                                className=\"bg-white rounded-2xl p-4 shadow-sm border border-gray-100\"\r\n                                            >\r\n                                                {/* Header */}\r\n                                                <div className=\"flex items-start gap-3 mb-3\">\r\n                                                    <div className={`w-10 h-10 rounded-xl bg-gradient-to-br ${systemInfo?.color || 'from-gray-400 to-gray-500'} flex items-center justify-center flex-shrink-0`}>\r\n                                                        <SystemIcon className=\"w-5 h-5 text-white\" />\r\n                                                    </div>\r\n                                                    <div className=\"flex-1\">\r\n                                                        <div className=\"flex items-center justify-between\">\r\n                                                            <span className={`text-xs font-medium ${systemInfo?.text || 'text-gray-500'}`}>\r\n                                                                {systemInfo?.label || 'Note'}\r\n                                                            </span>\r\n                                                            {note.mood && (\r\n                                                                <span className=\"text-lg\">{MOOD_LABELS[note.mood - 1]}</span>\r\n                                                            )}\r\n                                                        </div>\r\n                                                        <span className=\"text-xs text-gray-400\">\r\n                                                            {new Date(note.createdAt).toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                {/* Content */}\r\n                                                <p className=\"text-gray-700 whitespace-pre-wrap\">{note.content}</p>\r\n\r\n                                                {/* Attachment */}\r\n                                                {note.attachmentPath && (\r\n                                                    <NoteAttachmentView path={note.attachmentPath} />\r\n                                                )}\r\n\r\n                                                {/* Tags */}\r\n                                                {note.tags.length > 0 && (\r\n                                                    <div className=\"flex flex-wrap gap-2 mt-3\">\r\n                                                        {note.tags.map((tag) => (\r\n                                                            <span\r\n                                                                key={tag}\r\n                                                                className=\"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full flex items-center gap-1\"\r\n                                                            >\r\n                                                                <Tag className=\"w-3 h-3\" />\r\n                                                                {tag}\r\n                                                            </span>\r\n                                                        ))}\r\n                                                    </div>\r\n                                                )}\r\n                                            </motion.div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Weekly Review Prompt */}\r\n            {new Date().getDay() === 0 && (\r\n                <div className=\"px-5 py-4\">\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95 }}\r\n                        animate={{ opacity: 1, scale: 1 }}\r\n                        className=\"bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl p-5 shadow-lg\"\r\n                    >\r\n                        <div className=\"flex items-start gap-3\">\r\n                            <div className=\"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center\">\r\n                                <Sparkles className=\"w-5 h-5 text-white\" />\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                                <h3 className=\"text-white font-semibold\">Weekly Review Time!</h3>\r\n                                <p className=\"text-white/80 text-sm mt-1\">\r\n                                    Take a moment to reflect on your week. What went well? What could be better?\r\n                                </p>\r\n                                <button\r\n                                    onClick={() => {\r\n                                        setNoteSystem('general');\r\n                                        setNoteContent('## Weekly Review\\n\\n**What went well:**\\n\\n\\n**What could improve:**\\n\\n\\n**Focus for next week:**\\n');\r\n                                        setShowAddNoteModal(true);\r\n                                    }}\r\n                                    className=\"mt-3 px-4 py-2 bg-white text-orange-600 rounded-lg text-sm font-medium\"\r\n                                >\r\n                                    Start Review\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </motion.div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Add Note Modal */}\r\n            <AnimatePresence>\r\n                {showAddNoteModal && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-end justify-center\"\r\n                        onClick={() => setShowAddNoteModal(false)}\r\n                    >\r\n                        <motion.div\r\n                            initial={{ y: '100%' }}\r\n                            animate={{ y: 0 }}\r\n                            exit={{ y: '100%' }}\r\n                            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                            className=\"w-full max-w-md bg-white rounded-t-3xl p-6 max-h-[90vh] overflow-y-auto\"\r\n                        >\r\n                            <div className=\"flex items-center justify-between mb-6\">\r\n                                <h3 className=\"text-xl font-bold text-gray-900\">New Note</h3>\r\n                                <button\r\n                                    onClick={() => setShowAddNoteModal(false)}\r\n                                    className=\"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center\"\r\n                                >\r\n                                    <X className=\"w-4 h-4 text-gray-600\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-4\">\r\n                                {/* System Selection */}\r\n                                <div>\r\n                                    <label className=\"text-sm font-medium text-gray-700 mb-2 block\">Category</label>\r\n                                    <div className=\"grid grid-cols-4 gap-2\">\r\n                                        {SYSTEMS.map((sys) => {\r\n                                            const Icon = sys.icon;\r\n                                            return (\r\n                                                <button\r\n                                                    key={sys.id}\r\n                                                    onClick={() => setNoteSystem(sys.id)}\r\n                                                    className={`p-3 rounded-xl flex flex-col items-center gap-1 transition-all ${noteSystem === sys.id\r\n                                                        ? `bg-gradient-to-br ${sys.color} text-white shadow-lg`\r\n                                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                                                        }`}\r\n                                                >\r\n                                                    <Icon className=\"w-5 h-5\" />\r\n                                                    <span className=\"text-xs font-medium\">{sys.label}</span>\r\n                                                </button>\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Note Content */}\r\n                                <div>\r\n                                    <label className=\"text-sm font-medium text-gray-700 mb-2 block\">Note</label>\r\n                                    <textarea\r\n                                        value={noteContent}\r\n                                        onChange={(e) => setNoteContent(e.target.value)}\r\n                                        placeholder=\"What's on your mind? Any insights or reflections?\"\r\n                                        className=\"w-full p-4 bg-gray-50 rounded-xl text-gray-900 placeholder:text-gray-400 resize-none h-32 focus:ring-2 focus:ring-slate-500 focus:outline-none\"\r\n                                        autoFocus\r\n                                    />\r\n                                </div>\r\n\r\n                                {/* Mood (Optional) */}\r\n                                <div>\r\n                                    <label className=\"text-sm font-medium text-gray-700 mb-2 block\">Mood (optional)</label>\r\n                                    <div className=\"flex gap-2\">\r\n                                        {MOOD_LABELS.map((emoji, i) => (\r\n                                            <button\r\n                                                key={i}\r\n                                                onClick={() => setNoteMood(noteMood === i + 1 ? undefined : i + 1)}\r\n                                                className={`flex-1 py-3 rounded-xl text-2xl transition-all ${noteMood === i + 1\r\n                                                    ? 'bg-slate-800 ring-2 ring-slate-600'\r\n                                                    : 'bg-gray-100 hover:bg-gray-200'\r\n                                                    }`}\r\n                                            >\r\n                                                {emoji}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Tags */}\r\n                                <div>\r\n                                    <label className=\"text-sm font-medium text-gray-700 mb-2 block\">Tags</label>\r\n                                    <div className=\"flex gap-2 mb-2 flex-wrap\">\r\n                                        {noteTags.map((tag) => (\r\n                                            <span\r\n                                                key={tag}\r\n                                                className=\"px-3 py-1 bg-slate-800 text-white text-sm rounded-full flex items-center gap-1\"\r\n                                            >\r\n                                                {tag}\r\n                                                <button onClick={() => handleRemoveTag(tag)}>\r\n                                                    <X className=\"w-3 h-3\" />\r\n                                                </button>\r\n                                            </span>\r\n                                        ))}\r\n                                    </div>\r\n                                    <div className=\"flex gap-2\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={tagInput}\r\n                                            onChange={(e) => setTagInput(e.target.value)}\r\n                                            onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddTag())}\r\n                                            placeholder=\"Add a tag...\"\r\n                                            className=\"flex-1 p-3 bg-gray-50 rounded-xl text-gray-900 placeholder:text-gray-400 focus:ring-2 focus:ring-slate-500 focus:outline-none\"\r\n                                        />\r\n                                        <button\r\n                                            onClick={handleAddTag}\r\n                                            className=\"px-4 py-3 bg-gray-100 rounded-xl text-gray-600 hover:bg-gray-200\"\r\n                                        >\r\n                                            <Plus className=\"w-5 h-5\" />\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Attachment Upload */}\r\n                                <div>\r\n                                    <label className=\"text-sm font-medium text-gray-700 mb-2 block\">Attachment</label>\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <label className={`cursor-pointer px-4 py-3 rounded-xl border border-dashed border-gray-300 flex items-center gap-2 hover:bg-gray-50 transition-colors ${isUploading ? 'opacity-50 cursor-not-allowed' : ''}`}>\r\n                                            <input\r\n                                                type=\"file\"\r\n                                                className=\"hidden\"\r\n                                                onChange={handleFileUpload}\r\n                                                disabled={isUploading}\r\n                                            />\r\n                                            {isUploading ? (\r\n                                                <Loader2 className=\"w-4 h-4 text-gray-400 animate-spin\" />\r\n                                            ) : (\r\n                                                <Paperclip className=\"w-4 h-4 text-gray-500\" />\r\n                                            )}\r\n                                            <span className=\"text-sm text-gray-500\">\r\n                                                {isUploading ? 'Uploading...' : 'Attach File'}\r\n                                            </span>\r\n                                        </label>\r\n\r\n                                        {attachmentPath && (\r\n                                            <div className=\"flex items-center gap-2 px-3 py-2 bg-slate-50 rounded-lg border border-slate-100\">\r\n                                                <FileText className=\"w-4 h-4 text-slate-500\" />\r\n                                                <span className=\"text-xs text-slate-600 truncate max-w-[150px]\">\r\n                                                    {attachmentPath.split('/').pop()}\r\n                                                </span>\r\n                                                <button\r\n                                                    onClick={() => setAttachmentPath(null)}\r\n                                                    className=\"p-1 hover:bg-slate-200 rounded-full\"\r\n                                                >\r\n                                                    <X className=\"w-3 h-3 text-slate-400\" />\r\n                                                </button>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <motion.button\r\n                                whileHover={{ scale: 1.02 }}\r\n                                whileTap={{ scale: 0.98 }}\r\n                                onClick={handleSaveNote}\r\n                                disabled={!noteContent.trim()}\r\n                                className=\"w-full mt-6 py-4 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl font-semibold shadow-lg disabled:opacity-50\"\r\n                            >\r\n                                Save Note\r\n                            </motion.button>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst NoteAttachmentView: React.FC<{ path: string }> = ({ path }) => {\r\n    const store = useLifeTracker();\r\n    const [url, setUrl] = useState<string | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    React.useEffect(() => {\r\n        const fetchUrl = async () => {\r\n            // @ts-ignore\r\n            const signed = await store.getPrivateFileUrl('note-attachments', path);\r\n            setUrl(signed);\r\n            setLoading(false);\r\n        };\r\n        fetchUrl();\r\n    }, [path, store]);\r\n\r\n    if (loading) return <div className=\"mt-2 text-xs text-gray-400\">Loading attachment...</div>;\r\n    if (!url) return null;\r\n\r\n    const isImage = path.match(/\\.(jpg|jpeg|png|gif|webp)$/i);\r\n\r\n    if (isImage) {\r\n        return (\r\n            <div className=\"mt-3 rounded-lg overflow-hidden border border-gray-200 max-w-xs\">\r\n                <img src={url} alt=\"Attachment\" className=\"w-full h-auto\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <a\r\n            href={url}\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            className=\"mt-3 inline-flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors\"\r\n        >\r\n            <Paperclip className=\"w-4 h-4 text-gray-500\" />\r\n            <span className=\"text-xs font-medium text-gray-700\">View Attachment</span>\r\n        </a>\r\n    );\r\n};\r\n\r\nexport default NotesReflection;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\Onboarding.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\PINSetupModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\PRDSectionBuilder.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":250,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":250,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FileText, Sparkles, Upload, Loader, CheckCircle, AlertCircle } from 'lucide-react';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\ninterface SectionSchema {\r\n    id: string;\r\n    title: string;\r\n    subtitle: string;\r\n    type: 'prd-generated';\r\n    fields: FieldSchema[];\r\n    layout: 'form' | 'cards' | 'table' | 'tracker';\r\n    displayType: string;\r\n    img?: string;\r\n}\r\n\r\ninterface FieldSchema {\r\n    id: string;\r\n    name: string;\r\n    label: string;\r\n    type: 'text' | 'number' | 'date' | 'select' | 'textarea' | 'checkbox' | 'slider';\r\n    required?: boolean;\r\n    options?: string[];\r\n    min?: number;\r\n    max?: number;\r\n    unit?: string;\r\n    calculation?: string;\r\n}\r\n\r\nconst PRDSectionBuilder: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const [prdText, setPrdText] = useState('');\r\n    const [prdFile, setPrdFile] = useState<File | null>(null);\r\n    const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n    const [analysisComplete, setAnalysisComplete] = useState(false);\r\n    const [generatedSchema, setGeneratedSchema] = useState<SectionSchema | null>(null);\r\n    const [error, setError] = useState('');\r\n\r\n    // Mock AI analyzer - In production, this would call an LLM API\r\n    const analyzePRD = async (content: string): Promise<SectionSchema> => {\r\n        // Simulate AI processing\r\n        await new Promise(resolve => setTimeout(resolve, 2500));\r\n\r\n        const lowerContent = content.toLowerCase();\r\n\r\n        // Smart detection based on keywords\r\n        let fields: FieldSchema[] = [];\r\n        let title = 'Custom Section';\r\n        let subtitle = 'PRD Generated';\r\n        let layout: 'form' | 'cards' | 'table' | 'tracker' = 'form';\r\n        let displayType = 'general';\r\n\r\n        // Calorie Calculator detection\r\n        if (lowerContent.includes('calorie') || lowerContent.includes('nutrition')) {\r\n            title = 'Calorie Calculator';\r\n            subtitle = 'Track your nutrition';\r\n            layout = 'form';\r\n            displayType = 'calculator';\r\n            fields = [\r\n                { id: 'age', name: 'age', label: 'Age', type: 'number', required: true, min: 10, max: 120 },\r\n                { id: 'weight', name: 'weight', label: 'Weight', type: 'number', required: true, unit: 'kg' },\r\n                { id: 'height', name: 'height', label: 'Height', type: 'number', required: true, unit: 'cm' },\r\n                { id: 'gender', name: 'gender', label: 'Gender', type: 'select', options: ['Male', 'Female'], required: true },\r\n                {\r\n                    id: 'activity', name: 'activity', label: 'Activity Level', type: 'select',\r\n                    options: ['Sedentary', 'Lightly Active', 'Moderately Active', 'Very Active', 'Extremely Active'], required: true\r\n                },\r\n                {\r\n                    id: 'goal', name: 'goal', label: 'Goal', type: 'select',\r\n                    options: ['Lose Weight', 'Maintain Weight', 'Gain Muscle'], required: true\r\n                }\r\n            ];\r\n        }\r\n        // Foot/Step Tracker detection\r\n        else if (lowerContent.includes('foot') || lowerContent.includes('step') || lowerContent.includes('walk')) {\r\n            title = 'Step Tracker';\r\n            subtitle = 'Monitor your daily steps';\r\n            layout = 'tracker';\r\n            displayType = 'tracker';\r\n            fields = [\r\n                { id: 'steps', name: 'steps', label: 'Steps Today', type: 'number', required: true },\r\n                { id: 'goal', name: 'goal', label: 'Daily Goal', type: 'number', required: true },\r\n                { id: 'distance', name: 'distance', label: 'Distance', type: 'number', unit: 'km' },\r\n                { id: 'calories', name: 'calories', label: 'Calories Burned', type: 'number', unit: 'kcal' }\r\n            ];\r\n        }\r\n        // Budget/Finance tracker\r\n        else if (lowerContent.includes('budget') || lowerContent.includes('expense') || lowerContent.includes('finance')) {\r\n            title = 'Budget Tracker';\r\n            subtitle = 'Manage your finances';\r\n            layout = 'table';\r\n            displayType = 'finance';\r\n            fields = [\r\n                {\r\n                    id: 'category', name: 'category', label: 'Category', type: 'select',\r\n                    options: ['Food', 'Transport', 'Entertainment', 'Bills', 'Shopping', 'Other'], required: true\r\n                },\r\n                { id: 'amount', name: 'amount', label: 'Amount', type: 'number', required: true, unit: '$' },\r\n                { id: 'date', name: 'date', label: 'Date', type: 'date', required: true },\r\n                { id: 'description', name: 'description', label: 'Description', type: 'text' }\r\n            ];\r\n        }\r\n        // Habit Tracker\r\n        else if (lowerContent.includes('habit') || lowerContent.includes('routine') || lowerContent.includes('daily')) {\r\n            title = 'Habit Tracker';\r\n            subtitle = 'Build better habits';\r\n            layout = 'cards';\r\n            displayType = 'habits';\r\n            fields = [\r\n                { id: 'habit', name: 'habit', label: 'Habit Name', type: 'text', required: true },\r\n                {\r\n                    id: 'frequency', name: 'frequency', label: 'Frequency', type: 'select',\r\n                    options: ['Daily', 'Weekly', 'Monthly'], required: true\r\n                },\r\n                { id: 'completed', name: 'completed', label: 'Completed Today', type: 'checkbox' },\r\n                { id: 'streak', name: 'streak', label: 'Current Streak', type: 'number', unit: 'days' }\r\n            ];\r\n        }\r\n        // Water Intake\r\n        else if (lowerContent.includes('water') || lowerContent.includes('hydration')) {\r\n            title = 'Water Tracker';\r\n            subtitle = 'Stay hydrated';\r\n            layout = 'tracker';\r\n            displayType = 'water';\r\n            fields = [\r\n                { id: 'intake', name: 'intake', label: 'Water Intake', type: 'number', required: true, unit: 'ml' },\r\n                { id: 'goal', name: 'goal', label: 'Daily Goal', type: 'number', required: true, unit: 'ml' },\r\n                { id: 'timestamp', name: 'timestamp', label: 'Time', type: 'date' }\r\n            ];\r\n        }\r\n        // Sleep Tracker\r\n        else if (lowerContent.includes('sleep') || lowerContent.includes('rest')) {\r\n            title = 'Sleep Tracker';\r\n            subtitle = 'Monitor your sleep';\r\n            layout = 'tracker';\r\n            displayType = 'sleep';\r\n            fields = [\r\n                { id: 'bedtime', name: 'bedtime', label: 'Bedtime', type: 'date', required: true },\r\n                { id: 'waketime', name: 'waketime', label: 'Wake Time', type: 'date', required: true },\r\n                { id: 'quality', name: 'quality', label: 'Sleep Quality', type: 'slider', min: 1, max: 10 },\r\n                { id: 'notes', name: 'notes', label: 'Notes', type: 'textarea' }\r\n            ];\r\n        }\r\n        // Mood Tracker\r\n        else if (lowerContent.includes('mood') || lowerContent.includes('emotion') || lowerContent.includes('feeling')) {\r\n            title = 'Mood Tracker';\r\n            subtitle = 'Track your emotions';\r\n            layout = 'cards';\r\n            displayType = 'mood';\r\n            fields = [\r\n                {\r\n                    id: 'mood', name: 'mood', label: 'Current Mood', type: 'select',\r\n                    options: ['ðŸ˜Š Happy', 'ðŸ˜ Neutral', 'ðŸ˜¢ Sad', 'ðŸ˜  Angry', 'ðŸ˜° Anxious', 'ðŸ˜´ Tired'], required: true\r\n                },\r\n                { id: 'energy', name: 'energy', label: 'Energy Level', type: 'slider', min: 1, max: 10 },\r\n                { id: 'notes', name: 'notes', label: 'Notes', type: 'textarea' },\r\n                { id: 'timestamp', name: 'timestamp', label: 'Time', type: 'date' }\r\n            ];\r\n        }\r\n        // Reading Tracker\r\n        else if (lowerContent.includes('read') || lowerContent.includes('book') || lowerContent.includes('library')) {\r\n            title = 'Reading Tracker';\r\n            subtitle = 'Track your reading progress';\r\n            layout = 'table';\r\n            displayType = 'reading';\r\n            fields = [\r\n                { id: 'book', name: 'book', label: 'Book Title', type: 'text', required: true },\r\n                { id: 'author', name: 'author', label: 'Author', type: 'text' },\r\n                { id: 'progress', name: 'progress', label: 'Progress (%)', type: 'number', min: 0, max: 100 },\r\n                { id: 'status', name: 'status', label: 'Status', type: 'select', options: ['Reading', 'Completed', 'Want to Read'] }\r\n            ];\r\n        }\r\n        // Workout Plan\r\n        else if (lowerContent.includes('exercise') || lowerContent.includes('gym') || lowerContent.includes('workout')) {\r\n            title = 'Workout Tracker';\r\n            subtitle = 'Track your training';\r\n            layout = 'tracker';\r\n            displayType = 'tracker';\r\n            fields = [\r\n                { id: 'exercise', name: 'exercise', label: 'Exercise', type: 'text', required: true },\r\n                { id: 'sets', name: 'sets', label: 'Sets', type: 'number' },\r\n                { id: 'reps', name: 'reps', label: 'Reps', type: 'number' },\r\n                { id: 'weight', name: 'weight', label: 'Weight (kg)', type: 'number' }\r\n            ];\r\n        }\r\n        // Generic fallback\r\n        else {\r\n            title = 'Custom Tracker';\r\n            subtitle = 'Custom section from PRD';\r\n            layout = 'form';\r\n            displayType = 'custom';\r\n            fields = [\r\n                { id: 'field1', name: 'field1', label: 'Field 1', type: 'text', required: true },\r\n                { id: 'field2', name: 'field2', label: 'Field 2', type: 'number' },\r\n                { id: 'notes', name: 'notes', label: 'Notes', type: 'textarea' }\r\n            ];\r\n        }\r\n\r\n        const imageMapping: Record<string, string> = {\r\n            calculator: '/images/section-calculator.png',\r\n            tracker: '/images/section-steps.png',\r\n            finance: '/images/section-freelancing.png',\r\n            habits: '/images/section-branding.png',\r\n            water: '/images/section-water.png',\r\n            sleep: '/images/section-ai.png',\r\n            mood: '/images/section-looksmaxing.png',\r\n            reading: '/images/section-journal.png',\r\n            custom: '/images/section-ai.png'\r\n        };\r\n\r\n        return {\r\n            id: uuidv4(),\r\n            title,\r\n            subtitle,\r\n            type: 'prd-generated',\r\n            fields,\r\n            layout,\r\n            displayType,\r\n            img: imageMapping[displayType] || '/images/section-ai.png'\r\n        };\r\n    };\r\n\r\n    const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            setPrdFile(file);\r\n            const reader = new FileReader();\r\n            reader.onload = (event) => {\r\n                const content = event.target?.result as string;\r\n                setPrdText(content);\r\n            };\r\n            reader.readAsText(file);\r\n        }\r\n    };\r\n\r\n    const handleAnalyze = async () => {\r\n        if (!prdText.trim()) {\r\n            setError('Please enter or upload a PRD first');\r\n            return;\r\n        }\r\n\r\n        setError('');\r\n        setIsAnalyzing(true);\r\n        setAnalysisComplete(false);\r\n\r\n        try {\r\n            const schema = await analyzePRD(prdText);\r\n            setGeneratedSchema(schema);\r\n            setAnalysisComplete(true);\r\n        } catch (err) {\r\n            setError('Failed to analyze PRD. Please try again.');\r\n        } finally {\r\n            setIsAnalyzing(false);\r\n        }\r\n    };\r\n\r\n    const handleSave = () => {\r\n        if (!generatedSchema) return;\r\n\r\n        // Save to localStorage\r\n        const existingData = localStorage.getItem('customCategories');\r\n        const customCategories = existingData ? JSON.parse(existingData) : [];\r\n\r\n        const newCategory = {\r\n            ...generatedSchema,\r\n            img: generatedSchema.img || '/images/section-ai.png',\r\n            workouts: [],\r\n            items: [],\r\n            entries: [] // For storing user data\r\n        };\r\n\r\n        const updatedCategories = [...customCategories, newCategory];\r\n        localStorage.setItem('customCategories', JSON.stringify(updatedCategories));\r\n\r\n        // Notify dashboard\r\n        window.dispatchEvent(new Event('routinesUpdated'));\r\n        navigate('/dashboard');\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative flex min-h-screen w-full flex-col bg-gradient-to-br from-gray-50 to-white overflow-x-hidden font-sans\">\r\n            {/* Header */}\r\n            <header className=\"flex items-center bg-white/80 backdrop-blur-md p-4 pb-2 justify-between sticky top-0 z-10 border-b border-gray-100\">\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    className=\"text-indigo-600 text-base font-bold leading-normal tracking-[0.015em] cursor-pointer\"\r\n                >\r\n                    Cancel\r\n                </button>\r\n                <h2 className=\"text-gray-900 text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center\">\r\n                    Build from PRD\r\n                </h2>\r\n                <div className=\"w-12\"></div>\r\n            </header>\r\n\r\n            <main className=\"flex-1 overflow-y-auto p-6 space-y-6\">\r\n                {/* Hero Section */}\r\n                <div className=\"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-3xl p-8 text-white\">\r\n                    <div className=\"flex items-center gap-3 mb-4\">\r\n                        <div className=\"w-14 h-14 rounded-2xl bg-white/20 backdrop-blur-md flex items-center justify-center\">\r\n                            <Sparkles className=\"w-7 h-7\" />\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-2xl font-black\">AI-Powered Builder</h3>\r\n                            <p className=\"text-sm text-white/80 font-medium\">Transform your ideas into custom sections</p>\r\n                        </div>\r\n                    </div>\r\n                    <p className=\"text-sm leading-relaxed text-white/90\">\r\n                        Upload your Product Requirements Document (PRD) or describe your needs, and our AI will automatically\r\n                        generate a custom section with the right fields, layout, and functionality.\r\n                    </p>\r\n                </div>\r\n\r\n                {/* PRD Input */}\r\n                <div className=\"bg-white rounded-3xl p-6 shadow-sm border border-gray-100\">\r\n                    <label className=\"block mb-4\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <span className=\"text-sm font-bold text-gray-700 uppercase tracking-wide\">Your PRD</span>\r\n                            <label className=\"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-xl cursor-pointer transition-colors\">\r\n                                <Upload className=\"w-4 h-4 text-gray-600\" />\r\n                                <span className=\"text-sm font-semibold text-gray-700\">Upload File</span>\r\n                                <input type=\"file\" className=\"hidden\" accept=\".txt,.md,.pdf,.doc,.docx\" onChange={handleFileUpload} />\r\n                            </label>\r\n                        </div>\r\n                        <textarea\r\n                            value={prdText}\r\n                            onChange={(e) => setPrdText(e.target.value)}\r\n                            placeholder=\"Describe your custom section... \r\n\r\nExample: 'I need a calorie calculator that tracks daily nutrition intake, calculates BMR based on age, weight, height, and activity level, and suggests meal plans for weight loss or muscle gain.'\r\n\r\nor\r\n\r\n'Create a sleep tracker to monitor my bedtime, wake time, sleep quality, and sleep duration with weekly analytics.'\"\r\n                            className=\"w-full h-64 p-4 border-2 border-gray-200 rounded-2xl focus:border-indigo-500 focus:ring-0 resize-none text-sm leading-relaxed\"\r\n                        />\r\n                    </label>\r\n                    {prdFile && (\r\n                        <div className=\"flex items-center gap-2 text-sm text-gray-600 mt-2\">\r\n                            <FileText className=\"w-4 h-4\" />\r\n                            <span className=\"font-medium\">{prdFile.name}</span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Analyze Button */}\r\n                <button\r\n                    onClick={handleAnalyze}\r\n                    disabled={isAnalyzing || !prdText.trim()}\r\n                    className=\"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-2xl font-bold text-lg shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3\"\r\n                >\r\n                    {isAnalyzing ? (\r\n                        <>\r\n                            <Loader className=\"w-6 h-6 animate-spin\" />\r\n                            Analyzing PRD...\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <Sparkles className=\"w-6 h-6\" />\r\n                            Analyze & Generate\r\n                        </>\r\n                    )}\r\n                </button>\r\n\r\n                {error && (\r\n                    <div className=\"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-2xl\">\r\n                        <AlertCircle className=\"w-5 h-5 text-red-500\" />\r\n                        <span className=\"text-sm font-medium text-red-700\">{error}</span>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Generated Schema Preview */}\r\n                {analysisComplete && generatedSchema && (\r\n                    <div className=\"bg-white rounded-3xl p-6 shadow-lg border-2 border-green-200 space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                        <div className=\"flex items-center gap-3 pb-4 border-b border-gray-100\">\r\n                            <CheckCircle className=\"w-6 h-6 text-green-500\" />\r\n                            <h3 className=\"text-xl font-black text-gray-900\">Section Generated Successfully!</h3>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            <div>\r\n                                <p className=\"text-xs font-bold text-gray-500 uppercase tracking-wide mb-1\">Section Title</p>\r\n                                <p className=\"text-2xl font-black text-gray-900\">{generatedSchema.title}</p>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <p className=\"text-xs font-bold text-gray-500 uppercase tracking-wide mb-1\">Description</p>\r\n                                <p className=\"text-base text-gray-700\">{generatedSchema.subtitle}</p>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <p className=\"text-xs font-bold text-gray-500 uppercase tracking-wide mb-2\">Layout Style</p>\r\n                                <span className=\"inline-block px-4 py-2 bg-indigo-100 text-indigo-700 rounded-xl text-sm font-bold capitalize\">\r\n                                    {generatedSchema.layout}\r\n                                </span>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <p className=\"text-xs font-bold text-gray-500 uppercase tracking-wide mb-3\">Fields ({generatedSchema.fields.length})</p>\r\n                                <div className=\"grid gap-3\">\r\n                                    {generatedSchema.fields.map((field) => (\r\n                                        <div key={field.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-xl\">\r\n                                            <div>\r\n                                                <p className=\"font-bold text-gray-900\">{field.label}</p>\r\n                                                <p className=\"text-xs text-gray-500 capitalize\">\r\n                                                    {field.type} {field.required && 'â€¢ Required'}\r\n                                                    {field.unit && ` â€¢ Unit: ${field.unit}`}\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button\r\n                            onClick={handleSave}\r\n                            className=\"w-full py-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-2xl font-bold text-lg shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-3\"\r\n                        >\r\n                            <CheckCircle className=\"w-6 h-6\" />\r\n                            Save to Dashboard\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PRDSectionBuilder;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\PersonalBoard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\PlannerPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\Profile.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":46,"column":13,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":46,"endColumn":26,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1875,1888],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    Settings, Moon, Sun, Bell,\r\n    LogOut, ChevronRight, Camera,\r\n    ArrowLeft, Heart, Sparkles,\r\n    Download, Upload, Trash, Shield,\r\n    Globe, ShieldAlert\r\n} from 'lucide-react';\r\nimport { useLifeTracker } from '../utils/lifeTrackerStore';\r\nimport type { UserProfile } from '../utils/lifeTrackerStore';\r\nimport { authService } from '../services/authService';\r\nimport { useContentProtection } from '../contexts/ContentProtectionContext';\r\nimport { ProtectionLevelSelector } from './ProtectionLevelSelector';\r\nimport { PINSetupModal } from './PINSetupModal';\r\nimport { AccountabilityPartnerSetup } from './AccountabilityPartnerSetup';\r\nimport { BlockHistoryViewer } from './BlockHistoryViewer';\r\nimport { DNSInstructionsModal } from './DNSInstructionsModal';\r\nimport type { ProtectionLevel } from '../types/contentProtection';\r\nimport { useNotifications } from '../contexts/NotificationContext';\r\n\r\nconst Profile: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const store = useLifeTracker();\r\n    const state = store.getState();\r\n    const { userProfile } = state;\r\n    const {\r\n        token,\r\n        requestPermission,\r\n        sendLocalNotification\r\n    } = useNotifications();\r\n\r\n\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [editForm, setEditForm] = useState<Partial<UserProfile>>(userProfile);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const avatarInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const handleAvatarChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = event.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        // Optimistic update (optional, but good for UX)\r\n        // For now, let's just wait for upload\r\n        try {\r\n            // @ts-ignore\r\n            const publicUrl = await store.uploadFile(file, 'avatars');\r\n            if (publicUrl) {\r\n                store.updateUserProfile({ avatar: publicUrl });\r\n            } else {\r\n                alert('Failed to upload avatar.');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error uploading avatar:', error);\r\n            alert('Error uploading avatar.');\r\n        }\r\n    };\r\n\r\n    // Content Protection State\r\n    const contentProtection = useContentProtection();\r\n    const [showPINModal, setShowPINModal] = useState(false);\r\n    const [showDNSModal, setShowDNSModal] = useState(false);\r\n    const [pinModalMode, setPinModalMode] = useState<'set' | 'verify' | 'change'>('set');\r\n    const [expandedContentSection, setExpandedContentSection] = useState<string | null>(null);\r\n    const [pendingLevel, setPendingLevel] = useState<ProtectionLevel | null>(null);\r\n    const [pendingVitalToggle, setPendingVitalToggle] = useState<boolean | null>(null);\r\n\r\n    const handleLogout = async () => {\r\n        if (confirm('Are you sure you want to log out?')) {\r\n            await authService.authSignOut();\r\n            navigate('/');\r\n        }\r\n    };\r\n\r\n    // Sync theme with DOM\r\n    useEffect(() => {\r\n        const theme = userProfile.preferences?.theme;\r\n        if (theme === 'dark') {\r\n            document.documentElement.classList.add('dark');\r\n        } else if (theme === 'light') {\r\n            document.documentElement.classList.remove('dark');\r\n        }\r\n    }, [userProfile.preferences?.theme]);\r\n\r\n    const isDarkMode = userProfile.preferences?.theme === 'dark' ||\r\n        (userProfile.preferences?.theme === 'system' && document.documentElement.classList.contains('dark'));\r\n\r\n    const toggleDarkMode = () => {\r\n        const newTheme = isDarkMode ? 'light' : 'dark';\r\n        if (newTheme === 'dark') {\r\n            document.documentElement.classList.add('dark');\r\n        } else {\r\n            document.documentElement.classList.remove('dark');\r\n        }\r\n        store.updateUserProfile({\r\n            preferences: { ...userProfile.preferences, theme: newTheme }\r\n        });\r\n    };\r\n\r\n    const handleSaveProfile = () => {\r\n        store.updateUserProfile(editForm);\r\n        setIsEditing(false);\r\n    };\r\n\r\n    const handleExport = () => {\r\n        const data = store.exportData();\r\n        const blob = new Blob([data], { type: 'application/json' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `lifetracker-backup-${new Date().toISOString().split('T')[0]}.json`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    const handleImport = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = event.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            const content = e.target?.result as string;\r\n            if (store.importData(content)) {\r\n                alert('Data imported successfully!');\r\n                window.location.reload(); // Reload to refresh all state\r\n            } else {\r\n                alert('Failed to import data. Invalid format.');\r\n            }\r\n        };\r\n        reader.readAsText(file);\r\n    };\r\n\r\n    const handleClearData = () => {\r\n        if (confirm('ARE YOU SURE? This will delete ALL your data permanently.')) {\r\n            store.clearAllData();\r\n            alert('All data verified deleted.');\r\n            navigate('/');\r\n        }\r\n    };\r\n\r\n    // Content Protection handlers\r\n    const handleProtectionLevelChange = async (level: ProtectionLevel) => {\r\n        const currentLevel = contentProtection.settings.protectionLevel;\r\n        const currentLevelIndex = ['off', 'light', 'strong', 'strict'].indexOf(currentLevel);\r\n        const newLevelIndex = ['off', 'light', 'strong', 'strict'].indexOf(level);\r\n\r\n        // If trying to enable protection and no PIN exists, show set PIN modal\r\n        if (level !== 'off' && !contentProtection.settings.pin) {\r\n            setPendingLevel(level);\r\n            setPinModalMode('set');\r\n            setShowPINModal(true);\r\n            return;\r\n        }\r\n\r\n        // Require PIN only if protection is being lowered or disabled\r\n        if (contentProtection.settings.pin && newLevelIndex < currentLevelIndex) {\r\n            setPendingLevel(level);\r\n            setPinModalMode('verify');\r\n            setShowPINModal(true);\r\n            return;\r\n        }\r\n\r\n        // If increasing protection, no PIN needed (or if no PIN exists yet)\r\n        await contentProtection.updateProtectionLevel(level);\r\n    };\r\n\r\n    const handleVitalBlockingToggle = async () => {\r\n        const nextState = !contentProtection.settings.vitalBlockingEnabled;\r\n\r\n        // If disabling and PIN exists, require PIN\r\n        if (!nextState && contentProtection.settings.pin) {\r\n            setPendingVitalToggle(nextState);\r\n            setPinModalMode('verify');\r\n            setShowPINModal(true);\r\n            return;\r\n        }\r\n\r\n        contentProtection.toggleVitalBlocking(nextState);\r\n    };\r\n\r\n    const handlePINModalSuccess = (pin: string, oldPin?: string): boolean => {\r\n        let success = false;\r\n\r\n        if (pinModalMode === 'set') {\r\n            success = contentProtection.setPin(pin);\r\n            if (success && pendingLevel) {\r\n                contentProtection.updateProtectionLevel(pendingLevel);\r\n            }\r\n        } else if (pinModalMode === 'verify') {\r\n            success = contentProtection.verifyPin(pin);\r\n            if (success) {\r\n                if (pendingLevel) {\r\n                    contentProtection.updateProtectionLevel(pendingLevel, pin);\r\n                } else if (pendingVitalToggle !== null) {\r\n                    contentProtection.toggleVitalBlocking(pendingVitalToggle, pin);\r\n                }\r\n            }\r\n        } else if (pinModalMode === 'change') {\r\n            success = contentProtection.setPin(pin, oldPin);\r\n        }\r\n\r\n        if (success) {\r\n            setPendingLevel(null);\r\n            setPendingVitalToggle(null);\r\n        }\r\n        return success;\r\n    };\r\n\r\n    const toggleContentSection = (section: string) => {\r\n        setExpandedContentSection(expandedContentSection === section ? null : section);\r\n    };\r\n\r\n    // calculate efficiency score based on task completion\r\n    const taskEfficiency = state.dailyTasks.length > 0\r\n        ? Math.round((state.dailyTasks.filter(t => t.completed).length / state.dailyTasks.length) * 100)\r\n        : 0;\r\n\r\n    const userStatus = taskEfficiency > 80 ? 'ELITE' : taskEfficiency > 50 ? 'PRO' : 'ROOKIE';\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#F5F5F5] dark:bg-[#1A1A1A] text-[#333333] dark:text-[#F5F5F5] font-sans antialiased flex justify-center pb-32 transition-colors duration-500\">\r\n            <div className=\"w-full max-w-md min-h-screen relative flex flex-col\">\r\n\r\n                {/* Header Section */}\r\n                <header className=\"pt-12 px-6 pb-8 bg-gradient-to-b from-white dark:from-[#111111] to-transparent\">\r\n                    <div className=\"flex justify-between items-center mb-10\">\r\n                        <button\r\n                            onClick={() => navigate(-1)}\r\n                            className=\"w-10 h-10 rounded-full bg-white dark:bg-[#333333] flex items-center justify-center shadow-sm border border-[#CCCCCC] dark:border-[#444444] transition-all hover:bg-[#DDDDDD] dark:hover:bg-[#444444]\"\r\n                        >\r\n                            <ArrowLeft className=\"w-5 h-5\" />\r\n                        </button>\r\n                        <h1 className=\"text-xl font-black tracking-tighter uppercase italic\">Institutional Profile</h1>\r\n                        <button\r\n                            onClick={() => setIsEditing(!isEditing)}\r\n                            className={`w-10 h-10 rounded-full flex items-center justify-center shadow-sm border border-[#CCCCCC] dark:border-[#444444] ${isEditing ? 'bg-black text-white dark:bg-white dark:text-black' : 'bg-white dark:bg-[#333333]'}`}\r\n                        >\r\n                            <Settings className={`w-5 h-5 ${isEditing ? 'animate-spin-slow' : ''}`} />\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Profile Card */}\r\n                    <div className=\"flex flex-col items-center\">\r\n                        <div className=\"relative mb-6\">\r\n                            <div className=\"w-32 h-32 rounded-full overflow-hidden border-4 border-white dark:border-[#333333] shadow-2xl relative group\">\r\n                                <img\r\n                                    src={userProfile.avatar || \"https://images.unsplash.com/photo-1539571696357-5a69c17a67c6?q=80&w=256&h=256&auto=format&fit=crop\"}\r\n                                    alt=\"User Profile\"\r\n                                    className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700\"\r\n                                />\r\n                                <div\r\n                                    onClick={() => avatarInputRef.current?.click()}\r\n                                    className=\"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer\"\r\n                                >\r\n                                    <Camera className=\"text-white w-6 h-6\" />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"absolute -bottom-1 -right-1 w-10 h-10 bg-gradient-to-r from-[#847777] to-[#5a4f4f] rounded-full border-4 border-white dark:border-[#1A1A1A] flex items-center justify-center shadow-lg\">\r\n                                <Heart className=\"text-white w-4 h-4 fill-white animate-pulse\" />\r\n                            </div>\r\n                            <input\r\n                                type=\"file\"\r\n                                ref={avatarInputRef}\r\n                                onChange={handleAvatarChange}\r\n                                accept=\"image/*\"\r\n                                className=\"hidden\"\r\n                            />\r\n                        </div>\r\n\r\n                        {isEditing ? (\r\n                            <div className=\"space-y-3 w-full max-w-xs text-center\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={editForm.firstName || ''}\r\n                                    onChange={e => setEditForm({ ...editForm, firstName: e.target.value })}\r\n                                    className=\"w-full text-center text-xl font-black italic bg-transparent border-b border-gray-300 focus:outline-none focus:border-black dark:focus:border-white\"\r\n                                    placeholder=\"First Name\"\r\n                                />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={editForm.title || ''}\r\n                                    onChange={e => setEditForm({ ...editForm, title: e.target.value })}\r\n                                    className=\"w-full text-center text-[10px] uppercase tracking-[0.2em] bg-transparent border-b border-gray-300 focus:outline-none focus:border-black dark:focus:border-white\"\r\n                                    placeholder=\"Title\"\r\n                                />\r\n                                <button\r\n                                    onClick={handleSaveProfile}\r\n                                    className=\"px-6 py-2 bg-black dark:bg-white text-white dark:text-black rounded-full text-xs font-bold uppercase tracking-widest mt-2\"\r\n                                >\r\n                                    Save Changes\r\n                                </button>\r\n                            </div>\r\n                        ) : (\r\n                            <>\r\n                                <h2 className=\"text-2xl font-black italic tracking-tight text-[#000000] dark:text-white mb-1\">\r\n                                    {userProfile.firstName} {userProfile.lastName}\r\n                                </h2>\r\n                                <p className=\"text-[#847777] text-[10px] font-black uppercase tracking-[0.2em]\">{userProfile.title}</p>\r\n                            </>\r\n                        )}\r\n\r\n                        <div className=\"flex gap-4 mt-6\">\r\n                            <div className=\"bg-white dark:bg-[#333333] px-6 py-3 rounded-2xl shadow-sm border border-[#CCCCCC] dark:border-[#444444] text-center\">\r\n                                <p className=\"text-[8px] font-black text-[#847777] uppercase tracking-widest mb-1\">Efficiency</p>\r\n                                <p className=\"text-lg font-black italic tracking-tighter\">{taskEfficiency}%</p>\r\n                            </div>\r\n                            <div className=\"bg-[#333333] dark:bg-[#F5F5F5] px-6 py-3 rounded-2xl shadow-sm border border-[#1A1A1A] dark:border-white text-center\">\r\n                                <p className=\"text-[8px] font-black text-[#847777] uppercase tracking-widest mb-1\">Status</p>\r\n                                <p className=\"text-lg font-black italic tracking-tighter text-white dark:text-[#1A1A1A]\">{userStatus}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </header>\r\n\r\n                {/* Settings Body */}\r\n                <main className=\"px-6 space-y-10 mt-4\">\r\n                    {/* App Settings */}\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        <h3 className=\"text-[10px] font-black uppercase tracking-[0.3em] text-[#847777] px-2\">App Settings</h3>\r\n                        <div className=\"bg-white dark:bg-[#222222] rounded-[2rem] border border-[#CCCCCC] dark:border-[#333333] overflow-hidden shadow-sm\">\r\n                            <div\r\n                                onClick={toggleDarkMode}\r\n                                className=\"flex items-center justify-between p-5 transition-all cursor-pointer border-b border-[#F5F5F5] dark:border-[#333333] hover:bg-[#F9F9F9] dark:hover:bg-[#2a2a2a]\"\r\n                            >\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className=\"w-10 h-10 rounded-xl bg-[#F5F5F5] dark:bg-[#333333] flex items-center justify-center text-[#847777]\">\r\n                                        {isDarkMode ? <Moon className=\"w-5 h-5\" /> : <Sun className=\"w-5 h-5\" />}\r\n                                    </div>\r\n                                    <div>\r\n                                        <h4 className=\"text-[13px] font-black uppercase tracking-tight text-[#000000] dark:text-white leading-tight\">Appearance</h4>\r\n                                        <p className=\"text-[10px] text-[#847777] font-medium tracking-wide\">{isDarkMode ? \"Dark Mode\" : \"Light Mode\"}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className={`w-12 h-6 rounded-full p-1 transition-colors duration-300 ${isDarkMode ? 'bg-[#847777]' : 'bg-[#DDDDDD]'}`}>\r\n                                    <div className={`w-4 h-4 bg-white rounded-full transition-transform duration-300 ${isDarkMode ? 'translate-x-6' : 'translate-x-0'}`} />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div\r\n                                onClick={requestPermission}\r\n                                className=\"flex items-center justify-between p-5 transition-all cursor-pointer hover:bg-[#F9F9F9] dark:hover:bg-[#2a2a2a]\"\r\n                            >\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className=\"w-10 h-10 rounded-xl bg-[#F5F5F5] dark:bg-[#333333] flex items-center justify-center text-[#847777]\">\r\n                                        <Bell className=\"w-5 h-5\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <h4 className=\"text-[13px] font-black uppercase tracking-tight text-[#000000] dark:text-white leading-tight\">Push Notifications</h4>\r\n                                        <p className=\"text-[10px] text-[#847777] font-medium tracking-wide\">\r\n                                            {token ? \"Enabled\" : \"Click to enable alerts\"}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className={`w-12 h-6 rounded-full p-1 transition-colors duration-300 ${token ? 'bg-green-500' : 'bg-[#DDDDDD]'}`}>\r\n                                    <div className={`w-4 h-4 bg-white rounded-full transition-transform duration-300 ${token ? 'translate-x-6' : 'translate-x-0'}`} />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {token && (\r\n                                <div\r\n                                    onClick={() => sendLocalNotification(\"Test Alert ðŸš€\", \"FCM setup is complete and notifications are working!\")}\r\n                                    className=\"mx-5 mb-5 p-3 rounded-xl bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 text-xs font-bold text-center cursor-pointer hover:bg-blue-100 dark:hover:bg-blue-900/40 transition-all border border-blue-100 dark:border-blue-900/40\"\r\n                                >\r\n                                    Click here to send a Test Notification\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Content Protection */}\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        <div className=\"flex justify-between items-center px-2\">\r\n                            <h3 className=\"text-[10px] font-black uppercase tracking-[0.3em] text-[#847777]\">Content Protection</h3>\r\n                            {contentProtection.settings.vitalBlockingEnabled && (\r\n                                <span className=\"text-[8px] font-black uppercase tracking-widest bg-amber-100 text-amber-600 px-2 py-0.5 rounded-full border border-amber-200\">\r\n                                    Vital Active\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"bg-white dark:bg-[#222222] rounded-[2rem] border border-[#CCCCCC] dark:border-[#333333] overflow-hidden shadow-sm\">\r\n                            {/* Vital Blocking Toggle */}\r\n                            <div className=\"p-5 border-b border-[#F5F5F5] dark:border-[#333333]\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <div className={`w-10 h-10 rounded-xl flex items-center justify-center transition-colors ${contentProtection.settings.vitalBlockingEnabled ? 'bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400' : 'bg-[#F5F5F5] dark:bg-[#333333] text-[#847777]'}`}>\r\n                                            <ShieldAlert className=\"w-5 h-5\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <h4 className=\"text-[13px] font-black uppercase tracking-tight text-[#000000] dark:text-white leading-tight\">\r\n                                                Vital Blocking\r\n                                            </h4>\r\n                                            <p className=\"text-[10px] text-[#847777] font-medium tracking-wide\">\r\n                                                Blocks Adult & Twitter/X content\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={handleVitalBlockingToggle}\r\n                                        className={`w-12 h-6 rounded-full p-1 transition-all duration-300 ${contentProtection.settings.vitalBlockingEnabled ? 'bg-amber-500' : 'bg-[#DDDDDD] dark:bg-[#444444]'}`}\r\n                                    >\r\n                                        <div className={`w-4 h-4 bg-white rounded-full transition-transform duration-300 ${contentProtection.settings.vitalBlockingEnabled ? 'translate-x-6' : 'translate-x-0'}`} />\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Protection Level */}\r\n                            <div className=\"p-5 border-b border-[#F5F5F5] dark:border-[#333333]\">\r\n                                <div className=\"flex items-center justify-between mb-4\">\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <div className=\"w-10 h-10 rounded-xl bg-[#F5F5F5] dark:bg-[#333333] flex items-center justify-center text-[#847777]\">\r\n                                            <Shield className=\"w-5 h-5\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <h4 className=\"text-[13px] font-black uppercase tracking-tight text-[#000000] dark:text-white leading-tight\">\r\n                                                Protection Level\r\n                                            </h4>\r\n                                            <p className=\"text-[10px] text-[#847777] font-medium tracking-wide\">\r\n                                                {contentProtection.settings.protectionLevel === 'off' ? 'Disabled' : contentProtection.settings.protectionLevel.charAt(0).toUpperCase() + contentProtection.settings.protectionLevel.slice(1)}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={() => toggleContentSection('protection-level')}\r\n                                        className=\"text-[#847777] hover:text-[#000000] dark:hover:text-white transition-colors\"\r\n                                    >\r\n                                        <ChevronRight className={`w-4 h-4 transition-transform ${expandedContentSection === 'protection-level' ? 'rotate-90' : ''}`} />\r\n                                    </button>\r\n                                </div>\r\n                                {expandedContentSection === 'protection-level' && (\r\n                                    <div className=\"mt-4\">\r\n                                        <ProtectionLevelSelector\r\n                                            currentLevel={contentProtection.settings.protectionLevel}\r\n                                            onLevelChange={handleProtectionLevelChange}\r\n                                        />\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* PIN Settings */}\r\n                            {contentProtection.settings.protectionLevel !== 'off' && (\r\n                                <div className=\"p-5 border-b border-[#F5F5F5] dark:border-[#333333]\">\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            setPinModalMode('change');\r\n                                            setShowPINModal(true);\r\n                                        }}\r\n                                        className=\"w-full text-left transition-all hover:opacity-70\"\r\n                                    >\r\n                                        <div className=\"flex items-center justify-between\">\r\n                                            <div>\r\n                                                <h4 className=\"text-[13px] font-black uppercase tracking-tight text-[#000000] dark:text-white leading-tight\">\r\n                                                    Change PIN\r\n                                                </h4>\r\n                                                <p className=\"text-[10px] text-[#847777] font-medium tracking-wide\">\r\n                                                    Update your protection PIN\r\n                                                </p>\r\n                                            </div>\r\n                                            <ChevronRight className=\"w-4 h-4 text-[#CCCCCC]\" />\r\n                                        </div>\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Accountability Partner */}\r\n                            {contentProtection.settings.protectionLevel !== 'off' && (\r\n                                <div className=\"p-5 border-b border-[#F5F5F5] dark:border-[#333333]\">\r\n                                    <div className=\"flex items-center justify-between mb-4\">\r\n                                        <div>\r\n                                            <h4 className=\"text-[13px] font-black uppercase tracking-tight text-[#000000] dark:text-white leading-tight\">\r\n                                                Account Ability Partner\r\n                                            </h4>\r\n                                            <p className=\"text-[10px] text-[#847777] font-medium tracking-wide\">\r\n                                                {contentProtection.settings.accountabilityPartner ? 'Configured' : 'Not configured'}\r\n                                            </p>\r\n                                        </div>\r\n                                        <button\r\n                                            onClick={() => toggleContentSection('accountability')}\r\n                                            className=\"text-[#847777] hover:text-[#000000] dark:hover:text-white transition-colors\"\r\n                                        >\r\n                                            <ChevronRight className={`w-4 h-4 transition-transform ${expandedContentSection === 'accountability' ? 'rotate-90' : ''}`} />\r\n                                        </button>\r\n                                    </div>\r\n                                    {expandedContentSection === 'accountability' && (\r\n                                        <div className=\"mt-4\">\r\n                                            <AccountabilityPartnerSetup\r\n                                                currentPartner={contentProtection.settings.accountabilityPartner}\r\n                                                onSave={contentProtection.setAccountabilityPartner}\r\n                                            />\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* DNS / Network Filtering */}\r\n                            <div className=\"p-5 border-b border-[#F5F5F5] dark:border-[#333333]\">\r\n                                <button\r\n                                    onClick={() => setShowDNSModal(true)}\r\n                                    className=\"w-full text-left transition-all hover:opacity-70\"\r\n                                >\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <div className=\"w-10 h-10 rounded-xl bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-500\">\r\n                                                <Globe className=\"w-5 h-5\" />\r\n                                            </div>\r\n                                            <div>\r\n                                                <h4 className=\"text-[13px] font-black uppercase tracking-tight text-[#000000] dark:text-white leading-tight\">\r\n                                                    Network Filtering\r\n                                                </h4>\r\n                                                <p className=\"text-[10px] text-[#847777] font-medium tracking-wide\">\r\n                                                    Configure System-wide DNS\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <ChevronRight className=\"w-4 h-4 text-[#CCCCCC]\" />\r\n                                    </div>\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Block History */}\r\n                            {contentProtection.settings.protectionLevel !== 'off' && contentProtection.settings.blockHistory.length > 0 && (\r\n                                <div className=\"p-5\">\r\n                                    <div className=\"flex items-center justify-between mb-4\">\r\n                                        <div>\r\n                                            <h4 className=\"text-[13px] font-black uppercase tracking-tight text-[#000000] dark:text-white leading-tight\">\r\n                                                Block History\r\n                                            </h4>\r\n                                            <p className=\"text-[10px] text-[#847777] font-medium tracking-wide\">\r\n                                                {contentProtection.settings.blockHistory.length} blocked attempts\r\n                                            </p>\r\n                                        </div>\r\n                                        <button\r\n                                            onClick={() => toggleContentSection('block-history')}\r\n                                            className=\"text-[#847777] hover:text-[#000000] dark:hover:text-white transition-colors\"\r\n                                        >\r\n                                            <ChevronRight className={`w-4 h-4 transition-transform ${expandedContentSection === 'block-history' ? 'rotate-90' : ''}`} />\r\n                                        </button>\r\n                                    </div>\r\n                                    {expandedContentSection === 'block-history' && (\r\n                                        <div className=\"mt-4\">\r\n                                            <BlockHistoryViewer\r\n                                                blockHistory={contentProtection.settings.blockHistory}\r\n                                                onClear={contentProtection.clearBlockHistory}\r\n                                            />\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Data Management */}\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        <h3 className=\"text-[10px] font-black uppercase tracking-[0.3em] text-[#847777] px-2\">System Data</h3>\r\n                        <div className=\"bg-white dark:bg-[#222222] rounded-[2rem] border border-[#CCCCCC] dark:border-[#333333] overflow-hidden shadow-sm\">\r\n                            <div\r\n                                onClick={handleExport}\r\n                                className=\"flex items-center justify-between p-5 transition-all cursor-pointer border-b border-[#F5F5F5] dark:border-[#333333] hover:bg-[#F9F9F9] dark:hover:bg-[#2a2a2a]\"\r\n                            >\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className=\"w-10 h-10 rounded-xl bg-[#F5F5F5] dark:bg-[#333333] flex items-center justify-center text-[#847777]\">\r\n                                        <Download className=\"w-5 h-5\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <h4 className=\"text-[13px] font-black uppercase tracking-tight text-[#000000] dark:text-white leading-tight\">Export Data</h4>\r\n                                        <p className=\"text-[10px] text-[#847777] font-medium tracking-wide\">Download full backup</p>\r\n                                    </div>\r\n                                </div>\r\n                                <Sparkles className=\"w-4 h-4 text-[#CCCCCC]\" />\r\n                            </div>\r\n\r\n                            <div\r\n                                onClick={() => fileInputRef.current?.click()}\r\n                                className=\"flex items-center justify-between p-5 transition-all cursor-pointer border-b border-[#F5F5F5] dark:border-[#333333] hover:bg-[#F9F9F9] dark:hover:bg-[#2a2a2a]\"\r\n                            >\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className=\"w-10 h-10 rounded-xl bg-[#F5F5F5] dark:bg-[#333333] flex items-center justify-center text-[#847777]\">\r\n                                        <Upload className=\"w-5 h-5\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <h4 className=\"text-[13px] font-black uppercase tracking-tight text-[#000000] dark:text-white leading-tight\">Import Data</h4>\r\n                                        <p className=\"text-[10px] text-[#847777] font-medium tracking-wide\">Restore from backup</p>\r\n                                    </div>\r\n                                </div>\r\n                                <input\r\n                                    type=\"file\"\r\n                                    ref={fileInputRef}\r\n                                    onChange={handleImport}\r\n                                    className=\"hidden\"\r\n                                    accept=\".json\"\r\n                                />\r\n                                <ChevronRight className=\"w-4 h-4 text-[#CCCCCC]\" />\r\n                            </div>\r\n\r\n                            <div\r\n                                onClick={handleClearData}\r\n                                className=\"flex items-center justify-between p-5 transition-all cursor-pointer hover:bg-rose-50 dark:hover:bg-rose-900/10\"\r\n                            >\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className=\"w-10 h-10 rounded-xl bg-rose-100 dark:bg-rose-900/30 flex items-center justify-center text-rose-500\">\r\n                                        <Trash className=\"w-5 h-5\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <h4 className=\"text-[13px] font-black uppercase tracking-tight text-rose-500 leading-tight\">Clear All Data</h4>\r\n                                        <p className=\"text-[10px] text-rose-400 font-medium tracking-wide\">Permanent reset</p>\r\n                                    </div>\r\n                                </div>\r\n                                <LogOut className=\"w-4 h-4 text-rose-300\" />\r\n                            </div>\r\n\r\n                            <div\r\n                                onClick={handleLogout}\r\n                                className=\"flex items-center justify-between p-5 transition-all cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800/50\"\r\n                            >\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className=\"w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-gray-500\">\r\n                                        <LogOut className=\"w-5 h-5\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <h4 className=\"text-[13px] font-black uppercase tracking-tight text-gray-500 dark:text-gray-400 leading-tight\">Log Out</h4>\r\n                                        <p className=\"text-[10px] text-gray-400 font-medium tracking-wide\">End current session</p>\r\n                                    </div>\r\n                                </div>\r\n                                <ChevronRight className=\"w-4 h-4 text-gray-300\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <p className=\"text-center text-[#CCCCCC] text-[8px] font-black uppercase tracking-[0.2em] pt-4\">\r\n                        System Version 4.0.0-PRO | Hardware Encrypted\r\n                    </p>\r\n                </main>\r\n            </div>\r\n\r\n            {/* PIN Setup Modal */}\r\n            <PINSetupModal\r\n                isOpen={showPINModal}\r\n                mode={pinModalMode}\r\n                onSetPin={handlePINModalSuccess}\r\n                onClose={() => {\r\n                    setShowPINModal(false);\r\n                    setPendingLevel(null);\r\n                }}\r\n            />\r\n\r\n            <DNSInstructionsModal\r\n                isOpen={showDNSModal}\r\n                onClose={() => setShowDNSModal(false)}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Profile;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\ProtectionLevelSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\ReadingLibrary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\ReadingLibraryNew.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":241,"column":21,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":241,"endColumn":34,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[9958,9971],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":296,"column":17,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":296,"endColumn":30,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[12256,12269],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":385,"column":17,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":385,"endColumn":54,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[15870,15907],"text":"// @ts-expect-error - method added recently"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport {\r\n    ArrowLeft, FolderPlus, Folder, FolderOpen, BookOpen,\r\n    Search, Grid, List, ChevronRight, ChevronDown,\r\n    X, Check, Edit3, Trash2, Upload, BookPlus, FileUp, Eye, Loader2\r\n} from 'lucide-react';\r\nimport { useLifeTracker } from '../utils/lifeTrackerStore';\r\nimport type { ReadingFolder, Book } from '../utils/lifeTrackerStore';\r\nimport { openPdfInNewTab, extractPdfCover } from '../utils/pdfService';\r\nimport Button from './ui/Button';\r\nimport { useContentProtection } from '../contexts/ContentProtectionContext';\r\nimport { checkKeywords } from '../services/contentFilter';\r\n\r\nconst COVER_COLORS = [\r\n    'from-blue-500 to-indigo-600',\r\n    'from-purple-500 to-pink-600',\r\n    'from-emerald-500 to-teal-600',\r\n    'from-orange-500 to-red-600',\r\n    'from-cyan-500 to-blue-600',\r\n    'from-rose-500 to-pink-600',\r\n    'from-amber-500 to-orange-600',\r\n    'from-violet-500 to-purple-600',\r\n];\r\n\r\nconst FOLDER_COLORS = [\r\n    'bg-indigo-500', 'bg-purple-500', 'bg-pink-500',\r\n    'bg-emerald-500', 'bg-blue-500', 'bg-orange-500',\r\n    'bg-slate-600', 'bg-rose-500'\r\n];\r\n\r\nconst ReadingLibraryNew: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const store = useLifeTracker();\r\n    const { settings, logBlockedAttempt } = useContentProtection();\r\n    const folders = store.getFolders();\r\n\r\n    // View States\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\r\n    const [expandedFolderId, setExpandedFolderId] = useState<string | null>(null);\r\n\r\n    // Handle navigation from Currently Reading - auto-expand folder\r\n    useEffect(() => {\r\n        if (location.state?.expandFolderId) {\r\n            setExpandedFolderId(location.state.expandFolderId);\r\n\r\n            // If scrollToBookId is provided, optionally open the PDF after a delay\r\n            if (location.state.scrollToBookId) {\r\n                const book = store.getBooks().find(b => b.id === location.state.scrollToBookId);\r\n                if (book?.pdfDataUrl) {\r\n                    // Give time for folder to expand, then open PDF\r\n                    setTimeout(() => {\r\n                        openPdfInNewTab(book.pdfDataUrl!, book.title);\r\n                    }, 500);\r\n                }\r\n            }\r\n\r\n            // Clear the state after handling it\r\n            navigate(location.pathname, { replace: true, state: {} });\r\n        }\r\n    }, [location.state, location.pathname, navigate, store]);\r\n\r\n    // Modal States\r\n    const [showCreateFolderModal, setShowCreateFolderModal] = useState(false);\r\n    const [showEditFolderModal, setShowEditFolderModal] = useState(false);\r\n    const [showAddBookModal, setShowAddBookModal] = useState(false);\r\n    const [showUploadPdfModal, setShowUploadPdfModal] = useState(false);\r\n    const [showUploadCoverModal, setShowUploadCoverModal] = useState(false);\r\n    const [showDeleteConfirm, setShowDeleteConfirm] = useState<{ type: 'folder' | 'book'; id: string } | null>(null);\r\n\r\n    // Edit targets\r\n    const [editingFolder, setEditingFolder] = useState<ReadingFolder | null>(null);\r\n    const [targetFolderId, setTargetFolderId] = useState<string | null>(null);\r\n    const [targetBookId, setTargetBookId] = useState<string | null>(null);\r\n\r\n    // Form States - Folder\r\n    const [folderName, setFolderName] = useState('');\r\n    const [folderDesc, setFolderDesc] = useState('');\r\n    const [folderColor, setFolderColor] = useState('bg-indigo-500');\r\n\r\n    // Form States - Book\r\n    const [bookTitle, setBookTitle] = useState('');\r\n    const [bookAuthor, setBookAuthor] = useState('');\r\n    const [bookPages, setBookPages] = useState('');\r\n    const [bookDescription, setBookDescription] = useState('');\r\n\r\n    // File upload - PDF\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n\r\n    // File upload - Cover Image\r\n    const coverInputRef = useRef<HTMLInputElement>(null);\r\n    const [selectedCoverFile, setSelectedCoverFile] = useState<File | null>(null);\r\n    const [coverPreview, setCoverPreview] = useState<string | null>(null);\r\n    const [isProcessingPdf, setIsProcessingPdf] = useState(false);\r\n\r\n    // Handlers\r\n    const handleCreateFolder = () => {\r\n        if (!folderName.trim()) return;\r\n\r\n        // Content Protection\r\n        if (settings.protectionLevel !== 'off') {\r\n            const protectionResult = checkKeywords(\r\n                `${folderName} ${folderDesc}`,\r\n                settings.protectionLevel,\r\n                settings.customBlockedKeywords\r\n            );\r\n            if (protectionResult.blocked) {\r\n                alert(`Cannot create folder: ${protectionResult.reason}`);\r\n                logBlockedAttempt(folderName, 'keyword', protectionResult.reason);\r\n                return;\r\n            }\r\n        }\r\n\r\n        store.addFolder({\r\n            name: folderName.trim(),\r\n            description: folderDesc.trim(),\r\n            color: folderColor,\r\n            icon: 'folder'\r\n        });\r\n        resetFolderForm();\r\n        setShowCreateFolderModal(false);\r\n    };\r\n\r\n    const handleUpdateFolder = () => {\r\n        if (!editingFolder || !folderName.trim()) return;\r\n\r\n        // Content Protection\r\n        if (settings.protectionLevel !== 'off') {\r\n            const protectionResult = checkKeywords(\r\n                `${folderName} ${folderDesc}`,\r\n                settings.protectionLevel,\r\n                settings.customBlockedKeywords\r\n            );\r\n            if (protectionResult.blocked) {\r\n                alert(`Cannot update folder: ${protectionResult.reason}`);\r\n                logBlockedAttempt(folderName, 'keyword', protectionResult.reason);\r\n                return;\r\n            }\r\n        }\r\n\r\n        store.updateFolder(editingFolder.id, {\r\n            name: folderName.trim(),\r\n            description: folderDesc.trim(),\r\n            color: folderColor,\r\n        });\r\n        resetFolderForm();\r\n        setShowEditFolderModal(false);\r\n        setEditingFolder(null);\r\n    };\r\n\r\n    const handleDeleteFolder = (folderId: string) => {\r\n        store.deleteFolder(folderId);\r\n        setShowDeleteConfirm(null);\r\n        if (expandedFolderId === folderId) setExpandedFolderId(null);\r\n    };\r\n\r\n    const handleAddBook = () => {\r\n        if (!targetFolderId || !bookTitle.trim() || !bookPages) return;\r\n\r\n        // Content Protection\r\n        if (settings.protectionLevel !== 'off') {\r\n            const protectionResult = checkKeywords(\r\n                `${bookTitle} ${bookAuthor} ${bookDescription}`,\r\n                settings.protectionLevel,\r\n                settings.customBlockedKeywords\r\n            );\r\n            if (protectionResult.blocked) {\r\n                alert(`Cannot add book: ${protectionResult.reason}`);\r\n                logBlockedAttempt(bookTitle, 'keyword', protectionResult.reason);\r\n                return;\r\n            }\r\n        }\r\n\r\n        const randomColor = COVER_COLORS[Math.floor(Math.random() * COVER_COLORS.length)];\r\n        store.addBookToFolder(targetFolderId, {\r\n            title: bookTitle.trim(),\r\n            author: bookAuthor.trim() || 'Unknown Author',\r\n            totalPages: parseInt(bookPages),\r\n            coverColor: randomColor,\r\n            description: bookDescription.trim(),\r\n        });\r\n        resetBookForm();\r\n        setShowAddBookModal(false);\r\n    };\r\n\r\n    const handleDeleteBook = (bookId: string) => {\r\n        store.deleteBook(bookId);\r\n        setShowDeleteConfirm(null);\r\n    };\r\n\r\n    // Simplified PDF file selection - NO automatic extraction\r\n    const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            setSelectedFile(file);\r\n        }\r\n    };\r\n\r\n    // PDF upload with automatic cover extraction\r\n    const handleUploadPdf = async () => {\r\n        if (!targetBookId || !selectedFile) return;\r\n\r\n        console.log('=== Uploading PDF with Auto Cover Extraction ===');\r\n        console.log('File:', selectedFile.name);\r\n        console.log('Size:', (selectedFile.size / 1024).toFixed(2), 'KB');\r\n\r\n        try {\r\n            // 1. Process PDF (extract cover)\r\n            const reader = new FileReader();\r\n            reader.onload = async () => {\r\n                try {\r\n                    const pdfDataUrl = reader.result as string;\r\n                    console.log('PDF converted to data URL for extraction');\r\n                    setIsProcessingPdf(true);\r\n\r\n                    // Try to extract cover\r\n                    let coverImage: string | undefined;\r\n                    try {\r\n                        console.log('Extracting cover page...');\r\n                        coverImage = await extractPdfCover(pdfDataUrl);\r\n                        console.log('âœ… Cover extracted successfully');\r\n\r\n                        // If we have a cover image, upload it too\r\n                        if (coverImage) {\r\n                            // This part is tricky if coverImage is data URL. \r\n                            // We might want to upload it to 'book-covers' to save space?\r\n                            // valid point, but for now let's persist existing behavior for cover, \r\n                            // or effectively, we can upload it later.\r\n                            // Actually, store.updateBookCover handles base64 fine.\r\n                        }\r\n                    } catch (coverError) {\r\n                        console.warn('âš ï¸ Could not extract cover during upload:', coverError);\r\n                    }\r\n\r\n                    // 2. Upload PDF to Supabase Storage\r\n                    console.log('Uploading PDF to Supabase Storage...');\r\n                    // @ts-ignore\r\n                    const pdfPath = await store.uploadFile(selectedFile, 'book-pdfs');\r\n\r\n                    if (pdfPath) {\r\n                        console.log('âœ… PDF uploaded to storage:', pdfPath);\r\n\r\n                        // 3. Save to Store (with path, empty dataUrl to save local storage space)\r\n                        store.uploadPdfToBook(\r\n                            targetBookId,\r\n                            selectedFile.name,\r\n                            selectedFile.size,\r\n                            \"\", // Empty data URL since we have path\r\n                            coverImage,\r\n                            pdfPath\r\n                        );\r\n                        // Also update cover if we extracted one\r\n                        if (coverImage) {\r\n                            store.updateBookCover(targetBookId, coverImage);\r\n                        }\r\n\r\n                        console.log('âœ… PDF info saved to store');\r\n\r\n                        // Reset state\r\n                        setSelectedFile(null);\r\n                        setShowUploadPdfModal(false);\r\n                        setTargetBookId(null);\r\n                    } else {\r\n                        throw new Error(\"Failed to upload PDF to storage\");\r\n                    }\r\n                } catch (error) {\r\n                    console.error('âŒ Error processing PDF:', error);\r\n                    alert('Failed to process PDF. Please try again.');\r\n                } finally {\r\n                    setIsProcessingPdf(false);\r\n                }\r\n            };\r\n            reader.onerror = () => {\r\n                console.error('âŒ Error reading file');\r\n                alert('Failed to read PDF file. Please try again.');\r\n            };\r\n            reader.readAsDataURL(selectedFile);\r\n        } catch (error) {\r\n            console.error('âŒ Error uploading PDF:', error);\r\n            alert('Failed to upload PDF. Please try again.');\r\n            setIsProcessingPdf(false);\r\n        }\r\n    };\r\n\r\n    const handleOpenPdf = async (book: Book) => {\r\n        console.log('=== Opening PDF ===');\r\n        console.log('Book:', book.title);\r\n\r\n        try {\r\n            if (book.pdfPath) {\r\n                console.log('Found PDF Path in Storage:', book.pdfPath);\r\n                // @ts-ignore\r\n                const signedUrl = await store.getPrivateFileUrl('book-pdfs', book.pdfPath);\r\n                if (signedUrl) {\r\n                    console.log('Generated Signed URL, opening...');\r\n                    openPdfInNewTab(signedUrl, book.title);\r\n                    return;\r\n                } else {\r\n                    console.error('Failed to generate signed URL');\r\n                    alert('Could not access PDF file from storage.');\r\n                    return;\r\n                }\r\n            } else if (book.pdfDataUrl) {\r\n                console.log('Found PDF Data URL');\r\n                openPdfInNewTab(book.pdfDataUrl, book.title);\r\n            } else {\r\n                console.warn('âš ï¸ No PDF found for book:', book.title);\r\n                alert('No PDF attached to this book.');\r\n            }\r\n        } catch (error) {\r\n            console.error('âŒ Error opening PDF:', error);\r\n            alert(`Failed to open PDF: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n        }\r\n    };\r\n\r\n\r\n    // Manual cover image upload handlers\r\n    const handleCoverSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file && file.type.startsWith('image/')) {\r\n            setSelectedCoverFile(file);\r\n\r\n            // Create preview\r\n            const reader = new FileReader();\r\n            reader.onload = () => {\r\n                setCoverPreview(reader.result as string);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    };\r\n\r\n    const handleExtractCoverFromPdf = async () => {\r\n        if (!targetBookId) return;\r\n        const book = store.getBooks().find(b => b.id === targetBookId);\r\n        if (!book?.pdfDataUrl) return;\r\n\r\n        try {\r\n            setIsProcessingPdf(true);\r\n            console.log('Extracting cover from existing PDF...');\r\n            const coverImage = await extractPdfCover(book.pdfDataUrl);\r\n\r\n            if (coverImage) {\r\n                setCoverPreview(coverImage);\r\n                console.log('âœ… Cover extracted successfully');\r\n            } else {\r\n                alert('Could not extract cover from this PDF. The file might be protected or incompatible.');\r\n            }\r\n        } catch (error: unknown) {\r\n            console.error('Error extracting cover:', error);\r\n            const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n            alert(`Error extracting cover: ${errorMessage}`);\r\n        } finally {\r\n            setIsProcessingPdf(false);\r\n        }\r\n    };\r\n\r\n    const handleUploadCover = async () => {\r\n        if (!targetBookId || !coverPreview) return;\r\n\r\n        setIsProcessingPdf(true); // Reuse loader or add new one\r\n        console.log('Starting cover upload...');\r\n\r\n        try {\r\n            let fileToUpload: File | null = selectedCoverFile;\r\n\r\n            // If no file selected but we have a preview (e.g. from PDF extraction), convert base64 to file\r\n            if (!fileToUpload && coverPreview.startsWith('data:')) {\r\n                try {\r\n                    const res = await fetch(coverPreview);\r\n                    const blob = await res.blob();\r\n                    fileToUpload = new File([blob], `cover-${targetBookId}.jpg`, { type: 'image/jpeg' });\r\n                } catch (e) {\r\n                    console.error('Error converting preview to file:', e);\r\n                }\r\n            }\r\n\r\n            let coverUrl = coverPreview;\r\n\r\n            if (fileToUpload) {\r\n                console.log('Uploading file to Supabase Storage...');\r\n                // @ts-ignore - method added recently\r\n                const uploadedUrl = await store.uploadFile(fileToUpload, 'book-covers');\r\n                if (uploadedUrl) {\r\n                    console.log('Upload successful:', uploadedUrl);\r\n                    coverUrl = uploadedUrl;\r\n                } else {\r\n                    console.error('Upload failed, falling back to base64');\r\n                }\r\n            }\r\n\r\n            // Update the book's coverImage in the store\r\n            store.updateBookCover(targetBookId, coverUrl);\r\n\r\n            // Reset state\r\n            setCoverPreview(null);\r\n            setSelectedCoverFile(null);\r\n            setShowUploadCoverModal(false);\r\n            setTargetBookId(null);\r\n        } catch (error) {\r\n            console.error('Error in handleUploadCover:', error);\r\n            alert('Failed to upload cover image.');\r\n        } finally {\r\n            setIsProcessingPdf(false);\r\n        }\r\n    };\r\n\r\n    const openUploadCover = (bookId: string) => {\r\n        setTargetBookId(bookId);\r\n        setShowUploadCoverModal(true);\r\n    };\r\n\r\n    const resetFolderForm = () => {\r\n        setFolderName('');\r\n        setFolderDesc('');\r\n        setFolderColor('bg-indigo-500');\r\n    };\r\n\r\n    const resetBookForm = () => {\r\n        setBookTitle('');\r\n        setBookAuthor('');\r\n        setBookPages('');\r\n        setBookDescription('');\r\n        setTargetFolderId(null);\r\n    };\r\n\r\n    const openEditFolder = (folder: ReadingFolder) => {\r\n        setEditingFolder(folder);\r\n        setFolderName(folder.name);\r\n        setFolderDesc(folder.description || '');\r\n        setFolderColor(folder.color || 'bg-indigo-500');\r\n        setShowEditFolderModal(true);\r\n    };\r\n\r\n    const openAddBook = (folderId: string) => {\r\n        setTargetFolderId(folderId);\r\n        setShowAddBookModal(true);\r\n    };\r\n\r\n    const openUploadPdf = (bookId: string) => {\r\n        setTargetBookId(bookId);\r\n        setShowUploadPdfModal(true);\r\n    };\r\n\r\n    const toggleFolder = (folderId: string) => {\r\n        setExpandedFolderId(expandedFolderId === folderId ? null : folderId);\r\n    };\r\n\r\n    const filteredFolders = folders.filter(f =>\r\n        f.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n    );\r\n\r\n    const formatFileSize = (bytes: number): string => {\r\n        if (bytes < 1024) return bytes + ' B';\r\n        if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';\r\n        return (bytes / (1024 * 1024)).toFixed(1) + ' MB';\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-b from-slate-50 via-white to-indigo-50/30 pb-24\">\r\n            {/* Header - Fixed with proper spacing */}\r\n            <div className=\"sticky top-0 z-40 bg-white/95 backdrop-blur-xl border-b border-slate-100 shadow-sm\">\r\n                <div className=\"px-5 py-4 flex items-center gap-4\">\r\n                    <button\r\n                        onClick={() => navigate(-1)}\r\n                        className=\"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center hover:bg-slate-200 transition-colors\"\r\n                    >\r\n                        <ArrowLeft className=\"w-5 h-5 text-slate-700\" />\r\n                    </button>\r\n                    <div className=\"flex-1\">\r\n                        <h1 className=\"text-xl font-bold text-slate-900\">Reading Library</h1>\r\n                        <p className=\"text-xs text-slate-500\">{folders.length} folders</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Workflow Guide Banner */}\r\n            <div className=\"px-5 pt-4\">\r\n                <div className=\"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl p-4 text-white shadow-lg shadow-indigo-200/50\">\r\n                    <p className=\"text-xs font-semibold uppercase tracking-wider opacity-80 mb-1\">Workflow</p>\r\n                    <div className=\"flex items-center gap-2 text-sm\">\r\n                        <span className=\"bg-white/20 px-2 py-0.5 rounded-full text-xs font-bold\">1</span>\r\n                        <span>Create Folder</span>\r\n                        <ChevronRight className=\"w-4 h-4 opacity-60\" />\r\n                        <span className=\"bg-white/20 px-2 py-0.5 rounded-full text-xs font-bold\">2</span>\r\n                        <span>Add Book</span>\r\n                        <ChevronRight className=\"w-4 h-4 opacity-60\" />\r\n                        <span className=\"bg-white/20 px-2 py-0.5 rounded-full text-xs font-bold\">3</span>\r\n                        <span>Upload PDF</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Search & View Controls */}\r\n            <div className=\"px-5 py-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"flex-1 relative\">\r\n                        <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                            placeholder=\"Search folders...\"\r\n                            className=\"w-full pl-11 pr-4 py-3 bg-slate-100 border-none rounded-xl text-slate-900 placeholder:text-slate-400 focus:ring-2 focus:ring-indigo-500 transition-all text-sm\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex items-center gap-1 bg-slate-100 rounded-xl p-1\">\r\n                        <button\r\n                            onClick={() => setViewMode('grid')}\r\n                            className={`p-2 rounded-lg transition-colors ${viewMode === 'grid' ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-400 hover:text-slate-600'}`}\r\n                        >\r\n                            <Grid className=\"w-4 h-4\" />\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setViewMode('list')}\r\n                            className={`p-2 rounded-lg transition-colors ${viewMode === 'list' ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-400 hover:text-slate-600'}`}\r\n                        >\r\n                            <List className=\"w-4 h-4\" />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Create Folder CTA */}\r\n            <div className=\"px-5 mb-4\">\r\n                <motion.button\r\n                    whileHover={{ scale: 1.01 }}\r\n                    whileTap={{ scale: 0.99 }}\r\n                    onClick={() => setShowCreateFolderModal(true)}\r\n                    className=\"w-full p-4 bg-white border-2 border-dashed border-indigo-200 rounded-2xl flex items-center justify-center gap-3 text-indigo-600 font-medium hover:border-indigo-400 hover:bg-indigo-50/50 transition-all group\"\r\n                >\r\n                    <div className=\"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform\">\r\n                        <FolderPlus className=\"w-5 h-5\" />\r\n                    </div>\r\n                    <span>Create New Folder</span>\r\n                </motion.button>\r\n            </div>\r\n\r\n            {/* Folders Section */}\r\n            <div className=\"px-5\">\r\n                <h2 className=\"text-lg font-bold text-slate-900 mb-4\">Your Folders</h2>\r\n\r\n                {filteredFolders.length === 0 ? (\r\n                    <div className=\"text-center py-12 bg-white rounded-3xl border border-dashed border-slate-200\">\r\n                        <Folder className=\"w-16 h-16 mx-auto mb-4 text-slate-300\" />\r\n                        <p className=\"text-slate-500 font-medium mb-2\">No folders yet</p>\r\n                        <p className=\"text-sm text-slate-400 mb-4\">Create a folder to start organizing your books</p>\r\n                        <Button\r\n                            onClick={() => setShowCreateFolderModal(true)}\r\n                            variant=\"primary\"\r\n                            size=\"md\"\r\n                        >\r\n                            Create Your First Folder\r\n                        </Button>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"space-y-4\">\r\n                        {filteredFolders.map((folder) => {\r\n                            const isExpanded = expandedFolderId === folder.id;\r\n                            const booksInFolder = store.getBooksInFolder(folder.id);\r\n\r\n                            return (\r\n                                <motion.div\r\n                                    key={folder.id}\r\n                                    layout\r\n                                    className=\"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden\"\r\n                                >\r\n                                    {/* Folder Header */}\r\n                                    <div\r\n                                        className=\"p-4 flex items-center gap-4 cursor-pointer hover:bg-slate-50 transition-colors\"\r\n                                        onClick={() => toggleFolder(folder.id)}\r\n                                    >\r\n                                        <div className={`w-12 h-12 ${folder.color || 'bg-indigo-500'} rounded-xl flex items-center justify-center shadow-md`}>\r\n                                            {isExpanded ? (\r\n                                                <FolderOpen className=\"w-6 h-6 text-white\" />\r\n                                            ) : (\r\n                                                <Folder className=\"w-6 h-6 text-white\" />\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <h3 className=\"font-bold text-slate-900 truncate\">{folder.name}</h3>\r\n                                            <p className=\"text-xs text-slate-500\">\r\n                                                {booksInFolder.length} {booksInFolder.length === 1 ? 'book' : 'books'}\r\n                                                {folder.description && ` â€¢ ${folder.description}`}\r\n                                            </p>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <button\r\n                                                onClick={(e) => { e.stopPropagation(); openEditFolder(folder); }}\r\n                                                className=\"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors\"\r\n                                            >\r\n                                                <Edit3 className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={(e) => { e.stopPropagation(); setShowDeleteConfirm({ type: 'folder', id: folder.id }); }}\r\n                                                className=\"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                            >\r\n                                                <Trash2 className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                            <motion.div\r\n                                                animate={{ rotate: isExpanded ? 180 : 0 }}\r\n                                                transition={{ duration: 0.2 }}\r\n                                            >\r\n                                                <ChevronDown className=\"w-5 h-5 text-slate-400\" />\r\n                                            </motion.div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Folder Content - Books */}\r\n                                    <AnimatePresence>\r\n                                        {isExpanded && (\r\n                                            <motion.div\r\n                                                initial={{ height: 0, opacity: 0 }}\r\n                                                animate={{ height: 'auto', opacity: 1 }}\r\n                                                exit={{ height: 0, opacity: 0 }}\r\n                                                transition={{ duration: 0.3 }}\r\n                                                className=\"border-t border-slate-100\"\r\n                                            >\r\n                                                <div className=\"p-4 bg-slate-50/50\">\r\n                                                    {/* Add Book Button */}\r\n                                                    <button\r\n                                                        onClick={() => openAddBook(folder.id)}\r\n                                                        className=\"w-full mb-4 p-3 bg-white border border-dashed border-emerald-200 rounded-xl flex items-center justify-center gap-2 text-emerald-600 font-medium hover:border-emerald-400 hover:bg-emerald-50/50 transition-all text-sm\"\r\n                                                    >\r\n                                                        <BookPlus className=\"w-4 h-4\" />\r\n                                                        Add Book to Folder\r\n                                                    </button>\r\n\r\n                                                    {/* Books List */}\r\n                                                    {booksInFolder.length === 0 ? (\r\n                                                        <div className=\"text-center py-6 text-slate-400 text-sm\">\r\n                                                            <BookOpen className=\"w-10 h-10 mx-auto mb-2 opacity-50\" />\r\n                                                            <p>No books in this folder yet</p>\r\n                                                        </div>\r\n                                                    ) : (\r\n                                                        <div className={viewMode === 'grid' ? 'grid grid-cols-2 gap-3' : 'space-y-3'}>\r\n                                                            {booksInFolder.map((book) => (\r\n                                                                <motion.div\r\n                                                                    key={book.id}\r\n                                                                    layout\r\n                                                                    onClick={() => book.pdfDataUrl && handleOpenPdf(book)}\r\n                                                                    className={`bg-white rounded-xl border border-slate-100 shadow-sm overflow-hidden ${book.pdfDataUrl ? 'cursor-pointer hover:shadow-md transition-shadow' : ''\r\n                                                                        } ${viewMode === 'grid' ? 'p-3' : 'p-3 flex items-center gap-3'}`}\r\n                                                                >\r\n                                                                    {/* Book Cover */}\r\n                                                                    <div\r\n                                                                        className={`rounded-lg overflow-hidden shadow relative ${viewMode === 'grid' ? 'w-full aspect-[3/4] mb-3' : 'w-14 h-20 flex-shrink-0'\r\n                                                                            }`}\r\n                                                                    >\r\n                                                                        {(book.coverImage || book.pdfCoverImage) ? (\r\n                                                                            // Display manual or auto cover\r\n                                                                            <img\r\n                                                                                src={book.coverImage || book.pdfCoverImage}\r\n                                                                                alt={book.title}\r\n                                                                                className=\"w-full h-full object-cover\"\r\n                                                                            />\r\n                                                                        ) : (\r\n                                                                            // Fallback gradient\r\n                                                                            <div className={`w-full h-full bg-gradient-to-br ${book.coverColor} flex items-center justify-center`}>\r\n                                                                                <BookOpen className={`text-white/80 ${viewMode === 'grid' ? 'w-10 h-10' : 'w-6 h-6'}`} />\r\n                                                                            </div>\r\n                                                                        )}\r\n                                                                        {book.pdfDataUrl && (\r\n                                                                            <div className=\"absolute top-1 right-1 bg-emerald-500 text-white rounded-full p-1\">\r\n                                                                                <Eye className=\"w-2.5 h-2.5\" />\r\n                                                                            </div>\r\n                                                                        )}\r\n                                                                    </div>\r\n\r\n                                                                    {/* Book Info */}\r\n                                                                    <div className=\"flex-1 min-w-0\">\r\n                                                                        <h4 className=\"font-semibold text-slate-900 text-sm truncate\">{book.title}</h4>\r\n                                                                        <p className=\"text-xs text-slate-500 truncate\">{book.author}</p>\r\n                                                                        <p className=\"text-[10px] text-slate-400 mt-1\">{book.totalPages} pages</p>\r\n\r\n                                                                        {/* Action Buttons Row */}\r\n                                                                        <div className=\"mt-2 flex gap-1 flex-wrap\">\r\n                                                                            {!book.coverImage && (\r\n                                                                                <button\r\n                                                                                    onClick={(e) => { e.stopPropagation(); openUploadCover(book.id); }}\r\n                                                                                    className=\"flex items-center gap-1 px-2 py-1 text-[10px] font-medium rounded-md bg-purple-50 text-purple-600 hover:bg-purple-100 transition-colors\"\r\n                                                                                    title=\"Upload book cover\"\r\n                                                                                >\r\n                                                                                    <Upload className=\"w-3 h-3\" />\r\n                                                                                    Cover\r\n                                                                                </button>\r\n                                                                            )}\r\n\r\n                                                                            {!book.pdfDataUrl ? (\r\n                                                                                <button\r\n                                                                                    onClick={(e) => { e.stopPropagation(); openUploadPdf(book.id); }}\r\n                                                                                    className=\"flex items-center gap-1 px-2 py-1 text-[10px] font-medium rounded-md bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-colors\"\r\n                                                                                    title=\"Upload PDF file\"\r\n                                                                                >\r\n                                                                                    <FileUp className=\"w-3 h-3\" />\r\n                                                                                    PDF\r\n                                                                                </button>\r\n                                                                            ) : (\r\n                                                                                <button\r\n                                                                                    onClick={(e) => { e.stopPropagation(); handleOpenPdf(book); }}\r\n                                                                                    className=\"flex items-center gap-1 px-2 py-1 text-[10px] font-medium rounded-md bg-emerald-50 text-emerald-600 hover:bg-emerald-100 transition-colors\"\r\n                                                                                    title=\"Open PDF in browser\"\r\n                                                                                >\r\n                                                                                    <Eye className=\"w-3 h-3\" />\r\n                                                                                    Open\r\n                                                                                </button>\r\n                                                                            )}\r\n                                                                        </div>\r\n                                                                    </div>\r\n\r\n                                                                    {/* Delete Button */}\r\n                                                                    <div className={`flex gap-1 ${viewMode === 'grid' ? 'mt-2 justify-end' : 'self-center'}`}>\r\n                                                                        <button\r\n                                                                            onClick={(e) => { e.stopPropagation(); setShowDeleteConfirm({ type: 'book', id: book.id }); }}\r\n                                                                            className=\"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                                                            title=\"Delete book\"\r\n                                                                        >\r\n                                                                            <Trash2 className=\"w-3.5 h-3.5\" />\r\n                                                                        </button>\r\n                                                                    </div>\r\n                                                                </motion.div>\r\n                                                            ))}\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                            </motion.div>\r\n                                        )}\r\n                                    </AnimatePresence>\r\n                                </motion.div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* ==================== MODALS ==================== */}\r\n\r\n            {/* Create Folder Modal */}\r\n            <AnimatePresence>\r\n                {showCreateFolderModal && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-50 bg-slate-900/60 backdrop-blur-sm flex items-end justify-center px-4 pb-4\"\r\n                        onClick={() => { setShowCreateFolderModal(false); resetFolderForm(); }}\r\n                    >\r\n                        <motion.div\r\n                            initial={{ y: '100%' }}\r\n                            animate={{ y: 0 }}\r\n                            exit={{ y: '100%' }}\r\n                            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                            className=\"w-full max-w-md bg-white rounded-3xl p-6 shadow-2xl\"\r\n                        >\r\n                            <div className=\"flex items-center justify-between mb-6\">\r\n                                <div>\r\n                                    <h3 className=\"text-xl font-bold text-slate-900\">New Folder</h3>\r\n                                    <p className=\"text-sm text-slate-500\">Step 1: Organize your books</p>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => { setShowCreateFolderModal(false); resetFolderForm(); }}\r\n                                    className=\"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 hover:bg-slate-200\"\r\n                                >\r\n                                    <X className=\"w-5 h-5\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-5\">\r\n                                <div>\r\n                                    <label className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block\">Folder Name *</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={folderName}\r\n                                        onChange={(e) => setFolderName(e.target.value)}\r\n                                        placeholder=\"e.g., Fiction, Self-Help, Programming\"\r\n                                        className=\"w-full p-4 bg-slate-50 border-none rounded-2xl text-slate-900 placeholder:text-slate-400 focus:ring-2 focus:ring-indigo-500 transition-all font-medium\"\r\n                                        autoFocus\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block\">Description</label>\r\n                                    <textarea\r\n                                        value={folderDesc}\r\n                                        onChange={(e) => setFolderDesc(e.target.value)}\r\n                                        placeholder=\"Optional description...\"\r\n                                        className=\"w-full p-4 bg-slate-50 border-none rounded-2xl text-slate-900 placeholder:text-slate-400 focus:ring-2 focus:ring-indigo-500 transition-all font-medium resize-none h-20\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3 block\">Color</label>\r\n                                    <div className=\"flex flex-wrap gap-3\">\r\n                                        {FOLDER_COLORS.map((color) => (\r\n                                            <button\r\n                                                key={color}\r\n                                                onClick={() => setFolderColor(color)}\r\n                                                className={`w-10 h-10 rounded-xl transition-all ${color} ${folderColor === color\r\n                                                    ? 'ring-4 ring-offset-2 ring-indigo-500 scale-110'\r\n                                                    : 'opacity-60 hover:opacity-100 hover:scale-105'\r\n                                                    }`}\r\n                                            >\r\n                                                {folderColor === color && <Check className=\"w-5 h-5 text-white mx-auto\" />}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <Button\r\n                                onClick={handleCreateFolder}\r\n                                disabled={!folderName.trim()}\r\n                                variant=\"primary\"\r\n                                size=\"lg\"\r\n                                fullWidth\r\n                                className=\"mt-8\"\r\n                            >\r\n                                Create Folder\r\n                            </Button>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Edit Folder Modal */}\r\n            <AnimatePresence>\r\n                {showEditFolderModal && editingFolder && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-50 bg-slate-900/60 backdrop-blur-sm flex items-end justify-center px-4 pb-4\"\r\n                        onClick={() => { setShowEditFolderModal(false); setEditingFolder(null); resetFolderForm(); }}\r\n                    >\r\n                        <motion.div\r\n                            initial={{ y: '100%' }}\r\n                            animate={{ y: 0 }}\r\n                            exit={{ y: '100%' }}\r\n                            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                            className=\"w-full max-w-md bg-white rounded-3xl p-6 shadow-2xl\"\r\n                        >\r\n                            <div className=\"flex items-center justify-between mb-6\">\r\n                                <div>\r\n                                    <h3 className=\"text-xl font-bold text-slate-900\">Edit Folder</h3>\r\n                                    <p className=\"text-sm text-slate-500\">Update folder details</p>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => { setShowEditFolderModal(false); setEditingFolder(null); resetFolderForm(); }}\r\n                                    className=\"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500\"\r\n                                >\r\n                                    <X className=\"w-5 h-5\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-5\">\r\n                                <div>\r\n                                    <label className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block\">Folder Name *</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={folderName}\r\n                                        onChange={(e) => setFolderName(e.target.value)}\r\n                                        className=\"w-full p-4 bg-slate-50 border-none rounded-2xl text-slate-900 focus:ring-2 focus:ring-indigo-500 transition-all font-medium\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block\">Description</label>\r\n                                    <textarea\r\n                                        value={folderDesc}\r\n                                        onChange={(e) => setFolderDesc(e.target.value)}\r\n                                        className=\"w-full p-4 bg-slate-50 border-none rounded-2xl text-slate-900 focus:ring-2 focus:ring-indigo-500 transition-all font-medium resize-none h-20\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3 block\">Color</label>\r\n                                    <div className=\"flex flex-wrap gap-3\">\r\n                                        {FOLDER_COLORS.map((color) => (\r\n                                            <button\r\n                                                key={color}\r\n                                                onClick={() => setFolderColor(color)}\r\n                                                className={`w-10 h-10 rounded-xl transition-all ${color} ${folderColor === color\r\n                                                    ? 'ring-4 ring-offset-2 ring-indigo-500 scale-110'\r\n                                                    : 'opacity-60 hover:opacity-100'\r\n                                                    }`}\r\n                                            >\r\n                                                {folderColor === color && <Check className=\"w-5 h-5 text-white mx-auto\" />}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <Button\r\n                                onClick={handleUpdateFolder}\r\n                                disabled={!folderName.trim()}\r\n                                variant=\"primary\"\r\n                                size=\"lg\"\r\n                                fullWidth\r\n                                className=\"mt-8\"\r\n                            >\r\n                                Save Changes\r\n                            </Button>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Add Book Modal */}\r\n            <AnimatePresence>\r\n                {showAddBookModal && targetFolderId && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-50 bg-slate-900/60 backdrop-blur-sm flex items-end justify-center px-4 pb-4\"\r\n                        onClick={() => { setShowAddBookModal(false); resetBookForm(); }}\r\n                    >\r\n                        <motion.div\r\n                            initial={{ y: '100%' }}\r\n                            animate={{ y: 0 }}\r\n                            exit={{ y: '100%' }}\r\n                            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                            className=\"w-full max-w-md bg-white rounded-3xl p-6 shadow-2xl max-h-[85vh] overflow-y-auto\"\r\n                        >\r\n                            <div className=\"flex items-center justify-between mb-6\">\r\n                                <div>\r\n                                    <h3 className=\"text-xl font-bold text-slate-900\">Add Book</h3>\r\n                                    <p className=\"text-sm text-slate-500\">Step 2: Add to \"{folders.find(f => f.id === targetFolderId)?.name}\"</p>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => { setShowAddBookModal(false); resetBookForm(); }}\r\n                                    className=\"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500\"\r\n                                >\r\n                                    <X className=\"w-5 h-5\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-5\">\r\n                                <div>\r\n                                    <label className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block\">Book Title *</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={bookTitle}\r\n                                        onChange={(e) => setBookTitle(e.target.value)}\r\n                                        placeholder=\"e.g., Atomic Habits\"\r\n                                        className=\"w-full p-4 bg-slate-50 border-none rounded-2xl text-slate-900 placeholder:text-slate-400 focus:ring-2 focus:ring-emerald-500 transition-all font-medium\"\r\n                                        autoFocus\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block\">Author</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={bookAuthor}\r\n                                        onChange={(e) => setBookAuthor(e.target.value)}\r\n                                        placeholder=\"e.g., James Clear\"\r\n                                        className=\"w-full p-4 bg-slate-50 border-none rounded-2xl text-slate-900 placeholder:text-slate-400 focus:ring-2 focus:ring-emerald-500 transition-all font-medium\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block\">Total Pages *</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        value={bookPages}\r\n                                        onChange={(e) => setBookPages(e.target.value)}\r\n                                        placeholder=\"e.g., 320\"\r\n                                        className=\"w-full p-4 bg-slate-50 border-none rounded-2xl text-slate-900 placeholder:text-slate-400 focus:ring-2 focus:ring-emerald-500 transition-all font-medium\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block\">Description / Notes</label>\r\n                                    <textarea\r\n                                        value={bookDescription}\r\n                                        onChange={(e) => setBookDescription(e.target.value)}\r\n                                        placeholder=\"Why are you reading this book?\"\r\n                                        className=\"w-full p-4 bg-slate-50 border-none rounded-2xl text-slate-900 placeholder:text-slate-400 focus:ring-2 focus:ring-emerald-500 transition-all font-medium resize-none h-24\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <Button\r\n                                onClick={handleAddBook}\r\n                                disabled={!bookTitle.trim() || !bookPages}\r\n                                variant=\"primary\"\r\n                                size=\"lg\"\r\n                                fullWidth\r\n                                className=\"mt-8 bg-emerald-600 hover:bg-emerald-700 shadow-emerald-200\"\r\n                            >\r\n                                Add Book\r\n                            </Button>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Upload PDF Modal */}\r\n            <AnimatePresence>\r\n                {showUploadPdfModal && targetBookId && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-50 bg-slate-900/60 backdrop-blur-sm flex items-end justify-center px-4 pb-4\"\r\n                        onClick={() => { setShowUploadPdfModal(false); setSelectedFile(null); setTargetBookId(null); }}\r\n                    >\r\n                        <motion.div\r\n                            initial={{ y: '100%' }}\r\n                            animate={{ y: 0 }}\r\n                            exit={{ y: '100%' }}\r\n                            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                            className=\"w-full max-w-md bg-white rounded-3xl p-6 shadow-2xl\"\r\n                        >\r\n                            <div className=\"flex items-center justify-between mb-6\">\r\n                                <div>\r\n                                    <h3 className=\"text-xl font-bold text-slate-900\">Upload PDF</h3>\r\n                                    <p className=\"text-sm text-slate-500\">Attach PDF to \"{store.getBooks().find(b => b.id === targetBookId)?.title}\"</p>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => { setShowUploadPdfModal(false); setSelectedFile(null); setTargetBookId(null); }}\r\n                                    className=\"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500\"\r\n                                >\r\n                                    <X className=\"w-5 h-5\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* File Upload Area */}\r\n                            <div\r\n                                onClick={() => fileInputRef.current?.click()}\r\n                                className={`p-8 border-2 border-dashed rounded-3xl text-center transition-all ${selectedFile\r\n                                    ? 'border-emerald-500 bg-emerald-50 cursor-pointer'\r\n                                    : 'border-slate-200 bg-slate-50 hover:border-indigo-400 hover:bg-indigo-50/50 cursor-pointer'\r\n                                    }`}\r\n                            >\r\n                                <input\r\n                                    type=\"file\"\r\n                                    ref={fileInputRef}\r\n                                    onChange={handleFileSelect}\r\n                                    className=\"hidden\"\r\n                                    accept=\".pdf\"\r\n                                />\r\n\r\n                                {selectedFile ? (\r\n                                    <div>\r\n                                        <div className=\"w-16 h-16 bg-emerald-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg\">\r\n                                            <Check className=\"w-8 h-8 text-white\" />\r\n                                        </div>\r\n                                        <p className=\"font-bold text-slate-900 truncate\">{selectedFile.name}</p>\r\n                                        <p className=\"text-sm text-emerald-600 font-medium mt-1\">{formatFileSize(selectedFile.size)}</p>\r\n                                        <p className=\"text-xs text-slate-400 mt-2\">Tap to change file</p>\r\n                                    </div>\r\n                                ) : (\r\n                                    <div>\r\n                                        <div className=\"w-16 h-16 bg-slate-200 rounded-2xl flex items-center justify-center mx-auto mb-4\">\r\n                                            <FileUp className=\"w-8 h-8 text-slate-500\" />\r\n                                        </div>\r\n                                        <p className=\"font-bold text-slate-900\">Tap to select PDF file</p>\r\n                                        <p className=\"text-sm text-slate-400 mt-1\">PDF files only</p>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            <div className=\"mt-8 flex gap-3\">\r\n                                <Button\r\n                                    onClick={() => { setShowUploadPdfModal(false); setSelectedFile(null); setTargetBookId(null); }}\r\n                                    disabled={isProcessingPdf}\r\n                                    variant=\"secondary\"\r\n                                    size=\"lg\"\r\n                                    className=\"flex-1\"\r\n                                >\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button\r\n                                    onClick={handleUploadPdf}\r\n                                    disabled={!selectedFile || isProcessingPdf}\r\n                                    isLoading={isProcessingPdf}\r\n                                    variant=\"primary\"\r\n                                    size=\"lg\"\r\n                                    className=\"flex-[2]\"\r\n                                >\r\n                                    {isProcessingPdf ? 'Extracting Cover...' : 'Upload & Attach'}\r\n                                </Button>\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Upload Cover Image Modal */}\r\n            <AnimatePresence>\r\n                {showUploadCoverModal && targetBookId && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-50 bg-slate-900/60 backdrop-blur-sm flex items-end justify-center px-4 pb-4\"\r\n                        onClick={() => { setShowUploadCoverModal(false); setCoverPreview(null); setSelectedCoverFile(null); setTargetBookId(null); }}\r\n                    >\r\n                        <motion.div\r\n                            initial={{ y: '100%' }}\r\n                            animate={{ y: 0 }}\r\n                            exit={{ y: '100%' }}\r\n                            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                            className=\"w-full max-w-md bg-white rounded-3xl p-6 shadow-2xl\"\r\n                        >\r\n                            <div className=\"flex items-center justify-between mb-6\">\r\n                                <div>\r\n                                    <h3 className=\"text-xl font-bold text-slate-900\">Upload Book Cover</h3>\r\n                                    <p className=\"text-sm text-slate-500\">Add cover for \"{store.getBooks().find(b => b.id === targetBookId)?.title}\"</p>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => { setShowUploadCoverModal(false); setCoverPreview(null); setSelectedCoverFile(null); setTargetBookId(null); }}\r\n                                    className=\"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500\"\r\n                                >\r\n                                    <X className=\"w-5 h-5\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Cover Preview */}\r\n                            {coverPreview && (\r\n                                <div className=\"mb-4 rounded-2xl overflow-hidden border-4 border-purple-200\">\r\n                                    <img\r\n                                        src={coverPreview}\r\n                                        alt=\"Cover preview\"\r\n                                        className=\"w-full aspect-[3/4] object-cover\"\r\n                                    />\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* File Upload Area */}\r\n                            <div className=\"space-y-4\">\r\n                                {store.getBooks().find(b => b.id === targetBookId)?.pdfDataUrl && !coverPreview && (\r\n                                    <button\r\n                                        onClick={handleExtractCoverFromPdf}\r\n                                        disabled={isProcessingPdf}\r\n                                        className=\"w-full py-4 border-2 border-indigo-200 bg-indigo-50 text-indigo-700 rounded-3xl font-bold flex items-center justify-center gap-2 hover:bg-indigo-100 transition-all disabled:opacity-50\"\r\n                                    >\r\n                                        {isProcessingPdf ? (\r\n                                            <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                                        ) : (\r\n                                            <Eye className=\"w-5 h-5\" />\r\n                                        )}\r\n                                        Extract Cover from PDF\r\n                                    </button>\r\n                                )}\r\n\r\n                                <div\r\n                                    onClick={() => coverInputRef.current?.click()}\r\n                                    className={`p-8 border-2 border-dashed rounded-3xl text-center transition-all ${coverPreview\r\n                                        ? 'border-purple-500 bg-purple-50 cursor-pointer'\r\n                                        : 'border-slate-200 bg-slate-50 hover:border-purple-400 hover:bg-purple-50/50 cursor-pointer'\r\n                                        }`}\r\n                                >\r\n                                    <input\r\n                                        type=\"file\"\r\n                                        ref={coverInputRef}\r\n                                        onChange={handleCoverSelect}\r\n                                        className=\"hidden\"\r\n                                        accept=\"image/*\"\r\n                                    />\r\n\r\n                                    {coverPreview ? (\r\n                                        <div>\r\n                                            <div className=\"w-16 h-16 bg-purple-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg\">\r\n                                                <Check className=\"w-8 h-8 text-white\" />\r\n                                            </div>\r\n                                            <p className=\"font-bold text-slate-900\">Cover selected!</p>\r\n                                            <p className=\"text-xs text-slate-400 mt-2\">Tap to change image</p>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div>\r\n                                            <div className=\"w-16 h-16 bg-slate-200 rounded-2xl flex items-center justify-center mx-auto mb-4\">\r\n                                                <Upload className=\"w-8 h-8 text-slate-500\" />\r\n                                            </div>\r\n                                            <p className=\"font-bold text-slate-900\">Select Cover Image</p>\r\n                                            <p className=\"text-sm text-slate-400 mt-1\">JPG, PNG, or WebP</p>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <Button\r\n                                onClick={handleUploadCover}\r\n                                disabled={!coverPreview || isProcessingPdf}\r\n                                variant=\"primary\"\r\n                                size=\"lg\"\r\n                                fullWidth\r\n                                className=\"mt-6 bg-purple-600 hover:bg-purple-700\"\r\n                            >\r\n                                Set as Cover\r\n                            </Button>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Delete Confirmation Modal */}\r\n            <AnimatePresence>\r\n                {showDeleteConfirm && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-50 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center px-6\"\r\n                        onClick={() => setShowDeleteConfirm(null)}\r\n                    >\r\n                        <motion.div\r\n                            initial={{ scale: 0.9, opacity: 0 }}\r\n                            animate={{ scale: 1, opacity: 1 }}\r\n                            exit={{ scale: 0.9, opacity: 0 }}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                            className=\"w-full max-w-sm bg-white rounded-3xl p-6 shadow-2xl text-center\"\r\n                        >\r\n                            <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                                <Trash2 className=\"w-8 h-8 text-red-600\" />\r\n                            </div>\r\n                            <h3 className=\"text-xl font-bold text-slate-900 mb-2\">\r\n                                Delete {showDeleteConfirm.type === 'folder' ? 'Folder' : 'Book'}?\r\n                            </h3>\r\n                            <p className=\"text-sm text-slate-500 mb-6\">\r\n                                {showDeleteConfirm.type === 'folder'\r\n                                    ? 'This will also delete all books inside this folder.'\r\n                                    : 'This action cannot be undone.'}\r\n                            </p>\r\n                            <div className=\"flex gap-3\">\r\n                                <button\r\n                                    onClick={() => setShowDeleteConfirm(null)}\r\n                                    className=\"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-medium hover:bg-slate-200 transition-colors\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => {\r\n                                        if (showDeleteConfirm.type === 'folder') {\r\n                                            handleDeleteFolder(showDeleteConfirm.id);\r\n                                        } else {\r\n                                            handleDeleteBook(showDeleteConfirm.id);\r\n                                        }\r\n                                    }}\r\n                                    className=\"flex-1 py-3 bg-red-600 text-white rounded-xl font-medium hover:bg-red-700 transition-colors\"\r\n                                >\r\n                                    Delete\r\n                                </button>\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ReadingLibraryNew;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\ReadingSystem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\Scratchpad.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\SearchDirectory.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'logBlockedAttempt', 'settings.customBlockedKeywords', and 'settings.protectionLevel'. Either include them or remove the dependency array.","line":64,"column":8,"nodeType":"ArrayExpression","endLine":64,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [logBlockedAttempt, settings.customBlockedKeywords, settings.protectionLevel]","fix":{"range":[2569,2571],"text":"[logBlockedAttempt, settings.customBlockedKeywords, settings.protectionLevel]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    ArrowLeft, Search, X, Loader2,\r\n    AlertCircle, TrendingUp, ExternalLink\r\n} from 'lucide-react';\r\nimport { performWebSearch } from '../services/webSearchService';\r\nimport type { SearchResult } from '../services/webSearchService';\r\nimport { useContentProtection } from '../contexts/ContentProtectionContext';\r\nimport { checkUrl, checkKeywords } from '../services/contentFilter';\r\n\r\n// ============================================\r\n// MAIN COMPONENT - Google-like Search\r\n// ============================================\r\n\r\nconst SearchDirectory: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const { settings, logBlockedAttempt } = useContentProtection();\r\n\r\n    // State\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [results, setResults] = useState<SearchResult[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [hasSearched, setHasSearched] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    // ============================================\r\n    // SEARCH FUNCTION - Like Google\r\n    // ============================================\r\n\r\n    const performSearch = useCallback(async (query: string) => {\r\n        if (!query.trim()) return;\r\n\r\n        // Content Protection Check - Keywords\r\n        if (settings.protectionLevel !== 'off') {\r\n            const keywordResult = checkKeywords(query, settings.protectionLevel, settings.customBlockedKeywords);\r\n            if (keywordResult.blocked) {\r\n                alert(`Search Blocked: ${keywordResult.reason}`);\r\n                logBlockedAttempt(undefined, query, keywordResult.reason);\r\n                return;\r\n            }\r\n        }\r\n\r\n        setIsLoading(true);\r\n        setError(null);\r\n        setHasSearched(true);\r\n\r\n        try {\r\n            // Perform unified web search (Google + Wikipedia + News)\r\n            const searchResults = await performWebSearch(query);\r\n            setResults(searchResults);\r\n\r\n            if (searchResults.length === 0) {\r\n                setError(`No results found for \"${query}\". Try different keywords.`);\r\n            }\r\n        } catch (err: unknown) {\r\n            console.error('Search error:', err);\r\n            const errorMessage = err instanceof Error ? err.message : 'Search failed. Please try again.';\r\n            setError(errorMessage);\r\n            setResults([]);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    // Handle form submit\r\n    const handleSearch = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        performSearch(searchQuery);\r\n    };\r\n\r\n    // Handle Enter key\r\n    const handleKeyDown = (e: React.KeyboardEvent) => {\r\n        if (e.key === 'Enter') {\r\n            performSearch(searchQuery);\r\n        }\r\n    };\r\n\r\n    // Open external link\r\n    const openExternalLink = (url: string) => {\r\n        if (settings.protectionLevel !== 'off') {\r\n            const protectionResult = checkUrl(url, settings.protectionLevel, settings.customBlockedDomains);\r\n            if (protectionResult.blocked) {\r\n                alert(`Access Blocked: ${protectionResult.reason}`);\r\n                logBlockedAttempt(url, undefined, protectionResult.reason);\r\n                return;\r\n            }\r\n        }\r\n        window.open(url, '_blank', 'noopener,noreferrer');\r\n    };\r\n\r\n    // Clear search\r\n    const clearSearch = () => {\r\n        setSearchQuery('');\r\n        setResults([]);\r\n        setHasSearched(false);\r\n        setError(null);\r\n    };\r\n\r\n    // Popular searches\r\n    const suggestedSearches = [\r\n        'Elon Musk',\r\n        'Sundar Pichai',\r\n        'Sam Altman',\r\n        'Bill Gates',\r\n        'Mark Zuckerberg',\r\n        'Tim Cook',\r\n        'OpenAI',\r\n        'Tesla'\r\n    ];\r\n\r\n    // ============================================\r\n    // RENDER\r\n    // ============================================\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-white\">\r\n            <div className=\"w-full max-w-3xl mx-auto px-4 pb-24\">\r\n\r\n                {/* ===== HEADER ===== */}\r\n                <header className=\"pt-6 pb-4 sticky top-0 bg-white z-30 border-b border-gray-100\">\r\n                    <div className=\"flex items-center gap-3 mb-4\">\r\n                        <button\r\n                            onClick={() => navigate(-1)}\r\n                            className=\"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-all\"\r\n                        >\r\n                            <ArrowLeft className=\"w-4 h-4 text-gray-600\" />\r\n                        </button>\r\n                        <h1 className=\"text-xl font-semibold text-gray-900\">Search</h1>\r\n                    </div>\r\n\r\n                    {/* ===== SEARCH BAR ===== */}\r\n                    <form onSubmit={handleSearch} className=\"relative\">\r\n                        <div className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\">\r\n                            <Search className=\"w-5 h-5\" />\r\n                        </div>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                            onKeyDown={handleKeyDown}\r\n                            placeholder=\"Search for people, companies, topics...\"\r\n                            autoFocus\r\n                            className=\"w-full h-12 pl-12 pr-28 bg-gray-50 border border-gray-200 rounded-full text-gray-800 placeholder:text-gray-400 text-base focus:bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all\"\r\n                        />\r\n                        <div className=\"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1\">\r\n                            {searchQuery && (\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={clearSearch}\r\n                                    className=\"p-2 text-gray-400 hover:text-gray-600 transition-all\"\r\n                                >\r\n                                    <X className=\"w-4 h-4\" />\r\n                                </button>\r\n                            )}\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={!searchQuery.trim() || isLoading}\r\n                                className=\"px-4 py-2 bg-blue-500 text-white rounded-full text-sm font-medium hover:bg-blue-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n                            >\r\n                                {isLoading ? (\r\n                                    <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                                ) : (\r\n                                    <>\r\n                                        <Search className=\"w-3.5 h-3.5\" />\r\n                                        Search\r\n                                    </>\r\n                                )}\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n                </header>\r\n\r\n                {/* ===== SUGGESTED SEARCHES ===== */}\r\n                {!hasSearched && (\r\n                    <div className=\"py-6\">\r\n                        <p className=\"text-xs font-medium text-gray-500 uppercase tracking-wider mb-3 flex items-center gap-2\">\r\n                            <TrendingUp className=\"w-4 h-4\" />\r\n                            Popular Searches\r\n                        </p>\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                            {suggestedSearches.map(term => (\r\n                                <button\r\n                                    key={term}\r\n                                    onClick={() => {\r\n                                        setSearchQuery(term);\r\n                                        performSearch(term);\r\n                                    }}\r\n                                    className=\"px-4 py-2 bg-gray-100 rounded-full text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all\"\r\n                                >\r\n                                    {term}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* ===== LOADING ===== */}\r\n                {isLoading && (\r\n                    <div className=\"flex flex-col items-center justify-center py-20\">\r\n                        <Loader2 className=\"w-8 h-8 text-blue-500 animate-spin mb-3\" />\r\n                        <p className=\"text-gray-500 text-sm\">Searching the web...</p>\r\n                    </div>\r\n                )}\r\n\r\n                {/* ===== ERROR STATE ===== */}\r\n                {error && !isLoading && (\r\n                    <div className=\"flex flex-col items-center justify-center py-16 px-6\">\r\n                        <div className=\"w-12 h-12 rounded-full bg-orange-50 flex items-center justify-center mb-3\">\r\n                            <AlertCircle className=\"w-6 h-6 text-orange-500\" />\r\n                        </div>\r\n                        <h3 className=\"text-base font-medium text-gray-700 mb-1\">Search Error</h3>\r\n                        <p className=\"text-gray-500 text-sm text-center max-w-md mb-4\">{error}</p>\r\n                        <button\r\n                            onClick={() => performSearch(searchQuery)}\r\n                            className=\"px-5 py-2.5 bg-blue-500 text-white rounded-full text-sm font-medium hover:bg-blue-600 transition-colors\"\r\n                        >\r\n                            Try Again\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {/* ===== SEARCH RESULTS ===== */}\r\n                {!isLoading && !error && results.length > 0 && (\r\n                    <div className=\"py-4\">\r\n                        <p className=\"text-xs text-gray-500 mb-4\">\r\n                            Found <span className=\"font-medium\">{results.length}</span> results for \"<span className=\"font-medium text-gray-700\">{searchQuery}</span>\"\r\n                        </p>\r\n\r\n                        <div className=\"space-y-1\">\r\n                            {results.map((result, index) => (\r\n                                <div\r\n                                    key={`${result.url}-${index}`}\r\n                                    onClick={() => openExternalLink(result.url)}\r\n                                    className=\"group py-4 px-3 -mx-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-all\"\r\n                                >\r\n                                    <div className=\"flex gap-4\">\r\n                                        {/* Content */}\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            {/* Source */}\r\n                                            <div className=\"flex items-center gap-2 mb-1\">\r\n                                                <span className=\"text-xs text-green-700 truncate max-w-[250px]\">\r\n                                                    {result.source}\r\n                                                </span>\r\n                                                <ExternalLink className=\"w-3 h-3 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity\" />\r\n                                            </div>\r\n\r\n                                            {/* Title */}\r\n                                            <h3 className=\"text-base sm:text-lg text-blue-700 group-hover:underline font-normal mb-1 line-clamp-2\">\r\n                                                {result.title}\r\n                                            </h3>\r\n\r\n                                            {/* Snippet */}\r\n                                            <p className=\"text-sm text-gray-600 line-clamp-2 leading-relaxed\">\r\n                                                {result.snippet}\r\n                                            </p>\r\n                                        </div>\r\n\r\n                                        {/* Thumbnail */}\r\n                                        {result.image && (\r\n                                            <div className=\"w-28 h-20 flex-shrink-0 rounded-lg overflow-hidden bg-gray-100\">\r\n                                                <img\r\n                                                    src={result.image}\r\n                                                    alt=\"\"\r\n                                                    className=\"w-full h-full object-cover\"\r\n                                                    onError={(e) => {\r\n                                                        (e.target as HTMLImageElement).style.display = 'none';\r\n                                                    }}\r\n                                                />\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* ===== NO RESULTS ===== */}\r\n                {!isLoading && !error && hasSearched && results.length === 0 && (\r\n                    <div className=\"flex flex-col items-center justify-center py-16 px-6\">\r\n                        <div className=\"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mb-3\">\r\n                            <Search className=\"w-6 h-6 text-gray-400\" />\r\n                        </div>\r\n                        <h3 className=\"text-base font-medium text-gray-700 mb-1\">No results found</h3>\r\n                        <p className=\"text-gray-500 text-sm text-center max-w-md mb-4\">\r\n                            Try searching with different keywords\r\n                        </p>\r\n\r\n                        <div className=\"flex flex-wrap gap-2 justify-center\">\r\n                            {suggestedSearches.slice(0, 4).map(term => (\r\n                                <button\r\n                                    key={term}\r\n                                    onClick={() => {\r\n                                        setSearchQuery(term);\r\n                                        performSearch(term);\r\n                                    }}\r\n                                    className=\"px-3 py-1.5 bg-gray-100 rounded-full text-xs font-medium text-gray-600 hover:bg-gray-200 transition-all\"\r\n                                >\r\n                                    {term}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SearchDirectory;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\SectionView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":43,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\n// Force refresh\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { sections } from '../data/sections';\r\nimport { useLifeTracker } from '../utils/lifeTrackerStore';\r\nimport { ArrowLeft, Plus, Trash2, Calendar } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nconst SectionView: React.FC = () => {\r\n    const { id } = useParams<{ id: string }>();\r\n    const navigate = useNavigate();\r\n    const store = useLifeTracker();\r\n    const section = sections.find(s => s.id === id);\r\n\r\n    const [newLog, setNewLog] = useState('');\r\n\r\n    const sectionLogs = store.state.sectionLogs.filter(l => l.sectionId === id);\r\n\r\n    // Sort logs by date descending (newest first)\r\n    // Assuming date is ISO string or at least comparable\r\n    const sortedLogs = [...sectionLogs].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n\r\n    const addLog = () => {\r\n        if (!newLog.trim() || !id) return;\r\n        store.addSectionLog(id, newLog);\r\n        setNewLog('');\r\n    };\r\n\r\n    const deleteLog = (logId: string) => {\r\n        store.deleteSectionLog(logId);\r\n    };\r\n\r\n    if (!section) return <div>Section not found</div>;\r\n\r\n    // Extract color classes but handle the 'text-' part differently for the bg\r\n    // section.color is like \"bg-orange-100 text-orange-600\"\r\n    const bgClass = section.color.split(' ').find(c => c.startsWith('bg-')) || 'bg-gray-100';\r\n    const textClass = section.color.split(' ').find(c => c.startsWith('text-')) || 'text-gray-800';\r\n\r\n    const formatDate = (dateStr: string) => {\r\n        try {\r\n            return new Date(dateStr).toLocaleDateString();\r\n        } catch (e) {\r\n            return dateStr;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-white\">\r\n            <div className={`p-6 ${bgClass} bg-opacity-40 pb-12 rounded-b-[2.5rem] transition-colors duration-300`}>\r\n                <button\r\n                    onClick={() => navigate('/dashboard')}\r\n                    className=\"p-2 -ml-2 rounded-full hover:bg-black/5 transition-colors mb-6\"\r\n                >\r\n                    <ArrowLeft className=\"w-6 h-6 text-gray-800\" />\r\n                </button>\r\n\r\n                <div className=\"flex items-center gap-4 mb-2\">\r\n                    <div className=\"p-3.5 rounded-2xl bg-white shadow-sm ring-1 ring-black/5\">\r\n                        <section.icon className={`w-8 h-8 ${textClass}`} />\r\n                    </div>\r\n                    <h1 className=\"text-3xl font-bold text-gray-900 tracking-tight\">{section.title}</h1>\r\n                </div>\r\n                <p className=\"text-gray-600 font-medium ml-1 opacity-80\">{section.description}</p>\r\n            </div>\r\n\r\n            <div className=\"p-6 -mt-8\">\r\n                <div className=\"bg-white rounded-2xl shadow-[0_8px_30px_rgb(0,0,0,0.06)] p-2 mb-8 border border-gray-50\">\r\n                    <div className=\"flex items-center gap-3 p-1\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={newLog}\r\n                            onChange={(e) => setNewLog(e.target.value)}\r\n                            placeholder=\"Add a new entry...\"\r\n                            className=\"flex-1 outline-none text-gray-700 placeholder-gray-400 bg-transparent px-2 font-medium\"\r\n                            onKeyDown={(e) => e.key === 'Enter' && addLog()}\r\n                        />\r\n                        <button\r\n                            onClick={addLog}\r\n                            className={`p-3 rounded-xl ${bgClass} ${textClass} hover:brightness-95 transition-all shadow-sm active:scale-95`}\r\n                        >\r\n                            <Plus className=\"w-5 h-5\" />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <h2 className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4 px-2\">History</h2>\r\n\r\n                <div className=\"space-y-3 pb-20\">\r\n                    <AnimatePresence mode=\"popLayout\">\r\n                        {sortedLogs.length === 0 && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                className=\"text-center text-gray-400 py-10 text-sm\"\r\n                            >\r\n                                No activity logged yet. Start doing things!\r\n                            </motion.div>\r\n                        )}\r\n                        {sortedLogs.map((log) => (\r\n                            <motion.div\r\n                                key={log.id}\r\n                                initial={{ opacity: 0, y: 10, scale: 0.98 }}\r\n                                animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                                exit={{ opacity: 0, scale: 0.9, transition: { duration: 0.2 } }}\r\n                                layout\r\n                                className=\"bg-gray-50/80 p-4 rounded-2xl border border-gray-100 flex justify-between items-start group hover:bg-white hover:shadow-sm transition-all\"\r\n                            >\r\n                                <div className=\"flex-1\">\r\n                                    <p className=\"text-gray-800 font-medium leading-relaxed\">{log.text}</p>\r\n                                    <div className=\"flex items-center gap-1.5 mt-2\">\r\n                                        <Calendar className=\"w-3 h-3 text-gray-400\" />\r\n                                        <span className=\"text-xs text-gray-400 font-medium\">{formatDate(log.date)}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => deleteLog(log.id)}\r\n                                    className=\"text-gray-300 hover:text-red-500 hover:bg-red-50 transition-all p-2 rounded-lg opacity-0 group-hover:opacity-100 focus:opacity-100\"\r\n                                >\r\n                                    <Trash2 className=\"w-4 h-4\" />\r\n                                </button>\r\n                            </motion.div>\r\n                        ))}\r\n                    </AnimatePresence>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SectionView;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\SkimNews.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\Stats.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":116,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":119,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[344,347],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[344,347],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":267,"column":106,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":267,"endColumn":109,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15073,15076],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15073,15076],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n    Moon, Sun, Bell, User,\r\n    Brain, Zap, CheckCircle2, Clock\r\n} from 'lucide-react';\r\nimport { useLifeTracker } from '../utils/lifeTrackerStore';\r\n\r\n// --- Components ---\r\n\r\nconst StatCard = ({ label, value, progress, icon: Icon }: { label: string, value: string, progress: number, icon?: any }) => (\r\n    <div className={`p-5 rounded-[1.5rem] flex flex-col justify-between h-36 relative overflow-hidden transition-all duration-300 group hover:scale-[1.02] ${label === 'Focus Hours' ? 'bg-black text-white' : 'bg-white text-gray-900 border border-gray-100 shadow-sm'}`}>\r\n        <div className=\"flex justify-between items-start\">\r\n            <div>\r\n                <h3 className={`text-4xl font-bold tracking-tight mb-1 ${label === 'Focus Hours' ? 'text-white' : 'text-gray-900'}`}>{value}</h3>\r\n                <p className={`text-xs font-medium ${label === 'Focus Hours' ? 'text-gray-400' : 'text-gray-500'}`}>{label}</p>\r\n            </div>\r\n            {Icon && <Icon className={`w-5 h-5 ${label === 'Focus Hours' ? 'text-gray-400' : 'text-gray-400'}`} />}\r\n        </div>\r\n\r\n        <div className=\"w-full\">\r\n            <div className=\"flex justify-between text-[10px] font-medium mb-1 opacity-60\">\r\n                <span>0%</span>\r\n                <span>{progress}%</span>\r\n            </div>\r\n            <div className={`h-1.5 w-full rounded-full ${label === 'Focus Hours' ? 'bg-gray-800' : 'bg-gray-100'}`}>\r\n                <div\r\n                    className={`h-full rounded-full ${label === 'Focus Hours' ? 'bg-white' : 'bg-black'} opacity-80`}\r\n                    style={{ width: `${progress}%` }}\r\n                ></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nconst ChartToggle = () => (\r\n    <div className=\"flex items-center bg-gray-100 rounded-full p-1\">\r\n        {['Monthly', 'Weekly', 'Today'].map((t) => (\r\n            <button\r\n                key={t}\r\n                className={`text-[10px] font-bold px-3 py-1.5 rounded-full transition-all ${t === 'Weekly' ? 'bg-black text-white shadow-sm' : 'text-gray-500 hover:text-gray-900'}`}\r\n            >\r\n                {t}\r\n            </button>\r\n        ))}\r\n    </div>\r\n);\r\n\r\nconst BarChartMock = () => (\r\n    <div className=\"h-40 flex items-end justify-between gap-3 px-2 mt-6\">\r\n        {[30, 65, 45, 80, 55, 70, 40].map((h, i) => (\r\n            <div key={i} className=\"flex flex-col items-center gap-2 w-full group cursor-pointer\">\r\n                <div\r\n                    className={`w-full max-w-[12px] rounded-full transition-all duration-300 ${i === 3 ? 'bg-black' : 'bg-gray-200 group-hover:bg-gray-300'}`}\r\n                    style={{ height: `${h}%` }}\r\n                ></div>\r\n                <span className=\"text-[10px] text-gray-400 font-bold\">{['S', 'M', 'T', 'W', 'T', 'F', 'S'][i]}</span>\r\n            </div>\r\n        ))}\r\n    </div>\r\n);\r\n\r\nconst AreaChartMock = () => (\r\n    <div className=\"h-48 relative mt-4 group\">\r\n        <svg viewBox=\"0 0 100 50\" className=\"w-full h-full overflow-visible\" preserveAspectRatio=\"none\">\r\n            {/* Grid lines */}\r\n            <line x1=\"0\" y1=\"10\" x2=\"100\" y2=\"10\" stroke=\"#f3f4f6\" strokeWidth=\"0.5\" />\r\n            <line x1=\"0\" y1=\"25\" x2=\"100\" y2=\"25\" stroke=\"#f3f4f6\" strokeWidth=\"0.5\" />\r\n            <line x1=\"0\" y1=\"40\" x2=\"100\" y2=\"40\" stroke=\"#f3f4f6\" strokeWidth=\"0.5\" />\r\n\r\n            {/* Area Path */}\r\n            <path\r\n                d=\"M0,50 L0,35 Q20,32 30,38 T60,20 T100,10 V50 Z\"\r\n                fill=\"url(#gradient)\"\r\n                className=\"transition-all duration-500\"\r\n            />\r\n            {/* Line Path */}\r\n            <path\r\n                d=\"M0,35 Q20,32 30,38 T60,20 T100,10\"\r\n                fill=\"none\"\r\n                stroke=\"black\"\r\n                strokeWidth=\"0.8\"\r\n                vectorEffect=\"non-scaling-stroke\"\r\n            />\r\n\r\n            <defs>\r\n                <linearGradient id=\"gradient\" x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\">\r\n                    <stop offset=\"0%\" stopColor=\"#000\" stopOpacity=\"0.1\" />\r\n                    <stop offset=\"100%\" stopColor=\"#000\" stopOpacity=\"0\" />\r\n                </linearGradient>\r\n            </defs>\r\n\r\n            {/* Active Point */}\r\n            <circle cx=\"100\" cy=\"10\" r=\"1.5\" fill=\"white\" stroke=\"black\" strokeWidth=\"0.5\" />\r\n        </svg>\r\n\r\n        {/* Y-Axis Labels */}\r\n        <div className=\"absolute top-0 left-0 h-full flex flex-col justify-between text-[8px] text-gray-400 font-bold pointer-events-none -translate-x-4\">\r\n            <span>20k</span>\r\n            <span>15k</span>\r\n            <span>10k</span>\r\n            <span>0</span>\r\n        </div>\r\n    </div>\r\n);\r\n\r\n\r\n// --- Helper Components Removed ---\r\n\r\n\r\nconst Stats: React.FC = () => {\r\n    const [activeTab, setActiveTab] = useState('Overview');\r\n    const [isDarkMode, setIsDarkMode] = useState(false);\r\n\r\n    const store = useLifeTracker();\r\n    const state = store.getState();\r\n    const overview = store.getDashboardStats();\r\n    const { userProfile, dailyTasks } = state;\r\n\r\n    // Calculate metrics\r\n    // Using meditation minutes as a proxy for focus for now since other modules don't track raw time\r\n    const totalFocusMinutes = overview.meditation.weekMinutes;\r\n    const totalFocusHours = (totalFocusMinutes / 60).toFixed(1);\r\n\r\n    // Calculate progress for life score (assuming 100 max)\r\n    const lifeScoreProgress = Math.min(overview.lifeScore, 100);\r\n\r\n    // Calculate task completion rate\r\n    const taskCompletionRate = overview.tasks.total > 0\r\n        ? Math.round((overview.tasks.completed / overview.tasks.total) * 100)\r\n        : 0;\r\n\r\n    const statsCards = [\r\n        { label: 'Focus Hours', value: totalFocusHours, progress: Math.round(Math.min((totalFocusMinutes / (8 * 60)) * 100, 100)), icon: Clock },\r\n        { label: 'Tasks Done', value: overview.tasks.completed.toString(), progress: taskCompletionRate, icon: CheckCircle2 },\r\n        { label: 'Life Score', value: overview.lifeScore.toString(), progress: lifeScoreProgress, icon: Zap },\r\n        { label: 'Active Streaks', value: overview.activeStreaks.length.toString(), progress: Math.round((overview.activeStreaks.length / 3) * 100), icon: Brain },\r\n    ];\r\n\r\n    return (\r\n        <div className={`min-h-screen pb-24 font-sans transition-colors duration-500 ${isDarkMode ? 'bg-[#111] text-white' : 'bg-[#FAFAFA] text-gray-900'}`}>\r\n\r\n            {/* Header */}\r\n            <header className={`sticky top-0 z-40 px-6 py-4 flex items-center justify-between backdrop-blur-xl ${isDarkMode ? 'bg-[#111]/90 border-gray-800' : 'bg-[#FAFAFA]/90 border-gray-100'} border-b`}>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <User className=\"w-8 h-8 p-1.5 bg-gray-200 rounded-full text-gray-600\" />\r\n                    <div>\r\n                        <h1 className=\"text-lg font-bold leading-tight\">Analytics</h1>\r\n                        <p className=\"text-[10px] font-semibold text-gray-400\">Welcome back, {userProfile.firstName || 'User'}</p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-3\">\r\n                    <button\r\n                        onClick={() => setIsDarkMode(!isDarkMode)}\r\n                        className={`p-2 rounded-full transition-colors ${isDarkMode ? 'bg-gray-800 text-white' : 'bg-white text-gray-600 shadow-sm border border-gray-100'}`}\r\n                    >\r\n                        {isDarkMode ? <Moon className=\"w-4 h-4\" /> : <Sun className=\"w-4 h-4\" />}\r\n                    </button>\r\n                    <button className={`p-2 rounded-full transition-colors ${isDarkMode ? 'bg-gray-800 text-white' : 'bg-white text-gray-600 shadow-sm border border-gray-100'}`}>\r\n                        <Bell className=\"w-4 h-4\" />\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            {/* Inner Content Tabs with Segmented Control vibe */}\r\n            <div className=\"px-6 py-4\">\r\n                <div className={`flex p-1 rounded-2xl mb-6 ${isDarkMode ? 'bg-gray-900 border-gray-800' : 'bg-white border-gray-100 shadow-sm border'}`}>\r\n                    {['Overview', 'Analytics', 'Wallets', 'Review'].map(tab => (\r\n                        <button\r\n                            key={tab}\r\n                            onClick={() => setActiveTab(tab)}\r\n                            className={`flex-1 py-3 rounded-xl text-xs font-bold transition-all duration-300 ${activeTab === tab ? (isDarkMode ? 'bg-gray-800 text-white' : 'bg-black text-white shadow-lg shadow-black/20') : 'text-gray-400'}`}\r\n                        >\r\n                            {tab}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n                {activeTab === 'Overview' && (\r\n                    <div className=\"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in\">\r\n                        {/* Stats Grid */}\r\n                        <div className=\"grid grid-cols-2 gap-3\">\r\n                            {statsCards.map((stat, i) => (\r\n                                <StatCard key={i} {...stat} />\r\n                            ))}\r\n                        </div>\r\n\r\n                        {/* Revenue Chart */}\r\n                        <div className={`p-5 rounded-[1.5rem] ${isDarkMode ? 'bg-gray-900 border-gray-800' : 'bg-white border border-gray-100 shadow-sm'}`}>\r\n                            <div className=\"flex items-center justify-between mb-2\">\r\n                                <h3 className=\"font-bold text-sm\">Productivity Trend</h3>\r\n                                <ChartToggle />\r\n                            </div>\r\n                            <AreaChartMock />\r\n                        </div>\r\n\r\n                        {/* Order List */}\r\n                        <div className={`p-5 rounded-[1.5rem] ${isDarkMode ? 'bg-gray-900 border-gray-800' : 'bg-white border border-gray-100 shadow-sm'}`}>\r\n                            <div className=\"flex items-center justify-between mb-4\">\r\n                                <h3 className=\"font-bold text-sm\">Today's Tasks</h3>\r\n                                <div className=\"text-xs font-bold text-gray-400\">{dailyTasks.length} tasks</div>\r\n                            </div>\r\n                            <div className=\"flex flex-col gap-1\">\r\n                                {dailyTasks.length > 0 ? dailyTasks.slice(0, 5).map(task => (\r\n                                    <div key={task.id} className=\"flex items-center justify-between py-3 border-b border-gray-50 last:border-0 hover:bg-gray-50/50 rounded-xl px-2 transition-colors -mx-2\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div className={`w-8 h-8 rounded-full flex items-center justify-center text-xs font-black ${task.completed ? 'bg-green-100 text-green-600' : 'bg-gray-100 text-gray-400'}`}>\r\n                                                <CheckCircle2 className=\"w-4 h-4\" />\r\n                                            </div>\r\n                                            <div>\r\n                                                <h4 className={`text-sm font-bold ${task.completed ? 'text-gray-400 line-through' : 'text-gray-900'}`}>{task.title}</h4>\r\n                                                <p className=\"text-[10px] text-gray-400 font-medium\">{task.category}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                )) : (\r\n                                    <div className=\"text-center py-6 text-gray-400 text-xs italic\">No tasks for today yet.</div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {activeTab === 'Analytics' && (\r\n                    <div className=\"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in\">\r\n                        {/* Chart: Orders */}\r\n                        <div className={`p-5 rounded-[1.5rem] ${isDarkMode ? 'bg-gray-900 border-gray-800' : 'bg-white border border-gray-100 shadow-sm'}`}>\r\n                            <div className=\"flex items-center justify-between mb-4\">\r\n                                <div>\r\n                                    <h3 className=\"font-bold text-sm\">Life Score History</h3>\r\n                                    <div className=\"flex items-center gap-4 mt-2\">\r\n                                        <div>\r\n                                            <p className=\"text-[10px] text-gray-400 font-bold uppercase\">Total Score</p>\r\n                                            <p className=\"text-xl font-black\">{overview.lifeScore}</p>\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"text-[10px] text-gray-400 font-bold uppercase\">Avg. Score</p>\r\n                                            <p className=\"text-xl font-black\">--</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex flex-col items-end gap-2\">\r\n                                    <ChartToggle />\r\n                                    <div className=\"p-1 px-2 bg-green-50 text-green-600 rounded-lg text-[10px] font-bold\">+12% vs last week</div>\r\n                                </div>\r\n                            </div>\r\n                            <AreaChartMock /> {/* Reusing area chart for now as visual placeholder, distinct from Bar */}\r\n                        </div>\r\n\r\n                        <div className={`p-5 rounded-[1.5rem] ${isDarkMode ? 'bg-gray-900 border-gray-800' : 'bg-white border border-gray-100 shadow-sm'}`}>\r\n                            <div className=\"flex items-center justify-between mb-2\">\r\n                                <h3 className=\"font-bold text-sm\">Activity Frequency</h3>\r\n                                <ChartToggle />\r\n                            </div>\r\n                            <BarChartMock />\r\n                        </div>\r\n\r\n\r\n                        {/* Trending Items */}\r\n                        <div className={`p-5 rounded-[1.5rem] ${isDarkMode ? 'bg-gray-900 border-gray-800' : 'bg-white border border-gray-100 shadow-sm'}`}>\r\n                            <div className=\"flex items-center justify-between mb-4\">\r\n                                <h3 className=\"font-bold text-sm\">Active Streaks</h3>\r\n                                <div className=\"bg-gray-100 rounded-lg p-1\">\r\n                                    <Zap className=\"w-4 h-4 text-gray-500\" />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex flex-col gap-1\">\r\n                                {overview.activeStreaks.length > 0 ? overview.activeStreaks.map((streak: any, i: number) => (\r\n                                    <div key={i} className=\"flex items-center justify-between py-4 border-b border-gray-50 last:border-0\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div className=\"w-10 h-10 rounded-lg bg-orange-100 text-orange-600 flex items-center justify-center\">\r\n                                                <Zap className=\"w-5 h-5\" />\r\n                                            </div>\r\n                                            <div>\r\n                                                <h4 className=\"text-sm font-bold text-gray-900\">{streak.name}</h4>\r\n                                                <p className=\"text-[10px] text-gray-400 font-medium\">Consistent Habit</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"text-right\">\r\n                                            <div className=\"font-bold text-sm\">{streak.count} Days</div>\r\n                                            <div className=\"text-[10px] font-bold text-green-500 flex items-center justify-end gap-0.5\">\r\n                                                Keep it up!\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                )) : (\r\n                                    <div className=\"text-center py-6 text-gray-400 text-xs italic\">No active streaks. Start building one today!</div>\r\n                                )}\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Simulated Inner Navigation (Visual Only, since we have main app nav) \r\n                User requested \"Bottom navigation bar\". \r\n                The main app has one. I added inner tabs at TOP for this section to be distinct.\r\n            */}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Stats;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\TaskManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\UserMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\WelcomeScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\WorkoutCategories.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\WorkoutDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\board\\NewsWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\board\\NotesWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\board\\QuoteWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\board\\SearchWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\board\\StatsWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\board\\TimeWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\board\\TimerWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\board\\TodoWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\board\\WeatherWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\calculators\\SleepCalculator.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\calculators\\SleepCalculator.tsx:35:13\n  33 |     useEffect(() => {\n  34 |         if (isOpen) {\n> 35 |             setLocalSchedule({\n     |             ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  36 |                 sleepTime: schedule.sleepTime,\n  37 |                 wakeTime: schedule.wakeTime,\n  38 |                 enabled: schedule.enabled,","line":35,"column":13,"nodeType":null,"endLine":35,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":164,"column":83,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":86,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9008,9011],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9008,9011],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Moon, AlarmClock, Bed, Sunrise, Zap, X, Brain, ChevronRight, Bell, Settings } from 'lucide-react';\r\nimport { useSleepMonitoring } from '../../hooks/useSleepMonitoring';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nconst SleepCalculator: React.FC = () => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [activeTab, setActiveTab] = useState<'tracker' | 'schedule' | 'calculator'>('tracker');\r\n    const [calcWakeTime, setCalcWakeTime] = useState('07:00');\r\n\r\n    // Local state for schedule (to avoid constant re-renders during editing)\r\n    const [localSchedule, setLocalSchedule] = useState({\r\n        sleepTime: '23:00',\r\n        wakeTime: '07:00',\r\n        enabled: true,\r\n        bedReminder: true,\r\n        wakeUpAlarm: true\r\n    });\r\n\r\n    const {\r\n        isSleeping: isTracking,\r\n        todayRecord,\r\n        stats,\r\n        schedule,\r\n        updateSchedule,\r\n        startSleep,\r\n        endSleep: wakeUp,\r\n        getRecommendedBedtimes,\r\n        formatDuration\r\n    } = useSleepMonitoring();\r\n\r\n    // Sync local schedule with global state on open\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            setLocalSchedule({\r\n                sleepTime: schedule.sleepTime,\r\n                wakeTime: schedule.wakeTime,\r\n                enabled: schedule.enabled,\r\n                bedReminder: schedule.bedReminder ?? true,\r\n                wakeUpAlarm: schedule.wakeUpAlarm ?? true\r\n            });\r\n        }\r\n    }, [isOpen, schedule]);\r\n\r\n    const handleSaveSchedule = () => {\r\n        updateSchedule(localSchedule);\r\n        // Optional: show a toast or feedback\r\n    };\r\n\r\n    const lastNightDuration = todayRecord?.durationHours;\r\n    const averageDuration = stats?.averageDuration;\r\n    const sleepStreak = stats?.streak || 0;\r\n\r\n    const getQualityScore = (q: string | undefined) => {\r\n        if (!q) return 0;\r\n        switch (q) {\r\n            case 'excellent': return 100;\r\n            case 'good': return 80;\r\n            case 'fair': return 60;\r\n            case 'poor': return 40;\r\n            default: return 0;\r\n        }\r\n    };\r\n    const sleepQuality = getQualityScore(todayRecord?.quality);\r\n\r\n    const recommendedBedtimes = getRecommendedBedtimes(calcWakeTime);\r\n\r\n    // Variants for animations\r\n    const cardVariants = {\r\n        hidden: { opacity: 0, y: 20, scale: 0.95 },\r\n        visible: { opacity: 1, y: 0, scale: 1, transition: { type: 'spring' as const, stiffness: 300, damping: 30 } },\r\n        exit: { opacity: 0, y: 20, scale: 0.95 }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"h-44 w-full\">\r\n                {!isOpen && (\r\n                    <motion.button\r\n                        layoutId=\"sleep-calculator-card\"\r\n                        onClick={() => setIsOpen(true)}\r\n                        className=\"w-full h-full bg-white dark:bg-[#1A1A1A] rounded-[2rem] p-6 border border-gray-100 dark:border-gray-800 shadow-sm flex flex-col justify-between group relative overflow-hidden text-left hover:shadow-xl transition-all duration-300\"\r\n                    >\r\n                        {/* Decorative Background */}\r\n                        <div className=\"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 rounded-bl-[4rem] group-hover:bg-indigo-500/20 transition-colors duration-500\" />\r\n                        <div className=\"absolute bottom-[-10%] left-[-10%] w-24 h-24 bg-purple-500/5 rounded-full blur-2xl group-hover:bg-purple-500/10 transition-colors\" />\r\n\r\n                        <div className=\"flex justify-between items-start w-full relative z-10\">\r\n                            <div className=\"p-3 rounded-2xl bg-indigo-50 dark:bg-indigo-500/10 text-indigo-600 dark:text-indigo-400\">\r\n                                <Moon className=\"w-5 h-5 fill-current\" />\r\n                            </div>\r\n                            {isTracking && (\r\n                                <div className=\"flex items-center gap-1.5 px-3 py-1 rounded-full bg-indigo-100 dark:bg-indigo-500/20 text-indigo-600 dark:text-indigo-400 text-[10px] font-bold uppercase tracking-wider shadow-sm\">\r\n                                    <span className=\"w-1.5 h-1.5 rounded-full bg-indigo-500 animate-pulse\" />\r\n                                    Sleeping\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"relative z-10\">\r\n                            <div className=\"mb-4\">\r\n                                <span className=\"text-4xl font-black text-gray-900 dark:text-white tracking-tighter block leading-none mb-1\">\r\n                                    {isTracking ? 'Zzz...' : (lastNightDuration ? formatDuration(lastNightDuration) : '--h --m')}\r\n                                </span>\r\n                                <span className=\"text-xs font-bold text-gray-400 uppercase tracking-wider flex items-center gap-1\">\r\n                                    {isTracking ? 'Active Session' : 'Last Night'}\r\n                                    <ChevronRight className=\"w-3 h-3 group-hover:translate-x-1 transition-transform\" />\r\n                                </span>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center gap-4 text-[10px] font-bold text-gray-400 uppercase tracking-wider\">\r\n                                <div className=\"flex items-center gap-1.5 bg-gray-50 dark:bg-gray-800/50 px-2 py-1 rounded-lg\">\r\n                                    <Zap className=\"w-3 h-3 text-yellow-500 fill-current\" />\r\n                                    {sleepStreak} Day Streak\r\n                                </div>\r\n                                <div className=\"flex items-center gap-1.5 bg-gray-50 dark:bg-gray-800/50 px-2 py-1 rounded-lg\">\r\n                                    <Brain className=\"w-3 h-3 text-purple-500 fill-current\" />\r\n                                    {sleepQuality}% Quality\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </motion.button>\r\n                )}\r\n            </div>\r\n\r\n            <AnimatePresence>\r\n                {isOpen && (\r\n                    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 dark:bg-black/80 backdrop-blur-md\">\r\n                        <motion.div\r\n                            layoutId=\"sleep-calculator-card\"\r\n                            variants={cardVariants}\r\n                            initial=\"hidden\"\r\n                            animate=\"visible\"\r\n                            exit=\"exit\"\r\n                            onClick={(e) => e.stopPropagation()}\r\n                            className=\"w-full max-w-md bg-white dark:bg-[#1A1A1A] rounded-[2.5rem] shadow-2xl overflow-hidden border border-gray-100 dark:border-gray-800 relative\"\r\n                        >\r\n                            {/* Header */}\r\n                            <div className=\"p-6 pb-4 flex items-center justify-between border-b border-gray-100 dark:border-gray-800\">\r\n                                <div>\r\n                                    <h2 className=\"text-2xl font-black text-gray-900 dark:text-white tracking-tight flex items-center gap-2\">\r\n                                        Sleep Tech <span className=\"text-indigo-500 text-sm font-bold bg-indigo-50 dark:bg-indigo-500/10 px-2 py-0.5 rounded-md\">PRO</span>\r\n                                    </h2>\r\n                                    <p className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mt-1\">Recovery & Cycle Optimization</p>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => setIsOpen(false)}\r\n                                    className=\"p-2.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors group\"\r\n                                >\r\n                                    <X className=\"w-5 h-5 text-gray-500 group-hover:text-gray-900 dark:group-hover:text-white transition-colors\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Tabs */}\r\n                            <div className=\"px-6 pt-2 pb-0\">\r\n                                <div className=\"flex gap-1 bg-gray-100 dark:bg-gray-800 p-1.5 rounded-2xl\">\r\n                                    {[\r\n                                        { id: 'tracker', icon: Moon, label: 'Tracker' },\r\n                                        { id: 'schedule', icon: AlarmClock, label: 'Schedule' },\r\n                                        { id: 'calculator', icon: Sunrise, label: 'Calculator' }\r\n                                    ].map((tab) => (\r\n                                        <button\r\n                                            key={tab.id}\r\n                                            onClick={() => setActiveTab(tab.id as any)}\r\n                                            className={`flex-1 py-3 rounded-xl text-xs font-bold uppercase tracking-wider transition-all flex items-center justify-center gap-2 ${activeTab === tab.id\r\n                                                ? 'bg-white dark:bg-[#252525] text-indigo-600 dark:text-indigo-400 shadow-md transform scale-[1.02]'\r\n                                                : 'text-gray-500 hover:text-gray-700 dark:hover:text-gray-300'\r\n                                                }`}\r\n                                        >\r\n                                            <tab.icon className={`w-4 h-4 ${activeTab === tab.id ? 'fill-current' : ''}`} />\r\n                                            {tab.label}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"p-6 h-[400px] overflow-y-auto no-scrollbar\">\r\n                                <AnimatePresence mode=\"wait\">\r\n                                    {activeTab === 'tracker' && (\r\n                                        <motion.div\r\n                                            key=\"tracker\"\r\n                                            initial={{ opacity: 0, x: -20 }}\r\n                                            animate={{ opacity: 1, x: 0 }}\r\n                                            exit={{ opacity: 0, x: 20 }}\r\n                                            className=\"space-y-6\"\r\n                                        >\r\n                                            {/* Main Status Circle */}\r\n                                            <div className=\"flex justify-center py-4 relative\">\r\n                                                {/* Outer Glow */}\r\n                                                <div className={`absolute inset-0 bg-gradient-to-b ${isTracking ? 'from-indigo-500/20 to-purple-500/20' : 'from-gray-200/20 to-gray-200/10'} rounded-full blur-3xl`} />\r\n\r\n                                                <div className=\"w-48 h-48 rounded-full bg-gradient-to-br from-[#F5F5F7] to-[#E8E8E8] dark:from-[#2A2A2A] dark:to-[#1A1A1A] flex items-center justify-center shadow-[inset_0_-8px_12px_rgba(0,0,0,0.1),0_20px_40px_rgba(0,0,0,0.2)] dark:shadow-[inset_0_-8px_12px_rgba(0,0,0,0.3),0_20px_40px_rgba(0,0,0,0.5)] relative z-10 border border-white/50 dark:border-white/5\">\r\n                                                    <div className=\"absolute inset-4 rounded-full border-4 border-indigo-500/10 border-t-indigo-500 animate-[spin_8s_linear_infinite]\" />\r\n                                                    <div className=\"text-center relative z-20\">\r\n                                                        <Moon className={`w-8 h-8 mx-auto mb-2 text-indigo-500 ${isTracking ? 'animate-pulse' : ''}`} />\r\n                                                        <span className=\"text-4xl font-black tracking-tighter block text-gray-900 dark:text-white\">\r\n                                                            {isTracking ? 'Active' : (lastNightDuration ? formatDuration(lastNightDuration) : '--:--')}\r\n                                                        </span>\r\n                                                        <span className=\"text-[10px] font-bold uppercase tracking-widest text-gray-400 mt-1 block\">\r\n                                                            {isTracking ? 'Monitoring Sleep' : 'Total Duration'}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            {/* Stats Grid */}\r\n                                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                                <div className=\"bg-gray-50 dark:bg-[#252525] p-5 rounded-3xl border border-gray-100 dark:border-white/5\">\r\n                                                    <div className=\"flex items-center gap-2 mb-2 text-gray-400 text-[10px] font-bold uppercase tracking-wider\">\r\n                                                        <Zap className=\"w-3 h-3 text-yellow-500\" /> Quality\r\n                                                    </div>\r\n                                                    <p className=\"text-2xl font-black text-gray-900 dark:text-white\">\r\n                                                        {sleepQuality}<span className=\"text-sm text-gray-400 ml-1 font-bold\">%</span>\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div className=\"bg-gray-50 dark:bg-[#252525] p-5 rounded-3xl border border-gray-100 dark:border-white/5\">\r\n                                                    <div className=\"flex items-center gap-2 mb-2 text-gray-400 text-[10px] font-bold uppercase tracking-wider\">\r\n                                                        <Brain className=\"w-3 h-3 text-purple-500\" /> Average\r\n                                                    </div>\r\n                                                    <p className=\"text-2xl font-black text-gray-900 dark:text-white\">\r\n                                                        {averageDuration ? formatDuration(averageDuration) : '--h'}\r\n                                                    </p>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            {/* Action Button */}\r\n                                            <button\r\n                                                onClick={isTracking ? wakeUp : startSleep}\r\n                                                className={`w-full py-5 rounded-2xl flex items-center justify-center gap-3 text-sm font-bold text-white transition-all shadow-xl hover:scale-[1.02] active:scale-[0.98] ${isTracking\r\n                                                    ? 'bg-gradient-to-r from-yellow-500 to-orange-500 shadow-orange-500/20'\r\n                                                    : 'bg-gradient-to-r from-indigo-600 to-purple-600 shadow-indigo-500/30'\r\n                                                    }`}\r\n                                            >\r\n                                                {isTracking ? <Sunrise className=\"w-5 h-5\" /> : <Bed className=\"w-5 h-5\" />}\r\n                                                {isTracking ? 'WAKE UP' : 'GO TO SLEEP'}\r\n                                            </button>\r\n                                        </motion.div>\r\n                                    )}\r\n\r\n                                    {activeTab === 'schedule' && (\r\n                                        <motion.div\r\n                                            key=\"schedule\"\r\n                                            initial={{ opacity: 0, x: 20 }}\r\n                                            animate={{ opacity: 1, x: 0 }}\r\n                                            exit={{ opacity: 0, x: -20 }}\r\n                                            className=\"space-y-6\"\r\n                                        >\r\n                                            <div className=\"bg-indigo-50 dark:bg-indigo-500/10 p-5 rounded-3xl border border-indigo-100 dark:border-indigo-500/20\">\r\n                                                <div className=\"flex items-start gap-3\">\r\n                                                    <div className=\"p-2.5 bg-white dark:bg-indigo-500/20 rounded-xl shadow-sm text-indigo-600 dark:text-indigo-400\">\r\n                                                        <Settings className=\"w-5 h-5\" />\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <h3 className=\"font-bold text-gray-900 dark:text-white text-base\">Sleep Schedule</h3>\r\n                                                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1 leading-relaxed\">\r\n                                                            Set your target sleep and wake times. We'll remind you to wind down.\r\n                                                        </p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div className=\"space-y-4\">\r\n                                                {/* Toggles */}\r\n                                                <div className=\"flex justify-between items-center bg-gray-50 dark:bg-[#252525] p-5 rounded-3xl border border-gray-100 dark:border-white/5\">\r\n                                                    <div className=\"flex items-center gap-3\">\r\n                                                        <div className={`p-2 rounded-full ${localSchedule.bedReminder ? 'bg-indigo-100 text-indigo-600' : 'bg-gray-200 text-gray-500'}`}>\r\n                                                            <Moon className=\"w-4 h-4\" />\r\n                                                        </div>\r\n                                                        <div className=\"flex flex-col\">\r\n                                                            <span className=\"text-sm font-bold text-gray-900 dark:text-white\">Bed Reminder</span>\r\n                                                            <span className=\"text-[10px] text-gray-500 uppercase tracking-wide\">30 min before</span>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={() => setLocalSchedule(s => ({ ...s, bedReminder: !s.bedReminder }))}\r\n                                                        className={`w-12 h-7 rounded-full transition-colors relative ${localSchedule.bedReminder ? 'bg-indigo-500' : 'bg-gray-300 dark:bg-gray-600'}`}\r\n                                                    >\r\n                                                        <div className={`absolute top-1 w-5 h-5 rounded-full bg-white transition-all shadow-sm ${localSchedule.bedReminder ? 'left-6' : 'left-1'}`} />\r\n                                                    </button>\r\n                                                </div>\r\n\r\n                                                <div className=\"flex justify-between items-center bg-gray-50 dark:bg-[#252525] p-5 rounded-3xl border border-gray-100 dark:border-white/5\">\r\n                                                    <div className=\"flex items-center gap-3\">\r\n                                                        <div className={`p-2 rounded-full ${localSchedule.wakeUpAlarm ? 'bg-orange-100 text-orange-600' : 'bg-gray-200 text-gray-500'}`}>\r\n                                                            <Bell className=\"w-4 h-4\" />\r\n                                                        </div>\r\n                                                        <div className=\"flex flex-col\">\r\n                                                            <span className=\"text-sm font-bold text-gray-900 dark:text-white\">Wake Up Alarm</span>\r\n                                                            <span className=\"text-[10px] text-gray-500 uppercase tracking-wide\">Smart Wake</span>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={() => setLocalSchedule(s => ({ ...s, wakeUpAlarm: !s.wakeUpAlarm }))}\r\n                                                        className={`w-12 h-7 rounded-full transition-colors relative ${localSchedule.wakeUpAlarm ? 'bg-orange-500' : 'bg-gray-300 dark:bg-gray-600'}`}\r\n                                                    >\r\n                                                        <div className={`absolute top-1 w-5 h-5 rounded-full bg-white transition-all shadow-sm ${localSchedule.wakeUpAlarm ? 'left-6' : 'left-1'}`} />\r\n                                                    </button>\r\n                                                </div>\r\n\r\n                                                {/* Time Pickers */}\r\n                                                <div className=\"grid grid-cols-2 gap-4 mt-4\">\r\n                                                    <div className=\"bg-gray-50 dark:bg-[#252525] p-4 rounded-3xl border border-gray-100 dark:border-white/5\">\r\n                                                        <label className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block\">Sleep Time</label>\r\n                                                        <input\r\n                                                            type=\"time\"\r\n                                                            value={localSchedule.sleepTime}\r\n                                                            onChange={(e) => setLocalSchedule(s => ({ ...s, sleepTime: e.target.value }))}\r\n                                                            className=\"w-full bg-transparent text-xl font-black text-gray-900 dark:text-white focus:outline-none\"\r\n                                                        />\r\n                                                    </div>\r\n                                                    <div className=\"bg-gray-50 dark:bg-[#252525] p-4 rounded-3xl border border-gray-100 dark:border-white/5\">\r\n                                                        <label className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block\">Wake Time</label>\r\n                                                        <input\r\n                                                            type=\"time\"\r\n                                                            value={localSchedule.wakeTime}\r\n                                                            onChange={(e) => setLocalSchedule(s => ({ ...s, wakeTime: e.target.value }))}\r\n                                                            className=\"w-full bg-transparent text-xl font-black text-gray-900 dark:text-white focus:outline-none\"\r\n                                                        />\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <button\r\n                                                    onClick={handleSaveSchedule}\r\n                                                    className=\"w-full py-4 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-2xl font-bold mt-4 shadow-lg hover:shadow-xl transition-all active:scale-95\"\r\n                                                >\r\n                                                    Save Settings\r\n                                                </button>\r\n                                            </div>\r\n                                        </motion.div>\r\n                                    )}\r\n\r\n                                    {activeTab === 'calculator' && (\r\n                                        <motion.div\r\n                                            key=\"calculator\"\r\n                                            initial={{ opacity: 0, x: 20 }}\r\n                                            animate={{ opacity: 1, x: 0 }}\r\n                                            exit={{ opacity: 0, x: -20 }}\r\n                                            className=\"space-y-6\"\r\n                                        >\r\n                                            <div className=\"bg-gradient-to-br from-indigo-500 to-purple-600 p-6 rounded-3xl text-white shadow-lg shadow-indigo-500/20\">\r\n                                                <label className=\"text-xs font-bold text-indigo-100 uppercase tracking-widest flex items-center gap-2 mb-3\">\r\n                                                    <Sunrise className=\"w-4 h-4\" /> I want to wake up at\r\n                                                </label>\r\n                                                <div className=\"flex items-center gap-4\">\r\n                                                    <input\r\n                                                        type=\"time\"\r\n                                                        value={calcWakeTime}\r\n                                                        onChange={(e) => setCalcWakeTime(e.target.value)}\r\n                                                        className=\"bg-white/10 text-5xl font-black text-white focus:outline-none rounded-xl px-2 py-1 w-full backdrop-blur-sm border border-white/20\"\r\n                                                    />\r\n                                                </div>\r\n                                                <p className=\"text-xs text-indigo-100 mt-4 leading-relaxed opacity-80\">\r\n                                                    Cycles are calculated typically around 90 minutes. Waking up at the end of a cycle makes you feel refreshed.\r\n                                                </p>\r\n                                            </div>\r\n\r\n                                            <div className=\"space-y-3\">\r\n                                                <p className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1\">Best times to fall asleep</p>\r\n                                                {recommendedBedtimes.map((rec, i) => (\r\n                                                    <motion.div\r\n                                                        key={i}\r\n                                                        initial={{ opacity: 0, y: 10 }}\r\n                                                        animate={{ opacity: 1, y: 0 }}\r\n                                                        transition={{ delay: i * 0.1 }}\r\n                                                        className={`flex items-center justify-between p-4 rounded-2xl transition-all border ${rec.cycles === 5 || rec.cycles === 6\r\n                                                            ? 'bg-white dark:bg-[#252525] border-indigo-500 shadow-lg shadow-indigo-500/10 scale-[1.02] ring-1 ring-indigo-500/20'\r\n                                                            : 'bg-gray-50 dark:bg-[#202020] border-transparent text-gray-500'\r\n                                                            }`}\r\n                                                    >\r\n                                                        <div className=\"flex items-center gap-4\">\r\n                                                            <div className={`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${rec.cycles >= 5 ? 'bg-indigo-100 text-indigo-600 dark:bg-indigo-500/20 dark:text-indigo-400' : 'bg-gray-200 text-gray-500 dark:bg-gray-700 dark:text-gray-400'\r\n                                                                }`}>\r\n                                                                {rec.cycles}\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <span className={`text-xl font-black block ${rec.cycles >= 5 ? 'text-indigo-600 dark:text-indigo-400' : 'text-gray-900 dark:text-gray-300'}`}>\r\n                                                                    {rec.time}\r\n                                                                </span>\r\n                                                                <span className=\"text-[10px] font-bold opacity-60 uppercase tracking-wide\">Cycles</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <div className=\"text-right\">\r\n                                                            <span className=\"text-xs font-bold opacity-80 block\">{formatDuration(rec.hours)}</span>\r\n                                                            <span className=\"text-[10px] uppercase font-bold tracking-wider opacity-60\">Sleep</span>\r\n                                                        </div>\r\n                                                    </motion.div>\r\n                                                ))}\r\n                                            </div>\r\n                                        </motion.div>\r\n                                    )}\r\n                                </AnimatePresence>\r\n                            </div>\r\n                        </motion.div>\r\n                    </div>\r\n                )}\r\n            </AnimatePresence>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default SleepCalculator;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\calculators\\StepCalculator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\dashboard\\ReadingModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\reading\\BookInsightsModal.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\reading\\BookInsightsModal.tsx:58:13\n  56 |     useEffect(() => {\n  57 |         if (existingInsight) {\n> 58 |             setCoreIdeas(existingInsight.coreIdeas);\n     |             ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  59 |             setActionTakeaways(existingInsight.actionTakeaways);\n  60 |             setBeliefChanges(existingInsight.beliefChanges);\n  61 |             setQuotes(existingInsight.quotes);","line":58,"column":13,"nodeType":null,"endLine":58,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    X, Lightbulb, CheckSquare, Calendar, Brain, Quote, FileText,\r\n    Plus, Trash2, Check, Link2, ChevronDown, Sparkles\r\n} from 'lucide-react';\r\nimport { useLifeTracker } from '../../utils/lifeTrackerStore';\r\nimport type { Book, CoreIdea, ActionTakeaway, BeliefChange, BookQuote, RevisitReminder } from '../../utils/lifeTrackerStore';\r\n\r\ninterface BookInsightsModalProps {\r\n    book: Book;\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nconst generateId = () => `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n\r\nconst BookInsightsModal: React.FC<BookInsightsModalProps> = ({ book, isOpen, onClose }) => {\r\n    const store = useLifeTracker();\r\n    const existingInsight = store.getBookInsight(book.id);\r\n\r\n    // Tab state\r\n    const [activeTab, setActiveTab] = useState<'ideas' | 'actions' | 'reminders' | 'beliefs' | 'quotes' | 'summary'>('ideas');\r\n\r\n    // Core Ideas State\r\n    const [coreIdeas, setCoreIdeas] = useState<CoreIdea[]>(existingInsight?.coreIdeas || []);\r\n    const [newIdea, setNewIdea] = useState('');\r\n\r\n    // Action Takeaways State\r\n    const [actionTakeaways, setActionTakeaways] = useState<ActionTakeaway[]>(existingInsight?.actionTakeaways || []);\r\n    const [newAction, setNewAction] = useState('');\r\n\r\n    // Belief Changes State\r\n    const [beliefChanges, setBeliefChanges] = useState<BeliefChange[]>(existingInsight?.beliefChanges || []);\r\n    const [newBeliefBefore, setNewBeliefBefore] = useState('');\r\n    const [newBeliefAfter, setNewBeliefAfter] = useState('');\r\n\r\n    // Quotes State\r\n    const [quotes, setQuotes] = useState<BookQuote[]>(existingInsight?.quotes || []);\r\n    const [newQuote, setNewQuote] = useState('');\r\n    const [newQuotePage, setNewQuotePage] = useState('');\r\n    const [newQuoteNote, setNewQuoteNote] = useState('');\r\n\r\n    // Revisit Reminders State\r\n    const [revisitReminders, setRevisitReminders] = useState<RevisitReminder[]>(existingInsight?.revisitReminders || []);\r\n    const [newReminderPrompt, setNewReminderPrompt] = useState('');\r\n    const [newReminderDate, setNewReminderDate] = useState('');\r\n\r\n    // Final Summary State\r\n    const [finalSummary, setFinalSummary] = useState(existingInsight?.finalSummary || '');\r\n\r\n    // Expanded sections for linking quotes\r\n    const [expandedQuoteLink, setExpandedQuoteLink] = useState<string | null>(null);\r\n\r\n    // Load existing insight when modal opens\r\n    useEffect(() => {\r\n        if (existingInsight) {\r\n            setCoreIdeas(existingInsight.coreIdeas);\r\n            setActionTakeaways(existingInsight.actionTakeaways);\r\n            setBeliefChanges(existingInsight.beliefChanges);\r\n            setQuotes(existingInsight.quotes);\r\n            setRevisitReminders(existingInsight.revisitReminders);\r\n            setFinalSummary(existingInsight.finalSummary);\r\n        }\r\n    }, [existingInsight]);\r\n\r\n    // Auto-generate review reminders\r\n    const generateDefaultReminders = () => {\r\n        const today = new Date();\r\n        const oneWeek = new Date(today);\r\n        oneWeek.setDate(oneWeek.getDate() + 7);\r\n        const oneMonth = new Date(today);\r\n        oneMonth.setMonth(oneMonth.getMonth() + 1);\r\n        const threeMonths = new Date(today);\r\n        threeMonths.setMonth(threeMonths.getMonth() + 3);\r\n\r\n        const defaultReminders: RevisitReminder[] = [\r\n            {\r\n                id: generateId(),\r\n                reminderDate: oneWeek.toISOString().split('T')[0],\r\n                prompt: 'Have you applied any of the core ideas from this book?',\r\n                completed: false,\r\n            },\r\n            {\r\n                id: generateId(),\r\n                reminderDate: oneMonth.toISOString().split('T')[0],\r\n                prompt: 'Which actionable takeaways have you successfully implemented?',\r\n                completed: false,\r\n            },\r\n            {\r\n                id: generateId(),\r\n                reminderDate: threeMonths.toISOString().split('T')[0],\r\n                prompt: 'Has this book changed how you think or act in your daily life?',\r\n                completed: false,\r\n            },\r\n        ];\r\n\r\n        setRevisitReminders([...revisitReminders, ...defaultReminders]);\r\n    };\r\n\r\n    // Add handlers\r\n    const addCoreIdea = () => {\r\n        if (!newIdea.trim()) return;\r\n        setCoreIdeas([...coreIdeas, { id: generateId(), content: newIdea.trim(), linkedQuotes: [] }]);\r\n        setNewIdea('');\r\n    };\r\n\r\n    const addActionTakeaway = () => {\r\n        if (!newAction.trim()) return;\r\n        setActionTakeaways([...actionTakeaways, { id: generateId(), action: newAction.trim(), completed: false, linkedQuotes: [] }]);\r\n        setNewAction('');\r\n    };\r\n\r\n    const addBeliefChange = () => {\r\n        if (!newBeliefBefore.trim() || !newBeliefAfter.trim()) return;\r\n        setBeliefChanges([...beliefChanges, {\r\n            id: generateId(),\r\n            beliefBefore: newBeliefBefore.trim(),\r\n            beliefAfter: newBeliefAfter.trim(),\r\n            linkedQuotes: []\r\n        }]);\r\n        setNewBeliefBefore('');\r\n        setNewBeliefAfter('');\r\n    };\r\n\r\n    const addQuote = () => {\r\n        if (!newQuote.trim()) return;\r\n        setQuotes([...quotes, {\r\n            id: generateId(),\r\n            content: newQuote.trim(),\r\n            page: newQuotePage ? parseInt(newQuotePage) : undefined,\r\n            note: newQuoteNote.trim() || undefined\r\n        }]);\r\n        setNewQuote('');\r\n        setNewQuotePage('');\r\n        setNewQuoteNote('');\r\n    };\r\n\r\n    const addReminder = () => {\r\n        if (!newReminderPrompt.trim() || !newReminderDate) return;\r\n        setRevisitReminders([...revisitReminders, {\r\n            id: generateId(),\r\n            reminderDate: newReminderDate,\r\n            prompt: newReminderPrompt.trim(),\r\n            completed: false\r\n        }]);\r\n        setNewReminderPrompt('');\r\n        setNewReminderDate('');\r\n    };\r\n\r\n    // Delete handlers\r\n    const deleteCoreIdea = (id: string) => setCoreIdeas(coreIdeas.filter(i => i.id !== id));\r\n    const deleteActionTakeaway = (id: string) => setActionTakeaways(actionTakeaways.filter(a => a.id !== id));\r\n    const deleteBeliefChange = (id: string) => setBeliefChanges(beliefChanges.filter(b => b.id !== id));\r\n    const deleteQuote = (id: string) => setQuotes(quotes.filter(q => q.id !== id));\r\n    const deleteReminder = (id: string) => setRevisitReminders(revisitReminders.filter(r => r.id !== id));\r\n\r\n    // Toggle action completed\r\n    const toggleActionCompleted = (id: string) => {\r\n        setActionTakeaways(actionTakeaways.map(a =>\r\n            a.id === id ? { ...a, completed: !a.completed } : a\r\n        ));\r\n    };\r\n\r\n    // Toggle reminder completed\r\n    const toggleReminderCompleted = (id: string) => {\r\n        setRevisitReminders(revisitReminders.map(r =>\r\n            r.id === id ? { ...r, completed: !r.completed } : r\r\n        ));\r\n    };\r\n\r\n    // Link quote to item\r\n    const linkQuoteToItem = (itemType: 'idea' | 'action' | 'belief', itemId: string, quoteId: string) => {\r\n        if (itemType === 'idea') {\r\n            setCoreIdeas(coreIdeas.map(i =>\r\n                i.id === itemId\r\n                    ? {\r\n                        ...i, linkedQuotes: i.linkedQuotes.includes(quoteId)\r\n                            ? i.linkedQuotes.filter(q => q !== quoteId)\r\n                            : [...i.linkedQuotes, quoteId]\r\n                    }\r\n                    : i\r\n            ));\r\n        } else if (itemType === 'action') {\r\n            setActionTakeaways(actionTakeaways.map(a =>\r\n                a.id === itemId\r\n                    ? {\r\n                        ...a, linkedQuotes: a.linkedQuotes.includes(quoteId)\r\n                            ? a.linkedQuotes.filter(q => q !== quoteId)\r\n                            : [...a.linkedQuotes, quoteId]\r\n                    }\r\n                    : a\r\n            ));\r\n        } else if (itemType === 'belief') {\r\n            setBeliefChanges(beliefChanges.map(b =>\r\n                b.id === itemId\r\n                    ? {\r\n                        ...b, linkedQuotes: b.linkedQuotes.includes(quoteId)\r\n                            ? b.linkedQuotes.filter(q => q !== quoteId)\r\n                            : [...b.linkedQuotes, quoteId]\r\n                    }\r\n                    : b\r\n            ));\r\n        }\r\n    };\r\n\r\n    // Save all insights\r\n    const saveInsights = () => {\r\n        store.saveBookInsight({\r\n            bookId: book.id,\r\n            coreIdeas,\r\n            actionTakeaways,\r\n            beliefChanges,\r\n            quotes,\r\n            revisitReminders,\r\n            finalSummary,\r\n        });\r\n        onClose();\r\n    };\r\n\r\n    const tabs = [\r\n        { id: 'ideas', label: 'Core Ideas', icon: Lightbulb, color: 'text-amber-500' },\r\n        { id: 'actions', label: 'Actions', icon: CheckSquare, color: 'text-emerald-500' },\r\n        { id: 'reminders', label: 'Reminders', icon: Calendar, color: 'text-blue-500' },\r\n        { id: 'beliefs', label: 'Beliefs', icon: Brain, color: 'text-purple-500' },\r\n        { id: 'quotes', label: 'Quotes', icon: Quote, color: 'text-rose-500' },\r\n        { id: 'summary', label: 'Summary', icon: FileText, color: 'text-indigo-500' },\r\n    ] as const;\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n                className=\"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4\"\r\n                onClick={onClose}\r\n            >\r\n                <motion.div\r\n                    initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                    animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                    exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                    transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n                    onClick={(e) => e.stopPropagation()}\r\n                    className=\"w-full max-w-2xl max-h-[90vh] bg-white dark:bg-slate-900 rounded-3xl overflow-hidden shadow-2xl flex flex-col\"\r\n                >\r\n                    {/* Header */}\r\n                    <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-5 relative overflow-hidden\">\r\n                        <div className=\"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2\"></div>\r\n                        <div className=\"relative z-10 flex items-start justify-between\">\r\n                            <div>\r\n                                <h2 className=\"text-xl font-bold text-white flex items-center gap-2\">\r\n                                    <Sparkles className=\"w-5 h-5\" />\r\n                                    Book Insights\r\n                                </h2>\r\n                                <p className=\"text-indigo-100 text-sm mt-1 max-w-xs truncate\">{book.title}</p>\r\n                            </div>\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"w-9 h-9 rounded-full bg-white/20 flex items-center justify-center hover:bg-white/30 transition-colors\"\r\n                            >\r\n                                <X className=\"w-5 h-5 text-white\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Tabs */}\r\n                    <div className=\"flex border-b border-gray-100 dark:border-slate-800 overflow-x-auto scrollbar-hide\">\r\n                        {tabs.map((tab) => (\r\n                            <button\r\n                                key={tab.id}\r\n                                onClick={() => setActiveTab(tab.id)}\r\n                                className={`flex-1 min-w-max flex items-center justify-center gap-1.5 px-4 py-3 text-xs font-semibold transition-all border-b-2 ${activeTab === tab.id\r\n                                    ? `${tab.color} border-current bg-gray-50 dark:bg-slate-800/50`\r\n                                    : 'text-gray-500 border-transparent hover:text-gray-700 dark:hover:text-gray-300'\r\n                                    }`}\r\n                            >\r\n                                <tab.icon className=\"w-4 h-4\" />\r\n                                <span className=\"hidden sm:inline\">{tab.label}</span>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Content */}\r\n                    <div className=\"flex-1 overflow-y-auto p-6\">\r\n                        <AnimatePresence mode=\"wait\">\r\n                            {/* Core Ideas Tab */}\r\n                            {activeTab === 'ideas' && (\r\n                                <motion.div\r\n                                    key=\"ideas\"\r\n                                    initial={{ opacity: 0, x: 20 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    exit={{ opacity: 0, x: -20 }}\r\n                                    className=\"space-y-4\"\r\n                                >\r\n                                    <div className=\"bg-amber-50 dark:bg-amber-500/10 rounded-2xl p-4 border border-amber-100 dark:border-amber-500/20\">\r\n                                        <h3 className=\"font-semibold text-amber-800 dark:text-amber-400 flex items-center gap-2 mb-2\">\r\n                                            <Lightbulb className=\"w-4 h-4\" />\r\n                                            Core Ideas\r\n                                        </h3>\r\n                                        <p className=\"text-sm text-amber-700/80 dark:text-amber-300/80\">\r\n                                            Identify 1-3 central ideas that capture the book's main message in plain language.\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    {/* Add new idea */}\r\n                                    <div className=\"flex gap-2\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={newIdea}\r\n                                            onChange={(e) => setNewIdea(e.target.value)}\r\n                                            placeholder=\"Enter a core idea...\"\r\n                                            className=\"flex-1 p-3 bg-gray-50 dark:bg-slate-800 rounded-xl text-gray-900 dark:text-white placeholder:text-gray-400 border border-gray-200 dark:border-slate-700 focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n                                            onKeyDown={(e) => e.key === 'Enter' && addCoreIdea()}\r\n                                        />\r\n                                        <button\r\n                                            onClick={addCoreIdea}\r\n                                            disabled={!newIdea.trim()}\r\n                                            className=\"px-4 py-3 bg-amber-500 text-white rounded-xl font-semibold hover:bg-amber-600 transition-colors disabled:opacity-50\"\r\n                                        >\r\n                                            <Plus className=\"w-5 h-5\" />\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    {/* Ideas list */}\r\n                                    <div className=\"space-y-3\">\r\n                                        {coreIdeas.map((idea, index) => (\r\n                                            <div key={idea.id} className=\"bg-white dark:bg-slate-800 rounded-xl p-4 border border-gray-100 dark:border-slate-700 shadow-sm\">\r\n                                                <div className=\"flex items-start gap-3\">\r\n                                                    <span className=\"w-7 h-7 bg-amber-100 dark:bg-amber-500/20 rounded-full flex items-center justify-center text-amber-600 dark:text-amber-400 font-bold text-sm flex-shrink-0\">\r\n                                                        {index + 1}\r\n                                                    </span>\r\n                                                    <div className=\"flex-1 min-w-0\">\r\n                                                        <p className=\"text-gray-800 dark:text-gray-200\">{idea.content}</p>\r\n                                                        {idea.linkedQuotes.length > 0 && (\r\n                                                            <div className=\"mt-2 flex flex-wrap gap-1\">\r\n                                                                {idea.linkedQuotes.map(qId => {\r\n                                                                    const quote = quotes.find(q => q.id === qId);\r\n                                                                    return quote ? (\r\n                                                                        <span key={qId} className=\"text-xs bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 px-2 py-1 rounded-full\">\r\n                                                                            \"{quote.content.substring(0, 30)}...\"\r\n                                                                        </span>\r\n                                                                    ) : null;\r\n                                                                })}\r\n                                                            </div>\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <div className=\"flex gap-1\">\r\n                                                        <button\r\n                                                            onClick={() => setExpandedQuoteLink(expandedQuoteLink === idea.id ? null : idea.id)}\r\n                                                            className=\"p-2 text-gray-400 hover:text-indigo-500 transition-colors\"\r\n                                                            title=\"Link quotes\"\r\n                                                        >\r\n                                                            <Link2 className=\"w-4 h-4\" />\r\n                                                        </button>\r\n                                                        <button\r\n                                                            onClick={() => deleteCoreIdea(idea.id)}\r\n                                                            className=\"p-2 text-gray-400 hover:text-red-500 transition-colors\"\r\n                                                        >\r\n                                                            <Trash2 className=\"w-4 h-4\" />\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </div>\r\n                                                {expandedQuoteLink === idea.id && quotes.length > 0 && (\r\n                                                    <div className=\"mt-3 pt-3 border-t border-gray-100 dark:border-slate-700\">\r\n                                                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">Link supporting quotes:</p>\r\n                                                        <div className=\"flex flex-wrap gap-2\">\r\n                                                            {quotes.map(quote => (\r\n                                                                <button\r\n                                                                    key={quote.id}\r\n                                                                    onClick={() => linkQuoteToItem('idea', idea.id, quote.id)}\r\n                                                                    className={`text-xs px-3 py-1.5 rounded-lg border transition-colors ${idea.linkedQuotes.includes(quote.id)\r\n                                                                        ? 'bg-rose-100 dark:bg-rose-500/20 border-rose-300 dark:border-rose-500/30 text-rose-700 dark:text-rose-300'\r\n                                                                        : 'bg-gray-50 dark:bg-slate-700 border-gray-200 dark:border-slate-600 text-gray-600 dark:text-gray-300 hover:border-rose-300'\r\n                                                                        }`}\r\n                                                                >\r\n                                                                    \"{quote.content.substring(0, 25)}...\"\r\n                                                                </button>\r\n                                                            ))}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        ))}\r\n                                        {coreIdeas.length === 0 && (\r\n                                            <p className=\"text-center text-gray-400 dark:text-gray-500 py-8\">No core ideas added yet</p>\r\n                                        )}\r\n                                    </div>\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {/* Actions Tab */}\r\n                            {activeTab === 'actions' && (\r\n                                <motion.div\r\n                                    key=\"actions\"\r\n                                    initial={{ opacity: 0, x: 20 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    exit={{ opacity: 0, x: -20 }}\r\n                                    className=\"space-y-4\"\r\n                                >\r\n                                    <div className=\"bg-emerald-50 dark:bg-emerald-500/10 rounded-2xl p-4 border border-emerald-100 dark:border-emerald-500/20\">\r\n                                        <h3 className=\"font-semibold text-emerald-800 dark:text-emerald-400 flex items-center gap-2 mb-2\">\r\n                                            <CheckSquare className=\"w-4 h-4\" />\r\n                                            Actionable Takeaways\r\n                                        </h3>\r\n                                        <p className=\"text-sm text-emerald-700/80 dark:text-emerald-300/80\">\r\n                                            Convert ideas into a checklist of actions or habits. Each item must be testable or doable.\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex gap-2\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={newAction}\r\n                                            onChange={(e) => setNewAction(e.target.value)}\r\n                                            placeholder=\"Enter an actionable takeaway...\"\r\n                                            className=\"flex-1 p-3 bg-gray-50 dark:bg-slate-800 rounded-xl text-gray-900 dark:text-white placeholder:text-gray-400 border border-gray-200 dark:border-slate-700 focus:ring-2 focus:ring-emerald-500 focus:border-transparent\"\r\n                                            onKeyDown={(e) => e.key === 'Enter' && addActionTakeaway()}\r\n                                        />\r\n                                        <button\r\n                                            onClick={addActionTakeaway}\r\n                                            disabled={!newAction.trim()}\r\n                                            className=\"px-4 py-3 bg-emerald-500 text-white rounded-xl font-semibold hover:bg-emerald-600 transition-colors disabled:opacity-50\"\r\n                                        >\r\n                                            <Plus className=\"w-5 h-5\" />\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-3\">\r\n                                        {actionTakeaways.map((action) => (\r\n                                            <div key={action.id} className={`bg-white dark:bg-slate-800 rounded-xl p-4 border shadow-sm transition-all ${action.completed\r\n                                                ? 'border-emerald-200 dark:border-emerald-500/30 bg-emerald-50/50 dark:bg-emerald-500/5'\r\n                                                : 'border-gray-100 dark:border-slate-700'\r\n                                                }`}>\r\n                                                <div className=\"flex items-start gap-3\">\r\n                                                    <button\r\n                                                        onClick={() => toggleActionCompleted(action.id)}\r\n                                                        className={`w-6 h-6 rounded-lg border-2 flex items-center justify-center flex-shrink-0 mt-0.5 transition-colors ${action.completed\r\n                                                            ? 'bg-emerald-500 border-emerald-500 text-white'\r\n                                                            : 'border-gray-300 dark:border-slate-600 hover:border-emerald-400'\r\n                                                            }`}\r\n                                                    >\r\n                                                        {action.completed && <Check className=\"w-4 h-4\" />}\r\n                                                    </button>\r\n                                                    <p className={`flex-1 ${action.completed ? 'text-gray-500 line-through' : 'text-gray-800 dark:text-gray-200'}`}>\r\n                                                        {action.action}\r\n                                                    </p>\r\n                                                    <button\r\n                                                        onClick={() => deleteActionTakeaway(action.id)}\r\n                                                        className=\"p-2 text-gray-400 hover:text-red-500 transition-colors\"\r\n                                                    >\r\n                                                        <Trash2 className=\"w-4 h-4\" />\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                        {actionTakeaways.length === 0 && (\r\n                                            <p className=\"text-center text-gray-400 dark:text-gray-500 py-8\">No actions added yet</p>\r\n                                        )}\r\n                                    </div>\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {/* Reminders Tab */}\r\n                            {activeTab === 'reminders' && (\r\n                                <motion.div\r\n                                    key=\"reminders\"\r\n                                    initial={{ opacity: 0, x: 20 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    exit={{ opacity: 0, x: -20 }}\r\n                                    className=\"space-y-4\"\r\n                                >\r\n                                    <div className=\"bg-blue-50 dark:bg-blue-500/10 rounded-2xl p-4 border border-blue-100 dark:border-blue-500/20\">\r\n                                        <h3 className=\"font-semibold text-blue-800 dark:text-blue-400 flex items-center gap-2 mb-2\">\r\n                                            <Calendar className=\"w-4 h-4\" />\r\n                                            Revisit Reminders\r\n                                        </h3>\r\n                                        <p className=\"text-sm text-blue-700/80 dark:text-blue-300/80\">\r\n                                            Generate future review prompts to check if ideas were applied or forgotten.\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    {revisitReminders.length === 0 && (\r\n                                        <button\r\n                                            onClick={generateDefaultReminders}\r\n                                            className=\"w-full py-3 bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 rounded-xl font-semibold hover:bg-blue-200 dark:hover:bg-blue-500/30 transition-colors flex items-center justify-center gap-2\"\r\n                                        >\r\n                                            <Sparkles className=\"w-4 h-4\" />\r\n                                            Generate Default Reminders (1 week, 1 month, 3 months)\r\n                                        </button>\r\n                                    )}\r\n\r\n                                    <div className=\"flex flex-col sm:flex-row gap-2\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={newReminderPrompt}\r\n                                            onChange={(e) => setNewReminderPrompt(e.target.value)}\r\n                                            placeholder=\"Reminder prompt...\"\r\n                                            className=\"flex-1 p-3 bg-gray-50 dark:bg-slate-800 rounded-xl text-gray-900 dark:text-white placeholder:text-gray-400 border border-gray-200 dark:border-slate-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                                        />\r\n                                        <input\r\n                                            type=\"date\"\r\n                                            value={newReminderDate}\r\n                                            onChange={(e) => setNewReminderDate(e.target.value)}\r\n                                            className=\"p-3 bg-gray-50 dark:bg-slate-800 rounded-xl text-gray-900 dark:text-white border border-gray-200 dark:border-slate-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                                        />\r\n                                        <button\r\n                                            onClick={addReminder}\r\n                                            disabled={!newReminderPrompt.trim() || !newReminderDate}\r\n                                            className=\"px-4 py-3 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 transition-colors disabled:opacity-50\"\r\n                                        >\r\n                                            <Plus className=\"w-5 h-5\" />\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-3\">\r\n                                        {revisitReminders.sort((a, b) => new Date(a.reminderDate).getTime() - new Date(b.reminderDate).getTime()).map((reminder) => (\r\n                                            <div key={reminder.id} className={`bg-white dark:bg-slate-800 rounded-xl p-4 border shadow-sm ${reminder.completed\r\n                                                ? 'border-blue-200 dark:border-blue-500/30 opacity-70'\r\n                                                : 'border-gray-100 dark:border-slate-700'\r\n                                                }`}>\r\n                                                <div className=\"flex items-start gap-3\">\r\n                                                    <button\r\n                                                        onClick={() => toggleReminderCompleted(reminder.id)}\r\n                                                        className={`w-6 h-6 rounded-lg border-2 flex items-center justify-center flex-shrink-0 mt-0.5 transition-colors ${reminder.completed\r\n                                                            ? 'bg-blue-500 border-blue-500 text-white'\r\n                                                            : 'border-gray-300 dark:border-slate-600 hover:border-blue-400'\r\n                                                            }`}\r\n                                                    >\r\n                                                        {reminder.completed && <Check className=\"w-4 h-4\" />}\r\n                                                    </button>\r\n                                                    <div className=\"flex-1\">\r\n                                                        <p className={reminder.completed ? 'text-gray-500 line-through' : 'text-gray-800 dark:text-gray-200'}>\r\n                                                            {reminder.prompt}\r\n                                                        </p>\r\n                                                        <p className=\"text-xs text-gray-400 mt-1\">\r\n                                                            {new Date(reminder.reminderDate).toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric' })}\r\n                                                        </p>\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={() => deleteReminder(reminder.id)}\r\n                                                        className=\"p-2 text-gray-400 hover:text-red-500 transition-colors\"\r\n                                                    >\r\n                                                        <Trash2 className=\"w-4 h-4\" />\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {/* Beliefs Tab */}\r\n                            {activeTab === 'beliefs' && (\r\n                                <motion.div\r\n                                    key=\"beliefs\"\r\n                                    initial={{ opacity: 0, x: 20 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    exit={{ opacity: 0, x: -20 }}\r\n                                    className=\"space-y-4\"\r\n                                >\r\n                                    <div className=\"bg-purple-50 dark:bg-purple-500/10 rounded-2xl p-4 border border-purple-100 dark:border-purple-500/20\">\r\n                                        <h3 className=\"font-semibold text-purple-800 dark:text-purple-400 flex items-center gap-2 mb-2\">\r\n                                            <Brain className=\"w-4 h-4\" />\r\n                                            Belief Change Mapping\r\n                                        </h3>\r\n                                        <p className=\"text-sm text-purple-700/80 dark:text-purple-300/80\">\r\n                                            Record beliefs before and after reading. Note any mindset shifts or reinforced views.\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-2\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={newBeliefBefore}\r\n                                            onChange={(e) => setNewBeliefBefore(e.target.value)}\r\n                                            placeholder=\"What I believed BEFORE reading...\"\r\n                                            className=\"w-full p-3 bg-gray-50 dark:bg-slate-800 rounded-xl text-gray-900 dark:text-white placeholder:text-gray-400 border border-gray-200 dark:border-slate-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n                                        />\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={newBeliefAfter}\r\n                                            onChange={(e) => setNewBeliefAfter(e.target.value)}\r\n                                            placeholder=\"What I believe AFTER reading...\"\r\n                                            className=\"w-full p-3 bg-gray-50 dark:bg-slate-800 rounded-xl text-gray-900 dark:text-white placeholder:text-gray-400 border border-gray-200 dark:border-slate-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n                                        />\r\n                                        <button\r\n                                            onClick={addBeliefChange}\r\n                                            disabled={!newBeliefBefore.trim() || !newBeliefAfter.trim()}\r\n                                            className=\"w-full py-3 bg-purple-500 text-white rounded-xl font-semibold hover:bg-purple-600 transition-colors disabled:opacity-50\"\r\n                                        >\r\n                                            Add Belief Change\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-3\">\r\n                                        {beliefChanges.map((belief) => (\r\n                                            <div key={belief.id} className=\"bg-white dark:bg-slate-800 rounded-xl p-4 border border-gray-100 dark:border-slate-700 shadow-sm\">\r\n                                                <div className=\"flex justify-between items-start\">\r\n                                                    <div className=\"flex-1 space-y-3\">\r\n                                                        <div className=\"flex items-start gap-2\">\r\n                                                            <span className=\"text-xs font-bold uppercase text-gray-400 dark:text-gray-500 w-16 flex-shrink-0\">Before</span>\r\n                                                            <p className=\"text-gray-600 dark:text-gray-400 text-sm\">{belief.beliefBefore}</p>\r\n                                                        </div>\r\n                                                        <div className=\"flex justify-center\">\r\n                                                            <ChevronDown className=\"w-4 h-4 text-purple-400\" />\r\n                                                        </div>\r\n                                                        <div className=\"flex items-start gap-2\">\r\n                                                            <span className=\"text-xs font-bold uppercase text-purple-500 dark:text-purple-400 w-16 flex-shrink-0\">After</span>\r\n                                                            <p className=\"text-gray-800 dark:text-gray-200 text-sm font-medium\">{belief.beliefAfter}</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={() => deleteBeliefChange(belief.id)}\r\n                                                        className=\"p-2 text-gray-400 hover:text-red-500 transition-colors\"\r\n                                                    >\r\n                                                        <Trash2 className=\"w-4 h-4\" />\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                        {beliefChanges.length === 0 && (\r\n                                            <p className=\"text-center text-gray-400 dark:text-gray-500 py-8\">No belief changes recorded yet</p>\r\n                                        )}\r\n                                    </div>\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {/* Quotes Tab */}\r\n                            {activeTab === 'quotes' && (\r\n                                <motion.div\r\n                                    key=\"quotes\"\r\n                                    initial={{ opacity: 0, x: 20 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    exit={{ opacity: 0, x: -20 }}\r\n                                    className=\"space-y-4\"\r\n                                >\r\n                                    <div className=\"bg-rose-50 dark:bg-rose-500/10 rounded-2xl p-4 border border-rose-100 dark:border-rose-500/20\">\r\n                                        <h3 className=\"font-semibold text-rose-800 dark:text-rose-400 flex items-center gap-2 mb-2\">\r\n                                            <Quote className=\"w-4 h-4\" />\r\n                                            Quote-to-Note Linking\r\n                                        </h3>\r\n                                        <p className=\"text-sm text-rose-700/80 dark:text-rose-300/80\">\r\n                                            Attach meaningful quotes to ideas, actions, and belief changes. Each quote should support a specific note.\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-2\">\r\n                                        <textarea\r\n                                            value={newQuote}\r\n                                            onChange={(e) => setNewQuote(e.target.value)}\r\n                                            placeholder=\"Enter a meaningful quote...\"\r\n                                            className=\"w-full p-3 bg-gray-50 dark:bg-slate-800 rounded-xl text-gray-900 dark:text-white placeholder:text-gray-400 border border-gray-200 dark:border-slate-700 focus:ring-2 focus:ring-rose-500 focus:border-transparent resize-none h-20\"\r\n                                        />\r\n                                        <div className=\"flex gap-2\">\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                value={newQuotePage}\r\n                                                onChange={(e) => setNewQuotePage(e.target.value)}\r\n                                                placeholder=\"Page #\"\r\n                                                className=\"w-24 p-3 bg-gray-50 dark:bg-slate-800 rounded-xl text-gray-900 dark:text-white placeholder:text-gray-400 border border-gray-200 dark:border-slate-700 focus:ring-2 focus:ring-rose-500 focus:border-transparent\"\r\n                                            />\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={newQuoteNote}\r\n                                                onChange={(e) => setNewQuoteNote(e.target.value)}\r\n                                                placeholder=\"Optional note about this quote...\"\r\n                                                className=\"flex-1 p-3 bg-gray-50 dark:bg-slate-800 rounded-xl text-gray-900 dark:text-white placeholder:text-gray-400 border border-gray-200 dark:border-slate-700 focus:ring-2 focus:ring-rose-500 focus:border-transparent\"\r\n                                            />\r\n                                        </div>\r\n                                        <button\r\n                                            onClick={addQuote}\r\n                                            disabled={!newQuote.trim()}\r\n                                            className=\"w-full py-3 bg-rose-500 text-white rounded-xl font-semibold hover:bg-rose-600 transition-colors disabled:opacity-50\"\r\n                                        >\r\n                                            Add Quote\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-3\">\r\n                                        {quotes.map((quote) => (\r\n                                            <div key={quote.id} className=\"bg-white dark:bg-slate-800 rounded-xl p-4 border border-gray-100 dark:border-slate-700 shadow-sm\">\r\n                                                <div className=\"flex items-start justify-between gap-3\">\r\n                                                    <div className=\"flex-1\">\r\n                                                        <p className=\"text-gray-800 dark:text-gray-200 italic\">\"{quote.content}\"</p>\r\n                                                        <div className=\"flex items-center gap-3 mt-2\">\r\n                                                            {quote.page && (\r\n                                                                <span className=\"text-xs text-gray-400\">Page {quote.page}</span>\r\n                                                            )}\r\n                                                            {quote.note && (\r\n                                                                <span className=\"text-xs text-rose-500 dark:text-rose-400\">{quote.note}</span>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={() => deleteQuote(quote.id)}\r\n                                                        className=\"p-2 text-gray-400 hover:text-red-500 transition-colors\"\r\n                                                    >\r\n                                                        <Trash2 className=\"w-4 h-4\" />\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                        {quotes.length === 0 && (\r\n                                            <p className=\"text-center text-gray-400 dark:text-gray-500 py-8\">No quotes added yet</p>\r\n                                        )}\r\n                                    </div>\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {/* Summary Tab */}\r\n                            {activeTab === 'summary' && (\r\n                                <motion.div\r\n                                    key=\"summary\"\r\n                                    initial={{ opacity: 0, x: 20 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    exit={{ opacity: 0, x: -20 }}\r\n                                    className=\"space-y-4\"\r\n                                >\r\n                                    <div className=\"bg-indigo-50 dark:bg-indigo-500/10 rounded-2xl p-4 border border-indigo-100 dark:border-indigo-500/20\">\r\n                                        <h3 className=\"font-semibold text-indigo-800 dark:text-indigo-400 flex items-center gap-2 mb-2\">\r\n                                            <FileText className=\"w-4 h-4\" />\r\n                                            Final Summary\r\n                                        </h3>\r\n                                        <p className=\"text-sm text-indigo-700/80 dark:text-indigo-300/80\">\r\n                                            A concise, connected summary designed for recall, action, and reflection.\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <textarea\r\n                                        value={finalSummary}\r\n                                        onChange={(e) => setFinalSummary(e.target.value)}\r\n                                        placeholder=\"Write your final summary of the book... What's the one thing you want to remember?\"\r\n                                        className=\"w-full p-4 bg-gray-50 dark:bg-slate-800 rounded-xl text-gray-900 dark:text-white placeholder:text-gray-400 border border-gray-200 dark:border-slate-700 focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none h-48\"\r\n                                    />\r\n\r\n                                    {/* Summary Stats */}\r\n                                    <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\">\r\n                                        <div className=\"bg-amber-50 dark:bg-amber-500/10 rounded-xl p-3 text-center\">\r\n                                            <p className=\"text-2xl font-bold text-amber-600 dark:text-amber-400\">{coreIdeas.length}</p>\r\n                                            <p className=\"text-xs text-amber-700 dark:text-amber-300\">Core Ideas</p>\r\n                                        </div>\r\n                                        <div className=\"bg-emerald-50 dark:bg-emerald-500/10 rounded-xl p-3 text-center\">\r\n                                            <p className=\"text-2xl font-bold text-emerald-600 dark:text-emerald-400\">{actionTakeaways.filter(a => a.completed).length}/{actionTakeaways.length}</p>\r\n                                            <p className=\"text-xs text-emerald-700 dark:text-emerald-300\">Actions Done</p>\r\n                                        </div>\r\n                                        <div className=\"bg-purple-50 dark:bg-purple-500/10 rounded-xl p-3 text-center\">\r\n                                            <p className=\"text-2xl font-bold text-purple-600 dark:text-purple-400\">{beliefChanges.length}</p>\r\n                                            <p className=\"text-xs text-purple-700 dark:text-purple-300\">Belief Shifts</p>\r\n                                        </div>\r\n                                        <div className=\"bg-rose-50 dark:bg-rose-500/10 rounded-xl p-3 text-center\">\r\n                                            <p className=\"text-2xl font-bold text-rose-600 dark:text-rose-400\">{quotes.length}</p>\r\n                                            <p className=\"text-xs text-rose-700 dark:text-rose-300\">Quotes</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </motion.div>\r\n                            )}\r\n                        </AnimatePresence>\r\n                    </div>\r\n\r\n                    {/* Footer */}\r\n                    <div className=\"bg-gray-50 dark:bg-slate-800/50 px-6 py-4 border-t border-gray-100 dark:border-slate-700 flex gap-3\">\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"flex-1 py-3 bg-gray-200 dark:bg-slate-700 text-gray-700 dark:text-gray-300 rounded-xl font-semibold hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors\"\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            onClick={saveInsights}\r\n                            className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-semibold hover:from-indigo-700 hover:to-purple-700 transition-colors shadow-lg\"\r\n                        >\r\n                            Save Insights\r\n                        </button>\r\n                    </div>\r\n                </motion.div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n};\r\n\r\nexport default BookInsightsModal;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\ui\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\components\\ui\\Toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\contexts\\AuthContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":160,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":160,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect, type ReactNode } from 'react';\r\nimport { auth } from '../utils/firebaseConfig';\r\nimport {\r\n    signOut,\r\n    onAuthStateChanged,\r\n    GoogleAuthProvider,\r\n    signInWithPopup,\r\n    getAdditionalUserInfo,\r\n    type User\r\n} from 'firebase/auth';\r\nimport type { UserProfile, AuthState } from '../types/auth';\r\nimport { authenticateWithSupabase } from '../api/authApi';\r\nimport { lifeTrackerStore } from '../utils/lifeTrackerStore';\r\n\r\ninterface AuthContextType extends AuthState {\r\n    logout: () => Promise<void>;\r\n    loginWithGoogle: () => Promise<{ success: boolean; isNewUser?: boolean; error?: string }>;\r\n    refreshUser: () => void;\r\n    supabaseSynced: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\ninterface AuthProviderProps {\r\n    children: ReactNode;\r\n}\r\n\r\n// Convert Firebase User to UserProfile (no Firestore needed)\r\nconst firebaseUserToProfile = (firebaseUser: User): UserProfile => {\r\n    return {\r\n        uid: firebaseUser.uid,\r\n        email: firebaseUser.email,\r\n        displayName: firebaseUser.displayName || firebaseUser.email?.split('@')[0] || 'User',\r\n        photoURL: firebaseUser.photoURL,\r\n        phoneNumber: firebaseUser.phoneNumber,\r\n        role: 'user', // Default role - could be stored in localStorage if needed\r\n        isActive: true,\r\n        createdAt: new Date(),\r\n        lastLoginAt: new Date(),\r\n    };\r\n};\r\n\r\n// Sync Firebase user to Supabase via Edge Function\r\nconst syncToSupabase = async (): Promise<boolean> => {\r\n    try {\r\n        const result = await authenticateWithSupabase();\r\n        if (result.success) {\r\n            console.log('âœ… User synced to Supabase:', result.user?.firebase_uid);\r\n            return true;\r\n        } else {\r\n            console.error('âŒ Failed to sync to Supabase:', result.error);\r\n            return false;\r\n        }\r\n    } catch (error) {\r\n        console.error('âŒ Error syncing to Supabase:', error);\r\n        return false;\r\n    }\r\n};\r\n\r\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\r\n    const [user, setUser] = useState<UserProfile | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [supabaseSynced, setSupabaseSynced] = useState(false);\r\n\r\n    useEffect(() => {\r\n        // Subscribe to auth state changes\r\n        const unsubscribe = onAuthStateChanged(auth, async (firebaseUser: User | null) => {\r\n            if (firebaseUser) {\r\n                // Create profile directly from Firebase Auth user\r\n                const profile = firebaseUserToProfile(firebaseUser);\r\n                setUser(profile);\r\n\r\n                // Set Firebase UID on the store for cloud sync\r\n                await lifeTrackerStore.setFirebaseUid(firebaseUser.uid);\r\n\r\n                // Sync to Supabase in background (don't block UI)\r\n                syncToSupabase().then(synced => {\r\n                    setSupabaseSynced(synced);\r\n                });\r\n            } else {\r\n                setUser(null);\r\n                setSupabaseSynced(false);\r\n                // Clear Firebase UID from store\r\n                await lifeTrackerStore.setFirebaseUid(null);\r\n            }\r\n            setLoading(false);\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    const logout = async () => {\r\n        try {\r\n            await signOut(auth);\r\n            setUser(null);\r\n            setSupabaseSynced(false);\r\n            // Clear Firebase UID from store on logout\r\n            await lifeTrackerStore.setFirebaseUid(null);\r\n        } catch (error) {\r\n            console.error('Logout error:', error);\r\n        }\r\n    };\r\n\r\n    const loginWithGoogle = async () => {\r\n        try {\r\n            const provider = new GoogleAuthProvider();\r\n            provider.setCustomParameters({\r\n                prompt: 'select_account'\r\n            });\r\n\r\n            const result = await signInWithPopup(auth, provider);\r\n            const additionalInfo = getAdditionalUserInfo(result);\r\n            const isNewUser = additionalInfo?.isNewUser;\r\n\r\n            if (result.user) {\r\n                const profile = firebaseUserToProfile(result.user);\r\n                setUser(profile);\r\n\r\n                // Sync to Supabase after login\r\n                const synced = await syncToSupabase();\r\n                setSupabaseSynced(synced);\r\n\r\n                return { success: true, isNewUser };\r\n            }\r\n\r\n            return { success: false, error: 'No user returned from Google sign-in' };\r\n        } catch (error: unknown) {\r\n            console.error('Google sign-in error:', error);\r\n            const errorMessage = error instanceof Error ? error.message : 'Google sign-in failed';\r\n            return { success: false, error: errorMessage };\r\n        }\r\n    };\r\n\r\n    const refreshUser = () => {\r\n        const currentUser = auth.currentUser;\r\n        if (currentUser) {\r\n            const profile = firebaseUserToProfile(currentUser);\r\n            setUser(profile);\r\n        }\r\n    };\r\n\r\n    const value: AuthContextType = {\r\n        user,\r\n        loading,\r\n        isAuthenticated: !!user,\r\n        isAdmin: user?.role === 'admin',\r\n        logout,\r\n        loginWithGoogle,\r\n        refreshUser,\r\n        supabaseSynced\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = (): AuthContextType => {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n};\r\n\r\nexport default AuthContext;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\contexts\\ContentProtectionContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2413,2416],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2413,2416],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":256,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":256,"endColumn":37}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useState, useEffect, useCallback, type ReactNode } from 'react';\r\nimport type {\r\n    ContentProtectionSettings,\r\n    ProtectionLevel,\r\n    BlockedAttempt,\r\n    AccountabilityPartner,\r\n} from '../types/contentProtection';\r\nimport { notifyAccountabilityPartner, checkUrl, checkKeywords } from '../services/contentFilter';\r\n\r\ninterface ContentProtectionContextType {\r\n    settings: ContentProtectionSettings;\r\n    updateProtectionLevel: (level: ProtectionLevel, pin?: string) => boolean;\r\n    setPin: (newPin: string, oldPin?: string) => boolean;\r\n    verifyPin: (pin: string) => boolean;\r\n    toggleProtection: (enabled: boolean, pin?: string) => boolean;\r\n    toggleVitalBlocking: (enabled: boolean, pin?: string) => boolean;\r\n    checkUrl: (url: string, customBlockedDomains?: string[]) => { blocked: boolean; reason?: string };\r\n    checkKeywords: (text: string, customKeywords?: string[]) => { blocked: boolean; reason?: string; matchedKeyword?: string };\r\n    addCustomDomain: (domain: string) => void;\r\n    removeCustomDomain: (domain: string) => void;\r\n    addCustomKeyword: (keyword: string) => void;\r\n    removeCustomKeyword: (keyword: string) => void;\r\n    setAccountabilityPartner: (partner: AccountabilityPartner | undefined) => void;\r\n    logBlockedAttempt: (url?: string, keyword?: string, reason?: string) => void;\r\n    clearBlockHistory: () => void;\r\n}\r\n\r\nconst ContentProtectionContext = createContext<ContentProtectionContextType | undefined>(\r\n    undefined\r\n);\r\n\r\nconst STORAGE_KEY = 'contentProtectionSettings';\r\n\r\nconst defaultSettings: ContentProtectionSettings = {\r\n    enabled: false,\r\n    protectionLevel: 'off',\r\n    vitalBlockingEnabled: false,\r\n    pin: undefined,\r\n    customBlockedDomains: [],\r\n    customBlockedKeywords: [],\r\n    accountabilityPartner: undefined,\r\n    blockHistory: [],\r\n    lastModified: new Date(),\r\n};\r\n\r\nexport function ContentProtectionProvider({ children }: { children: ReactNode }) {\r\n    const [settings, setSettings] = useState<ContentProtectionSettings>(() => {\r\n        const stored = localStorage.getItem(STORAGE_KEY);\r\n        if (stored) {\r\n            try {\r\n                const parsed = JSON.parse(stored);\r\n                // Convert date strings back to Date objects\r\n                parsed.lastModified = new Date(parsed.lastModified);\r\n                parsed.blockHistory = parsed.blockHistory.map((attempt: any) => ({\r\n                    ...attempt,\r\n                    timestamp: new Date(attempt.timestamp),\r\n                }));\r\n                return parsed;\r\n            } catch {\r\n                return defaultSettings;\r\n            }\r\n        }\r\n        return defaultSettings;\r\n    });\r\n\r\n    // Persist to localStorage whenever settings change\r\n    useEffect(() => {\r\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(settings));\r\n    }, [settings]);\r\n\r\n    const verifyPin = (pin: string): boolean => {\r\n        if (!settings.pin) return true; // No PIN set\r\n        return settings.pin === pin;\r\n    };\r\n\r\n    const setPin = (newPin: string, oldPin?: string): boolean => {\r\n        // If PIN already exists, verify old PIN\r\n        if (settings.pin && !verifyPin(oldPin || '')) {\r\n            return false;\r\n        }\r\n\r\n        setSettings((prev) => ({\r\n            ...prev,\r\n            pin: newPin,\r\n            lastModified: new Date(),\r\n        }));\r\n        return true;\r\n    };\r\n\r\n    const updateProtectionLevel = (level: ProtectionLevel, pin?: string): boolean => {\r\n        // Require PIN if protection is being lowered or disabled\r\n        if (settings.pin) {\r\n            const currentLevelIndex = ['off', 'light', 'strong', 'strict'].indexOf(\r\n                settings.protectionLevel\r\n            );\r\n            const newLevelIndex = ['off', 'light', 'strong', 'strict'].indexOf(level);\r\n\r\n            if (newLevelIndex < currentLevelIndex) {\r\n                if (!verifyPin(pin || '')) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        setSettings((prev) => ({\r\n            ...prev,\r\n            protectionLevel: level,\r\n            enabled: level !== 'off',\r\n            lastModified: new Date(),\r\n        }));\r\n        return true;\r\n    };\r\n\r\n    const toggleProtection = (enabled: boolean, pin?: string): boolean => {\r\n        // Require PIN if disabling\r\n        if (!enabled && settings.pin && !verifyPin(pin || '')) {\r\n            return false;\r\n        }\r\n\r\n        setSettings((prev) => ({\r\n            ...prev,\r\n            enabled,\r\n            protectionLevel: enabled ? prev.protectionLevel || 'light' : 'off',\r\n            lastModified: new Date(),\r\n        }));\r\n        return true;\r\n    };\r\n\r\n    const toggleVitalBlocking = (enabled: boolean, pin?: string): boolean => {\r\n        // Require PIN if disabling\r\n        if (!enabled && settings.pin && !verifyPin(pin || '')) {\r\n            return false;\r\n        }\r\n\r\n        setSettings((prev) => ({\r\n            ...prev,\r\n            vitalBlockingEnabled: enabled,\r\n            lastModified: new Date(),\r\n        }));\r\n        return true;\r\n    };\r\n\r\n    const checkUrlBound = useCallback((url: string, customBlockedDomains?: string[]) => {\r\n        return checkUrl(\r\n            url,\r\n            settings.protectionLevel,\r\n            customBlockedDomains || settings.customBlockedDomains,\r\n            settings.vitalBlockingEnabled\r\n        );\r\n    }, [settings.protectionLevel, settings.customBlockedDomains, settings.vitalBlockingEnabled]);\r\n\r\n    const checkKeywordsBound = useCallback((text: string, customKeywords?: string[]) => {\r\n        return checkKeywords(\r\n            text,\r\n            settings.protectionLevel,\r\n            customKeywords || settings.customBlockedKeywords,\r\n            settings.vitalBlockingEnabled\r\n        );\r\n    }, [settings.protectionLevel, settings.customBlockedKeywords, settings.vitalBlockingEnabled]);\r\n\r\n    const addCustomDomain = (domain: string) => {\r\n        setSettings((prev) => ({\r\n            ...prev,\r\n            customBlockedDomains: [...prev.customBlockedDomains, domain],\r\n            lastModified: new Date(),\r\n        }));\r\n    };\r\n\r\n    const removeCustomDomain = (domain: string) => {\r\n        setSettings((prev) => ({\r\n            ...prev,\r\n            customBlockedDomains: prev.customBlockedDomains.filter((d) => d !== domain),\r\n            lastModified: new Date(),\r\n        }));\r\n    };\r\n\r\n    const addCustomKeyword = (keyword: string) => {\r\n        setSettings((prev) => ({\r\n            ...prev,\r\n            customBlockedKeywords: [...prev.customBlockedKeywords, keyword],\r\n            lastModified: new Date(),\r\n        }));\r\n    };\r\n\r\n    const removeCustomKeyword = (keyword: string) => {\r\n        setSettings((prev) => ({\r\n            ...prev,\r\n            customBlockedKeywords: prev.customBlockedKeywords.filter((k) => k !== keyword),\r\n            lastModified: new Date(),\r\n        }));\r\n    };\r\n\r\n    const setAccountabilityPartner = (partner: AccountabilityPartner | undefined) => {\r\n        setSettings((prev) => ({\r\n            ...prev,\r\n            accountabilityPartner: partner,\r\n            lastModified: new Date(),\r\n        }));\r\n    };\r\n\r\n    const logBlockedAttempt = useCallback((url?: string, keyword?: string, reason?: string) => {\r\n        const attempt: BlockedAttempt = {\r\n            id: `${Date.now()}-${Math.random()}`,\r\n            timestamp: new Date(),\r\n            url,\r\n            keyword,\r\n            reason: reason || 'Content blocked by filter',\r\n            protectionLevel: settings.protectionLevel,\r\n        };\r\n\r\n        setSettings((prev) => ({\r\n            ...prev,\r\n            blockHistory: [attempt, ...prev.blockHistory].slice(0, 100), // Keep last 100\r\n            lastModified: new Date(),\r\n        }));\r\n\r\n        // Notify accountability partner if configured\r\n        if (settings.accountabilityPartner?.notifyOnBlock) {\r\n            notifyAccountabilityPartner(settings.accountabilityPartner.email, url, keyword);\r\n        }\r\n    }, [settings.protectionLevel, settings.accountabilityPartner]);\r\n\r\n    const clearBlockHistory = () => {\r\n        setSettings((prev) => ({\r\n            ...prev,\r\n            blockHistory: [],\r\n            lastModified: new Date(),\r\n        }));\r\n    };\r\n\r\n    const value: ContentProtectionContextType = {\r\n        settings,\r\n        updateProtectionLevel,\r\n        setPin,\r\n        verifyPin,\r\n        toggleProtection,\r\n        toggleVitalBlocking,\r\n        checkUrl: checkUrlBound,\r\n        checkKeywords: checkKeywordsBound,\r\n        addCustomDomain,\r\n        removeCustomDomain,\r\n        addCustomKeyword,\r\n        removeCustomKeyword,\r\n        setAccountabilityPartner,\r\n        logBlockedAttempt,\r\n        clearBlockHistory,\r\n    };\r\n\r\n    return (\r\n        <ContentProtectionContext.Provider value={value}>\r\n            {children}\r\n        </ContentProtectionContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useContentProtection() {\r\n    const context = useContext(ContentProtectionContext);\r\n    if (context === undefined) {\r\n        throw new Error('useContentProtection must be used within ContentProtectionProvider');\r\n    }\r\n    return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\contexts\\NotificationContext.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`sendLocalNotification` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\contexts\\NotificationContext.tsx:56:21\n  54 |                 console.log('ðŸ“¬ FCM Message received:', payload);\n  55 |                 if (payload.notification) {\n> 56 |                     sendLocalNotification(\n     |                     ^^^^^^^^^^^^^^^^^^^^^ `sendLocalNotification` accessed before it is declared\n  57 |                         payload.notification.title || 'Notification',\n  58 |                         payload.notification.body || '',\n  59 |                         { type: 'info' }\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\contexts\\NotificationContext.tsx:115:5\n  113 |\n  114 |     // Core notification sending function\n> 115 |     const sendLocalNotification = useCallback((\n      |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 116 |         title: string,\n      | ^^^^^^^^^^^^^^^^^^^^^^\n> 117 |         body: string,\n      â€¦\n      | ^^^^^^^^^^^^^^^^^^^^^^\n> 166 |         }\n      | ^^^^^^^^^^^^^^^^^^^^^^\n> 167 |     }, []);\n      | ^^^^^^^^^^^^ `sendLocalNotification` is declared here\n  168 |\n  169 |     // Notify about incomplete action - IMMEDIATE notification\n  170 |     const notifyIncompleteAction = useCallback((","line":56,"column":21,"nodeType":null,"endLine":56,"endColumn":42},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'sendLocalNotification'. Either include it or remove the dependency array.","line":64,"column":8,"nodeType":"ArrayExpression","endLine":64,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [sendLocalNotification]","fix":{"range":[2485,2487],"text":"[sendLocalNotification]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'requestPermission'. Either include it or remove the dependency array.","line":167,"column":8,"nodeType":"ArrayExpression","endLine":167,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [requestPermission]","fix":{"range":[6497,6499],"text":"[requestPermission]"}}]},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":287,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":287,"endColumn":30}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useEffect, useState, useCallback } from 'react';\r\nimport { getToken, onMessage } from 'firebase/messaging';\r\nimport { messaging, db } from '../utils/firebaseConfig';\r\nimport { useLifeTracker } from '../utils/lifeTrackerStore';\r\nimport { useAuth } from './AuthContext';\r\nimport { doc, setDoc, serverTimestamp } from 'firebase/firestore';\r\n\r\n// Notification types for different scenarios\r\nexport type NotificationType =\r\n    | 'info'\r\n    | 'success'\r\n    | 'warning'\r\n    | 'error'\r\n    | 'incomplete_action'\r\n    | 'reminder'\r\n    | 'achievement';\r\n\r\ninterface NotificationOptions {\r\n    type?: NotificationType;\r\n    icon?: string;\r\n    tag?: string;\r\n    requireInteraction?: boolean;\r\n    actions?: Array<{ action: string; title: string; }>;\r\n    data?: Record<string, unknown>;\r\n}\r\n\r\ninterface NotificationContextType {\r\n    token: string | null;\r\n    permissionGranted: boolean;\r\n    requestPermission: () => Promise<void>;\r\n    sendLocalNotification: (title: string, body: string, options?: NotificationOptions) => void;\r\n    notifyIncompleteAction: (actionName: string, reason: string, redirectPath?: string) => void;\r\n    notifyReminder: (title: string, message: string) => void;\r\n    notifySuccess: (title: string, message: string) => void;\r\n    notifyError: (title: string, message: string) => void;\r\n    checkAndNotifyPendingTasks: () => void;\r\n    checkAndNotifyOnboarding: () => void;\r\n}\r\n\r\nconst NotificationContext = createContext<NotificationContextType | undefined>(undefined);\r\n\r\nexport const NotificationProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n    const [token, setToken] = useState<string | null>(null);\r\n    const [permissionGranted, setPermissionGranted] = useState<boolean>(\r\n        typeof Notification !== 'undefined' && Notification.permission === 'granted'\r\n    );\r\n    const store = useLifeTracker();\r\n    const { user } = useAuth();\r\n\r\n    // Listen for incoming FCM messages\r\n    useEffect(() => {\r\n        if (messaging) {\r\n            onMessage(messaging, (payload) => {\r\n                console.log('ðŸ“¬ FCM Message received:', payload);\r\n                if (payload.notification) {\r\n                    sendLocalNotification(\r\n                        payload.notification.title || 'Notification',\r\n                        payload.notification.body || '',\r\n                        { type: 'info' }\r\n                    );\r\n                }\r\n            });\r\n        }\r\n    }, []);\r\n\r\n    // Request notification permission\r\n    const requestPermission = async () => {\r\n        try {\r\n            if (!(\"Notification\" in window)) {\r\n                console.log(\"This browser does not support desktop notifications\");\r\n                return;\r\n            }\r\n\r\n            const permission = await Notification.requestPermission();\r\n            setPermissionGranted(permission === 'granted');\r\n\r\n            if (permission === 'granted') {\r\n                console.log('ðŸ”” Notification permission granted.');\r\n\r\n                if (messaging) {\r\n                    const currentToken = await getToken(messaging, {\r\n                        vapidKey: import.meta.env.VITE_FIREBASE_VAPID_KEY\r\n                    });\r\n\r\n                    if (currentToken) {\r\n                        setToken(currentToken);\r\n                        console.log('ðŸ”‘ FCM Token:', currentToken);\r\n\r\n                        // Save token to Firestore if user is authenticated\r\n                        if (user) {\r\n                            try {\r\n                                await setDoc(doc(db, 'users', user.uid, 'fcm_tokens', currentToken), {\r\n                                    token: currentToken,\r\n                                    platform: 'web',\r\n                                    lastUpdated: serverTimestamp()\r\n                                }, { merge: true });\r\n                                console.log('âœ… FCM token saved to Firestore');\r\n                            } catch (err) {\r\n                                console.error('âŒ Error saving FCM token to Firestore:', err);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        console.log('No registration token available.');\r\n                    }\r\n                }\r\n            } else {\r\n                console.log('âŒ Notification permission denied.');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error requesting notification permission:', error);\r\n        }\r\n    };\r\n\r\n    // Core notification sending function\r\n    const sendLocalNotification = useCallback((\r\n        title: string,\r\n        body: string,\r\n        options?: NotificationOptions\r\n    ) => {\r\n        if (!(\"Notification\" in window)) {\r\n            console.log(\"This browser does not support desktop notifications\");\r\n            return;\r\n        }\r\n\r\n        if (Notification.permission !== \"granted\") {\r\n            console.log(\"Notification permission not granted. Requesting...\");\r\n            requestPermission();\r\n            return;\r\n        }\r\n\r\n        // Get icon based on notification type\r\n        const getIcon = () => {\r\n            switch (options?.type) {\r\n                case 'success': return 'âœ…';\r\n                case 'warning': return 'âš ï¸';\r\n                case 'error': return 'âŒ';\r\n                case 'incomplete_action': return 'ðŸ””';\r\n                case 'reminder': return 'â°';\r\n                case 'achievement': return 'ðŸ†';\r\n                default: return 'ðŸ“Œ';\r\n            }\r\n        };\r\n\r\n        try {\r\n            const notification = new Notification(`${getIcon()} ${title}`, {\r\n                body,\r\n                icon: options?.icon || '/icon-192x192.png',\r\n                tag: options?.tag || `notification-${Date.now()}`,\r\n                requireInteraction: options?.requireInteraction ?? false,\r\n                ...options?.data && { data: options.data }\r\n            });\r\n\r\n            // Handle notification click\r\n            notification.onclick = (event) => {\r\n                event.preventDefault();\r\n                window.focus();\r\n                if (options?.data?.redirectPath) {\r\n                    window.location.href = options.data.redirectPath as string;\r\n                }\r\n                notification.close();\r\n            };\r\n\r\n            console.log(`ðŸ“£ Notification sent: ${title}`);\r\n        } catch (error) {\r\n            console.error('Error sending notification:', error);\r\n        }\r\n    }, []);\r\n\r\n    // Notify about incomplete action - IMMEDIATE notification\r\n    const notifyIncompleteAction = useCallback((\r\n        actionName: string,\r\n        reason: string,\r\n        redirectPath?: string\r\n    ) => {\r\n        console.log(`ðŸ”” Incomplete action notification: ${actionName} - ${reason}`);\r\n\r\n        sendLocalNotification(\r\n            `Action Required: ${actionName}`,\r\n            reason,\r\n            {\r\n                type: 'incomplete_action',\r\n                requireInteraction: true,\r\n                tag: `incomplete-${actionName.toLowerCase().replace(/\\s+/g, '-')}`,\r\n                data: redirectPath ? { redirectPath } : undefined\r\n            }\r\n        );\r\n    }, [sendLocalNotification]);\r\n\r\n    // Notify reminder\r\n    const notifyReminder = useCallback((title: string, message: string) => {\r\n        sendLocalNotification(title, message, { type: 'reminder' });\r\n    }, [sendLocalNotification]);\r\n\r\n    // Notify success\r\n    const notifySuccess = useCallback((title: string, message: string) => {\r\n        sendLocalNotification(title, message, { type: 'success' });\r\n    }, [sendLocalNotification]);\r\n\r\n    // Notify error\r\n    const notifyError = useCallback((title: string, message: string) => {\r\n        sendLocalNotification(title, message, { type: 'error', requireInteraction: true });\r\n    }, [sendLocalNotification]);\r\n\r\n    // Check and notify pending tasks\r\n    const checkAndNotifyPendingTasks = useCallback(() => {\r\n        const storeState = store.getState();\r\n        const today = new Date().toISOString().split('T')[0];\r\n        const pendingTasks = storeState.dailyTasks.filter(\r\n            task => task.date === today && !task.completed\r\n        );\r\n\r\n        if (pendingTasks.length > 0) {\r\n            notifyIncompleteAction(\r\n                \"Unfinished Tasks\",\r\n                `You have ${pendingTasks.length} pending task${pendingTasks.length > 1 ? 's' : ''} for today.`,\r\n                '/section/daily-tasks'\r\n            );\r\n        }\r\n    }, [store, notifyIncompleteAction]);\r\n\r\n    // Check and notify incomplete onboarding\r\n    const checkAndNotifyOnboarding = useCallback(() => {\r\n        const storeState = store.getState();\r\n        const profile = storeState.userProfile;\r\n\r\n        if (!profile?.onboardingCompleted) {\r\n            notifyIncompleteAction(\r\n                \"Complete Your Profile\",\r\n                \"Finish setting up your profile to get personalized recommendations.\",\r\n                '/onboarding'\r\n            );\r\n        }\r\n    }, [store, notifyIncompleteAction]);\r\n\r\n    // Auto-check for pending tasks periodically\r\n    useEffect(() => {\r\n        // Initial check after 1 minute\r\n        const initialTimeout = setTimeout(() => {\r\n            if (document.visibilityState === 'visible' && permissionGranted) {\r\n                checkAndNotifyPendingTasks();\r\n            }\r\n        }, 60 * 1000);\r\n\r\n        // Then check every 30 minutes\r\n        const interval = setInterval(() => {\r\n            if (document.visibilityState === 'visible' && permissionGranted) {\r\n                checkAndNotifyPendingTasks();\r\n            }\r\n        }, 30 * 60 * 1000);\r\n\r\n        return () => {\r\n            clearTimeout(initialTimeout);\r\n            clearInterval(interval);\r\n        };\r\n    }, [store, permissionGranted, checkAndNotifyPendingTasks]);\r\n\r\n    // Check onboarding status when user logs in\r\n    useEffect(() => {\r\n        if (user && permissionGranted) {\r\n            // Delay to allow data loading\r\n            const timeout = setTimeout(() => {\r\n                checkAndNotifyOnboarding();\r\n            }, 5000);\r\n\r\n            return () => clearTimeout(timeout);\r\n        }\r\n    }, [user, permissionGranted, checkAndNotifyOnboarding]);\r\n\r\n    return (\r\n        <NotificationContext.Provider value={{\r\n            token,\r\n            permissionGranted,\r\n            requestPermission,\r\n            sendLocalNotification,\r\n            notifyIncompleteAction,\r\n            notifyReminder,\r\n            notifySuccess,\r\n            notifyError,\r\n            checkAndNotifyPendingTasks,\r\n            checkAndNotifyOnboarding\r\n        }}>\r\n            {children}\r\n        </NotificationContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useNotifications = () => {\r\n    const context = useContext(NotificationContext);\r\n    if (context === undefined) {\r\n        throw new Error('useNotifications must be used within a NotificationProvider');\r\n    }\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\data\\exerciseList.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\data\\sections.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\data\\workoutData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\hooks\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\hooks\\useActionNotification.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\hooks\\useGoalAssistant.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\hooks\\useLenis.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\hooks\\useRealtimeState.ts","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\hooks\\useRealtimeState.ts:88:13\n  86 |     useEffect(() => {\n  87 |         if (!user?.uid) {\n> 88 |             setState(defaultState);\n     |             ^^^^^^^^ Avoid calling setState() directly within an effect\n  89 |             setLoading(false);\n  90 |             return;\n  91 |         }","line":88,"column":13,"nodeType":null,"endLine":88,"endColumn":21},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `user`, but the source dependencies were [user?.uid]. Inferred less specific property than source.\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\hooks\\useRealtimeState.ts:127:9\n  125 |\n  126 |     const startSession = useCallback(\n> 127 |         async (type: string) => {\n      |         ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 128 |             if (!user?.uid) return;\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 129 |\n      â€¦\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 137 |             });\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 138 |         },\n      | ^^^^^^^^^^ Could not preserve existing manual memoization\n  139 |         [user?.uid]\n  140 |     );\n  141 |","line":127,"column":9,"nodeType":null,"endLine":138,"endColumn":10},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `user`, but the source dependencies were [user?.uid, state.activeSession]. Inferred less specific property than source.\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\hooks\\useRealtimeState.ts:142:38\n  140 |     );\n  141 |\n> 142 |     const pauseSession = useCallback(async () => {\n      |                                      ^^^^^^^^^^^^^\n> 143 |         if (!user?.uid || !state.activeSession) return;\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 144 |\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 145 |         const userStateRef = doc(db, \"userState\", user.uid);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 146 |         await updateDoc(userStateRef, {\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 147 |             \"activeSession.paused\": true,\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 148 |         });\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 149 |     }, [user?.uid, state.activeSession]);\n      | ^^^^^^ Could not preserve existing manual memoization\n  150 |\n  151 |     const resumeSession = useCallback(async () => {\n  152 |         if (!user?.uid || !state.activeSession) return;","line":142,"column":38,"nodeType":null,"endLine":149,"endColumn":6},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `user`, but the source dependencies were [user?.uid, state.activeSession]. Inferred less specific property than source.\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\hooks\\useRealtimeState.ts:151:39\n  149 |     }, [user?.uid, state.activeSession]);\n  150 |\n> 151 |     const resumeSession = useCallback(async () => {\n      |                                       ^^^^^^^^^^^^^\n> 152 |         if (!user?.uid || !state.activeSession) return;\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 153 |\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 154 |         const userStateRef = doc(db, \"userState\", user.uid);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 155 |         await updateDoc(userStateRef, {\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 156 |             \"activeSession.paused\": false,\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 157 |         });\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 158 |     }, [user?.uid, state.activeSession]);\n      | ^^^^^^ Could not preserve existing manual memoization\n  159 |\n  160 |     const endSession = useCallback(async () => {\n  161 |         if (!user?.uid) return;","line":151,"column":39,"nodeType":null,"endLine":158,"endColumn":6},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `user`, but the source dependencies were [user?.uid]. Inferred less specific property than source.\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\hooks\\useRealtimeState.ts:160:36\n  158 |     }, [user?.uid, state.activeSession]);\n  159 |\n> 160 |     const endSession = useCallback(async () => {\n      |                                    ^^^^^^^^^^^^^\n> 161 |         if (!user?.uid) return;\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 162 |\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 163 |         const userStateRef = doc(db, \"userState\", user.uid);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 164 |         await updateDoc(userStateRef, {\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 165 |             activeSession: null,\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 166 |         });\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 167 |     }, [user?.uid]);\n      | ^^^^^^ Could not preserve existing manual memoization\n  168 |\n  169 |     return {\n  170 |         activeSession: state.activeSession,","line":160,"column":36,"nodeType":null,"endLine":167,"endColumn":6},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\hooks\\useRealtimeState.ts:226:13\n  224 |     useEffect(() => {\n  225 |         if (!user?.uid) {\n> 226 |             setNotifications([]);\n      |             ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  227 |             setUnreadCount(0);\n  228 |             setLoading(false);\n  229 |             return;","line":226,"column":13,"nodeType":null,"endLine":226,"endColumn":29}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Firestore Real-Time State Hooks\r\n * \r\n * React hooks for subscribing to real-time Firestore state.\r\n * Uses Firestore for live tracker state, streak counters, \r\n * and session-in-progress flags.\r\n */\r\n\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport {\r\n    doc,\r\n    onSnapshot,\r\n    setDoc,\r\n    updateDoc,\r\n    serverTimestamp,\r\n    collection,\r\n    query,\r\n    where,\r\n    orderBy,\r\n    limit,\r\n    Timestamp,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../utils/firebaseConfig\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\n\r\n/**\r\n * User real-time state structure\r\n */\r\nexport interface UserRealtimeState {\r\n    lastActivity: Timestamp | null;\r\n    lastActiveDate: string | null;\r\n    currentStreak: number;\r\n    goalStreak: number;\r\n    todayStats: {\r\n        goalsCompleted: number;\r\n        goalsTotal: number;\r\n        meditationMinutes: number;\r\n        workoutVolume: number;\r\n        exerciseCount: number;\r\n        sessionCount: number; // Generic count\r\n    };\r\n    activeSession: {\r\n        type: string | null;\r\n        startedAt: Timestamp | null;\r\n        paused: boolean;\r\n    } | null;\r\n}\r\n\r\n/**\r\n * Notification structure\r\n */\r\nexport interface RealtimeNotification {\r\n    id: string;\r\n    type: string;\r\n    message: string;\r\n    read: boolean;\r\n    metadata?: Record<string, unknown>;\r\n    createdAt: Timestamp;\r\n}\r\n\r\nconst defaultState: UserRealtimeState = {\r\n    lastActivity: null,\r\n    lastActiveDate: null,\r\n    currentStreak: 0,\r\n    goalStreak: 0,\r\n    todayStats: {\r\n        goalsCompleted: 0,\r\n        goalsTotal: 0,\r\n        meditationMinutes: 0,\r\n        workoutVolume: 0,\r\n        exerciseCount: 0,\r\n        sessionCount: 0,\r\n    },\r\n    activeSession: null,\r\n};\r\n\r\n/**\r\n * Hook for subscribing to user's real-time state\r\n */\r\nexport function useUserRealtimeState() {\r\n    const { user } = useAuth();\r\n    const [state, setState] = useState<UserRealtimeState>(defaultState);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<Error | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (!user?.uid) {\r\n            setState(defaultState);\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const userStateRef = doc(db, \"userState\", user.uid);\r\n\r\n        const unsubscribe = onSnapshot(\r\n            userStateRef,\r\n            (snapshot) => {\r\n                if (snapshot.exists()) {\r\n                    setState(snapshot.data() as UserRealtimeState);\r\n                } else {\r\n                    setState(defaultState);\r\n                }\r\n                setLoading(false);\r\n                setError(null);\r\n            },\r\n            (err) => {\r\n                console.error(\"Error subscribing to user state:\", err);\r\n                setError(err);\r\n                setLoading(false);\r\n            }\r\n        );\r\n\r\n        return () => unsubscribe();\r\n    }, [user?.uid]);\r\n\r\n    return { state, loading, error };\r\n}\r\n\r\n/**\r\n * Hook for managing active sessions\r\n */\r\nexport function useActiveSession() {\r\n    const { user } = useAuth();\r\n    const { state } = useUserRealtimeState();\r\n\r\n    const startSession = useCallback(\r\n        async (type: string) => {\r\n            if (!user?.uid) return;\r\n\r\n            const userStateRef = doc(db, \"userState\", user.uid);\r\n            await updateDoc(userStateRef, {\r\n                activeSession: {\r\n                    type,\r\n                    startedAt: serverTimestamp(),\r\n                    paused: false,\r\n                },\r\n            });\r\n        },\r\n        [user?.uid]\r\n    );\r\n\r\n    const pauseSession = useCallback(async () => {\r\n        if (!user?.uid || !state.activeSession) return;\r\n\r\n        const userStateRef = doc(db, \"userState\", user.uid);\r\n        await updateDoc(userStateRef, {\r\n            \"activeSession.paused\": true,\r\n        });\r\n    }, [user?.uid, state.activeSession]);\r\n\r\n    const resumeSession = useCallback(async () => {\r\n        if (!user?.uid || !state.activeSession) return;\r\n\r\n        const userStateRef = doc(db, \"userState\", user.uid);\r\n        await updateDoc(userStateRef, {\r\n            \"activeSession.paused\": false,\r\n        });\r\n    }, [user?.uid, state.activeSession]);\r\n\r\n    const endSession = useCallback(async () => {\r\n        if (!user?.uid) return;\r\n\r\n        const userStateRef = doc(db, \"userState\", user.uid);\r\n        await updateDoc(userStateRef, {\r\n            activeSession: null,\r\n        });\r\n    }, [user?.uid]);\r\n\r\n    return {\r\n        activeSession: state.activeSession,\r\n        isSessionActive: !!state.activeSession?.type,\r\n        isPaused: state.activeSession?.paused || false,\r\n        sessionType: state.activeSession?.type || null,\r\n        startSession,\r\n        pauseSession,\r\n        resumeSession,\r\n        endSession,\r\n    };\r\n}\r\n\r\n/**\r\n * Hook for real-time streak tracking\r\n */\r\nexport function useStreak() {\r\n    const { state, loading } = useUserRealtimeState();\r\n\r\n    return {\r\n        currentStreak: state.currentStreak,\r\n        goalStreak: state.goalStreak,\r\n        lastActiveDate: state.lastActiveDate,\r\n        loading,\r\n    };\r\n}\r\n\r\n/**\r\n * Hook for today's real-time stats\r\n */\r\nexport function useTodayStats() {\r\n    const { state, loading } = useUserRealtimeState();\r\n\r\n    const goalCompletionRate =\r\n        state.todayStats.goalsTotal > 0\r\n            ? Math.round(\r\n                (state.todayStats.goalsCompleted / state.todayStats.goalsTotal) * 100\r\n            )\r\n            : 0;\r\n\r\n    return {\r\n        ...state.todayStats,\r\n        goalCompletionRate,\r\n        loading,\r\n    };\r\n}\r\n\r\n/**\r\n * Hook for real-time notifications\r\n */\r\nexport function useRealtimeNotifications(maxCount = 10) {\r\n    const { user } = useAuth();\r\n    const [notifications, setNotifications] = useState<RealtimeNotification[]>([]);\r\n    const [unreadCount, setUnreadCount] = useState(0);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (!user?.uid) {\r\n            setNotifications([]);\r\n            setUnreadCount(0);\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const notificationsRef = collection(db, \"notifications\");\r\n        const q = query(\r\n            notificationsRef,\r\n            where(\"firebaseUid\", \"==\", user.uid),\r\n            orderBy(\"createdAt\", \"desc\"),\r\n            limit(maxCount)\r\n        );\r\n\r\n        const unsubscribe = onSnapshot(\r\n            q,\r\n            (snapshot) => {\r\n                const notifs = snapshot.docs.map((docSnap) => ({\r\n                    id: docSnap.id,\r\n                    ...docSnap.data(),\r\n                })) as RealtimeNotification[];\r\n\r\n                setNotifications(notifs);\r\n                setUnreadCount(notifs.filter((n) => !n.read).length);\r\n                setLoading(false);\r\n            },\r\n            (err) => {\r\n                console.error(\"Error subscribing to notifications:\", err);\r\n                setLoading(false);\r\n            }\r\n        );\r\n\r\n        return () => unsubscribe();\r\n    }, [user?.uid, maxCount]);\r\n\r\n    const markAsRead = useCallback(\r\n        async (notificationId: string) => {\r\n            if (!user?.uid) return;\r\n\r\n            const notifRef = doc(db, \"notifications\", notificationId);\r\n            await updateDoc(notifRef, { read: true });\r\n        },\r\n        [user?.uid]\r\n    );\r\n\r\n    const markAllAsRead = useCallback(async () => {\r\n        if (!user?.uid) return;\r\n\r\n        const unreadNotifs = notifications.filter((n) => !n.read);\r\n        await Promise.all(\r\n            unreadNotifs.map((n) => {\r\n                const notifRef = doc(db, \"notifications\", n.id);\r\n                return updateDoc(notifRef, { read: true });\r\n            })\r\n        );\r\n    }, [user?.uid, notifications]);\r\n\r\n    return {\r\n        notifications,\r\n        unreadCount,\r\n        loading,\r\n        markAsRead,\r\n        markAllAsRead,\r\n    };\r\n}\r\n\r\n/**\r\n * Initialize user state in Firestore (call on first login)\r\n */\r\nexport async function initializeUserState(userId: string): Promise<void> {\r\n    const userStateRef = doc(db, \"userState\", userId);\r\n    const today = new Date().toISOString().split(\"T\")[0];\r\n\r\n    await setDoc(\r\n        userStateRef,\r\n        {\r\n            lastActivity: serverTimestamp(),\r\n            lastActiveDate: today,\r\n            currentStreak: 1,\r\n            goalStreak: 0,\r\n            todayStats: {\r\n                goalsCompleted: 0,\r\n                goalsTotal: 0,\r\n                meditationMinutes: 0,\r\n                workoutVolume: 0,\r\n                exerciseCount: 0,\r\n                sessionCount: 0,\r\n            },\r\n            activeSession: null,\r\n        },\r\n        { merge: true }\r\n    );\r\n}\r\n\r\n/**\r\n * Update user activity timestamp\r\n */\r\nexport async function updateUserActivity(userId: string): Promise<void> {\r\n    const userStateRef = doc(db, \"userState\", userId);\r\n    const today = new Date().toISOString().split(\"T\")[0];\r\n\r\n    await updateDoc(userStateRef, {\r\n        lastActivity: serverTimestamp(),\r\n        lastActiveDate: today,\r\n    });\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\hooks\\useSleepMonitoring.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\hooks\\useSmoothScroll.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\hooks\\useStepTracking.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'state.isTracking'. Either include it or remove the dependency array.","line":52,"column":8,"nodeType":"ArrayExpression","endLine":52,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [isSupported, state.isTracking]","fix":{"range":[1603,1616],"text":"[isSupported, state.isTracking]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * useStepTracking Hook\r\n * \r\n * React hook for accessing the automatic step tracking service.\r\n * Provides real-time step counts and tracking controls.\r\n */\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport stepTrackingService, { type StepTrackingState } from '../services/stepTrackingService';\r\n\r\nexport interface UseStepTrackingReturn {\r\n    // Current state\r\n    isTracking: boolean;\r\n    isSupported: boolean;\r\n    todaySteps: number;\r\n    todayDistance: number; // in meters\r\n    todayCalories: number;\r\n    history: StepTrackingState['history'];\r\n\r\n    // Weekly stats\r\n    weeklyStats: {\r\n        totalSteps: number;\r\n        avgSteps: number;\r\n        totalDistance: number;\r\n        totalCalories: number;\r\n    };\r\n\r\n    // Actions\r\n    startTracking: () => Promise<boolean>;\r\n    stopTracking: () => void;\r\n    addStepsManually: (count: number) => void;\r\n\r\n    // Utilities\r\n    formatSteps: (steps: number) => string;\r\n    formatDistance: (meters: number) => string;\r\n}\r\n\r\nexport function useStepTracking(): UseStepTrackingReturn {\r\n    const [state, setState] = useState<StepTrackingState>(stepTrackingService.getState());\r\n    const [isSupported] = useState(stepTrackingService.isSupported());\r\n\r\n    useEffect(() => {\r\n        // Subscribe to state changes\r\n        const unsubscribe = stepTrackingService.subscribe(setState);\r\n\r\n        // Auto-start tracking if supported (on mobile devices)\r\n        if (isSupported && !state.isTracking) {\r\n            stepTrackingService.startTracking().catch(console.error);\r\n        }\r\n\r\n        return unsubscribe;\r\n    }, [isSupported]);\r\n\r\n    const startTracking = useCallback(async () => {\r\n        return stepTrackingService.startTracking();\r\n    }, []);\r\n\r\n    const stopTracking = useCallback(() => {\r\n        stepTrackingService.stopTracking();\r\n    }, []);\r\n\r\n    const addStepsManually = useCallback((count: number) => {\r\n        stepTrackingService.addSteps(count);\r\n    }, []);\r\n\r\n    const formatSteps = useCallback((steps: number): string => {\r\n        if (steps >= 10000) {\r\n            return `${(steps / 1000).toFixed(1)}k`;\r\n        } else if (steps >= 1000) {\r\n            return `${(steps / 1000).toFixed(1)}k`;\r\n        }\r\n        return steps.toString();\r\n    }, []);\r\n\r\n    const formatDistance = useCallback((meters: number): string => {\r\n        if (meters >= 1000) {\r\n            return `${(meters / 1000).toFixed(2)} km`;\r\n        }\r\n        return `${Math.round(meters)} m`;\r\n    }, []);\r\n\r\n    const weeklyStats = stepTrackingService.getWeeklySummary();\r\n\r\n    return {\r\n        isTracking: state.isTracking,\r\n        isSupported,\r\n        todaySteps: state.todaySteps,\r\n        todayDistance: state.todayDistance,\r\n        todayCalories: state.todayCalories,\r\n        history: state.history,\r\n        weeklyStats,\r\n        startTracking,\r\n        stopTracking,\r\n        addStepsManually,\r\n        formatSteps,\r\n        formatDistance\r\n    };\r\n}\r\n\r\nexport default useStepTracking;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\lib\\supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\analyticsService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\authService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\cloudFunctionsApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\contentFilter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\errorReportingService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\freesoundService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\geminiService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\goalAssistantService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":152,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4920,4923],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4920,4923],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Goal Assistant Service\r\n * \r\n * A supportive, non-judgmental accountability buddy that helps users\r\n * track their personal goals with gentle reminders and encouragement.\r\n */\r\n\r\nexport type GoalFrequency = 'daily' | 'weekly' | 'custom';\r\nexport type GoalCategory = 'health' | 'productivity' | 'learning' | 'mindfulness' | 'fitness' | 'creative' | 'social' | 'custom';\r\n\r\nexport interface PersonalGoal {\r\n    id: string;\r\n    title: string;\r\n    description?: string;\r\n    category: GoalCategory;\r\n    frequency: GoalFrequency;\r\n    customDays?: number[]; // 0-6 for Sunday-Saturday\r\n    scheduledTime?: string; // HH:MM format\r\n    reminderEnabled: boolean;\r\n    reminderMinutesBefore: number;\r\n    isReflective: boolean; // Low-effort goals like journaling\r\n    createdAt: string;\r\n    isActive: boolean;\r\n}\r\n\r\nexport interface GoalCompletion {\r\n    id: string;\r\n    goalId: string;\r\n    completedAt: string;\r\n    note?: string;\r\n    mood?: 'great' | 'good' | 'okay' | 'tough';\r\n}\r\n\r\nexport interface GoalStreak {\r\n    goalId: string;\r\n    currentStreak: number;\r\n    longestStreak: number;\r\n    lastCompletedDate: string | null;\r\n}\r\n\r\nexport interface AssistantMessage {\r\n    id: string;\r\n    type: 'reminder' | 'encouragement' | 'acknowledgment' | 'gentle-nudge' | 'streak-celebration';\r\n    message: string;\r\n    goalId?: string;\r\n    timestamp: string;\r\n    read: boolean;\r\n}\r\n\r\n// Notification templates - Calm, buddy-like tone for push notifications\r\n// Short, clear, self-contained messages that work at a glance\r\n\r\nconst REMINDER_TEMPLATES = {\r\n    morning: [\r\n        \"Hey â€” {goal} is on your plan today.\",\r\n        \"{goal} is there when you're ready.\",\r\n        \"Just a heads up: {goal} is on the list today.\"\r\n    ],\r\n    afternoon: [\r\n        \"{goal} is still there if you want it.\",\r\n        \"Quick reminder about {goal} â€” no rush.\",\r\n        \"{goal} on your radar for today.\"\r\n    ],\r\n    evening: [\r\n        \"Still time for {goal} if it works for you.\",\r\n        \"{goal} is there if tonight feels right.\",\r\n        \"Evening check-in: {goal} is still an option.\"\r\n    ]\r\n};\r\n\r\n// Time-based reminder templates\r\nconst SCHEDULED_REMINDER_TEMPLATES = [\r\n    \"â° It's {time} â€” this was your planned {goal} time.\",\r\n    \"This is your moment for {goal}.\",\r\n    \"{time} â€” your {goal} window.\"\r\n];\r\n\r\n// Completed goal acknowledgments - brief, no overpraise\r\nconst ACKNOWLEDGMENT_TEMPLATES = [\r\n    \"{goal} done today ðŸ’ª Nice work.\",\r\n    \"You showed up for {goal} â€” that counts.\",\r\n    \"{goal} âœ“ Another one in the books.\",\r\n    \"{goal} complete. Solid.\",\r\n    \"Done with {goal}. Nice.\"\r\n];\r\n\r\n// Streak acknowledgments - simple and warm\r\nconst STREAK_TEMPLATES = {\r\n    small: [ // 3-7 days\r\n        \"{streak} days of {goal}. Momentum building.\",\r\n        \"{goal} â€” {streak} day streak going.\"\r\n    ],\r\n    medium: [ // 7-14 days\r\n        \"{streak} days on {goal}. It's becoming routine.\",\r\n        \"{goal} streak: {streak} days strong.\"\r\n    ],\r\n    large: [ // 14+ days\r\n        \"{streak} days of {goal}. This is you now.\",\r\n        \"{goal} â€” {streak} day habit. Respect.\"\r\n    ]\r\n};\r\n\r\n// Incomplete goal nudges - gentle, encourage small effort\r\nconst INCOMPLETE_GOAL_TEMPLATES = [\r\n    \"You planned {goal} today ðŸ“˜ Even a few minutes is fine.\",\r\n    \"Just a reminder about {goal} â€” light effort works.\",\r\n    \"{goal} is still on the plan. Small steps count.\",\r\n    \"Hey â€” {goal} is there if you get a moment.\"\r\n];\r\n\r\n// Multiple incomplete goals\r\nconst MULTIPLE_GOALS_TEMPLATES = [\r\n    \"Quick check-in ðŸ™‚ {goals} are still on today's plan.\",\r\n    \"A few things left today: {goals}. No pressure.\"\r\n];\r\n\r\n// End-of-day messages - normalize missed days, no disappointment\r\nconst END_OF_DAY_TEMPLATES = {\r\n    allComplete: [\r\n        \"Today's goals done. Rest up.\",\r\n        \"Everything checked off. Nice day.\",\r\n        \"You did what you set out to do today âœ“\"\r\n    ],\r\n    someIncomplete: [\r\n        \"Looks like today filled up â€” totally okay. Tomorrow's a clean slate.\",\r\n        \"No worries about today. We try again tomorrow.\",\r\n        \"Busy day. That happens. Fresh start tomorrow.\",\r\n        \"Today didn't go as planned â€” that's fine. Tomorrow's waiting.\"\r\n    ]\r\n};\r\n\r\n// General encouragement - calm check-ins\r\nconst ENCOURAGEMENT_TEMPLATES = [\r\n    \"Hey â€” how are things going today?\",\r\n    \"Just checking in ðŸ™‚\",\r\n    \"Small steps. That's the whole thing.\",\r\n    \"Progress looks different every day.\"\r\n];\r\n\r\n// Reflective/low-effort goal templates\r\nconst REFLECTIVE_GOAL_TEMPLATES = [\r\n    \"Time for {goal} â€” even a few minutes count.\",\r\n    \"{goal} doesn't need to be perfect today.\",\r\n    \"Quick {goal}? Whatever feels right.\"\r\n];\r\n\r\nclass GoalAssistantService {\r\n    private goals: PersonalGoal[] = [];\r\n    private completions: GoalCompletion[] = [];\r\n    private streaks: Map<string, GoalStreak> = new Map();\r\n    private messages: AssistantMessage[] = [];\r\n    private checkInterval: any = null;\r\n    private listeners: Set<() => void> = new Set();\r\n\r\n    constructor() {\r\n        this.loadData();\r\n        this.startMonitoring();\r\n    }\r\n\r\n    private loadData(): void {\r\n        try {\r\n            const goalsData = localStorage.getItem('goal_assistant_goals');\r\n            const completionsData = localStorage.getItem('goal_assistant_completions');\r\n            const messagesData = localStorage.getItem('goal_assistant_messages');\r\n\r\n            if (goalsData) this.goals = JSON.parse(goalsData);\r\n            if (completionsData) this.completions = JSON.parse(completionsData);\r\n            if (messagesData) this.messages = JSON.parse(messagesData);\r\n\r\n            // Calculate streaks\r\n            this.calculateAllStreaks();\r\n        } catch (error) {\r\n            console.error('Error loading goal assistant data:', error);\r\n        }\r\n    }\r\n\r\n    private saveData(): void {\r\n        try {\r\n            localStorage.setItem('goal_assistant_goals', JSON.stringify(this.goals));\r\n            localStorage.setItem('goal_assistant_completions', JSON.stringify(this.completions));\r\n            localStorage.setItem('goal_assistant_messages', JSON.stringify(this.messages));\r\n        } catch (error) {\r\n            console.error('Error saving goal assistant data:', error);\r\n        }\r\n    }\r\n\r\n    private notify(): void {\r\n        this.listeners.forEach(listener => listener());\r\n    }\r\n\r\n    subscribe(listener: () => void): () => void {\r\n        this.listeners.add(listener);\r\n        return () => this.listeners.delete(listener);\r\n    }\r\n\r\n    // ==================== GOAL MANAGEMENT ====================\r\n\r\n    addGoal(goal: Omit<PersonalGoal, 'id' | 'createdAt'>): PersonalGoal {\r\n        const newGoal: PersonalGoal = {\r\n            ...goal,\r\n            id: `goal_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n            createdAt: new Date().toISOString()\r\n        };\r\n        this.goals.push(newGoal);\r\n        this.streaks.set(newGoal.id, {\r\n            goalId: newGoal.id,\r\n            currentStreak: 0,\r\n            longestStreak: 0,\r\n            lastCompletedDate: null\r\n        });\r\n        this.saveData();\r\n        this.notify();\r\n\r\n        // Welcome message for new goal\r\n        this.addMessage({\r\n            type: 'encouragement',\r\n            message: `New goal added: \"${newGoal.title}\"! ðŸŽ¯ I'll be here to support you. Let's do this together!`,\r\n            goalId: newGoal.id\r\n        });\r\n\r\n        return newGoal;\r\n    }\r\n\r\n    updateGoal(id: string, updates: Partial<PersonalGoal>): void {\r\n        const index = this.goals.findIndex(g => g.id === id);\r\n        if (index !== -1) {\r\n            this.goals[index] = { ...this.goals[index], ...updates };\r\n            this.saveData();\r\n            this.notify();\r\n        }\r\n    }\r\n\r\n    deleteGoal(id: string): void {\r\n        this.goals = this.goals.filter(g => g.id !== id);\r\n        this.completions = this.completions.filter(c => c.goalId !== id);\r\n        this.streaks.delete(id);\r\n        this.saveData();\r\n        this.notify();\r\n    }\r\n\r\n    getGoals(): PersonalGoal[] {\r\n        return [...this.goals];\r\n    }\r\n\r\n    getActiveGoals(): PersonalGoal[] {\r\n        return this.goals.filter(g => g.isActive);\r\n    }\r\n\r\n    getGoalById(id: string): PersonalGoal | undefined {\r\n        return this.goals.find(g => g.id === id);\r\n    }\r\n\r\n    // ==================== COMPLETION TRACKING ====================\r\n\r\n    completeGoal(goalId: string, note?: string, mood?: GoalCompletion['mood']): void {\r\n        const goal = this.getGoalById(goalId);\r\n        if (!goal) return;\r\n\r\n        const completion: GoalCompletion = {\r\n            id: `completion_${Date.now()}`,\r\n            goalId,\r\n            completedAt: new Date().toISOString(),\r\n            note,\r\n            mood\r\n        };\r\n\r\n        this.completions.push(completion);\r\n        this.updateStreak(goalId);\r\n        this.saveData();\r\n        this.notify();\r\n\r\n        // Send acknowledgment\r\n        const streak = this.getStreak(goalId);\r\n        if (streak && streak.currentStreak > 2) {\r\n            this.sendStreakCelebration(goal, streak.currentStreak);\r\n        } else {\r\n            this.sendAcknowledgment(goal);\r\n        }\r\n    }\r\n\r\n    isGoalCompletedToday(goalId: string): boolean {\r\n        const today = new Date().toDateString();\r\n        return this.completions.some(c =>\r\n            c.goalId === goalId &&\r\n            new Date(c.completedAt).toDateString() === today\r\n        );\r\n    }\r\n\r\n    getCompletionsForGoal(goalId: string, days: number = 30): GoalCompletion[] {\r\n        const cutoff = new Date();\r\n        cutoff.setDate(cutoff.getDate() - days);\r\n\r\n        return this.completions\r\n            .filter(c => c.goalId === goalId && new Date(c.completedAt) >= cutoff)\r\n            .sort((a, b) => new Date(b.completedAt).getTime() - new Date(a.completedAt).getTime());\r\n    }\r\n\r\n    getTodaysCompletions(): GoalCompletion[] {\r\n        const today = new Date().toDateString();\r\n        return this.completions.filter(c =>\r\n            new Date(c.completedAt).toDateString() === today\r\n        );\r\n    }\r\n\r\n    // ==================== STREAK MANAGEMENT ====================\r\n\r\n    private updateStreak(goalId: string): void {\r\n        const today = new Date().toDateString();\r\n        const yesterday = new Date();\r\n        yesterday.setDate(yesterday.getDate() - 1);\r\n        const yesterdayStr = yesterday.toDateString();\r\n\r\n        let streak = this.streaks.get(goalId);\r\n        if (!streak) {\r\n            streak = {\r\n                goalId,\r\n                currentStreak: 0,\r\n                longestStreak: 0,\r\n                lastCompletedDate: null\r\n            };\r\n        }\r\n\r\n        if (streak.lastCompletedDate === today) {\r\n            // Already completed today\r\n            return;\r\n        }\r\n\r\n        if (streak.lastCompletedDate === yesterdayStr) {\r\n            // Continuing streak\r\n            streak.currentStreak += 1;\r\n        } else {\r\n            // Starting new streak\r\n            streak.currentStreak = 1;\r\n        }\r\n\r\n        streak.lastCompletedDate = today;\r\n        streak.longestStreak = Math.max(streak.longestStreak, streak.currentStreak);\r\n\r\n        this.streaks.set(goalId, streak);\r\n    }\r\n\r\n    private calculateAllStreaks(): void {\r\n        this.goals.forEach(goal => {\r\n            const completions = this.getCompletionsForGoal(goal.id, 365);\r\n            if (completions.length === 0) {\r\n                this.streaks.set(goal.id, {\r\n                    goalId: goal.id,\r\n                    currentStreak: 0,\r\n                    longestStreak: 0,\r\n                    lastCompletedDate: null\r\n                });\r\n                return;\r\n            }\r\n\r\n            // Calculate current streak\r\n            let currentStreak = 0;\r\n            let longestStreak = 0;\r\n            let tempStreak = 0;\r\n            let lastDate: Date | null = null;\r\n\r\n            // Sort completions by date (newest first)\r\n            const sortedDates = [...new Set(\r\n                completions.map(c => new Date(c.completedAt).toDateString())\r\n            )].sort((a, b) => new Date(b).getTime() - new Date(a).getTime());\r\n\r\n            const today = new Date().toDateString();\r\n            const yesterday = new Date();\r\n            yesterday.setDate(yesterday.getDate() - 1);\r\n\r\n            // Check if streak is current\r\n            if (sortedDates[0] === today || sortedDates[0] === yesterday.toDateString()) {\r\n                for (const dateStr of sortedDates) {\r\n                    const date = new Date(dateStr);\r\n                    if (lastDate === null) {\r\n                        tempStreak = 1;\r\n                    } else {\r\n                        const diff = (lastDate.getTime() - date.getTime()) / (1000 * 60 * 60 * 24);\r\n                        if (diff === 1) {\r\n                            tempStreak++;\r\n                        } else {\r\n                            break;\r\n                        }\r\n                    }\r\n                    lastDate = date;\r\n                }\r\n                currentStreak = tempStreak;\r\n            }\r\n\r\n            // Calculate longest streak\r\n            tempStreak = 0;\r\n            lastDate = null;\r\n            for (const dateStr of sortedDates) {\r\n                const date = new Date(dateStr);\r\n                if (lastDate === null) {\r\n                    tempStreak = 1;\r\n                } else {\r\n                    const diff = (lastDate.getTime() - date.getTime()) / (1000 * 60 * 60 * 24);\r\n                    if (diff === 1) {\r\n                        tempStreak++;\r\n                    } else {\r\n                        longestStreak = Math.max(longestStreak, tempStreak);\r\n                        tempStreak = 1;\r\n                    }\r\n                }\r\n                lastDate = date;\r\n            }\r\n            longestStreak = Math.max(longestStreak, tempStreak);\r\n\r\n            this.streaks.set(goal.id, {\r\n                goalId: goal.id,\r\n                currentStreak,\r\n                longestStreak,\r\n                lastCompletedDate: sortedDates[0] || null\r\n            });\r\n        });\r\n    }\r\n\r\n    getStreak(goalId: string): GoalStreak | undefined {\r\n        return this.streaks.get(goalId);\r\n    }\r\n\r\n    // ==================== MESSAGING SYSTEM ====================\r\n\r\n    private addMessage(params: Omit<AssistantMessage, 'id' | 'timestamp' | 'read'>): void {\r\n        const message: AssistantMessage = {\r\n            ...params,\r\n            id: `msg_${Date.now()}`,\r\n            timestamp: new Date().toISOString(),\r\n            read: false\r\n        };\r\n        this.messages.unshift(message);\r\n\r\n        // Keep only last 50 messages\r\n        if (this.messages.length > 50) {\r\n            this.messages = this.messages.slice(0, 50);\r\n        }\r\n\r\n        this.saveData();\r\n        this.notify();\r\n    }\r\n\r\n    private getRandomTemplate(templates: string[]): string {\r\n        return templates[Math.floor(Math.random() * templates.length)];\r\n    }\r\n\r\n    private formatMessage(template: string, goal: PersonalGoal, streak?: number): string {\r\n        return template\r\n            .replace(/{goal}/g, goal.title)\r\n            .replace(/{streak}/g, String(streak || 0));\r\n    }\r\n\r\n    sendReminder(goal: PersonalGoal): void {\r\n        const hour = new Date().getHours();\r\n        let templates: string[];\r\n\r\n        if (goal.isReflective) {\r\n            templates = REFLECTIVE_GOAL_TEMPLATES;\r\n        } else if (hour < 12) {\r\n            templates = REMINDER_TEMPLATES.morning;\r\n        } else if (hour < 17) {\r\n            templates = REMINDER_TEMPLATES.afternoon;\r\n        } else {\r\n            templates = REMINDER_TEMPLATES.evening;\r\n        }\r\n\r\n        const message = this.formatMessage(this.getRandomTemplate(templates), goal);\r\n\r\n        this.addMessage({\r\n            type: 'reminder',\r\n            message,\r\n            goalId: goal.id\r\n        });\r\n\r\n        this.triggerNotification(goal.title, message);\r\n    }\r\n\r\n    // Sends a scheduled-time specific reminder\r\n    sendScheduledReminder(goal: PersonalGoal): void {\r\n        const template = this.getRandomTemplate(SCHEDULED_REMINDER_TEMPLATES);\r\n        const message = template\r\n            .replace(/{goal}/g, goal.title)\r\n            .replace(/{time}/g, goal.scheduledTime || '');\r\n\r\n        this.addMessage({\r\n            type: 'reminder',\r\n            message,\r\n            goalId: goal.id\r\n        });\r\n\r\n        this.triggerNotification(goal.title, message);\r\n    }\r\n\r\n    private sendAcknowledgment(goal: PersonalGoal): void {\r\n        const message = this.formatMessage(\r\n            this.getRandomTemplate(ACKNOWLEDGMENT_TEMPLATES),\r\n            goal\r\n        );\r\n\r\n        this.addMessage({\r\n            type: 'acknowledgment',\r\n            message,\r\n            goalId: goal.id\r\n        });\r\n\r\n        this.triggerNotification('Done âœ“', message);\r\n    }\r\n\r\n    private sendStreakCelebration(goal: PersonalGoal, streak: number): void {\r\n        let templates: string[];\r\n        if (streak >= 14) {\r\n            templates = STREAK_TEMPLATES.large;\r\n        } else if (streak >= 7) {\r\n            templates = STREAK_TEMPLATES.medium;\r\n        } else {\r\n            templates = STREAK_TEMPLATES.small;\r\n        }\r\n\r\n        const message = this.formatMessage(this.getRandomTemplate(templates), goal, streak);\r\n\r\n        this.addMessage({\r\n            type: 'streak-celebration',\r\n            message,\r\n            goalId: goal.id\r\n        });\r\n\r\n        this.triggerNotification('Streak', message);\r\n    }\r\n\r\n    sendEndOfDayNudge(): void {\r\n        const incompleteGoals = this.getActiveGoals().filter(goal => {\r\n            if (!this.shouldGoalBeCompletedToday(goal)) return false;\r\n            return !this.isGoalCompletedToday(goal.id);\r\n        });\r\n\r\n        if (incompleteGoals.length === 0) {\r\n            // All goals complete - brief acknowledgment\r\n            const message = this.getRandomTemplate(END_OF_DAY_TEMPLATES.allComplete);\r\n            this.addMessage({\r\n                type: 'acknowledgment',\r\n                message\r\n            });\r\n            this.triggerNotification('Goals Complete', message);\r\n            return;\r\n        }\r\n\r\n        // Some goals incomplete - normalize and encourage tomorrow\r\n        if (incompleteGoals.length === 1) {\r\n            const goal = incompleteGoals[0];\r\n            const message = this.formatMessage(\r\n                this.getRandomTemplate(INCOMPLETE_GOAL_TEMPLATES),\r\n                goal\r\n            );\r\n            this.addMessage({\r\n                type: 'gentle-nudge',\r\n                message,\r\n                goalId: goal.id\r\n            });\r\n            this.triggerNotification(goal.title, message);\r\n        } else {\r\n            // Multiple incomplete goals\r\n            const goalNames = incompleteGoals.slice(0, 3).map(g => g.title).join(' and ');\r\n            const template = this.getRandomTemplate(MULTIPLE_GOALS_TEMPLATES);\r\n            const message = template.replace(/{goals}/g, goalNames);\r\n\r\n            this.addMessage({\r\n                type: 'gentle-nudge',\r\n                message\r\n            });\r\n            this.triggerNotification('Check-in', message);\r\n        }\r\n    }\r\n\r\n    sendEncouragement(): void {\r\n        const message = this.getRandomTemplate(ENCOURAGEMENT_TEMPLATES);\r\n        this.addMessage({\r\n            type: 'encouragement',\r\n            message\r\n        });\r\n    }\r\n\r\n    getMessages(limit: number = 20): AssistantMessage[] {\r\n        return this.messages.slice(0, limit);\r\n    }\r\n\r\n    getUnreadMessages(): AssistantMessage[] {\r\n        return this.messages.filter(m => !m.read);\r\n    }\r\n\r\n    markMessageAsRead(id: string): void {\r\n        const message = this.messages.find(m => m.id === id);\r\n        if (message) {\r\n            message.read = true;\r\n            this.saveData();\r\n            this.notify();\r\n        }\r\n    }\r\n\r\n    markAllMessagesAsRead(): void {\r\n        this.messages.forEach(m => m.read = true);\r\n        this.saveData();\r\n        this.notify();\r\n    }\r\n\r\n    // Test method to generate dummy messages for testing\r\n    generateTestMessages(): void {\r\n        const testMessages: Omit<AssistantMessage, 'id' | 'timestamp' | 'read'>[] = [\r\n            {\r\n                type: 'reminder',\r\n                message: \"Hey â€” Morning meditation is on your plan today.\"\r\n            },\r\n            {\r\n                type: 'acknowledgment',\r\n                message: \"Morning meditation done today ðŸ’ª Nice work.\"\r\n            },\r\n            {\r\n                type: 'streak-celebration',\r\n                message: \"5 days of Morning meditation. Momentum building.\"\r\n            },\r\n            {\r\n                type: 'gentle-nudge',\r\n                message: \"Looks like today filled up â€” totally okay. Tomorrow's a clean slate.\"\r\n            },\r\n            {\r\n                type: 'encouragement',\r\n                message: \"Just checking in ðŸ™‚\"\r\n            },\r\n            {\r\n                type: 'reminder',\r\n                message: \"â° It's 3:00 PM â€” this was your planned Exercise time.\"\r\n            },\r\n            {\r\n                type: 'acknowledgment',\r\n                message: \"Done with Drink water. Nice.\"\r\n            },\r\n            {\r\n                type: 'streak-celebration',\r\n                message: \"14 days of Journaling. This is you now.\"\r\n            }\r\n        ];\r\n\r\n        testMessages.forEach((msg, index) => {\r\n            setTimeout(() => {\r\n                this.addMessage(msg);\r\n            }, index * 100);\r\n        });\r\n    }\r\n\r\n    // ==================== SCHEDULING & MONITORING ====================\r\n\r\n    private shouldGoalBeCompletedToday(goal: PersonalGoal): boolean {\r\n        if (!goal.isActive) return false;\r\n\r\n        const today = new Date().getDay(); // 0-6\r\n\r\n        switch (goal.frequency) {\r\n            case 'daily':\r\n                return true;\r\n            case 'weekly':\r\n                // Default to Monday (1) for weekly goals\r\n                return today === 1;\r\n            case 'custom':\r\n                return goal.customDays?.includes(today) || false;\r\n            default:\r\n                return false;\r\n        }\r\n    }\r\n\r\n    private startMonitoring(): void {\r\n        // Check every minute for scheduled reminders\r\n        this.checkInterval = setInterval(() => {\r\n            this.checkReminders();\r\n        }, 60000);\r\n\r\n        // Initial check\r\n        this.checkReminders();\r\n\r\n        // Schedule end-of-day check at 9 PM\r\n        this.scheduleEndOfDayCheck();\r\n    }\r\n\r\n    private checkReminders(): void {\r\n        const now = new Date();\r\n        const currentTime = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;\r\n\r\n        this.getActiveGoals().forEach(goal => {\r\n            if (!goal.reminderEnabled || !goal.scheduledTime) return;\r\n            if (!this.shouldGoalBeCompletedToday(goal)) return;\r\n            if (this.isGoalCompletedToday(goal.id)) return;\r\n\r\n            // Calculate reminder time (before scheduled)\r\n            const [schedH, schedM] = goal.scheduledTime.split(':').map(Number);\r\n            const reminderMinutes = (schedH * 60 + schedM) - goal.reminderMinutesBefore;\r\n            const reminderTime = `${Math.floor(reminderMinutes / 60).toString().padStart(2, '0')}:${(reminderMinutes % 60).toString().padStart(2, '0')}`;\r\n\r\n            // Send advance reminder (general time-of-day message)\r\n            if (currentTime === reminderTime) {\r\n                this.sendReminder(goal);\r\n            }\r\n\r\n            // At exact scheduled time, use time-specific message\r\n            if (currentTime === goal.scheduledTime) {\r\n                this.sendScheduledReminder(goal);\r\n            }\r\n        });\r\n    }\r\n\r\n    private scheduleEndOfDayCheck(): void {\r\n        const now = new Date();\r\n        const endOfDay = new Date();\r\n        endOfDay.setHours(21, 0, 0, 0); // 9 PM\r\n\r\n        if (now > endOfDay) {\r\n            // Already past 9 PM, schedule for tomorrow\r\n            endOfDay.setDate(endOfDay.getDate() + 1);\r\n        }\r\n\r\n        const msUntilEndOfDay = endOfDay.getTime() - now.getTime();\r\n\r\n        setTimeout(() => {\r\n            this.sendEndOfDayNudge();\r\n            // Reschedule for next day\r\n            this.scheduleEndOfDayCheck();\r\n        }, msUntilEndOfDay);\r\n    }\r\n\r\n    private triggerNotification(title: string, body: string): void {\r\n        if (!(\"Notification\" in window)) return;\r\n\r\n        if (Notification.permission === \"granted\") {\r\n            new Notification(title, { body, icon: '/icon-192x192.png' });\r\n        } else if (Notification.permission !== \"denied\") {\r\n            Notification.requestPermission().then(permission => {\r\n                if (permission === \"granted\") {\r\n                    new Notification(title, { body, icon: '/icon-192x192.png' });\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    stopMonitoring(): void {\r\n        if (this.checkInterval) {\r\n            clearInterval(this.checkInterval);\r\n            this.checkInterval = null;\r\n        }\r\n    }\r\n\r\n    // ==================== STATISTICS ====================\r\n\r\n    getCompletionRate(goalId: string, days: number = 7): number {\r\n        const goal = this.getGoalById(goalId);\r\n        if (!goal) return 0;\r\n\r\n        let expectedDays = 0;\r\n        let completedDays = 0;\r\n\r\n        for (let i = 0; i < days; i++) {\r\n            const date = new Date();\r\n            date.setDate(date.getDate() - i);\r\n            const dayOfWeek = date.getDay();\r\n\r\n            const shouldComplete =\r\n                goal.frequency === 'daily' ||\r\n                (goal.frequency === 'weekly' && dayOfWeek === 1) ||\r\n                (goal.frequency === 'custom' && goal.customDays?.includes(dayOfWeek));\r\n\r\n            if (shouldComplete) {\r\n                expectedDays++;\r\n                const dateStr = date.toDateString();\r\n                const completed = this.completions.some(c =>\r\n                    c.goalId === goalId && new Date(c.completedAt).toDateString() === dateStr\r\n                );\r\n                if (completed) completedDays++;\r\n            }\r\n        }\r\n\r\n        return expectedDays > 0 ? Math.round((completedDays / expectedDays) * 100) : 0;\r\n    }\r\n\r\n    getOverallStats(): {\r\n        totalGoals: number;\r\n        activeGoals: number;\r\n        completedToday: number;\r\n        pendingToday: number;\r\n        averageCompletionRate: number;\r\n    } {\r\n        const activeGoals = this.getActiveGoals();\r\n        const todaysCompletions = this.getTodaysCompletions();\r\n\r\n        const pendingToday = activeGoals.filter(goal => {\r\n            if (!this.shouldGoalBeCompletedToday(goal)) return false;\r\n            return !this.isGoalCompletedToday(goal.id);\r\n        }).length;\r\n\r\n        const completionRates = activeGoals.map(g => this.getCompletionRate(g.id, 7));\r\n        const averageCompletionRate = completionRates.length > 0\r\n            ? Math.round(completionRates.reduce((a, b) => a + b, 0) / completionRates.length)\r\n            : 0;\r\n\r\n        return {\r\n            totalGoals: this.goals.length,\r\n            activeGoals: activeGoals.length,\r\n            completedToday: todaysCompletions.length,\r\n            pendingToday,\r\n            averageCompletionRate\r\n        };\r\n    }\r\n}\r\n\r\n// Singleton instance\r\nexport const goalAssistantService = new GoalAssistantService();\r\nexport default goalAssistantService;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\googleSearchService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\newsService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\notionService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\openaiService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\performanceService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\sleepMonitoringService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":59,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1829,1832],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1829,1832],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"prefer-const","severity":2,"message":"'reminderDate' is never reassigned. Use 'const' instead.","line":167,"column":17,"nodeType":"Identifier","messageId":"useConst","endLine":167,"endColumn":29,"fix":{"range":[5434,5496],"text":"const reminderDate = new Date(sleepDate.getTime() - 30 * 60000);"}}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"/**\r\n * Sleep Monitoring Service\r\n * \r\n * Tracks sleep duration based on user-defined sleep and wake times.\r\n * Time-based tracking - no continuous sensor monitoring required.\r\n */\r\n\r\nexport interface SleepSchedule {\r\n    sleepTime: string; // HH:MM format (24-hour)\r\n    wakeTime: string; // HH:MM format (24-hour)\r\n    enabled: boolean;\r\n    bedReminder: boolean;\r\n    wakeUpAlarm: boolean;\r\n}\r\n\r\nexport interface SleepRecord {\r\n    id: string;\r\n    date: string; // ISO date string (YYYY-MM-DD) - the date of waking up\r\n    sleepStartTime: string; // ISO timestamp\r\n    wakeEndTime: string; // ISO timestamp\r\n    durationMinutes: number;\r\n    durationHours: number;\r\n    quality: 'poor' | 'fair' | 'good' | 'excellent';\r\n    isAutoTracked: boolean;\r\n}\r\n\r\nexport interface SleepStats {\r\n    averageDuration: number; // in hours\r\n    totalNights: number;\r\n    qualityBreakdown: { poor: number; fair: number; good: number; excellent: number };\r\n    weeklyData: { date: string; hours: number }[];\r\n    streak: number; // consecutive nights on schedule\r\n}\r\n\r\nexport interface SleepMonitoringState {\r\n    schedule: SleepSchedule;\r\n    isMonitoring: boolean;\r\n    isSleeping: boolean;\r\n    currentSleepStart: string | null;\r\n    todayRecord: SleepRecord | null;\r\n    history: SleepRecord[];\r\n    stats: SleepStats;\r\n}\r\n\r\n// Constants\r\nconst MIN_SLEEP_HOURS = 3; // Minimum valid sleep duration\r\nconst MAX_SLEEP_HOURS = 14; // Maximum valid sleep duration\r\nconst STORAGE_KEYS = {\r\n    SCHEDULE: 'sleep_schedule',\r\n    HISTORY: 'sleep_history',\r\n    CURRENT_SESSION: 'sleep_current_session'\r\n};\r\n\r\nclass SleepMonitoringService {\r\n    private schedule: SleepSchedule;\r\n    private isMonitoring: boolean = false;\r\n    private isSleeping: boolean = false;\r\n    private currentSleepStart: string | null = null;\r\n    private checkInterval: any = null;\r\n    private listeners: Set<(state: SleepMonitoringState) => void> = new Set();\r\n\r\n    constructor() {\r\n        this.schedule = this.loadSchedule();\r\n        this.loadCurrentSession();\r\n        this.startMonitoring();\r\n    }\r\n\r\n    /**\r\n     * Load saved schedule from localStorage\r\n     */\r\n    private loadSchedule(): SleepSchedule {\r\n        const stored = localStorage.getItem(STORAGE_KEYS.SCHEDULE);\r\n        if (stored) {\r\n            const parsed = JSON.parse(stored);\r\n            // Ensure new fields exist for migrated data\r\n            return {\r\n                ...parsed,\r\n                bedReminder: parsed.bedReminder ?? true,\r\n                wakeUpAlarm: parsed.wakeUpAlarm ?? true\r\n            };\r\n        }\r\n        // Default schedule\r\n        return {\r\n            sleepTime: '23:00',\r\n            wakeTime: '07:00',\r\n            enabled: true,\r\n            bedReminder: true,\r\n            wakeUpAlarm: true\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Save schedule to localStorage\r\n     */\r\n    private saveSchedule(): void {\r\n        localStorage.setItem(STORAGE_KEYS.SCHEDULE, JSON.stringify(this.schedule));\r\n    }\r\n\r\n    /**\r\n     * Load any ongoing sleep session\r\n     */\r\n    private loadCurrentSession(): void {\r\n        const stored = localStorage.getItem(STORAGE_KEYS.CURRENT_SESSION);\r\n        if (stored) {\r\n            const session = JSON.parse(stored);\r\n            this.isSleeping = session.isSleeping;\r\n            this.currentSleepStart = session.sleepStart;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Save current session state\r\n     */\r\n    private saveCurrentSession(): void {\r\n        localStorage.setItem(STORAGE_KEYS.CURRENT_SESSION, JSON.stringify({\r\n            isSleeping: this.isSleeping,\r\n            sleepStart: this.currentSleepStart\r\n        }));\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * Calculate sleep duration between two timestamps\r\n     */\r\n    private calculateDuration(startTime: string, endTime: string): { minutes: number; hours: number } {\r\n        const start = new Date(startTime);\r\n        const end = new Date(endTime);\r\n        const diffMs = end.getTime() - start.getTime();\r\n        const minutes = Math.round(diffMs / (1000 * 60));\r\n        const hours = parseFloat((minutes / 60).toFixed(2));\r\n\r\n        return { minutes, hours };\r\n    }\r\n\r\n    /**\r\n     * Determine sleep quality based on duration\r\n     */\r\n    private calculateQuality(durationHours: number): 'poor' | 'fair' | 'good' | 'excellent' {\r\n        if (durationHours < 5) return 'poor';\r\n        if (durationHours < 6.5) return 'fair';\r\n        if (durationHours < 8) return 'good';\r\n        return 'excellent';\r\n    }\r\n\r\n    /**\r\n     * Check if current time matches sleep/wake schedule\r\n     */\r\n    private checkSchedule = (): void => {\r\n        if (!this.schedule.enabled) return;\r\n\r\n        const now = new Date();\r\n        const currentHours = now.getHours();\r\n        const currentMinutes = now.getMinutes();\r\n        const currentTime = `${currentHours.toString().padStart(2, '0')}:${currentMinutes.toString().padStart(2, '0')}`;\r\n\r\n        // Bedtime Reminder (30 mins before)\r\n        if (this.schedule.bedReminder) {\r\n            const [sleepH, sleepM] = this.schedule.sleepTime.split(':').map(Number);\r\n            const sleepDate = new Date();\r\n            sleepDate.setHours(sleepH, sleepM, 0, 0);\r\n\r\n            // Handle day crossing for sleep time (e.g. 01:00 means next day if now is 23:00) \r\n            // Simplified: just check if now + 30m == sleepTime\r\n            // or better: calculate 30 mins before sleepTime and compare with currentTime\r\n\r\n            let reminderDate = new Date(sleepDate.getTime() - 30 * 60000);\r\n            const reminderTime = `${reminderDate.getHours().toString().padStart(2, '0')}:${reminderDate.getMinutes().toString().padStart(2, '0')}`;\r\n\r\n            if (currentTime === reminderTime) {\r\n                this.triggerNotification(\"Time to wind down ðŸŒ™\", \"Your scheduled bedtime is in 30 minutes.\");\r\n            }\r\n        }\r\n\r\n        // Wake Up Alarm\r\n        if (this.schedule.wakeUpAlarm && currentTime === this.schedule.wakeTime) {\r\n            this.triggerNotification(\"Good Morning! â˜€ï¸\", \"It's time to wake up and start your day.\");\r\n        }\r\n\r\n        // Auto-start sleep if schedule dictates (optional, keeping existing logic concept but ensuring it matches exact time)\r\n        if (currentTime === this.schedule.sleepTime && !this.isSleeping) {\r\n            // We might want to just notify instead of auto-starting, or both. \r\n            // For now, let's keep auto-start as it mimics \"tracking mod\"\r\n            if (this.schedule.enabled) {\r\n                this.startSleepSession();\r\n            }\r\n        }\r\n\r\n        // Auto-end sleep\r\n        if (currentTime === this.schedule.wakeTime && this.isSleeping) {\r\n            this.endSleepSession();\r\n        }\r\n    };\r\n\r\n    private triggerNotification(title: string, body: string) {\r\n        if (!(\"Notification\" in window)) return;\r\n\r\n        if (Notification.permission === \"granted\") {\r\n            new Notification(title, { body });\r\n        } else if (Notification.permission !== \"denied\") {\r\n            Notification.requestPermission().then(permission => {\r\n                if (permission === \"granted\") {\r\n                    new Notification(title, { body });\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Start monitoring the schedule\r\n     */\r\n    public startMonitoring(): void {\r\n        if (this.isMonitoring) return;\r\n\r\n        this.isMonitoring = true;\r\n        // Check every minute\r\n        this.checkInterval = setInterval(this.checkSchedule, 60000);\r\n        this.checkSchedule(); // Check immediately\r\n        this.notifyListeners();\r\n\r\n        console.log('Sleep monitoring started');\r\n    }\r\n\r\n    /**\r\n     * Stop monitoring\r\n     */\r\n    public stopMonitoring(): void {\r\n        if (!this.isMonitoring) return;\r\n\r\n        this.isMonitoring = false;\r\n        if (this.checkInterval) {\r\n            clearInterval(this.checkInterval);\r\n            this.checkInterval = null;\r\n        }\r\n        this.notifyListeners();\r\n\r\n        console.log('Sleep monitoring stopped');\r\n    }\r\n\r\n    /**\r\n     * Start a sleep session (can be called manually or automatically)\r\n     */\r\n    public startSleepSession(): void {\r\n        if (this.isSleeping) return;\r\n\r\n        this.isSleeping = true;\r\n        this.currentSleepStart = new Date().toISOString();\r\n        this.saveCurrentSession();\r\n        this.notifyListeners();\r\n\r\n        console.log('Sleep session started at:', this.currentSleepStart);\r\n    }\r\n\r\n    /**\r\n     * End sleep session and record the data\r\n     */\r\n    public endSleepSession(): SleepRecord | null {\r\n        if (!this.isSleeping || !this.currentSleepStart) return null;\r\n\r\n        const wakeTime = new Date().toISOString();\r\n        const { minutes, hours } = this.calculateDuration(this.currentSleepStart, wakeTime);\r\n\r\n        // Validate sleep duration\r\n        if (hours < MIN_SLEEP_HOURS || hours > MAX_SLEEP_HOURS) {\r\n            console.warn(`Invalid sleep duration: ${hours} hours. Discarding record.`);\r\n            this.resetSession();\r\n            return null;\r\n        }\r\n\r\n        const record: SleepRecord = {\r\n            id: `sleep_${Date.now()}`,\r\n            date: new Date().toISOString().split('T')[0],\r\n            sleepStartTime: this.currentSleepStart,\r\n            wakeEndTime: wakeTime,\r\n            durationMinutes: minutes,\r\n            durationHours: hours,\r\n            quality: this.calculateQuality(hours),\r\n            isAutoTracked: true\r\n        };\r\n\r\n        this.saveSleepRecord(record);\r\n        this.resetSession();\r\n\r\n        console.log('Sleep session ended. Duration:', hours, 'hours');\r\n        return record;\r\n    }\r\n\r\n    /**\r\n     * Reset current session\r\n     */\r\n    private resetSession(): void {\r\n        this.isSleeping = false;\r\n        this.currentSleepStart = null;\r\n        localStorage.removeItem(STORAGE_KEYS.CURRENT_SESSION);\r\n        this.notifyListeners();\r\n    }\r\n\r\n    /**\r\n     * Save a sleep record to history\r\n     */\r\n    private saveSleepRecord(record: SleepRecord): void {\r\n        const history = this.getHistory();\r\n\r\n        // Replace if record for same date exists\r\n        const existingIndex = history.findIndex(r => r.date === record.date);\r\n        if (existingIndex >= 0) {\r\n            history[existingIndex] = record;\r\n        } else {\r\n            history.unshift(record);\r\n        }\r\n\r\n        // Keep last 90 days\r\n        const trimmedHistory = history.slice(0, 90);\r\n        localStorage.setItem(STORAGE_KEYS.HISTORY, JSON.stringify(trimmedHistory));\r\n        this.notifyListeners();\r\n    }\r\n\r\n    /**\r\n     * Get sleep history\r\n     */\r\n    public getHistory(): SleepRecord[] {\r\n        const stored = localStorage.getItem(STORAGE_KEYS.HISTORY);\r\n        return stored ? JSON.parse(stored) : [];\r\n    }\r\n\r\n    /**\r\n     * Get today's sleep record\r\n     */\r\n    public getTodayRecord(): SleepRecord | null {\r\n        const today = new Date().toISOString().split('T')[0];\r\n        const history = this.getHistory();\r\n        return history.find(r => r.date === today) || null;\r\n    }\r\n\r\n    /**\r\n     * Calculate sleep statistics\r\n     */\r\n    public getStats(): SleepStats {\r\n        const history = this.getHistory();\r\n        const last30Days = history.slice(0, 30);\r\n\r\n        if (last30Days.length === 0) {\r\n            return {\r\n                averageDuration: 0,\r\n                totalNights: 0,\r\n                qualityBreakdown: { poor: 0, fair: 0, good: 0, excellent: 0 },\r\n                weeklyData: [],\r\n                streak: 0\r\n            };\r\n        }\r\n\r\n        const totalDuration = last30Days.reduce((sum, r) => sum + r.durationHours, 0);\r\n        const averageDuration = parseFloat((totalDuration / last30Days.length).toFixed(1));\r\n\r\n        const qualityBreakdown = { poor: 0, fair: 0, good: 0, excellent: 0 };\r\n        last30Days.forEach(r => {\r\n            qualityBreakdown[r.quality]++;\r\n        });\r\n\r\n        // Weekly data (last 7 days)\r\n        const weeklyData = history.slice(0, 7).map(r => ({\r\n            date: r.date,\r\n            hours: r.durationHours\r\n        })).reverse();\r\n\r\n        // Calculate streak\r\n        let streak = 0;\r\n        for (const record of history) {\r\n            if (record.quality === 'good' || record.quality === 'excellent') {\r\n                streak++;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        return {\r\n            averageDuration,\r\n            totalNights: history.length,\r\n            qualityBreakdown,\r\n            weeklyData,\r\n            streak\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Update sleep schedule\r\n     */\r\n    public updateSchedule(schedule: Partial<SleepSchedule>): void {\r\n        this.schedule = { ...this.schedule, ...schedule };\r\n        this.saveSchedule();\r\n        this.notifyListeners();\r\n    }\r\n\r\n    /**\r\n     * Get current state\r\n     */\r\n    public getState(): SleepMonitoringState {\r\n        return {\r\n            schedule: this.schedule,\r\n            isMonitoring: this.isMonitoring,\r\n            isSleeping: this.isSleeping,\r\n            currentSleepStart: this.currentSleepStart,\r\n            todayRecord: this.getTodayRecord(),\r\n            history: this.getHistory(),\r\n            stats: this.getStats()\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Subscribe to state changes\r\n     */\r\n    public subscribe(listener: (state: SleepMonitoringState) => void): () => void {\r\n        this.listeners.add(listener);\r\n        return () => this.listeners.delete(listener);\r\n    }\r\n\r\n    /**\r\n     * Notify all listeners\r\n     */\r\n    private notifyListeners(): void {\r\n        const state = this.getState();\r\n        this.listeners.forEach(listener => listener(state));\r\n    }\r\n\r\n    /**\r\n     * Manually log a sleep record (for past entries or corrections)\r\n     */\r\n    public logSleepManually(sleepTime: string, wakeTime: string): SleepRecord {\r\n        const { minutes, hours } = this.calculateDuration(sleepTime, wakeTime);\r\n\r\n        const record: SleepRecord = {\r\n            id: `sleep_${Date.now()}`,\r\n            date: new Date(wakeTime).toISOString().split('T')[0],\r\n            sleepStartTime: sleepTime,\r\n            wakeEndTime: wakeTime,\r\n            durationMinutes: minutes,\r\n            durationHours: hours,\r\n            quality: this.calculateQuality(hours),\r\n            isAutoTracked: false\r\n        };\r\n\r\n        this.saveSleepRecord(record);\r\n        return record;\r\n    }\r\n\r\n    /**\r\n     * Get recommended bedtimes for a given wake time (based on 90-min cycles)\r\n     */\r\n    public getRecommendedBedtimes(wakeTime: string): { time: string; cycles: number; hours: number }[] {\r\n        const [hours, mins] = wakeTime.split(':').map(Number);\r\n        const wakeDate = new Date();\r\n        wakeDate.setHours(hours, mins, 0, 0);\r\n\r\n        const recommendations = [6, 5, 4].map(cycles => {\r\n            const bedtime = new Date(wakeDate.getTime());\r\n            // Subtract (cycles * 90 mins) + 15 mins to fall asleep\r\n            bedtime.setMinutes(bedtime.getMinutes() - (cycles * 90) - 15);\r\n\r\n            return {\r\n                time: `${bedtime.getHours().toString().padStart(2, '0')}:${bedtime.getMinutes().toString().padStart(2, '0')}`,\r\n                cycles,\r\n                hours: (cycles * 90) / 60\r\n            };\r\n        });\r\n\r\n        return recommendations;\r\n    }\r\n}\r\n\r\n// Singleton instance\r\nexport const sleepMonitoringService = new SleepMonitoringService();\r\nexport default sleepMonitoringService;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\stepTrackingService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":143,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4438,4441],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4438,4441],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":145,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":145,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4562,4565],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4562,4565],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Step Tracking Service\r\n * \r\n * Automatically tracks steps using device motion sensors (accelerometer).\r\n * No manual input required - runs passively in the background.\r\n */\r\n\r\nexport interface StepData {\r\n    date: string; // ISO date string (YYYY-MM-DD)\r\n    steps: number;\r\n    distance: number; // in meters\r\n    calories: number;\r\n    lastUpdated: string; // ISO timestamp\r\n}\r\n\r\nexport interface StepTrackingState {\r\n    isTracking: boolean;\r\n    permissionGranted: boolean;\r\n    todaySteps: number;\r\n    todayDistance: number;\r\n    todayCalories: number;\r\n    history: StepData[];\r\n}\r\n\r\n// Constants for step detection algorithm\r\nconst STEP_THRESHOLD = 1.2; // Acceleration threshold to detect a step (g-force)\r\nconst STEP_COOLDOWN_MS = 250; // Minimum time between steps (prevents double-counting)\r\nconst AVERAGE_STRIDE_LENGTH_M = 0.762; // Average stride length in meters\r\nconst CALORIES_PER_STEP = 0.04; // Average calories burned per step\r\n\r\nclass StepTrackingService {\r\n    private isTracking: boolean = false;\r\n    private stepCount: number = 0;\r\n    private lastStepTime: number = 0;\r\n    private lastAcceleration: number = 0;\r\n    private listeners: Set<(state: StepTrackingState) => void> = new Set();\r\n    private motionHandler: ((event: DeviceMotionEvent) => void) | null = null;\r\n\r\n    constructor() {\r\n        this.loadTodayData();\r\n        this.setupDailyReset();\r\n    }\r\n\r\n    /**\r\n     * Get the current date as ISO string (YYYY-MM-DD)\r\n     */\r\n    private getTodayKey(): string {\r\n        return new Date().toISOString().split('T')[0];\r\n    }\r\n\r\n    /**\r\n     * Load today's step data from localStorage\r\n     */\r\n    private loadTodayData(): void {\r\n        const todayKey = this.getTodayKey();\r\n        const stored = localStorage.getItem(`steps_${todayKey}`);\r\n\r\n        if (stored) {\r\n            const data: StepData = JSON.parse(stored);\r\n            this.stepCount = data.steps;\r\n        } else {\r\n            this.stepCount = 0;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Save current step data to localStorage\r\n     */\r\n    private saveData(): void {\r\n        const todayKey = this.getTodayKey();\r\n        const data: StepData = {\r\n            date: todayKey,\r\n            steps: this.stepCount,\r\n            distance: this.stepCount * AVERAGE_STRIDE_LENGTH_M,\r\n            calories: Math.round(this.stepCount * CALORIES_PER_STEP),\r\n            lastUpdated: new Date().toISOString()\r\n        };\r\n\r\n        localStorage.setItem(`steps_${todayKey}`, JSON.stringify(data));\r\n        this.updateHistory(data);\r\n        this.notifyListeners();\r\n    }\r\n\r\n    /**\r\n     * Update step history (last 30 days)\r\n     */\r\n    private updateHistory(todayData: StepData): void {\r\n        const historyKey = 'step_history';\r\n        const stored = localStorage.getItem(historyKey);\r\n        let history: StepData[] = stored ? JSON.parse(stored) : [];\r\n\r\n        // Update or add today's entry\r\n        const existingIndex = history.findIndex(h => h.date === todayData.date);\r\n        if (existingIndex >= 0) {\r\n            history[existingIndex] = todayData;\r\n        } else {\r\n            history.push(todayData);\r\n        }\r\n\r\n        // Keep only last 30 days\r\n        history = history\r\n            .sort((a, b) => b.date.localeCompare(a.date))\r\n            .slice(0, 30);\r\n\r\n        localStorage.setItem(historyKey, JSON.stringify(history));\r\n    }\r\n\r\n    /**\r\n     * Setup daily reset at midnight\r\n     */\r\n    private setupDailyReset(): void {\r\n        const now = new Date();\r\n        const tomorrow = new Date(now);\r\n        tomorrow.setDate(tomorrow.getDate() + 1);\r\n        tomorrow.setHours(0, 0, 0, 0);\r\n\r\n        const msUntilMidnight = tomorrow.getTime() - now.getTime();\r\n\r\n        setTimeout(() => {\r\n            this.stepCount = 0;\r\n            this.saveData();\r\n            this.setupDailyReset(); // Setup next day's reset\r\n        }, msUntilMidnight);\r\n    }\r\n\r\n    /**\r\n     * Check if device motion is supported\r\n     */\r\n    public isSupported(): boolean {\r\n        return 'DeviceMotionEvent' in window;\r\n    }\r\n\r\n    /**\r\n     * Request permission for motion sensors (required on iOS 13+)\r\n     */\r\n    public async requestPermission(): Promise<boolean> {\r\n        if (!this.isSupported()) {\r\n            console.warn('DeviceMotion not supported on this device');\r\n            return false;\r\n        }\r\n\r\n        // iOS 13+ requires explicit permission\r\n        if (typeof (DeviceMotionEvent as any).requestPermission === 'function') {\r\n            try {\r\n                const permission = await (DeviceMotionEvent as any).requestPermission();\r\n                return permission === 'granted';\r\n            } catch (error) {\r\n                console.error('Error requesting motion permission:', error);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // Android and other platforms don't require explicit permission\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Process accelerometer data to detect steps\r\n     */\r\n    private processMotionEvent = (event: DeviceMotionEvent): void => {\r\n        const acceleration = event.accelerationIncludingGravity;\r\n        if (!acceleration || acceleration.x === null || acceleration.y === null || acceleration.z === null) return;\r\n\r\n        const now = Date.now();\r\n\r\n        // Calculate total acceleration magnitude\r\n        const totalAcceleration = Math.sqrt(\r\n            acceleration.x ** 2 +\r\n            acceleration.y ** 2 +\r\n            acceleration.z ** 2\r\n        ) / 9.81; // Normalize to g-force\r\n\r\n        // Step detection algorithm:\r\n        // 1. Check if acceleration crosses threshold (peak detection)\r\n        // 2. Ensure minimum time between steps (cooldown)\r\n        // 3. Detect rising edge (going above threshold)\r\n\r\n        const isAboveThreshold = totalAcceleration > STEP_THRESHOLD;\r\n        const wasAboveThreshold = this.lastAcceleration > STEP_THRESHOLD;\r\n        const cooldownPassed = (now - this.lastStepTime) > STEP_COOLDOWN_MS;\r\n\r\n        // Detect step on rising edge (transition from below to above threshold)\r\n        if (isAboveThreshold && !wasAboveThreshold && cooldownPassed) {\r\n            this.stepCount++;\r\n            this.lastStepTime = now;\r\n\r\n            // Save every 10 steps to reduce write frequency\r\n            if (this.stepCount % 10 === 0) {\r\n                this.saveData();\r\n            }\r\n        }\r\n\r\n        this.lastAcceleration = totalAcceleration;\r\n    };\r\n\r\n    /**\r\n     * Start tracking steps\r\n     */\r\n    public async startTracking(): Promise<boolean> {\r\n        if (this.isTracking) return true;\r\n\r\n        const hasPermission = await this.requestPermission();\r\n        if (!hasPermission) return false;\r\n\r\n        this.motionHandler = this.processMotionEvent.bind(this);\r\n        window.addEventListener('devicemotion', this.motionHandler);\r\n        this.isTracking = true;\r\n        this.notifyListeners();\r\n\r\n        console.log('Step tracking started');\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Stop tracking steps\r\n     */\r\n    public stopTracking(): void {\r\n        if (!this.isTracking || !this.motionHandler) return;\r\n\r\n        window.removeEventListener('devicemotion', this.motionHandler);\r\n        this.motionHandler = null;\r\n        this.isTracking = false;\r\n        this.saveData(); // Save final count\r\n        this.notifyListeners();\r\n\r\n        console.log('Step tracking stopped');\r\n    }\r\n\r\n    /**\r\n     * Get current state\r\n     */\r\n    public getState(): StepTrackingState {\r\n        const historyStr = localStorage.getItem('step_history');\r\n        const history: StepData[] = historyStr ? JSON.parse(historyStr) : [];\r\n\r\n        return {\r\n            isTracking: this.isTracking,\r\n            permissionGranted: this.isTracking,\r\n            todaySteps: this.stepCount,\r\n            todayDistance: Math.round(this.stepCount * AVERAGE_STRIDE_LENGTH_M),\r\n            todayCalories: Math.round(this.stepCount * CALORIES_PER_STEP),\r\n            history\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Manually add steps (for testing or manual entry fallback)\r\n     */\r\n    public addSteps(count: number): void {\r\n        this.stepCount += count;\r\n        this.saveData();\r\n    }\r\n\r\n    /**\r\n     * Get steps for a specific date\r\n     */\r\n    public getStepsForDate(date: string): StepData | null {\r\n        const stored = localStorage.getItem(`steps_${date}`);\r\n        return stored ? JSON.parse(stored) : null;\r\n    }\r\n\r\n    /**\r\n     * Subscribe to state changes\r\n     */\r\n    public subscribe(listener: (state: StepTrackingState) => void): () => void {\r\n        this.listeners.add(listener);\r\n        return () => this.listeners.delete(listener);\r\n    }\r\n\r\n    /**\r\n     * Notify all listeners of state change\r\n     */\r\n    private notifyListeners(): void {\r\n        const state = this.getState();\r\n        this.listeners.forEach(listener => listener(state));\r\n    }\r\n\r\n    /**\r\n     * Get weekly summary\r\n     */\r\n    public getWeeklySummary(): { totalSteps: number; avgSteps: number; totalDistance: number; totalCalories: number } {\r\n        const history = this.getState().history;\r\n        const lastWeek = history.slice(0, 7);\r\n\r\n        const totalSteps = lastWeek.reduce((sum, day) => sum + day.steps, 0);\r\n        const totalDistance = lastWeek.reduce((sum, day) => sum + day.distance, 0);\r\n        const totalCalories = lastWeek.reduce((sum, day) => sum + day.calories, 0);\r\n\r\n        return {\r\n            totalSteps,\r\n            avgSteps: Math.round(totalSteps / Math.max(lastWeek.length, 1)),\r\n            totalDistance: Math.round(totalDistance),\r\n            totalCalories: Math.round(totalCalories)\r\n        };\r\n    }\r\n}\r\n\r\n// Singleton instance\r\nexport const stepTrackingService = new StepTrackingService();\r\nexport default stepTrackingService;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\webSearchService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\services\\youtubeService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\types\\auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\types\\contentProtection.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\utils\\cn.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\utils\\firebaseConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\utils\\lifeTrackerStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":600,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":600,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16225,16228],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16225,16228],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":676,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":676,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19146,19149],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19146,19149],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":692,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":692,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19879,19882],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19879,19882],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":714,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":714,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20922,20925],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20922,20925],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":729,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":729,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21538,21541],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21538,21541],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":742,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":742,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22063,22066],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22063,22066],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":775,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":775,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23515,23518],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23515,23518],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":952,"column":17,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":956,"endColumn":82},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":959,"column":17,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":961,"endColumn":82}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// LifeTracker Central Data Store\r\n// Manages all life systems data with localStorage persistence and cloud sync\r\nimport { supabase } from '../lib/supabase';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { getCurrentFirebaseUid } from '../api/authApi';\r\n\r\n// Types\r\nexport interface MeditationSession {\r\n    id: string;\r\n    date: string;\r\n    duration: number; // in minutes\r\n    type: 'guided' | 'unguided' | 'breathing' | 'body-scan';\r\n    category?: string;\r\n    moodBefore: number; // 1-5\r\n    moodAfter: number; // 1-5\r\n    mentalClarity?: number; // 1-5\r\n    stressTriggers?: string;\r\n    consistencyRating?: boolean;\r\n    qualityRating?: number; // 1-5\r\n    focusDrops?: number;\r\n    note?: string;\r\n    createdAt: string;\r\n}\r\n\r\nexport interface ReadingSession {\r\n    id: string;\r\n    bookId: string;\r\n    date: string;\r\n    pagesRead: number;\r\n    startPage: number;\r\n    endPage: number;\r\n    note?: string;\r\n    createdAt: string;\r\n}\r\n\r\nexport interface Book {\r\n    id: string;\r\n    title: string;\r\n    author: string;\r\n    totalPages: number;\r\n    currentPage: number;\r\n    status: 'reading' | 'completed' | 'paused';\r\n    coverColor: string;\r\n    startedAt: string;\r\n    completedAt?: string;\r\n    folderId?: string; // Which folder this book belongs to\r\n    pdfFileName?: string; // Uploaded PDF file name\r\n    pdfFileSize?: number; // PDF file size in bytes\r\n    pdfDataUrl?: string; // PDF file content as data URL (Legacy)\r\n    pdfPath?: string; // Supabase Storage path\r\n    pdfCoverImage?: string; // Extracted first page as image data URL (deprecated - use coverImage)\r\n    coverImage?: string; // Manually uploaded cover image (preferred)\r\n    description?: string; // Book description/notes\r\n}\r\n\r\nexport interface DailyTask {\r\n    id: string;\r\n    title: string;\r\n    category: 'physical' | 'mental' | 'work' | 'personal';\r\n    completed: boolean;\r\n    date: string;\r\n    createdAt: string;\r\n}\r\n\r\nexport interface WeeklyGoal {\r\n    id: string;\r\n    title: string;\r\n    systemId: string;\r\n    progress: number; // 0-100\r\n    weekStart: string;\r\n    completed: boolean;\r\n}\r\n\r\nexport interface LifeNote {\r\n    id: string;\r\n    content: string;\r\n    linkedSystem?: 'workout' | 'meditation' | 'reading' | 'general';\r\n    linkedSessionId?: string;\r\n    mood?: number;\r\n    tags: string[];\r\n    date: string;\r\n    createdAt: string;\r\n    attachmentPath?: string;\r\n}\r\n\r\nexport interface StreakData {\r\n    systemId: string;\r\n    currentStreak: number;\r\n    longestStreak: number;\r\n    lastActivityDate: string;\r\n}\r\n\r\nexport interface ReadingFolder {\r\n    id: string;\r\n    name: string;\r\n    description?: string;\r\n    color?: string;\r\n    icon?: string;\r\n    bookIds: string[];\r\n    createdAt: string;\r\n}\r\n\r\n// ==================== BOOK INSIGHTS TYPES ====================\r\nexport interface CoreIdea {\r\n    id: string;\r\n    content: string;\r\n    linkedQuotes: string[]; // IDs of linked quotes\r\n}\r\n\r\nexport interface ActionTakeaway {\r\n    id: string;\r\n    action: string;\r\n    completed: boolean;\r\n    linkedQuotes: string[]; // IDs of linked quotes\r\n}\r\n\r\nexport interface BeliefChange {\r\n    id: string;\r\n    beliefBefore: string;\r\n    beliefAfter: string;\r\n    linkedQuotes: string[]; // IDs of linked quotes\r\n}\r\n\r\nexport interface BookQuote {\r\n    id: string;\r\n    content: string;\r\n    page?: number;\r\n    note?: string;\r\n}\r\n\r\nexport interface RevisitReminder {\r\n    id: string;\r\n    reminderDate: string; // ISO date string\r\n    prompt: string;\r\n    completed: boolean;\r\n}\r\n\r\nexport interface BookInsight {\r\n    id: string;\r\n    bookId: string;\r\n    coreIdeas: CoreIdea[];\r\n    actionTakeaways: ActionTakeaway[];\r\n    beliefChanges: BeliefChange[];\r\n    quotes: BookQuote[];\r\n    revisitReminders: RevisitReminder[];\r\n    finalSummary: string;\r\n    createdAt: string;\r\n    updatedAt: string;\r\n}\r\n\r\n// ==================== CODING TYPES ====================\r\nexport interface CodingLearningWeek {\r\n    id: string;\r\n    weekNumber: number;\r\n    weekRange: string;\r\n    topics: string[];\r\n    resources: { title: string, url: string }[];\r\n    status: 'pending' | 'in-progress' | 'completed';\r\n}\r\n\r\nexport interface CodingLearningPath {\r\n    id: string;\r\n    title: 'Full Stack' | 'Data Science' | 'DevOps';\r\n    weeks: CodingLearningWeek[];\r\n}\r\n\r\nexport interface PracticeReflection {\r\n    id: string;\r\n    platform: 'LeetCode' | 'HackerRank' | 'Codeforces' | 'Other';\r\n    problemId: string; // Question Number / Problem ID\r\n    title: string; // Problem Title (optional but stored)\r\n    topics: string[]; // Multi-select: Arrays, Strings, Two Pointers, etc.\r\n    difficulty: 'easy' | 'medium' | 'hard';\r\n    whatILearned: string; // Key insight, algorithm, mistakes, optimization\r\n    comparisonNotes?: string; // How this relates to similar problems\r\n    reviewStatus: 'not-reviewed' | 'needs-review' | 'mastered';\r\n    dateSolved?: string;\r\n    timeSpent?: number; // in minutes\r\n    status: 'pending' | 'solved' | 'review'; // backward compat\r\n    link?: string;\r\n}\r\n\r\n// Backward compatibility alias\r\nexport type DSAProblem = PracticeReflection;\r\n\r\nexport interface CSNote {\r\n    id: string;\r\n    title: string;\r\n    category: 'CS Core' | 'System Design';\r\n    content: string;\r\n    tags: string[];\r\n    updatedAt: string;\r\n}\r\n\r\nexport interface VideoResource {\r\n    id: string;\r\n    title: string;\r\n    description: string;\r\n    url: string;\r\n    domain: string;\r\n    tags: string[];\r\n}\r\n\r\nexport interface CodingProject {\r\n    id: string;\r\n    title: string;\r\n    objective: string;\r\n    techStack: string[];\r\n    description: string;\r\n    outcomes: string[];\r\n    links: { type: 'GitHub' | 'Blog' | 'Docs' | 'YouTube', title: string, url: string }[];\r\n    notes?: {\r\n        learnings: string;\r\n        blockers: string;\r\n        improvements: string;\r\n    };\r\n    status: 'planning' | 'in-progress' | 'completed';\r\n    updatedAt: string;\r\n}\r\n\r\nexport interface DebugLog {\r\n    id: string;\r\n    issue: string;\r\n    solution: string;\r\n    tags: string[];\r\n    date: string;\r\n}\r\nexport interface SkillErrorPattern {\r\n    id: string;\r\n    description: string;\r\n    frequency: number;\r\n    lastOccurred: string;\r\n}\r\n\r\nexport interface SkillMastery {\r\n    id: string;\r\n    name: string;\r\n    category: string;\r\n    depthRating: number; // 1-5\r\n    linkedProjects: {\r\n        projectId: string;\r\n        projectTitle: string;\r\n        depth: 'toy' | 'partial' | 'production';\r\n    }[];\r\n    readiness: 'not-ready' | 'can-explain' | 'can-defend';\r\n    lastRevised: string;\r\n    nextRevision: string;\r\n    revisionHistory: string[];\r\n    errorPatterns: SkillErrorPattern[];\r\n    createdAt: string;\r\n    updatedAt: string;\r\n}\r\n\r\n// ==================== BRANDING TYPES ====================\r\nimport type { FinancialLearningProgress, TrackType } from '../components/FinancialLearningSection/types';\r\n\r\nexport interface SectionLog {\r\n    id: string;\r\n    sectionId: string; // e.g., 'workout', 'coding'\r\n    text: string;\r\n    date: string;\r\n}\r\n\r\n\r\nexport type ContentIntent = 'Authority' | 'Trust' | 'Relatability' | 'Teaching' | 'Lead Generation';\r\n\r\nexport interface ExpertisePillar {\r\n    id: string;\r\n    text: string;\r\n}\r\n\r\nexport interface BrandingPositioning {\r\n    coreThemes: ExpertisePillar[];\r\n    knownFor: string;\r\n    antiThemes: string[];\r\n    intent: string;\r\n    comparisonMapping: {\r\n        competitorName: string;\r\n        theirDepth: string;\r\n        myDifferentiation: string;\r\n    }[];\r\n}\r\n\r\nexport interface AudienceIntelligence {\r\n    topSegments: string[];\r\n    recurringPainPoints: string[];\r\n    repeatedQuestions: string[];\r\n}\r\n\r\nexport interface Platform {\r\n    id: string;\r\n    name: string;\r\n    goal: string;\r\n    format: string;\r\n    frequency: string;\r\n    effort: number;\r\n}\r\n\r\nexport interface BrandConsistencyScore {\r\n    id: string;\r\n    date: string; // ISO date\r\n    voiceAdherence: number; // 1-10\r\n    postingRhythm: number; // 1-10\r\n    repetitionStrength: number; // 1-10\r\n    notes?: string;\r\n}\r\n\r\nexport interface BrandingContentItem {\r\n    id: string;\r\n    title: string;\r\n    body: string;\r\n    platformIds: string[];\r\n    pillarId: string;\r\n    intent: ContentIntent;\r\n    conversionPath: 'Newsletter' | 'Lead' | 'Teaching Asset' | 'None';\r\n    status: 'idea' | 'draft' | 'published';\r\n    analysis?: string;\r\n    createdAt: string;\r\n}\r\n\r\nexport interface PersonalBrandingSystem {\r\n    positioning: BrandingPositioning;\r\n    audienceIntelligence: AudienceIntelligence;\r\n    consistencyScores: BrandConsistencyScore[];\r\n    contentItems: BrandingContentItem[];\r\n    platforms: Platform[];\r\n    lastUpdated: string;\r\n}\r\n\r\n// ==================== NETWORKING TYPES ====================\r\nexport type NetworkingOutcomeType = 'Freelancing Lead' | 'Job Referral' | 'Collaboration' | 'Audience Growth' | 'Other';\r\n\r\nexport interface ConnectionOutcome {\r\n    id: string;\r\n    type: NetworkingOutcomeType;\r\n    description: string;\r\n    value?: string;\r\n    date: string;\r\n}\r\n\r\nexport interface RelationshipRetrospective {\r\n    id: string;\r\n    date: string;\r\n    worked: string;\r\n    forced: string;\r\n    nextTime: string;\r\n}\r\n\r\nexport interface NetworkingConnection {\r\n    id: string;\r\n    name: string;\r\n    platform?: string;\r\n    link?: string;\r\n    trustScore: number; // 1-10\r\n    responsivenessScore: number; // 1-10\r\n    mutualValueScore: number; // 1-10\r\n    contextNotes: string;\r\n    starters: string[];\r\n    dmTemplates: string[];\r\n    outcomes: ConnectionOutcome[];\r\n    retrospectives: RelationshipRetrospective[];\r\n    status: 'active' | 'nurturing' | 'dormant' | 'lead';\r\n    lastInteraction: string;\r\n    createdAt: string;\r\n}\r\n\r\nexport interface NetworkingSystem {\r\n    connections: NetworkingConnection[];\r\n    reusableAssets: {\r\n        starters: string[];\r\n        templates: { id: string, title: string, content: string }[];\r\n    };\r\n    lastUpdated: string;\r\n}\r\n\r\nexport interface UserProfile {\r\n    firstName: string;\r\n    lastName?: string;\r\n    title?: string; // e.g., \"Full Stack Engineer\"\r\n    bio?: string;\r\n    avatar?: string;\r\n    email?: string;\r\n    joinedDate?: string;\r\n    preferences?: {\r\n        theme?: 'light' | 'dark' | 'system';\r\n        notifications?: boolean;\r\n    };\r\n    // Onboarding & Personalization\r\n    userInterests?: string[]; // e.g., ['fitness', 'coding', 'finance']\r\n    primaryGoal?: string; // e.g., 'career_growth'\r\n    onboardingCompleted?: boolean;\r\n}\r\n\r\nexport interface LifeTrackerState {\r\n    // Meditation\r\n    meditationSessions: MeditationSession[];\r\n    meditationStreak: StreakData;\r\n\r\n    // Reading\r\n    books: Book[];\r\n    folders: ReadingFolder[];\r\n    readingSessions: ReadingSession[];\r\n    readingStreak: StreakData;\r\n    bookInsights: BookInsight[];\r\n\r\n    // Tasks\r\n    dailyTasks: DailyTask[];\r\n    weeklyGoals: WeeklyGoal[];\r\n\r\n    // Notes\r\n    notes: LifeNote[];\r\n\r\n    // Coding\r\n    codingLearningPaths: CodingLearningPath[];\r\n    dsaProblems: DSAProblem[];\r\n    csNotes: CSNote[];\r\n    videoResources: VideoResource[];\r\n    codingProjects: CodingProject[];\r\n    debugLogs: DebugLog[];\r\n    skillMastery: SkillMastery[];\r\n    codingStreak: StreakData;\r\n\r\n    // Branding\r\n    branding: PersonalBrandingSystem;\r\n\r\n    // Networking\r\n    networking: NetworkingSystem;\r\n\r\n    // Financial Learning\r\n    financialLearning: FinancialLearningProgress;\r\n\r\n    // Section Logs (Generic)\r\n    sectionLogs: SectionLog[];\r\n\r\n    // Dashboard / Profile\r\n    dailyFocus: string;\r\n    lastDailyFocusDate: string;\r\n    userProfile: UserProfile;\r\n}\r\n\r\n// Initial State\r\nconst getInitialState = (): LifeTrackerState => ({\r\n    meditationSessions: [],\r\n    meditationStreak: { systemId: 'meditation', currentStreak: 0, longestStreak: 0, lastActivityDate: '' },\r\n    books: [],\r\n    folders: [],\r\n    readingSessions: [],\r\n    readingStreak: { systemId: 'reading', currentStreak: 0, longestStreak: 0, lastActivityDate: '' },\r\n    bookInsights: [],\r\n    dailyTasks: [],\r\n    weeklyGoals: [],\r\n    notes: [],\r\n    codingLearningPaths: [\r\n        { id: 'fs', title: 'Full Stack', weeks: [] },\r\n        { id: 'ds', title: 'Data Science', weeks: [] },\r\n        { id: 'do', title: 'DevOps', weeks: [] }\r\n    ],\r\n    dsaProblems: [],\r\n    csNotes: [],\r\n    videoResources: [],\r\n    codingProjects: [],\r\n    debugLogs: [],\r\n    skillMastery: [],\r\n    codingStreak: { systemId: 'coding', currentStreak: 0, longestStreak: 0, lastActivityDate: '' },\r\n    branding: {\r\n        positioning: {\r\n            coreThemes: [],\r\n            knownFor: '',\r\n            antiThemes: [],\r\n            intent: 'Authority',\r\n            comparisonMapping: []\r\n        },\r\n        audienceIntelligence: {\r\n            topSegments: [],\r\n            recurringPainPoints: [],\r\n            repeatedQuestions: []\r\n        },\r\n        platforms: [],\r\n        contentItems: [],\r\n        consistencyScores: [],\r\n        lastUpdated: new Date().toISOString()\r\n    },\r\n    networking: {\r\n        connections: [],\r\n        reusableAssets: {\r\n            starters: [],\r\n            templates: []\r\n        },\r\n        lastUpdated: new Date().toISOString()\r\n    },\r\n    financialLearning: {\r\n        currentTrack: 'startup',\r\n        unlockedModules: ['startup-101'],\r\n        completedLessons: [],\r\n        quizScores: {},\r\n        totalXp: 0,\r\n        streak: 0,\r\n        lastActiveDate: null\r\n    },\r\n    sectionLogs: [],\r\n    dailyFocus: '',\r\n    lastDailyFocusDate: '',\r\n    userProfile: {\r\n        firstName: 'User',\r\n        title: 'Productivity Master',\r\n        joinedDate: new Date().toISOString(),\r\n        preferences: { theme: 'system', notifications: true }\r\n    }\r\n});\r\n\r\n// Storage Key\r\nconst STORAGE_KEY = 'lifetracker_data';\r\n\r\n// Helper Functions\r\nconst generateId = (): string => {\r\n    return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n};\r\n\r\nconst getToday = (): string => {\r\n    return new Date().toISOString().split('T')[0];\r\n};\r\n\r\nconst getWeekStart = (): string => {\r\n    const now = new Date();\r\n    const day = now.getDay();\r\n    const diff = now.getDate() - day + (day === 0 ? -6 : 1);\r\n    return new Date(now.setDate(diff)).toISOString().split('T')[0];\r\n};\r\n\r\nconst isConsecutiveDay = (lastDate: string): boolean => {\r\n    if (!lastDate) return false;\r\n    const last = new Date(lastDate);\r\n    const today = new Date(getToday());\r\n    const diffTime = today.getTime() - last.getTime();\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    return diffDays === 1;\r\n};\r\n\r\nconst isSameDay = (date1: string, date2: string): boolean => {\r\n    return date1 === date2;\r\n};\r\n\r\n// Store Class\r\nexport class LifeTrackerStore {\r\n    public state: LifeTrackerState;\r\n    private listeners: Set<() => void> = new Set();\r\n    private firebaseUid: string | null = null;\r\n    private cloudSyncEnabled: boolean = false;\r\n\r\n    constructor() {\r\n        this.state = this.loadFromStorage();\r\n        // Check if there's a Firebase user already (page refresh scenario)\r\n        this.initFromFirebase();\r\n    }\r\n\r\n    /**\r\n     * Initialize from Firebase Auth if user is already logged in\r\n     */\r\n    private async initFromFirebase() {\r\n        const uid = getCurrentFirebaseUid();\r\n        if (uid) {\r\n            console.log('ðŸ”„ Firebase user found, enabling cloud sync...');\r\n            await this.setFirebaseUid(uid);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set the Firebase UID and enable cloud sync\r\n     * Called by AuthContext after successful Firebase authentication\r\n     */\r\n    async setFirebaseUid(uid: string | null): Promise<void> {\r\n        this.firebaseUid = uid;\r\n        if (uid) {\r\n            this.cloudSyncEnabled = true;\r\n            console.log('â˜ï¸ Cloud sync enabled for user:', uid);\r\n            await this.loadFromSupabase();\r\n        } else {\r\n            this.cloudSyncEnabled = false;\r\n            console.log('â˜ï¸ Cloud sync disabled - no user');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the current Firebase UID\r\n     */\r\n    getFirebaseUid(): string | null {\r\n        return this.firebaseUid;\r\n    }\r\n\r\n    /**\r\n     * Check if cloud sync is enabled\r\n     */\r\n    isCloudSyncEnabled(): boolean {\r\n        return this.cloudSyncEnabled;\r\n    }\r\n\r\n    /**\r\n     * Sync data to Supabase (with firebase_uid)\r\n     */\r\n    private async syncToSupabase(table: string, data: any) {\r\n        if (!this.firebaseUid || !this.cloudSyncEnabled) return;\r\n        try {\r\n            const { error } = await supabase.from(table).insert({ ...data, firebase_uid: this.firebaseUid });\r\n            if (error) console.error(`Error syncing to ${table}:`, error);\r\n            else console.log(`âœ… Synced to ${table}`);\r\n        } catch (err) {\r\n            console.error(`Exception syncing to ${table}:`, err);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    // ==================== STORAGE ====================\r\n\r\n    async uploadFile(file: File, bucket: 'avatars' | 'book-covers' | 'workout-media' | 'note-attachments' | 'book-pdfs'): Promise<string | null> {\r\n        if (!this.firebaseUid) {\r\n            console.error(\"User not authenticated for upload\");\r\n            return null;\r\n        }\r\n\r\n        const fileExt = file.name.split('.').pop();\r\n        const fileName = `${this.firebaseUid}/${Date.now()}.${fileExt}`;\r\n        const filePath = fileName;\r\n\r\n        try {\r\n            const { error: uploadError } = await supabase.storage\r\n                .from(bucket)\r\n                .upload(filePath, file);\r\n\r\n            if (uploadError) {\r\n                throw uploadError;\r\n            }\r\n\r\n            if (bucket === 'avatars' || bucket === 'book-covers') {\r\n                const { data } = supabase.storage.from(bucket).getPublicUrl(filePath);\r\n                return data.publicUrl;\r\n            } else {\r\n                // For private buckets, return the path. \r\n                // Components will need to sign a URL to view it.\r\n                return filePath;\r\n            }\r\n        } catch (error) {\r\n            console.error('Error uploading file:', error);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    async getPrivateFileUrl(bucket: 'workout-media' | 'note-attachments' | 'book-pdfs', path: string): Promise<string | null> {\r\n        if (!this.firebaseUid) return null;\r\n        try {\r\n            const { data, error } = await supabase.storage.from(bucket).createSignedUrl(path, 3600); // 1 hour expiry\r\n            if (error) throw error;\r\n            return data.signedUrl;\r\n        } catch (error) {\r\n            console.error('Error getting signed URL:', error);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private async loadFromSupabase() {\r\n        if (!this.firebaseUid) {\r\n            console.log('âš ï¸ Cannot load from Supabase - no Firebase UID');\r\n            return;\r\n        }\r\n\r\n        console.log('ðŸ“¥ Loading data from Supabase for user:', this.firebaseUid);\r\n\r\n        try {\r\n            // 1. Meditation Sessions\r\n            const { data: meditationData } = await supabase\r\n                .from('meditation_sessions')\r\n                .select('*')\r\n                .eq('firebase_uid', this.firebaseUid)\r\n                .order('date', { ascending: false });\r\n            if (meditationData) {\r\n                this.state.meditationSessions = meditationData.map((m: any) => ({\r\n                    id: m.id,\r\n                    date: m.date,\r\n                    duration: m.duration,\r\n                    type: m.type,\r\n                    moodBefore: m.mood_before,\r\n                    moodAfter: m.mood_after,\r\n                    createdAt: m.created_at\r\n                }));\r\n                // Re-calculate streak based on fetched data\r\n                // this.recalculateMeditationStreak(); // TODO: Implement if needed, or rely on local logic\r\n            }\r\n\r\n            // 2. Books\r\n            const { data: booksData } = await supabase.from('books').select('*').eq('firebase_uid', this.firebaseUid);\r\n            if (booksData) {\r\n                this.state.books = booksData.map((b: any) => ({\r\n                    id: b.id,\r\n                    title: b.title,\r\n                    author: b.author,\r\n                    totalPages: b.total_pages,\r\n                    currentPage: b.current_page,\r\n                    status: b.status,\r\n                    coverImage: b.cover_image,\r\n                    coverColor: b.cover_color || '#3b82f6', // Default blue-500\r\n                    startedAt: b.started_at,\r\n                    completedAt: b.completed_at,\r\n                    folderId: undefined, // Schema doesn't have folders yet\r\n                    pdfFileName: undefined,\r\n                    pdfFileSize: undefined,\r\n                    pdfDataUrl: undefined,\r\n                    pdfCoverImage: undefined\r\n                }));\r\n            }\r\n\r\n            // 3. Reading Sessions\r\n            const { data: readingData } = await supabase.from('reading_sessions').select('*').eq('firebase_uid', this.firebaseUid);\r\n            if (readingData) {\r\n                this.state.readingSessions = readingData.map((r: any) => ({\r\n                    id: r.id,\r\n                    bookId: r.book_id,\r\n                    date: r.date,\r\n                    pagesRead: r.pages_read,\r\n                    startPage: r.start_page,\r\n                    endPage: r.end_page,\r\n                    note: r.note,\r\n                    createdAt: r.created_at\r\n                }));\r\n            }\r\n\r\n            // 4. Daily Tasks\r\n            const { data: tasksData } = await supabase.from('daily_tasks').select('*').eq('firebase_uid', this.firebaseUid);\r\n            if (tasksData) {\r\n                this.state.dailyTasks = tasksData.map((t: any) => ({\r\n                    id: t.id,\r\n                    title: t.title,\r\n                    category: t.category,\r\n                    completed: t.completed,\r\n                    date: t.date,\r\n                    createdAt: t.created_at\r\n                }));\r\n            }\r\n\r\n            // 5. Life Notes\r\n            const { data: notesData } = await supabase.from('life_notes').select('*').eq('firebase_uid', this.firebaseUid);\r\n            if (notesData) {\r\n                this.state.notes = notesData.map((n: any) => ({\r\n                    id: n.id,\r\n                    content: n.content,\r\n                    linkedSystem: n.linked_system,\r\n                    mood: n.mood,\r\n                    tags: n.tags,\r\n                    date: n.date,\r\n                    createdAt: n.created_at\r\n                }));\r\n            }\r\n\r\n            // 6. Financial Learning Progress\r\n            const { data: financialData } = await supabase\r\n                .from('financial_learning_progress')\r\n                .select('*')\r\n                .eq('firebase_uid', this.firebaseUid)\r\n                .maybeSingle();\r\n\r\n            if (financialData) {\r\n                this.state.financialLearning = {\r\n                    currentTrack: financialData.current_track as TrackType,\r\n                    unlockedModules: financialData.unlocked_modules || [],\r\n                    completedLessons: financialData.completed_lessons || [],\r\n                    quizScores: financialData.quiz_scores || {},\r\n                    totalXp: financialData.total_xp || 0,\r\n                    streak: financialData.streak || 0,\r\n                    lastActiveDate: financialData.last_active_date\r\n                };\r\n            }\r\n\r\n            // 7. Section Logs\r\n            const { data: logsData } = await supabase.from('section_logs').select('*').eq('firebase_uid', this.firebaseUid);\r\n            if (logsData) {\r\n                this.state.sectionLogs = logsData.map((l: any) => ({\r\n                    id: l.id,\r\n                    sectionId: l.section_id,\r\n                    text: l.text,\r\n                    date: l.date\r\n                }));\r\n            }\r\n\r\n            this.saveToStorage(); // Update local cache\r\n            this.notify();\r\n            console.log('âœ… Data loaded from Supabase successfully');\r\n        } catch (error) {\r\n            console.error('âŒ Error loading data from Supabase:', error);\r\n        }\r\n    }\r\n\r\n    private loadFromStorage(): LifeTrackerState {\r\n        try {\r\n            const stored = localStorage.getItem(STORAGE_KEY);\r\n            if (stored) {\r\n                return { ...getInitialState(), ...JSON.parse(stored) };\r\n            }\r\n        } catch (e) {\r\n            console.error('Failed to load LifeTracker data:', e);\r\n        }\r\n        return getInitialState();\r\n    }\r\n\r\n    private saveToStorage(): void {\r\n        try {\r\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(this.state));\r\n        } catch (e) {\r\n            console.error('Failed to save LifeTracker data:', e);\r\n        }\r\n    }\r\n\r\n    private notify(): void {\r\n        this.listeners.forEach(listener => listener());\r\n    }\r\n\r\n    subscribe(listener: () => void): () => void {\r\n        this.listeners.add(listener);\r\n        return () => this.listeners.delete(listener);\r\n    }\r\n\r\n    getState(): LifeTrackerState {\r\n        return this.state;\r\n    }\r\n\r\n    // ==================== MEDITATION ====================\r\n\r\n    addMeditationSession(session: Omit<MeditationSession, 'id' | 'createdAt'>): MeditationSession {\r\n        const newSession: MeditationSession = {\r\n            ...session,\r\n            id: uuidv4(),\r\n            createdAt: new Date().toISOString(),\r\n        };\r\n\r\n        this.state.meditationSessions = [newSession, ...this.state.meditationSessions];\r\n        this.updateMeditationStreak(session.date);\r\n        this.saveToStorage();\r\n        this.notify();\r\n\r\n        this.syncToSupabase('meditation_sessions', {\r\n            id: newSession.id,\r\n            date: newSession.date,\r\n            duration: newSession.duration,\r\n            type: newSession.type,\r\n            mood_before: newSession.moodBefore,\r\n            mood_after: newSession.moodAfter,\r\n            created_at: newSession.createdAt\r\n        });\r\n\r\n        return newSession;\r\n    }\r\n\r\n    private updateMeditationStreak(activityDate: string): void {\r\n        const streak = this.state.meditationStreak;\r\n        const today = getToday();\r\n\r\n        if (isSameDay(activityDate, today)) {\r\n            if (isSameDay(streak.lastActivityDate, today)) {\r\n                // Already logged today, no change\r\n                return;\r\n            } else if (isConsecutiveDay(streak.lastActivityDate)) {\r\n                // Consecutive day, increment streak\r\n                streak.currentStreak += 1;\r\n            } else {\r\n                // Streak broken, start new\r\n                streak.currentStreak = 1;\r\n            }\r\n            streak.lastActivityDate = today;\r\n            streak.longestStreak = Math.max(streak.longestStreak, streak.currentStreak);\r\n        }\r\n    }\r\n\r\n    getMeditationStats() {\r\n        const sessions = this.state.meditationSessions;\r\n        const today = getToday();\r\n        const weekStart = getWeekStart();\r\n\r\n        const todaySessions = sessions.filter(s => s.date === today);\r\n        const weekSessions = sessions.filter(s => s.date >= weekStart);\r\n\r\n        const totalMinutesThisWeek = weekSessions.reduce((sum, s) => sum + s.duration, 0);\r\n        const avgMoodImprovement = sessions.length > 0\r\n            ? sessions.reduce((sum, s) => sum + (s.moodAfter - s.moodBefore), 0) / sessions.length\r\n            : 0;\r\n\r\n        return {\r\n            todayCompleted: todaySessions.length > 0,\r\n            todayMinutes: todaySessions.reduce((sum, s) => sum + s.duration, 0),\r\n            weekMinutes: totalMinutesThisWeek,\r\n            totalSessions: sessions.length,\r\n            avgMoodImprovement: avgMoodImprovement.toFixed(1),\r\n            streak: this.state.meditationStreak.currentStreak,\r\n            longestStreak: this.state.meditationStreak.longestStreak,\r\n        };\r\n    }\r\n\r\n    // ==================== READING ====================\r\n\r\n    addBook(book: Omit<Book, 'id' | 'startedAt' | 'status' | 'currentPage'>): Book {\r\n        const newBook: Book = {\r\n            ...book,\r\n            id: uuidv4(),\r\n            currentPage: 0,\r\n            status: 'reading',\r\n            startedAt: new Date().toISOString(),\r\n        };\r\n\r\n        this.state.books = [newBook, ...this.state.books];\r\n        this.saveToStorage();\r\n        this.notify();\r\n\r\n        this.syncToSupabase('books', {\r\n            id: newBook.id,\r\n            title: newBook.title,\r\n            author: newBook.author,\r\n            total_pages: newBook.totalPages,\r\n            current_page: newBook.currentPage,\r\n            status: newBook.status,\r\n            cover_image: newBook.coverImage,\r\n            cover_color: newBook.coverColor,\r\n            started_at: newBook.startedAt,\r\n            created_at: new Date().toISOString() // Schema requires created_at\r\n        });\r\n\r\n        return newBook;\r\n    }\r\n\r\n    updateBook(bookId: string, updates: Partial<Book>): void {\r\n        this.state.books = this.state.books.map(book =>\r\n            book.id === bookId ? { ...book, ...updates } : book\r\n        );\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    addReadingSession(session: Omit<ReadingSession, 'id' | 'createdAt'>): ReadingSession {\r\n        const newSession: ReadingSession = {\r\n            ...session,\r\n            id: uuidv4(),\r\n            createdAt: new Date().toISOString(),\r\n        };\r\n\r\n        this.state.readingSessions = [newSession, ...this.state.readingSessions];\r\n\r\n        // Update book progress\r\n        const book = this.state.books.find(b => b.id === session.bookId);\r\n        if (book) {\r\n            book.currentPage = Math.max(book.currentPage, session.endPage);\r\n            if (book.currentPage >= book.totalPages) {\r\n                book.status = 'completed';\r\n                book.completedAt = new Date().toISOString();\r\n\r\n                // Update book status in Supabase\r\n                this.firebaseUid && supabase.from('books').update({\r\n                    status: 'completed',\r\n                    completed_at: book.completedAt,\r\n                    current_page: book.currentPage\r\n                }).eq('id', book.id).eq('firebase_uid', this.firebaseUid).then();\r\n            } else {\r\n                // Update book progress in Supabase\r\n                this.firebaseUid && supabase.from('books').update({\r\n                    current_page: book.currentPage\r\n                }).eq('id', book.id).eq('firebase_uid', this.firebaseUid).then();\r\n            }\r\n        }\r\n\r\n        this.updateReadingStreak(session.date);\r\n        this.saveToStorage();\r\n        this.notify();\r\n\r\n        this.syncToSupabase('reading_sessions', {\r\n            id: newSession.id,\r\n            book_id: newSession.bookId,\r\n            date: newSession.date,\r\n            pages_read: newSession.pagesRead,\r\n            start_page: newSession.startPage,\r\n            end_page: newSession.endPage,\r\n            note: newSession.note,\r\n            created_at: newSession.createdAt\r\n        });\r\n\r\n        return newSession;\r\n    }\r\n\r\n    private updateReadingStreak(activityDate: string): void {\r\n        const streak = this.state.readingStreak;\r\n        const today = getToday();\r\n\r\n        if (isSameDay(activityDate, today)) {\r\n            if (isSameDay(streak.lastActivityDate, today)) {\r\n                return;\r\n            } else if (isConsecutiveDay(streak.lastActivityDate)) {\r\n                streak.currentStreak += 1;\r\n            } else {\r\n                streak.currentStreak = 1;\r\n            }\r\n            streak.lastActivityDate = today;\r\n            streak.longestStreak = Math.max(streak.longestStreak, streak.currentStreak);\r\n        }\r\n    }\r\n\r\n    addFolder(folder: Omit<ReadingFolder, 'id' | 'createdAt' | 'bookIds'>): ReadingFolder {\r\n        const newFolder: ReadingFolder = {\r\n            ...folder,\r\n            id: generateId(),\r\n            bookIds: [],\r\n            createdAt: new Date().toISOString(),\r\n        };\r\n        this.state.folders = [newFolder, ...this.state.folders];\r\n        this.saveToStorage();\r\n        this.notify();\r\n        return newFolder;\r\n    }\r\n\r\n    getFolders(): ReadingFolder[] {\r\n        return this.state.folders;\r\n    }\r\n\r\n    updateFolder(folderId: string, updates: Partial<ReadingFolder>): void {\r\n        this.state.folders = this.state.folders.map(folder =>\r\n            folder.id === folderId ? { ...folder, ...updates } : folder\r\n        );\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    deleteFolder(folderId: string): void {\r\n        // Also delete all books in this folder\r\n        this.state.books = this.state.books.filter(book => book.folderId !== folderId);\r\n        this.state.folders = this.state.folders.filter(folder => folder.id !== folderId);\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    getBooksInFolder(folderId: string): Book[] {\r\n        return this.state.books.filter(book => book.folderId === folderId);\r\n    }\r\n\r\n    addBookToFolder(folderId: string, book: Omit<Book, 'id' | 'startedAt' | 'status' | 'currentPage' | 'folderId'>): Book {\r\n        const newBook: Book = {\r\n            ...book,\r\n            id: generateId(),\r\n            currentPage: 0,\r\n            status: 'reading',\r\n            startedAt: new Date().toISOString(),\r\n            folderId: folderId,\r\n        };\r\n\r\n        // Add book ID to folder's bookIds array\r\n        this.state.folders = this.state.folders.map(folder =>\r\n            folder.id === folderId\r\n                ? { ...folder, bookIds: [...folder.bookIds, newBook.id] }\r\n                : folder\r\n        );\r\n\r\n        this.state.books = [newBook, ...this.state.books];\r\n        this.saveToStorage();\r\n        this.notify();\r\n        return newBook;\r\n    }\r\n\r\n    uploadPdfToBook(bookId: string, fileName: string, fileSize: number, pdfDataUrl: string, pdfCoverImage?: string, pdfPath?: string): void {\r\n        this.state.books = this.state.books.map(book =>\r\n            book.id === bookId\r\n                ? { ...book, pdfFileName: fileName, pdfFileSize: fileSize, pdfDataUrl, pdfCoverImage, pdfPath }\r\n                : book\r\n        );\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    deleteBook(bookId: string): void {\r\n        // Remove book from folder's bookIds\r\n        const book = this.state.books.find(b => b.id === bookId);\r\n        if (book?.folderId) {\r\n            this.state.folders = this.state.folders.map(folder =>\r\n                folder.id === book.folderId\r\n                    ? { ...folder, bookIds: folder.bookIds.filter(id => id !== bookId) }\r\n                    : folder\r\n            );\r\n        }\r\n\r\n        // Remove all reading sessions for this book\r\n        this.state.readingSessions = this.state.readingSessions.filter(session => session.bookId !== bookId);\r\n\r\n        // Remove the book\r\n        this.state.books = this.state.books.filter(b => b.id !== bookId);\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    updateBookCover(bookId: string, coverImageDataUrl: string): void {\r\n        this.state.books = this.state.books.map(book =>\r\n            book.id === bookId\r\n                ? { ...book, coverImage: coverImageDataUrl }\r\n                : book\r\n        );\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    getReadingStats() {\r\n        const books = this.state.books;\r\n        const sessions = this.state.readingSessions;\r\n        const today = getToday();\r\n        const weekStart = getWeekStart();\r\n\r\n        const weekSessions = sessions.filter(s => s.date >= weekStart);\r\n        const pagesThisWeek = weekSessions.reduce((sum, s) => sum + s.pagesRead, 0);\r\n\r\n        // Calculate overall progress across all active books\r\n        const activeBooks = books.filter(b => b.status === 'reading');\r\n        const totalProgress = activeBooks.length > 0\r\n            ? activeBooks.reduce((acc, b) => acc + (b.currentPage / b.totalPages), 0) / activeBooks.length\r\n            : 0;\r\n\r\n        return {\r\n            todayCompleted: sessions.some(s => s.date === today),\r\n            pagesThisWeek,\r\n            booksInProgress: activeBooks.length,\r\n            booksCompleted: books.filter(b => b.status === 'completed').length,\r\n            streak: this.state.readingStreak.currentStreak,\r\n            longestStreak: this.state.readingStreak.longestStreak,\r\n            overallProgress: Math.round(totalProgress * 100),\r\n            totalActiveFolders: this.state.folders.length,\r\n            lastOpenedBook: books.sort((a, b) => b.startedAt.localeCompare(a.startedAt))[0] || null\r\n        };\r\n    }\r\n\r\n    getBooks(): Book[] {\r\n        return this.state.books;\r\n    }\r\n\r\n    // ==================== BOOK INSIGHTS ====================\r\n\r\n    saveBookInsight(insight: Omit<BookInsight, 'id' | 'createdAt' | 'updatedAt'>): BookInsight {\r\n        const existingIndex = this.state.bookInsights.findIndex(i => i.bookId === insight.bookId);\r\n        const now = new Date().toISOString();\r\n\r\n        if (existingIndex >= 0) {\r\n            // Update existing insight\r\n            const existingInsight = this.state.bookInsights[existingIndex];\r\n            const updatedInsight: BookInsight = {\r\n                ...existingInsight,\r\n                ...insight,\r\n                updatedAt: now,\r\n            };\r\n            this.state.bookInsights[existingIndex] = updatedInsight;\r\n            this.saveToStorage();\r\n            this.notify();\r\n            return updatedInsight;\r\n        } else {\r\n            // Create new insight\r\n            const newInsight: BookInsight = {\r\n                ...insight,\r\n                id: generateId(),\r\n                createdAt: now,\r\n                updatedAt: now,\r\n            };\r\n            this.state.bookInsights = [newInsight, ...this.state.bookInsights];\r\n            this.saveToStorage();\r\n            this.notify();\r\n            return newInsight;\r\n        }\r\n    }\r\n\r\n    getBookInsight(bookId: string): BookInsight | undefined {\r\n        return this.state.bookInsights.find(i => i.bookId === bookId);\r\n    }\r\n\r\n    getAllBookInsights(): BookInsight[] {\r\n        return this.state.bookInsights;\r\n    }\r\n\r\n    deleteBookInsight(bookId: string): void {\r\n        this.state.bookInsights = this.state.bookInsights.filter(i => i.bookId !== bookId);\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    toggleActionTakeaway(bookId: string, actionId: string): void {\r\n        const insight = this.state.bookInsights.find(i => i.bookId === bookId);\r\n        if (insight) {\r\n            insight.actionTakeaways = insight.actionTakeaways.map(a =>\r\n                a.id === actionId ? { ...a, completed: !a.completed } : a\r\n            );\r\n            insight.updatedAt = new Date().toISOString();\r\n            this.saveToStorage();\r\n            this.notify();\r\n        }\r\n    }\r\n\r\n    toggleRevisitReminder(bookId: string, reminderId: string): void {\r\n        const insight = this.state.bookInsights.find(i => i.bookId === bookId);\r\n        if (insight) {\r\n            insight.revisitReminders = insight.revisitReminders.map(r =>\r\n                r.id === reminderId ? { ...r, completed: !r.completed } : r\r\n            );\r\n            insight.updatedAt = new Date().toISOString();\r\n            this.saveToStorage();\r\n            this.notify();\r\n        }\r\n    }\r\n\r\n    // ==================== TASKS ====================\r\n\r\n    addDailyTask(task: Omit<DailyTask, 'id' | 'createdAt' | 'completed'>): DailyTask {\r\n        const newTask: DailyTask = {\r\n            ...task,\r\n            id: uuidv4(),\r\n            completed: false,\r\n            createdAt: new Date().toISOString(),\r\n        };\r\n\r\n        this.state.dailyTasks = [newTask, ...this.state.dailyTasks];\r\n        this.saveToStorage();\r\n        this.notify();\r\n\r\n        this.syncToSupabase('daily_tasks', {\r\n            id: newTask.id,\r\n            title: newTask.title,\r\n            category: newTask.category,\r\n            completed: newTask.completed,\r\n            date: newTask.date,\r\n            created_at: newTask.createdAt\r\n        });\r\n\r\n        return newTask;\r\n    }\r\n\r\n    toggleTask(taskId: string): void {\r\n        this.state.dailyTasks = this.state.dailyTasks.map(task =>\r\n            task.id === taskId ? { ...task, completed: !task.completed } : task\r\n        );\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    deleteTask(taskId: string): void {\r\n        this.state.dailyTasks = this.state.dailyTasks.filter(task => task.id !== taskId);\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    getTodayTasks(): DailyTask[] {\r\n        const today = getToday();\r\n        return this.state.dailyTasks.filter(task => task.date === today);\r\n    }\r\n\r\n    // ==================== WEEKLY GOALS ====================\r\n\r\n    addWeeklyGoal(goal: Omit<WeeklyGoal, 'id' | 'weekStart' | 'progress' | 'completed'>): WeeklyGoal {\r\n        const newGoal: WeeklyGoal = {\r\n            ...goal,\r\n            id: generateId(),\r\n            weekStart: getWeekStart(),\r\n            progress: 0,\r\n            completed: false,\r\n        };\r\n\r\n        this.state.weeklyGoals = [newGoal, ...this.state.weeklyGoals];\r\n        this.saveToStorage();\r\n        this.notify();\r\n        return newGoal;\r\n    }\r\n\r\n    updateGoalProgress(goalId: string, progress: number): void {\r\n        this.state.weeklyGoals = this.state.weeklyGoals.map(goal =>\r\n            goal.id === goalId ? {\r\n                ...goal,\r\n                progress: Math.min(100, progress),\r\n                completed: progress >= 100\r\n            } : goal\r\n        );\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    getCurrentWeekGoals(): WeeklyGoal[] {\r\n        const weekStart = getWeekStart();\r\n        return this.state.weeklyGoals.filter(goal => goal.weekStart === weekStart);\r\n    }\r\n\r\n    // ==================== NOTES ====================\r\n\r\n    addNote(note: Omit<LifeNote, 'id' | 'createdAt'>): LifeNote {\r\n        const newNote: LifeNote = {\r\n            ...note,\r\n            id: uuidv4(),\r\n            createdAt: new Date().toISOString(),\r\n        };\r\n\r\n        this.state.notes = [newNote, ...this.state.notes];\r\n        this.saveToStorage();\r\n        this.notify();\r\n\r\n        this.syncToSupabase('life_notes', {\r\n            id: newNote.id,\r\n            content: newNote.content,\r\n            linked_system: newNote.linkedSystem,\r\n            mood: newNote.mood,\r\n            tags: newNote.tags,\r\n            date: newNote.date,\r\n            created_at: newNote.createdAt,\r\n            attachment_path: newNote.attachmentPath\r\n        });\r\n\r\n        return newNote;\r\n    }\r\n\r\n    getNotes(limit?: number): LifeNote[] {\r\n        const notes = this.state.notes;\r\n        return limit ? notes.slice(0, limit) : notes;\r\n    }\r\n\r\n    getNotesForSystem(systemId: string): LifeNote[] {\r\n        return this.state.notes.filter(note => note.linkedSystem === systemId);\r\n    }\r\n\r\n    // ==================== DAILY FOCUS ====================\r\n\r\n    setDailyFocus(focus: string): void {\r\n        this.state.dailyFocus = focus;\r\n        this.state.lastDailyFocusDate = getToday();\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    getDailyFocus(): { focus: string; isToday: boolean } {\r\n        const today = getToday();\r\n        return {\r\n            focus: this.state.dailyFocus,\r\n            isToday: this.state.lastDailyFocusDate === today,\r\n        };\r\n    }\r\n\r\n    // ==================== CODING ====================\r\n\r\n    addCodingLearningWeek(pathId: string, week: Omit<CodingLearningWeek, 'id'>): CodingLearningWeek {\r\n        const newWeek: CodingLearningWeek = { ...week, id: generateId() };\r\n        this.state.codingLearningPaths = this.state.codingLearningPaths.map(path =>\r\n            path.id === pathId ? { ...path, weeks: [...path.weeks, newWeek] } : path\r\n        );\r\n        this.updateCodingStreak(getToday());\r\n        this.saveToStorage();\r\n        this.notify();\r\n        return newWeek;\r\n    }\r\n\r\n    updateCodingLearningWeek(pathId: string, weekId: string, updates: Partial<CodingLearningWeek>): void {\r\n        this.state.codingLearningPaths = this.state.codingLearningPaths.map(path =>\r\n            path.id === pathId\r\n                ? {\r\n                    ...path,\r\n                    weeks: path.weeks.map(w => w.id === weekId ? { ...w, ...updates } : w)\r\n                }\r\n                : path\r\n        );\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    addDSAProblem(problem: Omit<DSAProblem, 'id'>): DSAProblem {\r\n        const dateSolved = problem.dateSolved || getToday();\r\n        const newProblem: DSAProblem = { ...problem, id: generateId(), dateSolved };\r\n        this.state.dsaProblems = [newProblem, ...this.state.dsaProblems];\r\n        if (problem.status === 'solved') this.updateCodingStreak(getToday());\r\n        this.saveToStorage();\r\n        this.notify();\r\n        return newProblem;\r\n    }\r\n\r\n    updateDSAProblem(problemId: string, updates: Partial<DSAProblem>): void {\r\n        this.state.dsaProblems = this.state.dsaProblems.map(p => {\r\n            if (p.id === problemId) {\r\n                const dateSolved = updates.status === 'solved' ? getToday() : p.dateSolved;\r\n                return { ...p, ...updates, dateSolved };\r\n            }\r\n            return p;\r\n        });\r\n        if (updates.status === 'solved') this.updateCodingStreak(getToday());\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    deleteDSAProblem(problemId: string): void {\r\n        this.state.dsaProblems = this.state.dsaProblems.filter(p => p.id !== problemId);\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    duplicateDSAProblem(problemId: string): DSAProblem | null {\r\n        const original = this.state.dsaProblems.find(p => p.id === problemId);\r\n        if (!original) return null;\r\n\r\n        const duplicated: DSAProblem = {\r\n            ...original,\r\n            id: generateId(),\r\n            title: `${original.title} (Copy)`,\r\n            dateSolved: getToday()\r\n        };\r\n        this.state.dsaProblems = [duplicated, ...this.state.dsaProblems];\r\n        this.saveToStorage();\r\n        this.notify();\r\n        return duplicated;\r\n    }\r\n\r\n    addCSNote(note: Omit<CSNote, 'id' | 'updatedAt'>): CSNote {\r\n        const newNote: CSNote = { ...note, id: generateId(), updatedAt: new Date().toISOString() };\r\n        this.state.csNotes = [newNote, ...this.state.csNotes];\r\n        this.saveToStorage();\r\n        this.notify();\r\n        return newNote;\r\n    }\r\n\r\n    addVideoResource(resource: Omit<VideoResource, 'id'>): VideoResource {\r\n        const newResource: VideoResource = { ...resource, id: generateId() };\r\n        this.state.videoResources = [newResource, ...this.state.videoResources];\r\n        this.saveToStorage();\r\n        this.notify();\r\n        return newResource;\r\n    }\r\n\r\n    addCodingProject(project: Omit<CodingProject, 'id' | 'updatedAt'>): CodingProject {\r\n        const newProject: CodingProject = { ...project, id: generateId(), updatedAt: new Date().toISOString() };\r\n        this.state.codingProjects = [newProject, ...this.state.codingProjects];\r\n        this.saveToStorage();\r\n        this.notify();\r\n        return newProject;\r\n    }\r\n\r\n    updateCodingProject(projectId: string, updates: Partial<CodingProject>): void {\r\n        this.state.codingProjects = this.state.codingProjects.map(p =>\r\n            p.id === projectId ? { ...p, ...updates, updatedAt: new Date().toISOString() } : p\r\n        );\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    addDebugLog(log: Omit<DebugLog, 'id' | 'date'>): DebugLog {\r\n        const newLog: DebugLog = { ...log, id: generateId(), date: getToday() };\r\n        this.state.debugLogs = [newLog, ...this.state.debugLogs];\r\n        this.updateCodingStreak(getToday());\r\n        this.saveToStorage();\r\n        this.notify();\r\n        return newLog;\r\n    }\r\n\r\n    addSkillMastery(skill: Omit<SkillMastery, 'id' | 'createdAt' | 'updatedAt'>): SkillMastery {\r\n        const newSkill: SkillMastery = {\r\n            ...skill,\r\n            id: generateId(),\r\n            createdAt: new Date().toISOString(),\r\n            updatedAt: new Date().toISOString()\r\n        };\r\n        this.state.skillMastery = [newSkill, ...this.state.skillMastery];\r\n        this.saveToStorage();\r\n        this.notify();\r\n        return newSkill;\r\n    }\r\n\r\n    updateSkillMastery(skillId: string, updates: Partial<SkillMastery>): void {\r\n        this.state.skillMastery = this.state.skillMastery.map(s =>\r\n            s.id === skillId ? { ...s, ...updates, updatedAt: new Date().toISOString() } : s\r\n        );\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    deleteSkillMastery(skillId: string): void {\r\n        this.state.skillMastery = this.state.skillMastery.filter(s => s.id !== skillId);\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    addErrorPatternToSkill(skillId: string, pattern: Omit<SkillErrorPattern, 'id' | 'lastOccurred' | 'frequency'>): void {\r\n        const newPattern: SkillErrorPattern = {\r\n            ...pattern,\r\n            id: generateId(),\r\n            frequency: 1,\r\n            lastOccurred: new Date().toISOString()\r\n        };\r\n        this.state.skillMastery = this.state.skillMastery.map(s =>\r\n            s.id === skillId\r\n                ? { ...s, errorPatterns: [newPattern, ...s.errorPatterns], updatedAt: new Date().toISOString() }\r\n                : s\r\n        );\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    private updateCodingStreak(activityDate: string): void {\r\n        const streak = this.state.codingStreak;\r\n        const today = getToday();\r\n\r\n        if (isSameDay(activityDate, today)) {\r\n            if (isSameDay(streak.lastActivityDate, today)) {\r\n                return;\r\n            } else if (isConsecutiveDay(streak.lastActivityDate)) {\r\n                streak.currentStreak += 1;\r\n            } else {\r\n                streak.currentStreak = 1;\r\n            }\r\n            streak.lastActivityDate = today;\r\n            streak.longestStreak = Math.max(streak.longestStreak, streak.currentStreak);\r\n        }\r\n    }\r\n\r\n    getCodingStats() {\r\n        const weekStart = getWeekStart();\r\n        const problemsSolvedThisWeek = this.state.dsaProblems.filter(p =>\r\n            p.status === 'solved' && p.dateSolved && p.dateSolved >= weekStart\r\n        ).length;\r\n\r\n        const projectsCompleted = this.state.codingProjects.filter(p => p.status === 'completed').length;\r\n\r\n        return {\r\n            problemsSolvedThisWeek,\r\n            projectsCompleted,\r\n            streak: this.state.codingStreak.currentStreak,\r\n            longestStreak: this.state.codingStreak.longestStreak\r\n        };\r\n    }\r\n\r\n    // ==================== BRANDING ====================\r\n\r\n    updateBrandingPositioning(positioning: Partial<BrandingPositioning>): void {\r\n        this.state.branding.positioning = { ...this.state.branding.positioning, ...positioning };\r\n        this.state.branding.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    updateAudienceIntelligence(audience: Partial<AudienceIntelligence>): void {\r\n        this.state.branding.audienceIntelligence = { ...this.state.branding.audienceIntelligence, ...audience };\r\n        this.state.branding.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    addPlatform(platform: Omit<Platform, 'id'>): Platform {\r\n        const newPlatform: Platform = {\r\n            ...platform,\r\n            id: generateId()\r\n        };\r\n        this.state.branding.platforms = [...this.state.branding.platforms, newPlatform];\r\n        this.state.branding.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n        return newPlatform;\r\n    }\r\n\r\n    deletePlatform(id: string): void {\r\n        this.state.branding.platforms = this.state.branding.platforms.filter(p => p.id !== id);\r\n        this.state.branding.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    addCoreTheme(text: string): void {\r\n        const newPillar: ExpertisePillar = {\r\n            id: generateId(),\r\n            text\r\n        };\r\n        this.state.branding.positioning.coreThemes = [...this.state.branding.positioning.coreThemes, newPillar];\r\n        this.state.branding.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    deleteCoreTheme(id: string): void {\r\n        this.state.branding.positioning.coreThemes = this.state.branding.positioning.coreThemes.filter(t => t.id !== id);\r\n        this.state.branding.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    addBrandConsistencyScore(score: Omit<BrandConsistencyScore, 'id'>): BrandConsistencyScore {\r\n        const newScore: BrandConsistencyScore = {\r\n            ...score,\r\n            id: generateId()\r\n        };\r\n        this.state.branding.consistencyScores = [newScore, ...this.state.branding.consistencyScores];\r\n        this.state.branding.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n        return newScore;\r\n    }\r\n\r\n    addBrandingContent(item: Omit<BrandingContentItem, 'id' | 'createdAt' | 'status'>): BrandingContentItem {\r\n        const newItem: BrandingContentItem = {\r\n            ...item,\r\n            id: generateId(),\r\n            createdAt: new Date().toISOString(),\r\n            status: 'idea'\r\n        };\r\n        this.state.branding.contentItems = [newItem, ...this.state.branding.contentItems];\r\n        this.state.branding.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n        return newItem;\r\n    }\r\n\r\n    updateBrandingContent(id: string, updates: Partial<BrandingContentItem>): void {\r\n        this.state.branding.contentItems = this.state.branding.contentItems.map(item =>\r\n            item.id === id ? { ...item, ...updates } : item\r\n        );\r\n        this.state.branding.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    deleteBrandingContent(id: string): void {\r\n        this.state.branding.contentItems = this.state.branding.contentItems.filter(item => item.id !== id);\r\n        this.state.branding.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    getBranding() {\r\n        return this.state.branding;\r\n    }\r\n\r\n    // ==================== NETWORKING ====================\r\n\r\n    addNetworkingConnection(connection: Omit<NetworkingConnection, 'id' | 'createdAt' | 'outcomes' | 'retrospectives' | 'starters' | 'dmTemplates' | 'lastInteraction'>): NetworkingConnection {\r\n        const newConnection: NetworkingConnection = {\r\n            ...connection,\r\n            id: generateId(),\r\n            createdAt: new Date().toISOString(),\r\n            lastInteraction: new Date().toISOString(),\r\n            outcomes: [],\r\n            retrospectives: [],\r\n            starters: [],\r\n            dmTemplates: []\r\n        };\r\n        this.state.networking.connections = [newConnection, ...this.state.networking.connections];\r\n        this.state.networking.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n        return newConnection;\r\n    }\r\n\r\n    updateNetworkingConnection(id: string, updates: Partial<NetworkingConnection>): void {\r\n        this.state.networking.connections = this.state.networking.connections.map(c =>\r\n            c.id === id ? { ...c, ...updates } : c\r\n        );\r\n        this.state.networking.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    deleteNetworkingConnection(id: string): void {\r\n        this.state.networking.connections = this.state.networking.connections.filter(c => c.id !== id);\r\n        this.state.networking.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    addConnectionOutcome(connectionId: string, outcome: Omit<ConnectionOutcome, 'id'>): void {\r\n        this.state.networking.connections = this.state.networking.connections.map(c => {\r\n            if (c.id === connectionId) {\r\n                return {\r\n                    ...c,\r\n                    outcomes: [...c.outcomes, { ...outcome, id: generateId() }]\r\n                };\r\n            }\r\n            return c;\r\n        });\r\n        this.state.networking.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    addRelationshipRetrospective(connectionId: string, retrospective: Omit<RelationshipRetrospective, 'id'>): void {\r\n        this.state.networking.connections = this.state.networking.connections.map(c => {\r\n            if (c.id === connectionId) {\r\n                return {\r\n                    ...c,\r\n                    retrospectives: [...c.retrospectives, { ...retrospective, id: generateId() }]\r\n                };\r\n            }\r\n            return c;\r\n        });\r\n        this.state.networking.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    addNetworkingStarter(starter: string): void {\r\n        this.state.networking.reusableAssets.starters = [...this.state.networking.reusableAssets.starters, starter];\r\n        this.state.networking.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    deleteNetworkingStarter(index: number): void {\r\n        this.state.networking.reusableAssets.starters = this.state.networking.reusableAssets.starters.filter((_, i) => i !== index);\r\n        this.state.networking.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    addNetworkingTemplate(title: string, content: string): void {\r\n        const newTemplate = { id: generateId(), title, content };\r\n        this.state.networking.reusableAssets.templates = [...this.state.networking.reusableAssets.templates, newTemplate];\r\n        this.state.networking.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    deleteNetworkingTemplate(id: string): void {\r\n        this.state.networking.reusableAssets.templates = this.state.networking.reusableAssets.templates.filter(t => t.id !== id);\r\n        this.state.networking.lastUpdated = new Date().toISOString();\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    getNetworking() {\r\n        return this.state.networking;\r\n    }\r\n\r\n    // ==================== AGGREGATED STATS ====================\r\n\r\n    getDashboardStats() {\r\n        const meditation = this.getMeditationStats();\r\n        const reading = this.getReadingStats();\r\n        const coding = this.getCodingStats();\r\n        const todayTasks = this.getTodayTasks();\r\n        const weeklyGoals = this.getCurrentWeekGoals();\r\n\r\n        const tasksCompleted = todayTasks.filter(t => t.completed).length;\r\n        const tasksTotal = todayTasks.length;\r\n\r\n        const goalsCompleted = weeklyGoals.filter(g => g.completed).length;\r\n        const goalsTotal = weeklyGoals.length;\r\n\r\n        // Calculate overall \"life score\" (simple average)\r\n        const scores = [\r\n            meditation.todayCompleted ? 100 : 0,\r\n            reading.todayCompleted ? 100 : 0,\r\n            coding.streak > 0 ? 100 : 0, // Add coding consistency to score\r\n            tasksTotal > 0 ? (tasksCompleted / tasksTotal) * 100 : 0,\r\n        ];\r\n        const lifeScore = Math.round(scores.reduce((a, b) => a + b, 0) / scores.length);\r\n\r\n        return {\r\n            lifeScore,\r\n            meditation,\r\n            reading,\r\n            coding,\r\n            tasks: { completed: tasksCompleted, total: tasksTotal },\r\n            weeklyGoals: { completed: goalsCompleted, total: goalsTotal },\r\n            activeStreaks: [\r\n                meditation.streak > 0 ? { name: 'Meditation', count: meditation.streak } : null,\r\n                reading.streak > 0 ? { name: 'Reading', count: reading.streak } : null,\r\n                coding.streak > 0 ? { name: 'Coding', count: coding.streak } : null,\r\n            ].filter(Boolean),\r\n        };\r\n    }\r\n    updateUserProfile(updates: Partial<UserProfile>) {\r\n        this.state.userProfile = { ...this.state.userProfile, ...updates };\r\n        this.saveToStorage();\r\n        this.notify();\r\n    }\r\n\r\n    exportData(): string {\r\n        return JSON.stringify(this.state, null, 2);\r\n    }\r\n\r\n    importData(jsonString: string): boolean {\r\n        try {\r\n            const parsed = JSON.parse(jsonString);\r\n            // Basic validation\r\n            if (!parsed.meditationSessions || !parsed.userProfile) {\r\n                console.error(\"Invalid data format\");\r\n                return false;\r\n            }\r\n            this.state = { ...this.state, ...parsed };\r\n            this.saveToStorage();\r\n            this.notify();\r\n            return true;\r\n        } catch (e) {\r\n            console.error(\"Failed to parse import data\", e);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    clearAllData() {\r\n        localStorage.removeItem('lifeTrackerData');\r\n        this.state = getInitialState();\r\n        this.notify();\r\n    }\r\n\r\n    // ==================== FINANCIAL LEARNING ACTIONS ====================\r\n\r\n    switchFinancialTrack(track: TrackType) {\r\n        this.state.financialLearning.currentTrack = track;\r\n        this.saveToStorage();\r\n        this.syncFinancialProgress();\r\n        this.notify();\r\n    }\r\n\r\n    // ==================== FINANCIAL LEARNING ACTIONS ====================\r\n\r\n    private async syncFinancialProgress() {\r\n        if (!this.firebaseUid) return;\r\n        const progress = this.state.financialLearning;\r\n\r\n        try {\r\n            const { error } = await supabase.from('financial_learning_progress').upsert({\r\n                firebase_uid: this.firebaseUid,\r\n                current_track: progress.currentTrack,\r\n                unlocked_modules: progress.unlockedModules,\r\n                completed_lessons: progress.completedLessons,\r\n                quiz_scores: progress.quizScores,\r\n                total_xp: progress.totalXp,\r\n                streak: progress.streak,\r\n                last_active_date: progress.lastActiveDate,\r\n                updated_at: new Date().toISOString()\r\n            }, { onConflict: 'user_id' });\r\n\r\n            if (error) throw error;\r\n        } catch (error) {\r\n            console.error('Error syncing financial progress:', error);\r\n        }\r\n    }\r\n\r\n    async addSectionLog(sectionId: string, text: string) {\r\n        const newLog: SectionLog = {\r\n            id: uuidv4(),\r\n            sectionId,\r\n            text,\r\n            date: new Date().toISOString()\r\n        };\r\n\r\n        this.state.sectionLogs = [newLog, ...this.state.sectionLogs];\r\n        this.saveToStorage();\r\n        this.notify();\r\n\r\n        if (this.firebaseUid) {\r\n            const { error } = await supabase.from('section_logs').insert({\r\n                id: newLog.id,\r\n                firebase_uid: this.firebaseUid,\r\n                section_id: newLog.sectionId,\r\n                text: newLog.text,\r\n                date: newLog.date\r\n            });\r\n            if (error) console.error('Error syncing section log:', error);\r\n        }\r\n    }\r\n\r\n    async deleteSectionLog(logId: string) {\r\n        this.state.sectionLogs = this.state.sectionLogs.filter(l => l.id !== logId);\r\n        this.saveToStorage();\r\n        this.notify();\r\n\r\n        if (this.firebaseUid) {\r\n            const { error } = await supabase.from('section_logs').delete().eq('id', logId).eq('firebase_uid', this.firebaseUid);\r\n            if (error) console.error('Error deleting section log:', error);\r\n        }\r\n    }\r\n\r\n    async completeFinancialLesson(lessonId: string, durationXp: number = 10) {\r\n        if (!this.state.financialLearning.completedLessons.includes(lessonId)) {\r\n            this.state.financialLearning.completedLessons.push(lessonId);\r\n            this.state.financialLearning.totalXp += durationXp;\r\n            this.updateFinancialStreak();\r\n            this.saveToStorage();\r\n            await this.syncFinancialProgress();\r\n            this.notify();\r\n        }\r\n    }\r\n\r\n    async unlockFinancialModule(moduleId: string) {\r\n        if (!this.state.financialLearning.unlockedModules.includes(moduleId)) {\r\n            this.state.financialLearning.unlockedModules.push(moduleId);\r\n            this.saveToStorage();\r\n            await this.syncFinancialProgress();\r\n            this.notify();\r\n        }\r\n    }\r\n\r\n    async submitFinancialQuiz(quizId: string, score: number) {\r\n        this.state.financialLearning.quizScores[quizId] = score;\r\n        if (score >= 80) {\r\n            this.state.financialLearning.totalXp += 50; // Bonus for passing\r\n        }\r\n        this.updateFinancialStreak();\r\n        this.saveToStorage();\r\n        await this.syncFinancialProgress();\r\n        this.notify();\r\n    }\r\n\r\n    private updateFinancialStreak() {\r\n        const today = new Date().toISOString().split('T')[0];\r\n        const lastActive = this.state.financialLearning.lastActiveDate;\r\n\r\n        if (lastActive !== today) {\r\n            if (lastActive) {\r\n                const yesterday = new Date();\r\n                yesterday.setDate(yesterday.getDate() - 1);\r\n                const yesterdayStr = yesterday.toISOString().split('T')[0];\r\n\r\n                if (lastActive === yesterdayStr) {\r\n                    this.state.financialLearning.streak += 1;\r\n                } else {\r\n                    this.state.financialLearning.streak = 1;\r\n                }\r\n            } else {\r\n                this.state.financialLearning.streak = 1;\r\n            }\r\n            this.state.financialLearning.lastActiveDate = today;\r\n        }\r\n    }\r\n}\r\n\r\n// Singleton Export\r\nexport const lifeTrackerStore = new LifeTrackerStore();\r\n\r\n// React Hook\r\nexport const useLifeTracker = () => {\r\n    const [, forceUpdate] = useState({});\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = lifeTrackerStore.subscribe(() => forceUpdate({}));\r\n        return unsubscribe;\r\n    }, []);\r\n\r\n    return lifeTrackerStore;\r\n};\r\n\r\n// Need to import useState and useEffect for the hook\r\nimport { useState, useEffect } from 'react';\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\utils\\pdfService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\utils\\sectionRegistry.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\utils\\theme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\src\\utils\\workoutStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\tailwind.config.cjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\update_tools.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aruun\\OneDrive\\Documents\\Desktop\\New folder (5)\\appds\\productivity-tracker\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]